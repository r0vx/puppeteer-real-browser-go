import{a as kt,b as Vt,d as jt,e as Ot}from"./chunk-2DGIJXZ4.js";import"./chunk-XOLRBQKR.js";import{a as Ft,b as Et}from"./chunk-VWSEVEM7.js";import"./chunk-54L4J5QB.js";import{d as st}from"./chunk-62FCUUV6.js";import"./chunk-A52G67PA.js";import"./chunk-YGTXYAOX.js";import"./chunk-WBTR3RX4.js";import"./chunk-CQWP5UAS.js";import"./chunk-7FBDFG5E.js";import"./chunk-IK5VIKIS.js";import"./chunk-Y6T5M4AD.js";import"./chunk-J3K74NCM.js";import"./chunk-UWCOP3B7.js";import"./chunk-6DUYAS7R.js";import"./chunk-7KQVTMRC.js";import"./chunk-UFD2MUZI.js";import"./chunk-CEM2RCMY.js";import"./chunk-SKXNZFRN.js";import"./chunk-VVJ6BK3Q.js";import"./chunk-FUVVPSUI.js";import"./chunk-NKIUEXOA.js";import"./chunk-4YDY4B6P.js";import"./chunk-CGFS6AE4.js";import"./chunk-DDT324RS.js";import"./chunk-2TQXMDYZ.js";import"./chunk-RNMISV22.js";import"./chunk-A267SEFJ.js";import"./chunk-VR7OPIR6.js";import"./chunk-RT3YHZTS.js";import"./chunk-4ZGOJDNI.js";import"./chunk-ZPQXBUKT.js";import"./chunk-35Y7QMWN.js";import"./chunk-VIT5MDY4.js";import"./chunk-RH6WPBEZ.js";import"./chunk-TLCBIZ4W.js";import"./chunk-32XJE5HT.js";import"./chunk-CDNJY7Z3.js";import"./chunk-DBWXHHZT.js";import"./chunk-VVKAQ7K5.js";import"./chunk-7JSJY3SQ.js";import"./chunk-NWY3GPDX.js";import"./chunk-6JEFG7DQ.js";import"./chunk-B6YXJZUF.js";import"./chunk-4I2JSOYJ.js";import"./chunk-GTN3RCGH.js";import"./chunk-3VKPY2QL.js";import"./chunk-AOSRFQ4E.js";import"./chunk-ULL77AIR.js";import"./chunk-PJYSMRRW.js";import"./chunk-GKQQDLVP.js";import"./chunk-7YKP5374.js";import"./chunk-KGG7DXMS.js";import"./chunk-FGIHS4ZF.js";import"./chunk-U65R4NF3.js";import"./chunk-OTUJWRS5.js";import"./chunk-WIW5JVRP.js";import"./chunk-7CXUJS4C.js";import"./chunk-ULXZERAJ.js";import"./chunk-PJ5X5CUU.js";import"./chunk-TSVRDRPO.js";import"./chunk-PPTAKQQT.js";import"./chunk-IFQDHP3Z.js";import"./chunk-DA5RJYYW.js";import"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import"./chunk-ZTIVM5ML.js";import"./chunk-2E2OBQTS.js";import"./chunk-VICEBZ4G.js";import"./chunk-WO6OHGU2.js";import"./chunk-3S4BGA37.js";import"./chunk-POP3LIKS.js";import"./chunk-PMRTKWFS.js";import"./chunk-G44PPNNQ.js";import"./chunk-K2BSCLBF.js";import"./chunk-PZY7HRHV.js";import"./chunk-Z2L2F5M5.js";import"./chunk-IPLOJJIA.js";import"./chunk-RLPRDJ34.js";import"./chunk-2ASICJQL.js";import"./chunk-TQWSBAXG.js";import"./chunk-6JVCYB7O.js";import"./chunk-GR42TVIZ.js";import"./chunk-NALXMZEC.js";import"./chunk-UX47DP5M.js";import"./chunk-QMSSDBOR.js";import{a as bt}from"./chunk-F4VYRO5J.js";import"./chunk-3FBTFEMV.js";import{a as E,c as Ct,d as M,e as G,f as S,h as yt,i as N,j as Dt,k as P,l as St,r as tt,s as et,u as Nt,v as It,w as ot,x as wt}from"./chunk-623SCK25.js";import{a as Lt}from"./chunk-STU536TK.js";import"./chunk-5PDHABUQ.js";import"./chunk-NPQMAAOH.js";import"./chunk-B3SXRDEQ.js";import"./chunk-7HRNNJBX.js";import"./chunk-F6UVHIJV.js";import"./chunk-ZLJJZYPU.js";import"./chunk-36PYO4PJ.js";import"./chunk-34JXWTF5.js";import"./chunk-JSOLAK4X.js";import"./chunk-R7LZSAVU.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-YGIVEMKT.js";import"./chunk-T4RFDN7D.js";import"./chunk-NQAVUB4Q.js";import"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import"./chunk-5A3RJQCM.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-MKDQBVRZ.js";import"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-7C7MBE2C.js";import"./chunk-KJWX5V23.js";import"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import"./chunk-QYDRYMWS.js";import"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3C5KK.js";import"./chunk-XZE3L7K7.js";import{a as Bt}from"./chunk-Y5K5NJ6U.js";import"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import"./chunk-Q7FGM7BT.js";import"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import{r as rt}from"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import{f as xt}from"./chunk-V34MB2FG.js";import{o as Q}from"./chunk-XP3TNE3R.js";import{jc as k,ta as gt,xa as dt}from"./chunk-QRHYK2TW.js";import"./chunk-PODZSVO7.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as te}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import{e as _t,i as Gt}from"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-2FDQIA7D.js";import"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as x}from"./chunk-62ZAND24.js";import{a as ee}from"./chunk-SIITVWZR.js";import"./chunk-QHXUL3YM.js";import{H as F,y as _}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{A as $,C as ht,L as J,o as R,w as ut}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-NNUMMJQC.js";import"./chunk-Z3JMRMVO.js";import"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as ft}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as L}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-D2YP6KBJ.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-S5ACFHVS.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as n,o as e,q as o}from"./chunk-SHG7TIBL.js";e();o();var r=n(L()),Y=n(k()),qt=n(te()),Xt=n(Q());F();Gt();e();o();var D=n(L()),W=n(k());e();o();var O=n(L());F();e();o();var z={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};e();o();var C=n(L());var At=n(ee());F();var Tt=n(Q());var oe={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},vt="hasReadTxHistoryFilterEntryTooltip",re=()=>{try{return localStorage.getItem(vt)??!1}catch{return!0}},se=()=>{try{localStorage.setItem(vt,!0)}catch(s){console.error(s)}};function ie({onClick:s}){let t=(0,C.useRef)();(0,C.useEffect)(()=>{re()||(t.current.setVisible(!0),se())},[]);let l=a=>{t.current=a},i=(0,C.useRef)();return(0,Tt.useClickAway)(()=>{t.current.setVisible(!1)},i),C.default.createElement($,{popupRef:l,placement:$.DIRECTION.bottomRight,title:_(oe.tooltip)},C.default.createElement(x.Box,{ref:i},C.default.createElement(ft,{onClick:s,className:(0,At.default)("okds-filter",z.filter)})))}var Ht=ie;e();o();var V=n(L());F();e();o();var K={root:"_root_1o81j_1",textBox:"_textBox_1o81j_7",text:"_text_1o81j_7"};e();o();var U=n(L());function le({onChange:s,reject:t}){let[l,i]=(0,U.useState)(t);return(0,U.useEffect)(()=>{i(t)},[t]),{currentReject:l,onChangeReject:g=>h=>{let m=t,c={...m,[g]:h};i(c),Ct(g,h).then(d=>{d?(i(c),s?.(c)):i(m)}).catch(()=>{i(m)})}}}var Rt=le;var ne={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},ae=s=>{let{currentReject:t,onChangeReject:l}=Rt(s);return V.default.createElement(x.Box,{className:K.root},V.default.createElement(x.Box,{className:K.textBox},V.default.createElement(rt.Text,{warp:!0,strong:!0,size:rt.SIZE.md,className:K.text},_(ne.hideValuelessNftTittle))),V.default.createElement(ht,{onChange:l(E.hideValuelessNft),checked:t?.[E.hideValuelessNft]}))},Mt=ae;e();o();var j=n(L()),Pt=n(k());function ce(){let s=(0,Pt.useDispatch)(),[t,l]=(0,j.useState)({[E.hideValuelessNft]:!1}),[i,a]=(0,j.useState)(!1),g=()=>M().then(d=>{l(d)}).catch(()=>{});(0,j.useEffect)(()=>{g()},[]);let h=()=>{a(!0)},m=()=>{a(!1)};return{reject:t,onChangeShowValueLess:d=>{l(d),s(S({})),setTimeout(()=>{m()},200)},openDialog:h,closeDialog:m,showRejectDialog:i}}var zt=ce;function me(){let{reject:s,onChangeShowValueLess:t,openDialog:l,closeDialog:i,showRejectDialog:a}=zt();return O.default.createElement(x.Box,{className:z.root},O.default.createElement(Ht,{onClick:l}),O.default.createElement(R,{title:_("wallet_extension_history_title_filter"),visible:a,onClose:i,onCancel:i,alignBottom:!0,noMargin:!0},O.default.createElement(Mt,{onChange:t,reject:s})))}var Kt=me;e();o();var f=n(L()),A=n(k());F();e();o();var I={"display-area":"_display-area_tg5mp_1",displayArea:"_display-area_tg5mp_1",container:"_container_tg5mp_4","chips-group":"_chips-group_tg5mp_7",chipsGroup:"_chips-group_tg5mp_7","chips-content":"_chips-content_tg5mp_11",chipsContent:"_chips-content_tg5mp_11","chips-item":"_chips-item_tg5mp_14",chipsItem:"_chips-item_tg5mp_14"};var Ut=()=>{let s=(0,A.useSelector)(Dt),{groupType:t}=(0,A.useSelector)(N),[l,i]=(0,f.useState)(!1),a=(0,f.useMemo)(()=>s?.map(({groupType:c,groupTypeText:d})=>({label:d,value:c}))||[],[s]),g=(0,f.useMemo)(()=>a.find(c=>c.value===t)?.label,[t,a]),h=(0,A.useDispatch)(),m=c=>{i(!1),h(S({groupType:c}))};return f.default.createElement(f.default.Fragment,null,Boolean(a.length)&&f.default.createElement("div",{className:I.displayArea,onClick:()=>{i(!0)}},f.default.createElement(Ft,{isShowOptions:l,selectedOption:{label:g}})),f.default.createElement(R.Action,{onClose:()=>{i(!1)},visible:l,maskClosable:!0,title:_("wallet_extension_hide_drawer_types")},f.default.createElement("div",{className:I.container},f.default.createElement(J.Group,{size:J.SIZE.lg,className:I.chipsGroup,innerClassName:I.chipsContent,labelClassName:I.chipsItem,options:a,value:t,onChange:m}))))};e();o();var it={"retina-border-basic":"_retina-border-basic_13yd7_1",retinaBorderBasic:"_retina-border-basic_13yd7_1",root:"_root_13yd7_29",left:"_left_13yd7_37"};function pe(){let s=(0,W.useDispatch)(),t=(0,W.useSelector)(N);return D.default.createElement(Et,{valueKey:"chainId",align:ut.DIRECTION.left,value:t.chainId,searchable:!0,onChange:l=>{s(wt("")),s(S({chainId:l,coinId:void 0}))}})}function fe(){return D.default.createElement(x.Box,{className:it.root},D.default.createElement(x.Box,{className:it.left},D.default.createElement(pe,null),D.default.createElement(Ut,null)),D.default.createElement(Kt,null))}var Wt=fe;e();o();var u=n(L()),y=n(k()),w=n(Q());var ue=({txData:s,setTxData:t,explorerUrl:l,hasMoreData:i=!1,hasInitData:a})=>{let g=(0,y.useDispatch)(),h=(0,y.useSelector)(N),m=(0,y.useSelector)(yt),c=(0,y.useSelector)(xt),d=(0,y.useSelector)(St),T=(0,y.useSelector)(P),[v,q]=(0,u.useState)(null),{run:b}=(0,w.useDebounceFn)(()=>{g(G({...T}))},{wait:200}),X=(0,u.useCallback)(()=>{g(G({...T},{scrollLoad:!0,hasMoreData:i,hasInitData:a}))},[h,i,a]);Ot({scrollContainer:v},b),(0,w.useInfiniteScroll)(X,{target:v,threshold:150});let[H,Z]=(0,u.useMemo)(()=>kt(m,c),[m,c]),lt=(0,w.useMemoizedFn)(()=>{t(null)});return u.default.createElement(u.default.Fragment,null,u.default.createElement(jt.HistoryList,{completedList:Z,pendingList:H,isLoading:d,onClick:t,onRepeat:b,onContainer:q,explorerUrl:l}),u.default.createElement(Vt,{visible:!!s,params:s,onRefresh:b,onClose:lt}))},Yt=(0,u.memo)(ue);e();o();var he=()=>{let s=(0,qt.useHistory)(),t=(0,Y.useDispatch)(),l=(0,Y.useSelector)(P),i=Lt()?.stringDates?.[0],[a,g]=(0,r.useState)(!0),[h,m]=(0,r.useState)(null),c=(0,Xt.useLatest)(h),[d,T]=(0,r.useState)([]),[v,q]=(0,r.useState)(!1),[b,X]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let Zt=[(async()=>{let B=await M()??{};return await gt({startTime:new Date(`${i} 00:00:00`).getTime(),...l,hideRisk:B?.hideValuelessNft??!0})})(),dt()];Promise.all(Zt).then(([B,nt])=>{let $t=(ct,mt)=>{let pt=ct.length,Qt=mt?ct[pt-1]?.rowId:"";t(Nt(Qt)),t(et(!1)),q(mt),X(pt>0)},at=B.content||[],Jt=B.hasViewMore;t(tt(at)),t(ot(nt)),T(B?.explorerUrl||[]),$t(at,Jt)}).catch(()=>{t(tt([])),t(ot([])),t(et(!1))}).finally(()=>{g(!1)})},[]);let H=()=>{s.goBack(),t(It()),t(_t())},Z=(0,r.useCallback)(()=>{c.current?m(null):H()},[h]);return r.default.createElement(r.default.Fragment,null,r.default.createElement(st.PageContainer,{className:"tx-history__container"},r.default.createElement(Bt,{bordered:!1,sticky:!1,className:"tx-history__navigator",title:_("wallet_extension_header_text_history"),onBack:H,closeable:!1,customizeBackFn:Z,asPage:!0}),a?r.default.createElement(bt,null):r.default.createElement(r.default.Fragment,null,r.default.createElement(st.FilterContainer,null,r.default.createElement(Wt,null)),r.default.createElement(Yt,{txData:h,setTxData:m,explorerUrl:d,hasMoreData:v,hasInitData:b}))))},fr=(0,r.memo)(he);export{fr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletHistory-GBTWDWLT.js.map
