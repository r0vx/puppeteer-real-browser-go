import{c as N,h as B,n as process,o as K,q as $}from"./chunk-SHG7TIBL.js";var W=N((U,k)=>{K();$();(function(M,D){typeof U=="object"&&typeof k=="object"?k.exports=D():typeof define=="function"&&define.amd?define([],D):typeof U=="object"?U._prohibitedMonitor=D():M._prohibitedMonitor=D()})(U,function(){return function(){"use strict";var j={"../monitor/src/amp/helper.js":function(S,g,a){a.r(g),a.d(g,{getAmpDefaultEndpoint:function(){return n},getAmplitudeAPIKey:function(){return d},getAmplitudeProject:function(){return i},logSignUpComplete:function(){return s},reportIdentifyEvent:function(){return e}});var f=a("../monitor/src/common/variables.js"),_=a("../monitor/src/common/constants.js");let s=o=>{let{signUpCompleted:m}=sessionStorage;m&&(o.logEvent("signup_completed",{},{language:f.default.getOkGlobal().locale}),sessionStorage.removeItem("signUpCompleted"))},i=o=>o||(f.default.isOKLink()?_.default.AMPLITUDE_PROJECT.oklink:f.default.isOKEx()||f.default.isInExtension()?_.default.AMPLITUDE_PROJECT.okx:_.default.AMPLITUDE_PROJECT.okcoin),d=o=>{let m=f.default.isProdEnv(),l=_.default.AMPLITUDE_KEY_MAP?.[o];return l?m?l?.prod:l?.dev:""},e=(o,m)=>{let l=new window.amplitude.Identify;l.set("channel_id",m),o.identify(l,{language:f.default.getOkGlobal().locale})},n=()=>{if(f.default.isInternalSystem()||f.default.isOKEx()||f.default.isOKLink())return"/amplitude/2/httpapi"}},"../monitor/src/amplitude.js":function(S,g,a){a.r(g);var f=a("../monitor/src/monitor.js"),_=a("../monitor/src/common/variables.js"),s=a("../monitor/src/common/event-bus.js"),i=a("../monitor/src/common/constants.js"),d=a("../monitor/src/lib/libs-amplitude.js"),e=a("../monitor/src/amp/helper.js");let n={},o,m={RESOLVE:"RESOLVE",REJECT:"REJECT"},l={events:new s.default,getAmplitudeSDKInstance(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((r,t)=>{this.events.on(m.RESOLVE,u=>{r(u)}),this.events.on(m.REJECT,u=>{t(u)}),this.getInstance(c)})},async getInstance(c){let r=(0,e.getAmplitudeProject)(c);o&&clearTimeout(o),window.amplitude||await(0,d.default)();let t=await _.default.getTk(),u=await _.default.getDeviceId()||"";if(n[r])return n[r];let E=window.amplitude.createInstance(),p=(0,e.getAmplitudeAPIKey)(r),I=(0,e.getAmpDefaultEndpoint)(),v=f.default.apiEndpoint?f.default.apiEndpoint:I,h={userId:r===i.default.AMPLITUDE_PROJECT.web3?u:t,deviceId:u,instanceName:r,serverUrl:v,defaultTracking:!0,identityStorage:"localStorage",autocapture:{pageViews:!1,fileDownloads:!1,sessions:!1,formInteractions:!1},appVersion:_.default.getOkGlobal().assetsBuildVersion};return E.init(p,h),n[r]=E,sessionStorage.channelId&&(0,e.reportIdentifyEvent)(E,sessionStorage.channelId),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(O=>{E.logEvent(...O,{language:_.default.getOkGlobal().locale})}),sessionStorage.ampCacheEvents=""),(0,e.logSignUpComplete)(E),this.events.emit(m.RESOLVE,E),E}};g.default=l},"../monitor/src/common/constants.js":function(S,g,a){a.r(g);var f=a("../monitor/src/common/variables.js");let _="";if(f.default.isInBrowser()){let{cdnBaseUrl:d="//static.coinall.ltd"}=f.default.getOkGlobal();_=d}let s={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin",internal_system:"internal_system"},i={[s.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[s.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[s.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[s.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"},[s.internal_system]:{prod:"118100a32c295da61d6c1809bcfe470e",dev:"118100a32c295da61d6c1809bcfe470e"}};g.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:s,AMPLITUDE_KEY_MAP:i,CDN_BASE_URL:_,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,DEBUG_KEY:"a6ywbd8",WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"},API_PATH:{INTERNAL:"/et/priapi/boss",OKLINK:"/et/priapi/lnweb",OKX:"/et/priapi/xweb"},internalCategory:["opboss"]}},"../monitor/src/common/cookie.js":function(S,g,a){a.r(g);let f=s=>{try{let i=document.cookie.split(";"),d=null;for(let e=0;e<i.length;e++){let n=i[e];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(s)===0){d=n.substring(s.length+1,n.length);break}}return d}catch{return null}},_=function(s,i){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},e=i!==null?d.expirationDays:-1;if(e){let o=new Date;o.setTime(o.getTime()+e*24*60*60*1e3),e=o}let n=`${s}=${i}`;e&&(n+=`; expires=${e.toUTCString()}`),n+="; path=/",document.cookie=n};g.default={set:_,get:f}},"../monitor/src/common/event-bus.js":function(S,g,a){a.r(g);class f{constructor(){B(this,"listeners",{})}on(s,i,d){let e=[],n=arguments.length;for(let o=0;o<n;o++)e.push(arguments[o]);e=e.length>3?e.splice(3,e.length-1):[],typeof this.listeners[s]<"u"?this.listeners[s].push({scope:d,callback:i,args:e}):this.listeners[s]=[{scope:d,callback:i,args:e}]}remove(s,i,d){if(typeof this.listeners[s]<"u"){let e=this.listeners[s].length,n=this.listeners[s].slice(0);for(let o=0;o<e;o++){let m=n[o];m.scope==d&&m.callback==i&&this.listeners[s].splice(o,1)}}}has(s,i,d){if(typeof this.listeners[s]<"u"){let e=this.listeners[s].length;if(i===void 0&&d===void 0)return e>0;for(let n=0;n<e;n++){let o=this.listeners[s][n];if((d?o.scope==d:!0)&&o.callback==i)return!0}}return!1}emit(s){if(typeof this.listeners[s]<"u"){let n=this.listeners[s].slice(),o=n.length;for(var i=arguments.length,d=new Array(i>1?i-1:0),e=1;e<i;e++)d[e-1]=arguments[e];for(let m=0;m<o;m++){let l=n[m];if(l&&l.callback){let c=d.concat(l.args);l.callback.apply(l.scope,c)}}}}}g.default=f},"../monitor/src/common/seo.js":function(S,g,a){a.r(g);var f=a("../monitor/src/common/utils.js");let _=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex",type:"yandexSEO"},{keyword:"ya.ru",type:"yandexSEO"},{keyword:"dzen.ru",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver",type:"naverSEO"},{keyword:"duckduckgo",type:"duckduckgoSEO"},{keyword:"ecosia",type:"EcosiaSEO"},{keyword:"startpage",type:"startpageSEO"}];g.default={getSeoType(){let s=f.default.getUrlDomain(document.referrer);for(let i=0;i<_.length;i++){let{keyword:d,type:e}=_[i];if(s.indexOf(d)>-1)return e}return""}}},"../monitor/src/common/statex.js":function(S,g,a){a.r(g),a.d(g,{default:function(){return f}});function f(_){let s,i=new Set,d=(l,c)=>{let r=typeof l=="function"?l(s):l;if(r!==s){let t=s;s=c??typeof r!="object"?r:Object.assign({},s,r),i.forEach(u=>u(s,t))}},e=()=>s,m={setState:d,getState:e,subscribe:l=>(i.add(l),()=>i.delete(l)),destroy:()=>i.clear()};return s=_(d,e,m),m}},"../monitor/src/common/utils.js":function(S,g,a){a.r(g);let f=/([^{]+)({.+})?/,_=/^{|}$/g,s=/^['"]|['"]$/g,i=/\/\/([^/]+)\//,d={channelId:100,utm_source:30,utm_medium:20,utm_campaign:100,utm_term:100,utm_content:100,gclid:100,gbraid:70,wbraid:255,fbclid:64,ttclid:64,twclid:32,msclkid:32,af_adset:100,af_adset_id:24,af_ad:100,af_ad_id:24,af_keywords:100,af_c_id:24};g.default={serializeParams(e){let n=[],o=Object.keys(e);for(let m=0,l=o.length;m<l;m++){let c=o[m];n.push(`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`)}return n.join("&")},getUrlDomain(e){let n=e.match(i);return n?n[1]:""},getUrlQuery(e){return this.getParsedUrl(window.location.href).searchParams.get(e)||""},getParsedUrl(e){return new URL(e)},getChannelIdByUserAgent(){let e=/channelId\/(\w+)/;return window.navigator.userAgent?.match?.(e)?.[1]},getChannelContext(e){let n={channelId:"",referralSrc:""};if(!e)return n;let o="",m="";if(e.searchParams.forEach((E,p)=>{let I=p.toLowerCase();I==="channelid"&&(o=E),I==="channelflag"&&(m=E)}),n.channelId=o||m,n.channelId)return n;let l="/join";if(e.pathname.endsWith(l)||!e.pathname.includes(l))return n;let c=e.pathname.split(`${l}/`)[1];if(!c)return n;let r=c.split("/")[0];if(r.startsWith("-"))return n;let t=r.split("-"),u=t[t.length-2]||"";return o=t[t.length-1],o&&(n.referralSrc=u,n.channelId=o),n},getOktsBaggageData(e){if(!e||!e.searchParams)return"";let n=e.searchParams,o=n.get("okts_baggage");if(o)return o;let m=[];return Object.keys(d).forEach(l=>{let c=n.get(l);if(!c)return;let r=this.filterXSS(c),t=d[l];r&&r.length<=t&&m.push(`${l}=${r}`)}),m.join(",")},getOriginalUrl(e){return e.replace(/([?&])t=\d+(&)?/,(n,o,m)=>o&&m?o===m?"&":"?":"")},setCookie(e,n,o){let m=new Date;m.setTime(m.getTime()+o),document.cookie=`${e}=${encodeURIComponent(n)};expires=${m.toGMTString()};path=/`},getCookie(e){let n=new RegExp(`(^| )${e}=([^;]*)(;|$)`),o=document.cookie.match(n);return o?decodeURIComponent(o[2]):""},parseTarget(e){let n=e.match(f),o={key:"",data:{}};if(n){let m=n[1],l=n[2],c={};l&&l.replace(_,"").split(",").forEach(t=>{let u=t.split(":");u=u.map(I=>I.trim().replace(s,""));let[E,p]=u;c[E]=p}),o.key=m,o.data=c}return o},matchType(e,n){return Object.prototype.toString.call(e)===`[object ${n}]`},isArray(e){return this.matchType(e,"Array")},isObject(e){return this.matchType(e,"Object")},isInArray(e,n){if(Array.prototype.includes)return e.includes(n);for(let o=0,m=e.length;o<m;o++)if(e[o]===n)return!0;return!1},generateUUID(){let e=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let o=(e+this.cryptoRandom()*16)%16|0;return e=Math.floor(e/16),(n==="x"?o:o&3|8).toString(16)})},valueExists(e){return e!=null&&e!==""},passedNamingCheck(e){return!/[^a-z0-9_]/.test(e)},toFixed(e){return Number(e.toFixed(4))},toUnderLineFormat(e){return e.replace(/([A-Z])/g,(n,o,m)=>m===0?`${o.toLowerCase()}`:`_${o.toLowerCase()}`)},filterXSS(e){if(typeof e!="string")return"";let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/g,o=>n[o])},merge(e,n){let o={};return Object.keys({...e,...n}).forEach(m=>{(n[m]!=null||e[m]!=null)&&(o[m]=n[m]??e[m])}),o},cryptoRandom(){if(window?.crypto){let e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/Math.pow(2,32)}return Math.random()},base64Id(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n="";for(let o=0;o<22;++o)n+=e.charAt(Math.floor(this.cryptoRandom()*64));return n},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}}}},"../monitor/src/common/variables.js":function(S,g,a){a.r(g);var f=a("../monitor/src/common/utils.js"),_=a("../monitor/src/store.js");let s="oklink",i="okex",d="OKX_GLOBAL",e="okex_inner",n=typeof window<"u",o=Boolean(typeof window>"u"||typeof process<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:"feature",ASSETS_BUILD_VERSION:"monitor-extension-change-integrity-250704154012",BUILD_TARGET_ENV:"extension"}.SSR_ENV),m=n?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,l={_expires:{}};if(n){let{ok_monitor:r='{ "_expires": {} }'}=localStorage;l=JSON.parse(r)}let c={};g.default={setEnv(r){let{screen:t}=window,{_tk:u}=localStorage,{systemLanguage:E,language:p}=navigator,{referrer:I}=document;c.site=this.getSiteInfo(),c.lcl=this.getProductLanguage(),c.fpid=f.default.getCookie("fingerprint_id"),I&&(I.length>256&&(I=I.substr(0,256)),c.rf=I),u&&(c.tk=u),c.lan=(E||p).toLowerCase();let v="0x0";if(t){let{width:P,height:O}=t;v=`${P}x${O}`}c.scr=v;let h=f.default.getCookie("first_ref");h&&(c.frf=h.slice(0,256))},getEnv(){return{...c,site:this.getSiteInfo(),lcl:this.getProductLanguage()}},isInApp(){return m},getDeviceId(){let{deviceId:r}=_.default.getState();return r?Promise.resolve(r):window.utils.ont?.getDevId?.()},toLocalStorage(r){let{key:t,value:u,maxAge:E}=r;l[t]=u,l._expires[t]=Date.now()+E,localStorage.ok_monitor=JSON.stringify(l)},removeLocalStorage(r){delete l[r],delete l._expires[r],localStorage.ok_monitor=JSON.stringify(l)},getClientValue(r){let t=sessionStorage.getItem(r);return t||this.getValueFromLocalStorage(r)},getValueFromLocalStorage(r){return Date.now()<l._expires[r]&&l[r]||""},syncUpLocalStorageToSessionStorage(r){let t=this.getValueFromLocalStorage(r);t&&sessionStorage.setItem(r,t)},shouldIgnoreAmpEvent(){if(!this.isInBrowser())return!0;let r=this.getOkGlobal(),t=r.broker&&r.broker.is,u=localStorage.simulatedTrading==="1",{okjp:E}=r.site&&r.site.is||{};return t||u||E===!0},getProductLanguage(){return f.default.getCookie("locale")||this.getOkGlobal().locale},__getOkGlobalSite(){return this.getOkGlobal().site||{}},getSiteInfo(){let r=this.__getOkGlobalSite().sign,t=this.__getOkGlobalSite().subSite;return r===i?!t||t===d?i:t.toLowerCase():r},isOKEx(){return this.__getOkGlobalSite().sign===i},isOKLink(){let r=this.__getOkGlobalSite();return r.sign===s||r.sign===i&&r.linkInOKX},isInternalSystem(){return this.__getOkGlobalSite().sign===e},isInSSR(){return o},isInBrowser(){return n},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isMiniApp(){return window.inMiniApp},isInDesktop(){return window?.navigator?.userAgent?.toLocaleLowerCase()?.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(this.getOkGlobal().envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":this.getOkGlobal().envSign==="prod"},getOkGlobal(){return this.isInBrowser()?window._okGlobal||window.okGlobal||{}:{}},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},getTk(){return m&&window.jsbridge?window.jsbridge.getTK().then(r=>r||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")}}},"../monitor/src/de-duplicate.js":function(S,g,a){a.r(g),a.d(g,{shouldReport:function(){return i}});let f={},_,s=d=>{_!==void 0&&clearTimeout(_),_=setTimeout(()=>{f={},_=void 0},d+500)},i=function(d){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,n=typeof d=="string"?d:d.action||d.anchor,o=+new Date,m=f[n]||0;return o-m<e?!1:(s(e),f[n]=o,!0)}},"../monitor/src/error.js":function(S,g,a){a.r(g);var f=a("../monitor/src/common/variables.js");let _=f.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];g.default={getErrorInfo(s){let{message:i,filename:d,lineno:e,colno:n,error:o}=s,m="";o&&o.stack?(m=o.stack,m.indexOf("@")!==-1&&(m=`${i} 
\r ${m}`)):(o||i)&&(m=`ThrowError: ${JSON.stringify(o||i)} 
\r at ${d}: ${e}: ${n}`);let l=encodeURIComponent(window.location.href);return{msg:i,file:d,line:e,col:n,stack:m,url:l}},isReported(s){let{file:i,line:d,col:e}=s,n=`${i}__${d}__${e}`;return _.includes(n)},rememberError(s){let{file:i,line:d,col:e}=s,n=`${i}__${d}__${e}`;_.unshift(n),_.length>50&&_.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(_)},0)}}},"../monitor/src/global/attrs.js":function(S,g,a){a.r(g);var f=a("../monitor/src/global/click.js"),_=a("../monitor/src/global/expose.js"),s=a("../monitor/src/common/constants.js");let{Configs:i}=s.default;g.default={listen(d){let e=n=>{d.logEvent({...n,category:"ok"})};this.preprocess(),f.default.listen(e,this),_.default.listen(e,this)},preprocess(){document.querySelectorAll(`[${i.ATTR_LISTEN}]`).forEach(e=>{let n=e.getAttribute(i.ATTR_LISTEN),o=n.indexOf(":");if(o>-1){let m=n.substring(0,o).trim(),l=n.substring(o+1).trim();m.split("+").forEach(r=>{e.setAttribute(`data-${r.trim()}`,l)}),e.removeAttribute(i.ATTR_LISTEN)}})}}},"../monitor/src/global/click.js":function(S,g,a){a.r(g);var f=a("../monitor/src/common/utils.js"),_=a("../monitor/src/common/constants.js");let{Actions:s,Configs:i}=_.default;g.default={listen(d,e){document.addEventListener("click",n=>{let{target:o}=n;o.getAttribute(i.ATTR_LISTEN)&&e.preprocess();let l=o.getAttribute(i.ATTR_CLICK);if(l){let c=f.default.parseTarget(l),{key:r,data:t}=c;r&&d({target:r,action:s.CLICK,params:t,extras:{area:t.area}})}})}}},"../monitor/src/global/expose.js":function(S,g,a){a.r(g);var f=a("../monitor/src/common/utils.js"),_=a("../monitor/src/common/constants.js");let s={},{Actions:i,Configs:d}=_.default;g.default={listen(e){this.trackFn=e;let n={threshold:[.5,1]},o=new window.IntersectionObserver(this.onSectionChange.bind(this),n);document.querySelectorAll(`[${d.ATTR_EXPOSE}]`).forEach(l=>{o.observe(l)}),this.observer=o},onSectionChange(e){e.forEach(n=>{let{target:o,isIntersecting:m}=n,l=o.getAttribute(d.ATTR_EXPOSE),c=f.default.parseTarget(l),{key:r,data:t}=c,u=Number(n.time.toFixed(2));if(m){let E=setTimeout(()=>{let p=s[r],I=o.getBoundingClientRect(),{innerHeight:v,innerWidth:h}=window,{top:P,bottom:O,left:T,right:A}=I;if((P>=0&&P<=v||O>=0&&O<=v)&&(T>=0&&T<=h||A>=0&&A<=h)){let{area:C,elementType:R,actionType:b}=t;delete t.area,delete t.elementType,delete t.actionType,this.trackFn({target:r,action:i.EXPOSE,params:{...t,time:u},extras:{area:C},actionType:b||"Show",elementType:R,anchor:R?r:""}),this.observer.unobserve(o),p.forEach(L=>{window.clearTimeout(L)}),delete s[r]}else p.shift()},d.EXPOSE_DURATION);s[r]||(s[r]=[]),s[r].push(E)}})}}},"../monitor/src/lib/libs-amplitude.js":function(S,g,a){a.r(g),a.d(g,{default:function(){return o}});var f=a("../monitor/src/common/variables.js"),_=a("../monitor/src/common/event-bus.js");let s=!1,i=new _.default,d="LOAD_SUCCESS",e="LOAD_FAILED";function n(){return new Promise((m,l)=>{let c=()=>{i.emit(d),m()},r=h=>{i.emit(e),l(h)};s=!0;let{envSign:t,cdnBaseUrl:u}=f.default.getOkGlobal(),E=document.createElement("script");E.type="text/javascript",E.crossOrigin="anonymous",E.async=!0;let p="";switch(t){case"dev":p="cdndev";break;case"pre":p="cdnpre";break;case"daily":p="cdn";break;case"prod":p="cdn";break;default:p="cdn";break}let I="amplitude-analytics-browser-2.11.8.js";f.default.isInExtension(),E.src=`./scripts/lib/${I}`,E.integrity="sha384-xqvDNRHTNTbqEsaCHJBuL+ohIAflZIyjUW7MnSD/Bl20mW11ri9zTr8XDYF2MiS2",E.onload=function(){if(s=!1,!window.amplitude)return r("[Amplitude] Error: could not load SDK");c()},E.onerror=function(h){s=!1,r(h)};let v=document.getElementsByTagName("script")[0];v.parentNode.insertBefore(E,v)})}async function o(){if(s)return new Promise((m,l)=>{i.on(d,c=>{m(c)}),i.on(e,c=>{l(c)})});await n()}},"../monitor/src/logger.js":function(S,g,a){a.r(g),a.d(g,{default:function(){return m}});var f=a("../monitor/src/common/utils.js"),_=a("../monitor/src/common/variables.js"),s=a("../monitor/src/common/cookie.js"),i=a("../monitor/src/common/constants.js"),d=a("../monitor/src/monitor.js");let e=null,n=!1;class o{constructor(c){_.default.setEnv(c),this._category=c.product}logPV(){if(n)return Promise.resolve();let c={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};return n=!0,this.sendLogs(c)}logEvent(c){let r={},{category:t,action:u,target:E,params:p,extras:I,_m:v,anchor:h,elementType:P,actionType:O,tk:T}=c;if(Object.assign(r,{_ct:t,_act:u,_lb:encodeURIComponent(E||""),_anchor_en_name:encodeURIComponent(h||""),_element_type:encodeURIComponent(P||""),_action_type:encodeURIComponent(O||""),...this._getCommonData()}),r._tk=T||r._tk,f.default.isArray(p)){let A=0,y=0;p.forEach((C,R)=>{if(f.default.isObject(C)){let{value:b,random:L}=C,x=encodeURIComponent(b);L?r[`_unlist${y++}`]=x:r[`_reser${A++}`]=x}else r[`_reser${R}`]=encodeURIComponent(C)})}else if(f.default.valueExists(p)){let A=p;f.default.isObject(p)&&(A=JSON.stringify(p));let y=encodeURIComponent(A);r._v=y,r._reser0=y}if(I){I.page=encodeURIComponent(window.location.href);let A={};Object.keys(I).forEach(y=>{A[`__${y}`]=I[y]}),Object.assign(r,A)}return v&&(r._m=v),this.sendLogs(r)}_getCommonData(){let c={..._.default.getEnv()};localStorage._tk&&(c.tk=localStorage._tk);let{src:r,sessionId:t=""}=sessionStorage,u=_.default.getClientValue("pageId"),E=_.default.getClientValue("channelId"),{deviceId:p=f.default.base64Id(),eventId:I=1,sequenceNumber:v=1}=JSON.parse(s.default.get("_monitor_extras")||"{}");s.default.set("_monitor_extras",JSON.stringify({deviceId:p,eventId:I+1,sequenceNumber:v+1}));let h=JSON.stringify({_amp_rejected:f.default.isTargetingCookiesRejected(),_device_id:p,_event_id:I,_sequence_number:v,_uuid:f.default.generateUUID()}),P={_cid:E,_pgid:u,_source:r,_session_id:encodeURIComponent(t.slice(0,256)),_page_url:encodeURIComponent(window.location.href.slice(0,256)),_extras:encodeURIComponent(h)};return Object.keys(c).forEach(O=>{P[`_${O}`]=encodeURIComponent(c[O])}),P}sendLogs(c){let r=[];if(Object.keys(c).forEach(t=>{let u=c[t];f.default.valueExists(u)?r.push(`${t}=${u}`):delete c[t]}),_.default.isDevTestEnv()){let{console:t}=window;return t.groupCollapsed(`dev monitor: ${c._ct} > ${c._act}`),t.log(decodeURIComponent(JSON.stringify(c,null,2))),t.groupEnd(),Promise.resolve()}return _.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(t=>{if(t){let u=`_tk=${encodeURIComponent(t)}`,E=r.findIndex(p=>/^_tk/.test(p));E>-1?r[E]=u:r.push(u)}return this.addClientInfo(r.join("&"))}).catch(()=>this.addClientInfo(r.join("&"))):this.addClientInfo(r.join("&"))}addClientInfo(c){let r=`&_ts=${Date.now()}&_r=${Math.floor(f.default.cryptoRandom()*2147483648)}`,t=`${c}${r}`;return _.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(u=>{let E=u?`&_app_info=${encodeURIComponent(u)}`:"";return t=`${c}${E}${r}`,this.sendRequest(t)}).catch(u=>this.sendRequest(t)):this.sendRequest(t)}getApiPath(){return i.default.internalCategory.includes(this._category)?i.default.API_PATH.INTERNAL:_.default.isOKLink()?i.default.API_PATH.OKLINK:i.default.API_PATH.OKX}async sendRequest(c){let r=await _.default.getDeviceId(),t=`_mv=${i.default.DEBUG_KEY}&_uid=${encodeURIComponent(r)}&${c}`;return new Promise((u,E)=>{let p=_.default.isInExtension()&&!_.default.isMiniApp(),I=this.getApiPath();if(navigator.sendBeacon&&!p)navigator.sendBeacon(I,t),u();else{let v=p?d.default.dwApiEndpoint||`https://www.oklink.com${i.default.API_PATH.OKX}`:I,h=new XMLHttpRequest;h.open("POST",v),h.setRequestHeader(i.default.REQUEST_HEADERS.deviceId,r),h.onload=()=>h.status!==200?E(new Error(`Error ${h.status}:${h.statusText}`)):u(),h.onerror=()=>{E(new Error(`Error ${h.status}: ${h.statusText}`))},h.send(t),setTimeout(()=>{u()},150)}})}}function m(l){return e||(e=new o(l),e)}},"../monitor/src/monitor.js":function(S,g,a){a.r(g),a.d(g,{default:function(){return c}});var f=a("../monitor/src/common/utils.js"),_=a("../monitor/src/common/constants.js"),s=a("../monitor/src/common/variables.js"),i=a("../monitor/src/error.js"),d=a("../monitor/src/logger.js"),e=a("../monitor/src/global/attrs.js"),n=a("../monitor/src/amplitude.js"),o=a("../monitor/src/store.js"),m=a("../monitor/src/de-duplicate.js");let l=!1;class c{constructor(t){s.default.isInSSR()||(this.commonParams=t.commonParams||{},this._logger=(0,d.default)(t),this._category=t.product,t.withPV&&this.delayReportPV(),l||(this._initEventListener(),l=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(t){c.apiEndpoint=t}setDWApiEndpoint(t){c.dwApiEndpoint=t}report(t){let{type:u,value:E}=t;if(s.default.isInSSR())return Promise.resolve();let p=E;return(f.default.isObject(p)||f.default.isArray(p))&&(p=JSON.stringify(p)),this._logger.logEvent({category:"performance",action:u,params:p})}logPV(){return this._logger.logPV()}logAmplitudeEvent(t,u,E){if(s.default.isInSSR()||s.default.shouldIgnoreAmpEvent())return Promise.resolve();let p="",I=!1;f.default.isObject(E)&&(p=E.ampProject,I=E.ignoreBackUp);let v={};for(let h in u)Object.prototype.hasOwnProperty.call(u,h)&&(v[h]=u[h]);if(v.monitor_after_navigation){delete v.monitor_after_navigation;let h=JSON.parse(sessionStorage.ampCacheEvents||"[]");return h.push([t,v]),sessionStorage.ampCacheEvents=JSON.stringify(h),Promise.resolve()}return n.default.getInstance(p).then(h=>{h.logEvent(t,{...v,site:s.default.getSiteInfo()},{language:s.default.getOkGlobal().locale}),I||this.act(t,u,{isSyncAMP:!1})})}resetAmplitudeUser(){return s.default.isInSSR()?Promise.resolve():n.default.getInstance().then(t=>(t.reset(),Promise.resolve()))}track(t,u,E,p){if(s.default.isInSSR())return Promise.resolve();let I={category:this._category,action:E,target:u,params:p,extras:{area:t}};if(f.default.isObject(t)){let{area:v,action:h,target:P,params:O}=t;Object.assign(I,{action:h,target:P,params:O,extras:{area:v}})}return this._logger.logEvent(I)}act(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return s.default.isInSSR()||!(0,m.shouldReport)(t)?Promise.resolve():new Promise((p,I)=>{setTimeout(()=>{this._act(t,u,E).then(p,I)},0)})}async _act(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:p,...I}=this.commonParams||{},v={web_mode_okx:f.default.isInArray(_.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},P=Object.assign({},s.default.isOKEx()?v:{}),O=E?.tk||p,T={category:this._category,params:u,_m:"1"};f.default.isObject(u)&&(T.params=f.default.merge({...I,...P},u),P=f.default.merge(s.default.isOKLink()?{...I,...P}:P,u));let A;typeof t=="string"?(A=t,T.action=t):(A=t.action||t.anchor,T.action=A,T.anchor=t.anchor,T.actionType=t.actionType,T.elementType=t.elementType,T={...T,params:f.default.merge(T.params,t.params||{})},O=t.tk||O,P=f.default.merge(P,t.params)),T.tk=O;let{needDurationActions:y,needDurationActionParams:C,actionTriggerTimes:R,setActionTriggerTimes:b,setNeedDurationActionParams:L}=o.default.getState();if(s.default.isEnableAMP()&&E?.isSyncAMP){let x=t?.ampProject;this.logAmplitudeEvent(A,P,{ampProject:x,ignoreBackUp:!0})}return f.default.isInArray(y,A)?(R[A]=Date.now(),b(R),C[A]=T,L(C),Promise.resolve("The event will be reported when the page is closed")):this._logger.logEvent(T)}_initEventListener(){window.addEventListener("load",()=>{e.default.listen(this._logger)}),window.addEventListener("error",t=>{let u=i.default.getErrorInfo(t);i.default.isReported(u)||(this._logger.logEvent({category:"error",action:"report",extras:u}),i.default.rememberError(u))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:t,needDurationActionParams:u,actionTriggerTimes:E,setNeedDurationActions:p,setNeedDurationActionParams:I,setActionTriggerTimes:v}=o.default.getState();t.length&&t.forEach(h=>{u[h].params.duration=Date.now()-E[h],this._logger.logEvent(u[h])}),p([]),I({}),v({})})}initABTest(t){let u="ab_experiment";t?.exper_flagKey&&t?.exper_variant&&(Object.assign(this.commonParams,t),this.act(u))}setCommonParams(t){this.commonParams={...this.commonParams,...t}}triggerReportDuration(t){let{needDurationActions:u,setNeedDurationActions:E}=o.default.getState();f.default.isInArray(u,t)||(u.push(t),E(u))}}},"../monitor/src/store.js":function(S,g,a){a.r(g);var f=a("../monitor/src/common/statex.js");let _=(0,f.default)(s=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:i=>s(()=>({deviceId:i})),setNeedDurationActions:i=>s(()=>({needDurationActions:i})),setNeedDurationActionParams:i=>s(()=>({needDurationActionParams:i})),setActionTriggerTimes:i=>s(()=>({actionTriggerTimes:i}))}));g.default=_},"../monitor/src/web.js":function(S,g,a){a.r(g);var f=a("../monitor/src/common/constants.js"),_=a("../monitor/src/common/seo.js"),s=a("../monitor/src/common/utils.js"),i=a("../monitor/src/monitor.js"),d=a("../monitor/src/common/variables.js"),e=a("../monitor/src/amplitude.js"),n=a("../monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:o}=f.default,m=(l,c)=>{if(d.default.isInSSR())return;let{pathname:r}=window.location;sessionStorage.channelId=l,d.default.toLocalStorage({key:"channelId",value:l,maxAge:o}),c?(sessionStorage.referralSrc=c,d.default.toLocalStorage({key:"referralSrc",value:c,maxAge:o})):(sessionStorage.removeItem("referralSrc"),d.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=r,d.default.toLocalStorage({key:"pageId",value:r,maxAge:o})};g.default={monitor:{get amplitude(){return d.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((c,r)=>{r("Currently not a browser environment!")})}}:e.default},newInstance(l){return d.default.isInSSR()?{setApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_initEventListener(){},initABTest(){return Promise.resolve()},setCommonParams(){},triggerReportDuration(){}}:new i.default(l)},saveChannelId(l){m(l)},getChannelId(){return sessionStorage.channelId},getOktsBaggage(){return sessionStorage.oktsBaggage},setDeviceId(l){let{setDeviceId:c}=n.default.getState();c(l)},getChannelContextFromUrl(l){return s.default.getChannelContext(s.default.getParsedUrl(l))}},parseUrl(){let l=s.default.getParsedUrl(window.location.href),c=l.searchParams.get("src");c&&sessionStorage.setItem("src",c),this.parseChannelId(l)},parseChannelId(l){let c=s.default.getChannelIdByUserAgent(),r=_.default.getSeoType(),t=s.default.getChannelContext(l),u=t.channelId,E=t.referralSrc,p=!1;if(d.default.isInDesktop()&&c&&(u=c,E="",p=!0),!u&&r&&(u=r,p=!0),u=s.default.filterXSS(u),this.processOktsBaggage(l,u,p),u){m(u,E);return}d.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(d.default.syncUpLocalStorageToSessionStorage("referralSrc"),d.default.syncUpLocalStorageToSessionStorage("pageId"))},processOktsBaggage(l,c,r){try{if(r){sessionStorage.removeItem("oktsBaggage"),d.default.removeLocalStorage("oktsBaggage");return}if(c){let t=s.default.getOktsBaggageData(l);d.default.toLocalStorage({key:"oktsBaggage",value:t,maxAge:o})}d.default.syncUpLocalStorageToSessionStorage("oktsBaggage")}catch(t){console.log("Error processing oktsBaggage:",t)}},init(){d.default.isInSSR()||(this.parseUrl(),!s.default.getCookie("first_ref")&&document.referrer&&s.default.setCookie("first_ref",document.referrer.slice(0,256),o),sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",window.location.href),window.utils=window.utils||{},window.utils.monitor=this.monitor)},saveChannelId(l){m(l)}}}},M={};function D(S){var g=M[S];if(g!==void 0)return g.exports;var a=M[S]={exports:{}};return j[S](a,a.exports,D),a.exports}(function(){D.d=function(S,g){for(var a in g)D.o(g,a)&&!D.o(S,a)&&Object.defineProperty(S,a,{enumerable:!0,get:g[a]})}})(),function(){D.o=function(S,g){return Object.prototype.hasOwnProperty.call(S,g)}}(),function(){D.r=function(S){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})}}();var w={};return function(){D.r(w);var S=D("../monitor/src/web.js");S.default.init(),w.default=S.default.monitor}(),w=w.default,w}()})});export{W as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-PODZSVO7.js.map
