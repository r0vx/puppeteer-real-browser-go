import{b as I}from"./chunk-5PDHABUQ.js";import{a as C}from"./chunk-PD44C7EF.js";import{b as U}from"./chunk-67F2WFQO.js";import{o as F}from"./chunk-XP3TNE3R.js";import{cc as N,jc as H}from"./chunk-QRHYK2TW.js";import{a as R}from"./chunk-2FDQIA7D.js";import{P as E,Q as O,R as h,ia as y}from"./chunk-QHXUL3YM.js";import{H as $,o as D}from"./chunk-MOTAOJVG.js";import{ea as A,ga as l,ra as S}from"./chunk-CYTB2B6Q.js";import{b as w}from"./chunk-OL67KS7C.js";import{f as _,o as T,q as p}from"./chunk-SHG7TIBL.js";T();p();var c={UNAPPROVED:"unapproved",APPROVED:"approved",REJECTED:"rejected",SIGNED:"signed",SUBMITTED:"submitted",FAILED:"failed",DROPPED:"dropped",SUCCEED:"succeed",PENDING:"pending"},u={TRANS_OUT:1,AUTHORIZATION:2,CONTRACT_CALL:3,CANCEL_AUTHORIZATION:4,CONTRACT_DEPLOY:5},j={[u.TRANS_OUT]:"wallet_extension_history_list_send",[u.CONTRACT_CALL]:"wallet_extension_history_list_contract_interaction",[u.AUTHORIZATION]:"wallet_extension_history_list_approval",[u.CANCEL_AUTHORIZATION]:"wallet_extension_history_list_revoke_approval",[u.CONTRACT_DEPLOY]:"developer_mode_history_title_contract_eployment"};T();p();var a=_(w()),f=_(H()),P=_(F());S();$();y();function M(){return(0,f.useSelector)(N,f.shallowEqual)}function x(t,n){let o=M(),s=U(),{extensionConfig:r}=C("rpc_info"),e=n||r;return(0,a.useMemo)(()=>Object.values(o).filter(i=>{if(!i.txParams)return!1;let{from:m,chainId:d}=i.txParams;return s===m&&d===e.chainId&&t(i)}),[o,s,e.chainId])}function ot(t){return x(n=>n.status===c.FAILED||n.status===c.SUCCEED,t)}function g(t){let[n,o]=t,s=+n,r=+D.add(1,"d",new Date(o));return e=>h(e,s)&&E(e,r)}function L(t={},n=null){let{dates:o}=t,s=x(r=>r.status===c.FAILED||r.status===c.SUCCEED||r.status===c.DROPPED,n);return(0,a.useMemo)(()=>{let r=s;if(o){let e=g(o);r=r.filter(({finishTime:i})=>e(i))}return r.sort((e,i)=>i.finishTime-e.finishTime).map(e=>({...e,isShowPending:!1}))},[s,o])}function v(t={},n=null){let o=x(r=>r.status===c.PENDING,n),{dates:s}=t;return(0,a.useMemo)(()=>{let r=A(o,[e=>I(e.txParams.nonce)]).map((e,i)=>({...e,isShowPending:i===0}));if(s){let e=g(s);r=r.filter(({sendTime:i})=>e(i))}return r},[o,s])}function b(){let t=v(),n=L();return(0,a.useMemo)(()=>[...t,...n],[t,n])}function st(t){let n=b();return(0,a.useMemo)(()=>t?n.find(({id:o})=>t===o):null,[t,n])}function it({tokenAddress:t}){let n=v(),o=L();return(0,a.useMemo)(()=>[...n,...o].filter(({type:s,txParams:r,extraParams:e})=>{if(s===u.TRANS_OUT)return!t&&!e?.tokenAddress||l(t)===l(e?.tokenAddress);if(s===u.AUTHORIZATION||s===u.CANCEL_AUTHORIZATION)return l(t)===l(e?.tokenAddress);if(s===u.CONTRACT_CALL){let{value:i}=r||{};return!t&&O(R(i),0)}return!1}),[n,o,t])}var B=(t,n,o)=>{let{protocol:s,host:r,pathname:e,search:i,hash:m}=new URL(t),d=e.endsWith("/")?`${e}${n}/${o}`:`${e}/${n}/${o}`;return new URL(`${s}//${r}${d}${i}${m}`).toString()};function ut(){let{extensionConfig:t}=C("rpc_info");return(0,P.useMemoizedFn)(n=>t?.explorerUrl?B(t?.explorerUrl,"tx",n):null)}export{c as a,u as b,j as c,ot as d,L as e,v as f,b as g,st as h,it as i,B as j,ut as k};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-SR7OSGG2.js.map
