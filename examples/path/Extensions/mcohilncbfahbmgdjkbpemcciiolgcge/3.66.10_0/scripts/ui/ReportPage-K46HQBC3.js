import{a as q}from"./chunk-VR7OPIR6.js";import{a as v}from"./chunk-CXSOAP4V.js";import{a as W}from"./chunk-DBWXHHZT.js";import"./chunk-7JSJY3SQ.js";import"./chunk-6JEFG7DQ.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-KJWX5V23.js";import"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import"./chunk-QYDRYMWS.js";import{g as F}from"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3L7K7.js";import{a as U}from"./chunk-Y5K5NJ6U.js";import"./chunk-JABAEAEN.js";import{a as S}from"./chunk-VY2VK2OT.js";import"./chunk-Q7FGM7BT.js";import{b as Y}from"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import"./chunk-QMENNGDH.js";import{a as g}from"./chunk-KANXVZ35.js";import"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as re}from"./chunk-XP3TNE3R.js";import{La as H,Ma as G}from"./chunk-QRHYK2TW.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as _e}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import{f as M}from"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as r}from"./chunk-62ZAND24.js";import{a as le}from"./chunk-SIITVWZR.js";import"./chunk-QHXUL3YM.js";import{B as n,D as N,H as ie}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{H as I,P as R,q as T,r as B,y}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{fa as k,ka as u}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as ae}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as m,o as b,q as p}from"./chunk-SHG7TIBL.js";b();p();var e=m(ae()),j=m(_e()),z=m(re()),_=m(le());ie();b();p();var t={"retina-border-basic":"_retina-border-basic_1b1w3_1",retinaBorderBasic:"_retina-border-basic_1b1w3_1","report-page":"_report-page_1b1w3_29",reportPage:"_report-page_1b1w3_29",content:"_content_1b1w3_34",label:"_label_1b1w3_40","coin-info":"_coin-info_1b1w3_46",coinInfo:"_coin-info_1b1w3_46","coin-header":"_coin-header_1b1w3_80",coinHeader:"_coin-header_1b1w3_80","coin-left":"_coin-left_1b1w3_84",coinLeft:"_coin-left_1b1w3_84","coin-icon":"_coin-icon_1b1w3_90",coinIcon:"_coin-icon_1b1w3_90","coin-symbol":"_coin-symbol_1b1w3_96",coinSymbol:"_coin-symbol_1b1w3_96","chain-tag":"_chain-tag_1b1w3_104",chainTag:"_chain-tag_1b1w3_104","chain-name":"_chain-name_1b1w3_107",chainName:"_chain-name_1b1w3_107","coin-right":"_coin-right_1b1w3_114",coinRight:"_coin-right_1b1w3_114","contract-address":"_contract-address_1b1w3_117",contractAddress:"_contract-address_1b1w3_117","reasons-section":"_reasons-section_1b1w3_123",reasonsSection:"_reasons-section_1b1w3_123",loading:"_loading_1b1w3_126","section-title":"_section-title_1b1w3_133",sectionTitle:"_section-title_1b1w3_133","reasons-list":"_reasons-list_1b1w3_139",reasonsList:"_reasons-list_1b1w3_139","reason-item":"_reason-item_1b1w3_143",reasonItem:"_reason-item_1b1w3_143","reason-label":"_reason-label_1b1w3_156",reasonLabel:"_reason-label_1b1w3_156","other-reason-section":"_other-reason-section_1b1w3_163",otherReasonSection:"_other-reason-section_1b1w3_163","submit-section":"_submit-section_1b1w3_167",submitSection:"_submit-section_1b1w3_167"};var D=300,K=5,de=1;function me(){let E=(0,j.useHistory)(),C=q(),Q=C.get("coinId"),x=C.get("address"),O=F(),{coin:s}=W(Number(Q),!0),[X,P]=(0,e.useState)(!1),{data:Z=[],loading:J,run:V}=(0,z.useRequest)(async()=>{P(!1);let[o,a]=await N(G());return!o&&Array.isArray(a?.data?.tokenReasons)?a.data.tokenReasons||[]:(P(!0),[])}),[i,$]=(0,e.useState)([]),[l,A]=(0,e.useState)(""),[h,L]=(0,e.useState)(!1),c=i.includes(K),w=i.length>0&&(!c||l.length>0),ee=(0,e.useCallback)((o,a)=>{$(d=>a?[...d,o]:(o===K&&A(""),d.filter(f=>f!==o)))},[]),te=(0,e.useCallback)(o=>{o.length<=D&&A(o)},[]),oe=(0,e.useCallback)(async()=>{if(!w||h)return;L(!0);let o={reportedAddress:s?.address,chainIndex:s?.chainId,reportType:de,reasonTypes:i,address:x,comment:c?l:""},a={walletSignParams:{needWalletSign:!0,walletId:O}},[d,f]=await N(H(o,a));if(!d&&f?.data?.reportStatus){I.success({title:e.default.createElement("span",{"data-testid":g.REPORT_COIN_PAGE.REPORT_COIN_SUCCESS_TOAST},n("wallet_extension_top_toast_report_success"))});let ne=v.get(S.reportedCoins)||[];v.set(S.reportedCoins,ne.concat(s?.coinId)),E.goBack()}else I.error(n("wallet_extension_assets_notification_desc_report_fail"));L(!1)},[w,h,s?.address,s?.chainId,s?.coinId,i,x,c,l,O,E]),se=()=>J?e.default.createElement("div",{className:t.loading},e.default.createElement(k.Circle,null)):X?e.default.createElement("div",{className:t.loading},e.default.createElement(y.State,{type:y.State.TYPE.noNetwork,title:n("wallet_extension_general_empty_title_loading_failed"),description:n("wallet_extension_general_empty_subtitle_data_retrive_fail"),onButtonClick:()=>{V()},buttonText:n("wallet_extension_general_empty_btn_reload")})):e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:t.sectionTitle},n("wallet_extension_assets_chips_label_report_issue")),e.default.createElement("div",{className:t.reasonsList},Z.map(o=>e.default.createElement("div",{"data-testid":g.REPORT_COIN_PAGE.REPORT_COIN_REASON_ITEM,key:o.reasonType,className:t.reasonItem,onClick:()=>{let a=i.includes(o.reasonType);ee(o.reasonType,!a)}},e.default.createElement("div",{className:(0,_.default)("ellipsis",t.reasonLabel)},o.content),e.default.createElement(B,{circle:!0,checked:i.includes(o.reasonType)})))),c&&e.default.createElement("div",{className:t.otherReasonSection},e.default.createElement(T.TextArea,{style:{height:124},showCount:!0,cleanable:!0,errorType:T.TIP_TYPE.always,value:l,onChange:o=>te(o?.target?.value),placeholder:n("wallet_extension_assets_textarea_placeholder_enter_issue",{},{useBr:!1}),maxLength:D})));return e.default.createElement(r.Container,{loading:!1,className:t.reportPage},e.default.createElement(U,{bordered:!1,title:n("wallet_extension_assets_header_report_token"),className:t.navigator,closeable:!1}),e.default.createElement("div",{className:t.content},e.default.createElement("span",{className:t.label},n("wallet_extension_assets_cell_label_token")),s&&e.default.createElement("div",{className:t.coinInfo},e.default.createElement(r.FlexBox,{align:r.ALIGN.center,justify:"space-between",className:t.coinHeader},e.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:t.coinLeft},e.default.createElement(Y,{src:s?.image,text:s?.symbol,className:t.coinIcon}),e.default.createElement("div",{className:(0,_.default)(t.coinSymbol,"ellipsis")},s?.symbol),e.default.createElement(R,{className:(0,_.default)(t.chainTag)},e.default.createElement("div",{className:(0,_.default)(t.chainName,"ellipsis")},s?.chainName))),e.default.createElement("div",{className:t.coinRight},s?.address&&e.default.createElement("div",{className:t.contractAddress},M(s?.address))))),e.default.createElement("div",{className:t.reasonsSection},se()),e.default.createElement("div",{className:t.submitSection},e.default.createElement(u,{"data-testid":g.REPORT_COIN_PAGE.REPORT_COIN_SUBMIT_BUTTON,type:u.TYPE.highlight,size:u.SIZE.lg,loading:h,disabled:!w,onClick:oe,block:!0},n("wallet_extension_btn_general_confirm")))))}export{me as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ReportPage-K46HQBC3.js.map
