import{a as Ir}from"./chunk-MXXOWCRN.js";import{a as Y}from"./chunk-WBTR3RX4.js";import{a as Tr}from"./chunk-UYHZVWJV.js";import{a as gr}from"./chunk-JRNVHROF.js";import{a as Cr}from"./chunk-7GRDW7ZD.js";import{a as er}from"./chunk-HY7LAUD2.js";import{a as tr}from"./chunk-C6HPT3PU.js";import{b as pr,c as fe,m as lr,n as fr,o as dr}from"./chunk-CQWP5UAS.js";import{a as or}from"./chunk-Y6T5M4AD.js";import{a as jo}from"./chunk-UWCOP3B7.js";import{a as Et,b as xr,d as yt}from"./chunk-7X4DXTSI.js";import{a as yr}from"./chunk-LURPYTXM.js";import{a as Yt}from"./chunk-CIEH2J25.js";import{a as _t,b as _r,c as de}from"./chunk-64LKONIY.js";import{A as me,E as ir,I as ar,J as mr,N as ue,O as ur,Q as cr,S as ce,T as pe,Y as le,b as rr,c as nr,d as vt,e as R,f as ne,h as Mt,j as se,k as sr,p as ie,u as kt,z as ae}from"./chunk-VVJ6BK3Q.js";import{D as Qo,a as Ko,b as Jo,k as qo,l as H}from"./chunk-NKIUEXOA.js";import{f as Vo}from"./chunk-CGFS6AE4.js";import{a as Xo}from"./chunk-DBWXHHZT.js";import{d as et,g as Zo,k as Lt}from"./chunk-7JSJY3SQ.js";import{A as $o,ia as Wo}from"./chunk-XIHJL4UW.js";import{D as ke,E as Bo,F as Po,G as Oo,I as wo,J as Lo,L as vo,M as Mo,N as ko,O as Do,P as Uo,Q as Ro,b as Io,f as So,j as Ao,k as Eo,n as ho,q as bo,t as Fo,x as No}from"./chunk-ZLJJZYPU.js";import{k as Go}from"./chunk-OK4242CI.js";import{a as oe,g as zo}from"./chunk-IEGAVAV7.js";import{a as Qn,l as Ho,m as Yo}from"./chunk-AZNX5TUC.js";import{a as re}from"./chunk-Y5K5NJ6U.js";import{a as dt}from"./chunk-Q7FGM7BT.js";import{b as De}from"./chunk-TKE74ERX.js";import{a as xo,g as Co,hb as go,ta as To}from"./chunk-QMENNGDH.js";import{a as jt,e as yo,r as S}from"./chunk-WGVA2GGS.js";import{o as ft}from"./chunk-XP3TNE3R.js";import{Aa as _o,Kb as Qt,_ as fo,jc as W}from"./chunk-QRHYK2TW.js";import{a as te}from"./chunk-532YJKK4.js";import{I as po,W as Vt,_ as b,aa as qt,ba as lo,c as w,ia as tt,k as co}from"./chunk-4EIUGT5A.js";import{c as F}from"./chunk-62ZAND24.js";import{a as ee}from"./chunk-SIITVWZR.js";import{Eb as Jt,J as j,Jb as ao,K as ve,L as ct,Ma as Kt,Na as so,Nc as lt,O as Gt,P as je,Q as Me,Z as to,_d as uo,ca as Zt,ed as mo,fa as St,ia as pt,ic as Wt,lb as io,ob as Vn,od as Ht,oe as qn}from"./chunk-QHXUL3YM.js";import{H as k,n as It,y as f}from"./chunk-MOTAOJVG.js";import{B as oo,H as ro,M as no,d as eo,o as Xt,q as At}from"./chunk-XR4SQWL7.js";import{L as $t,ra as Le,s as Qe}from"./chunk-CYTB2B6Q.js";import{ka as U}from"./chunk-6M3PZK2X.js";import{b as y}from"./chunk-OL67KS7C.js";import{f as c,o as r,q as n}from"./chunk-SHG7TIBL.js";r();n();var Ce=c(y()),br=c(W()),Fr=c(ft());r();n();var _e=c(y());pt();var Ue=(0,_e.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",netWorkCoinId:null,utxoType:1,txType:null,protocolId:null,mintType:Vt.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function ot(){return(0,_e.useContext)(Ue)}function Dt(){let{signInfo:t}=ot();return t}function ye(){let{currencyId:t}=ot();return t}function st(){let{params:t}=ot();return t}function Re(){let{feeData:t}=ot();return t}function xe(){let{onFeeDataChange:t}=ot();return t}function rt(){let t=Dt(),{inscriptions:e}=st(),{inscriptionOutput:o}=Re(),i=o||t?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:j(i,e.length)}}function ht(){let{feeData:t}=ot();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>ct(e,o),"0")}}function bt(){let{feeData:t}=ot();return t.commitTxFee}function V(){let{feeData:{feeSelectedSat:t={}}}=ot(),{type:e}=t,o=Dt(),i;return e===b.CUSTOM?i=t.satBytes:i=o?.[lo[e]],{...t,satBytes:i||o?.normal||0}}function Sr(){let{feeData:t}=ot();return t.canTransferAmount}function Ar(){let{lifecycle:t}=ot();return t}r();n();var Er=c(y());function jn(t,e){let o=et(e),[,i]=jo({coinId:e,address:t,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,Er.useMemo)(()=>i||{},[i])}var hr=jn;function ts({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:u,...p}=o,d=(0,br.useSelector)(Qt),_=hr(m,u),[x,C]=(0,Ce.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:b.STANDARD},canTransferAmount:"0"}),N=(0,Fr.useMemoizedFn)((T,I)=>{C(E=>({...E,[T]:I}))});return Ce.default.createElement(Ue.Provider,{value:{signInfo:_,currencyId:e??d.currencyId,params:{...p,netWorkCoinId:u,from:m,to:a||m},lifecycle:i,feeData:x,onFeeDataChange:N}},s)}var $e=ts;r();n();r();n();var v=c(y()),jr=c(te()),be=c(ft());k();r();n();var Ft=c(y()),We=c(ee());r();n();var Ut={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function es({className:t,loading:e,slot:o={},children:i,footerActions:s,contentClassName:m}){let{header:a,footer:u,top:p}=o;return Ft.default.createElement(F.Container,{loading:e,className:(0,We.default)(Ut.root,t)},Ft.default.createElement(F.Box,{className:Ut["send-page-base-container__header"]},a),Ft.default.createElement(F.Box,{className:Ut["send-page-base-container__wrapper"]},p,Ft.default.createElement(F.Box,{className:Ut["send-page-base-container__inner-wrapper"]},Ft.default.createElement(F.Box,{className:(0,We.default)(Ut["send-page-base-container__content"],m)},i),!!s?.length&&Ft.default.createElement(dt.FooterActions,{usePortal:!0,placeholder:!0,renderNative:!0,buttonGroup:s}),u)))}var Te=es;r();n();var Ye=c(y());Le();r();n();var z=c(y());k();r();n();var Nr=c(y()),He=c(W());pt();var Br=(t,e)=>{let o=t.coinId,i=Go(o),s=(0,He.useSelector)(Qt),m=(0,He.useSelector)(({metamask:p})=>p.currencies),a=(0,Nr.useMemo)(()=>e&&m?.find(p=>p.currencyId===e)||s,[e]),u=j(i,a?.usdToThisRate);return or(to,p=>{let d=jt(p,{symbol:t.symbol,precision:t.displayPrecision,isStableCoin:t.stableCoin}).value,_=yo(j(p,u),{currencySign:a.symbol}).value;return`${d}(${_})`})};Ht();pt();var Pr=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:s,onChange:m,supportDecimal:a})=>{let u=er(),{coin:p,baseCoin:d}=Xo(i,!0),[_,x]=(0,z.useState)(e?.customSatBytes),C=Br(d,s),N=f("extension_wallet_transaction_text_minute");(0,z.useEffect)(()=>{!_&&o?.normal&&x(o?.normal)},[o]);let T=(0,z.useCallback)(O=>{x(O)},[]),I=(0,z.useCallback)(()=>{m?.({customSatBytes:_,type:b.CUSTOM,satBytes:_})},[_]),E=p.localType===Wt?f("wallet_extension_transfer_unit_sat_b"):"",P=(0,z.useMemo)(()=>{let{min:O,mempoolMin:L}=o,B=L||O||0;return Gt(_,B)?f("extension_btc_minmum_alert_fee_lowerthan",{feerate:B}):""},[_,o]);return(0,z.useMemo)(()=>[b.SLOW,b.STANDARD,b.FAST,b.CUSTOM].map(O=>{switch(O){case b.SLOW:return{data:{type:b.SLOW,satBytes:o.min,estimatedTime:`${St(o.maxCost)} ${N}`},unitPrice:`${o.min} ${E}`,totalPrice:C(j(o.min,t),s),type:f(qt[b.SLOW]),typeKey:b.SLOW,estimatedTime:`${St(o.maxCost)} ${N}`};case b.STANDARD:return{data:{type:b.STANDARD,satBytes:o.normal,estimatedTime:`${St(o.normalCost)} ${N}`},unitPrice:`${o.normal} ${E}`,totalPrice:C(j(o.normal,t),s),type:f(qt[b.STANDARD]),typeKey:b.STANDARD,estimatedTime:`${St(o.normalCost)} ${N}`};case b.FAST:return{data:{type:b.FAST,satBytes:o.max,estimatedTime:`${St(o.minCost)} ${N}`},unitPrice:`${o.max} ${E}`,totalPrice:C(j(o.max,t),s),type:f(qt[b.FAST]),typeKey:b.FAST,estimatedTime:`${St(o.minCost)} ${N}`};default:return{unitPrice:`${o.max} ${E}`,totalPrice:C(j(_,t),s),estimatedTime:u(o,_),canConfirm:!P,onConfirm:I,components:()=>z.default.createElement(At.Number,{enableMinus:!1,precision:a?1:0,error:P,errorType:At.TIP_TYPE.always,onChange:T,value:_,size:At.SIZE.sm,title:E,className:"custom-network-fee__satb"})}}}),[t,o,_,a])};var os=({value:t,coinId:e,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a,visible:u,supportDecimal:p})=>{let d=Pr({bytes:o,value:t,coinId:e,onChange:s,signInfo:i,currencyId:m,supportDecimal:p});return Ye.default.createElement(tr,{feeType:t?.type,feeDataList:d?.slice(0,3),onBack:a,visible:u,custom:Qe(d),onChange:({data:_})=>{s?.(_)}})},Or=Ye.default.memo(os);Ht();r();n();var it=c(y());Ht();k();var Lr=c(ft());r();n();var M=c(y());k();r();n();var Nt={"output-panel":"_output-panel_n2hmc_1",outputPanel:"_output-panel_n2hmc_1","output-panel__content":"_output-panel__content_n2hmc_4",outputPanelContent:"_output-panel__content_n2hmc_4","output-panel__button":"_output-panel__button_n2hmc_7",outputPanelButton:"_output-panel__button_n2hmc_7","output-panel__compare":"_output-panel__compare_n2hmc_10",outputPanelCompare:"_output-panel__compare_n2hmc_10","output-panel-slider__content":"_output-panel-slider__content_n2hmc_16",outputPanelSliderContent:"_output-panel-slider__content_n2hmc_16","output-tag":"_output-tag_n2hmc_19",outputTag:"_output-tag_n2hmc_19"};var ge=330,Ie=1e4,rs=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,u]=(0,M.useState)(String(o));(0,M.useEffect)(()=>{u(String(o))},[o]),(0,M.useEffect)(()=>{e&&u(String(o))},[o,e]);let p=Lt(t,a,{currencyId:i,useApproximate:!1});return M.default.createElement(Xt.Action,{windowStyle:{width:"100%",maxHeight:"none",overflow:"hidden"},visible:e,onClose:s,title:f("wallet_header_title_inscription_sats"),maskClosable:!0,noTopRadius:!1,zIndex:1e3,alignBottom:!0,noContentPadding:!0},M.default.createElement(F.Box,{className:Nt["output-panel__content"]},M.default.createElement(At.Number,{precision:0,value:a,max:Ie,min:ge,size:At.SIZE.xl,onChange:d=>{u(d)},suffix:M.default.createElement(S.Text,{size:S.SIZE.sm},"sats")}),M.default.createElement(S.Text,{className:Nt["output-panel__compare"],type:S.TYPE.secondary,size:S.SIZE.sm},p),M.default.createElement(F.Space,{space:4,direction:F.DIRECTION.vertical},M.default.createElement(oo,{value:a,min:ge,max:Ie,contentClassName:Nt["output-panel-slider__content"],onChange:d=>{u(String(d))}}),M.default.createElement(F.FlexBox,{justify:"space-between"},M.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${ge} sats`),M.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${Ie} sats`)))),M.default.createElement(F.Box,{className:Nt["output-panel__button"]},M.default.createElement(U,{disabled:!a||!a?.trim(),category:U.CATEGORY.fill,type:U.TYPE.highlight,size:U.SIZE.lg,block:!0,onClick:()=>{m?.(Math.min(Math.max(a,ge),Ie)),s?.()}},f("extension_transactions_btn_confirm"))))},wr=rs;var ns=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:s=lt,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[u,{toggle:p}]=(0,Lr.useBoolean)(!1),d=It.gt(m,0)?m:"0",_=Lt(s,d,{currencyId:e,useApproximate:!0}),x=(0,it.useMemo)(()=>co(t),[t]);return it.default.createElement(it.default.Fragment,null,it.default.createElement(_t,{clickable:t===w.RUNES_ETCH?!1:void 0,onClick:()=>{It.gt(i,0)&&p()},title:f(x)},it.default.createElement(F.FlexBox,{align:F.ALIGN.center},`${i} sats`,!!o&&o>1&&it.default.createElement(S.Text,{className:Nt["output-tag"]},"x",o),_)),it.default.createElement(wr,{coinId:s,visible:u,currencyId:e,outputValue:i,onClose:p,onChange:a}))},vr=ns;r();n();var Se=c(y());k();var ss=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=et(t),s=Lt(t,o,{currencyId:e,useApproximate:!0});return Se.default.createElement(_t,{title:f("extension_wallet_transaction_item_inscribe_totalfee")},Se.default.createElement(S.Text,{inherit:!0,strong:700},Se.default.createElement(S.DisplayAmount,{noStyle:!0,mode:S.CRYPTO,symbol:i?.symbol,decimals:i?.decimals,precision:i?.displayPrecision,isStableCoin:i?.stableCoin},o),s))},Mr=ss;r();n();var Rr=c(y()),$r=c(te()),Wr=c(ft()),Hr=c(Qn());k();r();n();k();r();n();var kr=c(y());Le();Ht();so();ao();function is({walletId:t,utxoType:e=1,coinId:o=lt}={}){let i=oe();return(0,kr.useMemo)(()=>async({from:s,coinAmount:m,serviceCharge:a,feeRate:u})=>{let p={address:s,coinAmount:m,serviceCharge:a,utxoType:e};$t(u);let d={coinId:o,utxoRequests:[p]};try{let{data:_}=await Jt(Kt.getBTCUTXO,d,{walletSignParams:{needWalletSign:!0,walletId:t||i}});return _?.[0]||{}}catch(_){return{error:!0,errorResp:_}}},[o,i,e,t])}var Ae=is;Ht();pt();r();n();var Dr=c(y());function as(t){let{inscriptionOutput:e}=rt(),{satBytes:o}=V(),{walletId:i,from:s,to:m,inscriptions:a,txType:u,mintType:p}=st(),d=fr(t),_=dr();return(0,Dr.useCallback)(async x=>{let C={};return u===w.RUNES_ETCH?(C={input:x.map(({txHash:I,vout:E,coinAmount:P})=>({vOut:E,txId:I,amount:P})),address:s,feePerB:o,outValue:e,inscriptions:(a||[]).map(({body:I})=>JSON.parse(I))},await _({walletId:i,address:s,tx:C,txType:u,mintType:p})):(C={commitTxPrevOutputList:x.map(({txHash:T,vout:I,coinAmount:E})=>({vOut:I,txId:T,amount:E})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:T,body:I})=>({contentType:T,body:I})),revealOutValue:e,changeAddress:s,toAddr:m},await d({walletId:i,address:s,tx:C,txType:u}))},[s,m,a,e,o])}var Ee=as;function ms(t=lt){let{walletId:e,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:u,mintType:p}=st(),d=Dt(),_=ye(),x=lr({address:o,coinId:t,currencyId:_,txType:a,protocolId:u}),C=Ee(fe.CONFIRM),N=Ae({walletId:e,utxoType:s,coinId:t}),{beforePostTx:T}=Ar(),{inscriptionOutput:I,total:E}=rt(),{totalFee:P}=ht(),O=bt(),{satBytes:L}=V(),B=async g=>{let{commitTx:A,revealTxs:h,commitAddrs:D,commitTxFee:Z,revealTxFees:nt}=await C(g.utxoList||[]),X=await Ko(Wt,A),mt=await Jo(Wt,h),Ct=[X,...mt],Tt={signedTx:A,fromAdr:o,serviceCharge:Z,toAdr:i||o,itemId:"commitTx",txHash:X,txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]}),walletId:e},ut=h.map((wt,J)=>({signedTx:wt,fromAdr:D?.[J]||o,serviceCharge:nt?.[J],toAdr:i||o,itemId:`revealTx${J}`,txHash:mt[J],dependTx:p===Vt.serial?[Ct[J]]:[X],txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]}),walletId:e})),gt=!1;return T&&(gt=T(Tt,ut)),gt?{commitParams:Tt,revealParams:ut,commitTx:A,revealTxs:h,commitAddrs:D,commitTxFee:Z,revealTxFees:nt,feeRate:parseInt(L,10),size:parseInt(I,10)}:{txIds:await fo({txList:[Tt,...ut]},{walletSignParams:{needWalletSign:!0,walletId:e}}),commitTx:A,revealTxs:h,commitAddrs:D,commitTxFee:Z,revealTxFees:nt,feeRate:parseInt(L,10),size:parseInt(I,10)}},Q=async()=>{let g=await N({from:o,coinAmount:ct(E,P),serviceCharge:O,feeRate:L}),A=g.utxoList||[];return await x(A,()=>{}),await B(g)};return()=>new Promise((g,A)=>{if(typeof d?.txSizeLimit=="number"&&m.length>d.txSizeLimit){let h=Xt.warn({alignBottom:!1,maskClosable:!1,title:f("wallet_header_dialog_header_reminder"),text:f("wallet_info_dialog_too_much_inscription"),confirmText:f("wallet_btn_dialog_btn_cancel"),cancelText:f("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let D=await Q();g(D)}catch(D){A(D)}h.destroy()},onConfirm:()=>{A(new Error(le)),h.destroy()}})}else(async()=>{try{let h=await Q();g(h)}catch(h){A(h)}})()})}var Ur=ms;var us=t=>t?.data?.msg||t?.msg||t?.data?.originalError?.msg||f("wallet_home_toast_network_error"),cs=(t,e)=>!e&&[tt.BALANCE_INSUFFICIENT,tt.FEE_BALANCE_INSUFFICIENT].includes(t),ps=({txId:t,coinId:e,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:u,addressType:p,useTipMessageFillUp:d,onFillUp:_,netWorkCoinId:x,addressCheckLoading:C=!1},N)=>{let T=(0,$r.useHistory)(),I=Ur(x),E=Qo(o,a),P=(0,Wr.useMemoizedFn)(async()=>{try{await E();let g=await I();m&&await m(g)}catch(g){if(!(g?.message===le)){let h=us(g);ro.error({title:h})}}},[m]),{loading:O,onClick:L}=Yt(P),{loading:B,onClick:Q}=Yt(a);return(0,Rr.useMemo)(()=>{let g=a?{loading:B,actionType:H.ACTION_TYPE.CANCEL,onClick:Q}:null,A={loading:O||C,disabled:u,actionType:H.ACTION_TYPE.CONFIRM,onClick:L};return cs(N,i)&&(g=g||{actionType:H.ACTION_TYPE.CANCEL,onClick:()=>{T.goBack()}},d?A={actionType:H.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{_&&await _();let h=Hr.default.stringify({addressType:p,coinId:e},{skipEmptyString:!0,skipNull:!0}),D=h?`?${h}`:"";T.push(go+D)}}:A={txId:t,coinId:e,address:s,walletId:o,actionType:H.ACTION_TYPE.FILL_UP}),[g,A]},[a,B,Q,O,u,L,i,N,d,T,_,p,e,t,s,o])},Yr=ps;r();n();k();r();n();var zr=c(y());pt();function Gr(){let{totalFee:t}=ht(),{satBytes:e}=V();return Zt(ve(t,e),0)}function Zr(){let t=bt(),{satBytes:e}=V();return Zt(ve(t,e),0)}function Xr(){let{totalFee:t}=ht(),e=bt();return(0,zr.useMemo)(()=>ct(t,e),[t,e])}r();n();r();n();var Bt=c(y());pt();function ls(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:s,netWorkCoinId:m}=st(),[a,u]=(0,Bt.useState)(!0),[p,d]=(0,Bt.useState)(!0),[_,x]=(0,Bt.useState)(null),[C,N]=(0,Bt.useState)([]),T=Ae({walletId:o,utxoType:s,coinId:m}),I=Ee(fe.CAL_FEE),{satBytes:E}=V(),{total:P}=rt(),O=xe(),{totalFee:L}=ht(),B=bt();return(0,Bt.useEffect)(()=>{!e&&(async()=>{if(!je(P,0))try{d(!0);let g=await T({from:i,coinAmount:ct(P,L),serviceCharge:B,feeRate:E});if(!g?.utxoList?.length){x(Y.BALANCE_NOT_ENOUGH);return}if(g.error){let D=g.errorResp.code,Z=Y.COMMON_ERROR;[Y.BALANCE_NOT_ENOUGH,Y.PURE_UTXO_NOT_ENOUGH].includes(D)&&(Z=D),x(Z);return}O("canTransferAmount",g.canTransferAmount||"0"),x(null);let{commitTxFee:A,revealTxFees:h}=await I(g.utxoList);N(g.utxoList),O("commitTxFee",A),O("revealTxFees",h)}catch{x(Y.COMMON_ERROR),O("commitTxFee","0"),O("revealTxFees",[])}finally{u(!1),d(!1)}})()},[i,E,P,L,B,I,e]),{isInitLoading:a,isLoading:p,error:_,utxoList:C}}var Kr=ls;function fs(t){let{disabled:e=!1}=t||{},o=Xr(),{total:i}=rt(),s=Sr(),m=Re(),{isInitLoading:a,isLoading:u,error:p,utxoList:d}=Kr({disabled:e});return{isInitLoading:a,isLoading:u,error:p,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:d}}var he=fs;var ds=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:s}=he(),m=Dt(),a=Zr(),u=Gr(),p=It.add(a,u),d=V(),_=xe();return{bytes:p,signInfo:m,feeError:o,selectedSat:d,feeLoading:s,networkFee:e,canTransferAmount:i,utxoListCount:t?.length||0,onFeeDataChange:_}},Jr=ds;r();n();var qr=c(y());k();r();n();var _s=[w.BRC20_DEPLOY,w.BRC20_MINT,w.BRC20_INSCRIBE,w.ORDINAL_NFT,w.ORDINAL_TEXT,w.EARN_BRC30_DEPLOY,w.EARN_BRC30_APPLY,w.EARN_BRC30_REDEEM,w.EARN_BRC30_CLAIM,w.BRC30_INSCRIBE,w.RUNES_ETCH];function Vr(t){return _s.indexOf(t)>-1}var ys=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a,addressCheckError:u=""})=>(0,qr.useMemo)(()=>Vr(t)?i&&t===w.RUNES_ETCH?{type:yt.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_mpc_not_support")}:o?{type:yt.TIP_TYPE.COMMON_ERROR,message:f("wallet_extension_top_toast_dapp_comingsoon")}:e===Y.COMMON_ERROR?{type:yt.TIP_TYPE.FEE_ERROR}:e===Y.BALANCE_NOT_ENOUGH?{type:de.FEE_BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:e===Y.PURE_UTXO_NOT_ENOUGH?{type:de.BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:de.BALANCE_INSUFFICIENT}:u?{type:yt.TIP_TYPE.COMMON_ERROR,message:u}:{message:m}:{type:yt.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,s,m,u]),Qr=ys;r();n();var ze={"retina-border-basic":"_retina-border-basic_1p86s_1",retinaBorderBasic:"_retina-border-basic_1p86s_1","free-tag":"_free-tag_1p86s_29",freeTag:"_free-tag_1p86s_29",actions:"_actions_1p86s_33"};function xs({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=lt}){let{from:m,walletId:a,txType:u}=st(),p=Yo(a),d=Ho(a),[_,{toggle:x}]=(0,be.useBoolean)(!1),C=ye(),T=zo()[m],{bytes:I,signInfo:E,feeError:P,selectedSat:O,feeLoading:L,networkFee:B,canTransferAmount:Q,utxoListCount:g,onFeeDataChange:A}=Jr(),{title:h,...D}=e,{inscriptionOutput:Z,inscriptionsCount:nt,total:X}=rt(),mt=(0,v.useMemo)(()=>It.add(B,X),[B,X]),Ct=et(s),{showManageUTXO:Tt}=Ir(Ct||{},T,!0),ut=Tt&&P!==Y.PURE_UTXO_NOT_ENOUGH,gt=(0,jr.useHistory)(),{addressCheckLoading:K,addressCheckError:wt}=gr({from:m,chainIndex:Ct?.chainId||mo,handleCancel:i?.onCancel||(()=>{gt.goBack()}),method:po.INSCRIBE}),{type:J,message:Gn}=Qr({txType:u,feeError:P,feeLoading:L,utxoListCount:g,isHardware:p,isMpcWallet:d,canTransferAmount:Q,networkFee:B,totalUsedCoinAmount:mt,coin:Ct,addressCheckError:wt}),Zn=Yr({txId:t,walletId:a,coinId:s,addressType:T,disabled:!!J||!!P||!!L||p||g>100||!!wt,useTipMessageFillUp:ut,netWorkCoinId:s,addressCheckLoading:K,...i},J),qe=Cr(a),Xn=(0,be.useMemoizedFn)(we=>{A("commitTxFee","0"),A("revealTxFees",[]),A("inscriptionOutput",we)},[]),{top:Kn,footer:Jn}=o;return v.default.createElement(Te,{slot:{header:v.default.createElement(re,{title:h||f("extension_wallet_header_maintitle_inscribe"),...D}),footer:Jn||v.default.createElement(dt,{placeholder:!0,offsetBottom:0},v.default.createElement("div",{className:ze.actions},v.default.createElement(yt,{type:J||eo.TYPE.warn,address:m,message:Gn,coinId:s,walletId:a,fillUpAble:ut}),v.default.createElement(H,{buttonGroup:Zn})))}},Kn,v.default.createElement(Et,null,v.default.createElement(_t,{title:f("wallet_info_title_inscribe_service_fee")},v.default.createElement(S.Text,{className:ze["free-tag"]},f("wallet_info_tag_inscribe_free_tag"))),v.default.createElement(yr,{coinId:s,loading:L,currencyId:C,networkFee:L&&B==="0"?void 0:B,estimateFailed:!L&&!Number(B),onClick:()=>{x?.(),qe({trade:"brc20",all_confirmation:"network_fee"})}}),v.default.createElement(vr,{txType:u,currencyId:C,inscriptionsCount:nt,inscriptionOutput:Z,totalInscriptionCoinAmount:X,onInscriptionOutputChange:Xn,coinId:s})),v.default.createElement(Et,null,v.default.createElement(Mr,{coinId:s,currencyId:C,totalCoinAmount:mt})),v.default.createElement(Et,{bordered:!1},v.default.createElement(_r,{address:m,walletId:a,title:f("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{qe({trade:"brc20",all_confirmation:"wallet_used_address"})}})),v.default.createElement(Or,{bytes:I,currencyId:C,value:O,coinId:s,onClose:x,signInfo:E,visible:_,onChange:we=>{A("commitTxFee","0"),A("revealTxFees",[]),A("feeSelectedSat",we)},supportDecimal:!0}))}var Ge=xs;r();n();var xt=c(y());k();r();n();var $=c(y()),Rt=c(W()),Fn=c(ee());Le();k();r();n();var en=c(y()),on=c(te()),rn=c(ee());r();n();var tn={root:"_root_ryl3e_1"};function Cs({onBack:t,onClose:e,pageIndex:o,...i}){let s=(0,on.useHistory)(),m=()=>{t&&t(),s.goBack()},a=()=>{e&&e(),s.go(-o)};return en.default.createElement(re,{className:(0,rn.default)(tn.root,i.className),onClose:a,onBack:m,...i})}var nn=Cs;r();n();var Ze=c(W()),sn=c(te()),an=c(ft());Vn();function Ts(t){let e=(0,sn.useHistory)(),o=(0,Ze.useSelector)(Io),i=vt(),{coin:s}=R(),m=(0,Ze.useSelector)(So),a=nr();(0,an.useMount)(()=>{if(!!t){if(io(s))e.replace(o||xo);else if(!m){let u={pathname:`${Co}/${i}${To}`};a&&(u.search=`?from=${a}`),e.replace(u)}}})}var mn=Ts;r();n();var xn=c(y()),Cn=c(W());r();n();var Pt=c(y());k();r();n();var fn=c(y());r();n();var at=c(y()),cn=c(ft()),pn=c(ee());k();r();n();var un={root:"_root_26a1b_1"};var gs=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:s,className:m})=>{let[a,{setTrue:u,setFalse:p}]=(0,cn.useBoolean)();(0,at.useEffect)(()=>{e&&e(a)},[a]);let d=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return at.default.createElement(at.default.Fragment,null,at.default.createElement("div",{className:(0,pn.default)(un.root,m),onClick:u,style:s},f("wallet_extension_placeorder_textbtn_replenish",{token:d})),at.default.createElement(qo,{address:i,visible:a,closeCallback:p,coinId:t.coinId,receiveOnly:o}))},ln=(0,at.memo)(gs);var dn=c(W());function Is(t){let e=(0,dn.useDispatch)(),o=kt();return fn.default.createElement(ln,{address:o,...t,onVisible:s=>{e(Do(s))}})}var Xe=Is;var Ss=()=>{let{coin:t}=R(),e=ne();return i=>{let s="";return i.text?s=i.text:i.key&&(s=f(i?.key,i?.args)),i?.type===tt.BALANCE_INSUFFICIENT?Pt.default.createElement(Pt.default.Fragment,null,s," ",Pt.default.createElement(Xe,{coin:t,receiveOnly:!0})):i?.type===tt.FEE_BALANCE_INSUFFICIENT?Pt.default.createElement(Pt.default.Fragment,null,s," ",Pt.default.createElement(Xe,{coin:e})):s}},_n=Ss;r();n();var yn={root:"_root_g697e_1"};function As({renderError:t}){let e=(0,Cn.useSelector)(Ao),o=_n(),i=t||o;if(!e.key)return null;let s=i(e);return xn.default.createElement("div",{className:yn.root},s)}var Tn=As;r();n();var q=c(y());k();r();n();var Es=(t,e)=>{let{coin:o}=R(),i=cr(),s=ce(),m=pe(),u={total:i,amount:s,available:m}[t];return`${jt(e||u,{precision:o?.decimals}).value} ${o.symbol}`},gn=Es;r();n();var Ot={container:"_container_1l0en_1",skeleton:"_skeleton_1l0en_5",totalAmount:"_totalAmount_1l0en_9","totalAmount-content":"_totalAmount-content_1l0en_13",totalAmountContent:"_totalAmount-content_1l0en_13","totalAmount-title":"_totalAmount-title_1l0en_22",totalAmountTitle:"_totalAmount-title_1l0en_22","totalAmount-amount":"_totalAmount-amount_1l0en_29",totalAmountAmount:"_totalAmount-amount_1l0en_29"};function hs(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function bs({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},loading:u=!1,...p}){let{coin:d}=R(),_=gn(t,i),{bottom:x}=a;return q.default.createElement(F.Box,{className:Ot.container},u?q.default.createElement(no.Input,{active:!0,className:Ot.skeleton}):q.default.createElement(q.default.Fragment,null,q.default.createElement(F.FlexBox,{align:F.ALIGN.center,className:Ot.totalAmount,...p},q.default.createElement(De,{size:De.SIZE.lg,src:d?.image,text:d?.symbol}),q.default.createElement(F.Box,{className:Ot["totalAmount-content"]},q.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs,className:Ot["totalAmount-title"]},e||f("wallet_extension_send_item_total_amount")),q.default.createElement(S.Text,{ellipsis:{tooltip:!0},className:Ot["totalAmount-amount"],style:{fontSize:hs(_)}},_)),!s&&q.default.createElement(U,{category:U.CATEGORY.fill,type:U.TYPE.gray,size:U.SIZE.xs,onClick:m},o||f("wallet_extension_send_text_max"))),x))}var In=bs;r();n();pt();var Fs=()=>{let t=pe();return Gt(t,0)&&(t="0"),t},Sn=Fs;r();n();r();n();var Ns=()=>0,An=Ns;var En=An;r();n();var hn=c(ft());k();var Bs=({loading:t,disabled:e,onClick:o,...i})=>(0,hn.useCreation)(()=>{let s=!e&&t;return[{onClick:o,disabled:e,size:U.SIZE.lg,loading:s,type:U.TYPE.highlight,category:U.CATEGORY.fill,"data-testid":"send-amount-page-confirm-button",btnText:f("wallet_extension_send_btn_continue"),...i}]},[e,t,o,i]),Ps=({disabled:t,onClick:e,...o})=>{let i=ur(),s=ue();return Bs({...o,disabled:t||s,onClick:e||i})},bn=Ps;r();n();var Ke={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};function Os({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:u={},checkEmpty:p=!0,inputAmount:d,customMaxAmount:_,footerActions:x}){let C=(0,Rt.useDispatch)(),{content:N}=u,{header:T,bottom:I,footer:E}=a,P=(0,$.useRef)(),O=(0,Rt.useSelector)(Fo),L=vt(),B=Mt(),Q=(0,Rt.useSelector)(Eo),g=(0,Rt.useSelector)(bo),A=ie(),h=sr(),D=Sn(),Z=_||D,{amount:nt}=Tr(),X=(0,$.useRef)(!!B),mt=K=>{C(vo(K))},Ct=()=>{C(ke(Z)),mt(!0)},Tt=m.onMax||Ct;mn(p),(0,$.useEffect)(()=>{$t(d)||P.current?.setInputAmount(d.toString()),$t(nt)||P.current?.setInputAmount(nt)},[d,nt]);let ut=bn(i),gt=En();return $.default.createElement(Te,{loading:t,footerActions:!t&&!E&&(x||ut),slot:{header:T||$.default.createElement(nn,{title:f("wallet_extension_send_title_send"),pageIndex:2,...o}),footer:!t&&E}},$.default.createElement("div",{className:(0,Fn.default)(N,Ke.content)},$.default.createElement(Vo,{ref:P,...s,autoFocus:!O,coinId:L,maximumMode:h,maximumAmount:h?Z:null,initialValue:{value:[B||"0",Q||"0"],mode:g,flatCurrencyId:A},onAmountChange:([K,wt],J)=>{C(Po(wt)),C(ke(K)),J&&(mt(!1),X.current=!0)},onModeChnage:K=>{C(Oo(K))},onFlatChange:K=>{K&&C(Mo(K.currencyId))}}),X.current&&$.default.createElement(Tn,{renderError:e}),$.default.createElement(dt,{usePortal:!0,offsetBottom:m?.fixBottom?80-gt:104-gt,className:Ke.totalAmountWrap},$.default.createElement(In,{...m,onMax:()=>{Tt(),X.current=!0}})),I))}var Nn=Os;r();n();var On=c(y()),wn=c(W());qn();r();n();var Bn=c(y());function ws(){let{coin:t}=R(),e=Mt();return(0,Bn.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}],[t.symbol,e])}var Pn=ws;function Ls({walletId:t,txSource:e,children:o}){let i=Pn(),s=ie(),m=se(),{coin:a}=R(),u=ne(),p=kt(),d=oe(),_=w.BRC20_INSCRIBE,x=(0,wn.useSelector)($o),C=(T,I)=>{T.coinAmount=m,T.coinId=I?u.coinId:a.coinId,T.txSource=e||uo.NORMAL},N=(T,I)=>{T&&C(T,!0),Array.isArray(I)&&I.forEach(E=>{C(E,!1)})};return On.default.createElement($e,{defaultFeeData:x,currencyId:s,params:{walletId:t||d,from:p,inscriptions:i,utxoType:pr.INSCRIPTION_USE_NFT_UTXO,txType:_,protocolId:a?.protocolId,netWorkCoinId:a?.baseCoinId},lifecycle:{beforePostTx:N}},o)}var Fe=Ls;r();n();var zt=c(y());var Ln=c(W());function vs(){let t=(0,Ln.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:s,canTransferAmount:m}=he();return(0,zt.useEffect)(()=>{t(Ro(m))},[m]),(0,zt.useEffect)(()=>{t(wo(i))},[i]),(0,zt.useEffect)(()=>{t(Wo(s))},[s]),(0,zt.useEffect)(()=>{t(Lo(!!o))},[o]),e}var Ne=vs;r();n();var vn=c(y());pt();var Mn=c(W());function Je(){let t=ce();return(0,vn.useCallback)(e=>Me(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:tt.COMMON_ERROR}:null,[t])}function Ms(){let t=(0,Mn.useDispatch)(),e=ir(),o=Je(),i=[e,o],{runErrorFns:s}=me(i);ae(s,m=>{t(Bo(m))})}var kn=Ms;r();n();var Dn=c(W()),Be=c(y());ao();so();function ks(){let t=(0,Dn.useDispatch)(),e=kt(),{coin:o}=R(),[i,s]=(0,Be.useState)(!0);return(0,Be.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await Jt(Kt.postPendingBalanceDetail,{address:e,coinId:o.coinId});a?.data&&t(Uo(a.data.availableWithoutSpending))}finally{s(!1)}})()},[e,o.coinId]),i}var Un=ks;function Ds({amount:t,onCancel:e,onConfirm:o,slot:i,...s}){let m=ue(),a=Ne(),u=Un(),{loading:p,onClick:d}=Yt(e),_=(0,xt.useMemo)(()=>{let x=null;return typeof e=="function"&&(x={loading:p,actionType:H.ACTION_TYPE.CANCEL,onClick:d}),[x,{actionType:H.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:f("wallet_extension_send_btn_continue")}]},[e,o,m,a,p,d]);return kn(),xt.default.createElement(Nn,{...s,inputAmount:t,isGlobalLoading:u,slot:{...i||{},footer:xt.default.createElement(dt,{usePortal:!0,placeholder:!0,offsetBottom:0},xt.default.createElement(H,{buttonGroup:_}))},checkEmpty:!1,headerProps:{title:f("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:f("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function Us({walletId:t,...e}){return xt.default.createElement(Fe,{walletId:t},xt.default.createElement(Ds,{...e}))}var rf=Us;r();n();var G=c(y()),Yn=c(W());k();r();n();var Pe=c(y()),$n=c(ft());k();r();n();var Rn={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var Rs=({coinId:t,amount:e})=>{let o=et(t),{loading:i,data:s}=(0,$n.useRequest)(async()=>{let m={op:"transfer",amount:e,tick:o.symbol};return(await _o(m))?.brcJson||""});return Pe.default.createElement(_t,{title:f("extension_wallet_transaction_item_inscribe_preview")},Pe.default.createElement(F.Spin,{loading:i},Pe.default.createElement(S.Text,{className:Rn["preview-json"]},s)))},Wn=Rs;r();n();var Ve=c(y()),Oe=c(W());function $s(t){let e=(0,Oe.useSelector)(ho);return(0,Ve.useCallback)(()=>e?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:t?.chainName},type:tt.FEE_BALANCE_INSUFFICIENT}:null,[e,t])}function Ws(){let t=Je();return(0,Ve.useCallback)(e=>{let o=t(e);return o?{...o,highlight:ar.AMOUNT}:null},[t])}function Hs(t,e){let o=(0,Oe.useDispatch)(),i=et(e),s=$s(i),m=mr(),a=Ws(),u=[s,m,a],{runErrorFns:p}=me(u);ae(p,d=>{o(ko(d))},t)}var Hn=Hs;function Ys({headerProps:t={},onCancel:e,onConfirm:o,walletId:i,addressCheckRet:s={}}){let m=(0,Yn.useDispatch)(),a=Mt(),u=vt(),[,p]=Zo(u),d=se(),_=Ne(),x=(0,G.useCallback)(async()=>{await m(No(!1))},[m]);return Hn(_,u),G.default.createElement(Ge,{addressCheckRet:s,walletId:i,slot:{top:G.default.createElement(G.default.Fragment,null,G.default.createElement(Et,null,G.default.createElement(xr,{summaryList:[{coinId:u,coinAmount:d}],title:f("extension_wallet_transaction_item_inscribe")})),G.default.createElement(Et,null,G.default.createElement(Wn,{coinId:u,amount:a})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:x},netWorkCoinId:p?.coinId})}function zs({txSource:t,walletId:e,...o}){return G.default.createElement(Fe,{txSource:t,walletId:e},G.default.createElement(Ys,{walletId:e,...o}))}var Gf=zs;r();n();var zn=c(y());function Gs({children:t,...e}){return zn.default.createElement(rr.Provider,{value:e},t)}var Vf=Gs;export{Te as a,nn as b,mn as c,Xe as d,Bs as e,Nn as f,Ae as g,Or as h,st as i,Ge as j,$e as k,rf as l,Gf as m,Vf as n};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-OREEKEEP.js.map
