import{a as W}from"./chunk-54L4J5QB.js";import{b as Ae}from"./chunk-7XLDA2AD.js";import{a as _e}from"./chunk-UDTGE34O.js";import{i as me,j as fe}from"./chunk-4YDY4B6P.js";import{a as pe}from"./chunk-RNMISV22.js";import{a as ge}from"./chunk-L2RHVUUV.js";import{a as Te}from"./chunk-32XJE5HT.js";import{a as de}from"./chunk-NWY3GPDX.js";import{a as ye}from"./chunk-L6DDH2OK.js";import{d as ae,e as le,h as ce,j as ue}from"./chunk-OK4242CI.js";import{s as re}from"./chunk-NQAVUB4Q.js";import{b as se}from"./chunk-7C7MBE2C.js";import{a as P}from"./chunk-KANXVZ35.js";import{a as j,e as b}from"./chunk-WGVA2GGS.js";import{o as Me}from"./chunk-XP3TNE3R.js";import{C as O,I as K,J as ne,K as Y,Mb as $,jc as Oe}from"./chunk-QRHYK2TW.js";import{c as C}from"./chunk-62ZAND24.js";import{a as ie}from"./chunk-SIITVWZR.js";import{Ab as V,Eb as X,J as H,Jb as Ee,Ma as L,Na as ke,Od as R,Pd as De,Rd as ee,Ud as oe,Xd as Be,Zd as te,bd as M,ia as Se,od as be,oe as Le}from"./chunk-QHXUL3YM.js";import{H as z,l as Q,x as S,y as m}from"./chunk-MOTAOJVG.js";import{A,G as B,g as E}from"./chunk-XR4SQWL7.js";import{ea as U,ra as xe}from"./chunk-CYTB2B6Q.js";import{aa as k}from"./chunk-6M3PZK2X.js";import{b as x}from"./chunk-OL67KS7C.js";import{f as g,o as l,q as c}from"./chunk-SHG7TIBL.js";l();c();var f=g(x()),Z=g(Oe()),F=g(Me());xe();z();Le();be();Be();Se();l();c();ke();Ee();var eo=async e=>{try{let t=await V(L.getMarketMap,e);if(t?.data)return t.data}catch{}return""},Ce=async e=>{try{let{data:t={}}=await X(L.getTonMintlessInfo,e);return t}catch{}return{}},oo=async e=>V(L.getLatestPnl,e);function ve(e,t,n="0"){let o={coinAmountDisplay:j(0,{isStableCoin:e.stableCoin,precision:e.displayPrecision}).value,currencyAmountDisplay:b(0,{currencySign:t,useApproximate:!0}).value,currencyAmountNoUnitDisplay:b(0,{currencySign:t}).value};if(!e.coinAmount)return o;let{coinAmount:r}=e,s=j(r,{isStableCoin:e.stableCoin,precision:e.displayPrecision}).value,i=b(H(r,n),{currencySign:t,useApproximate:!0}).value,u=b(H(r,n),{currencySign:t}).value;return o={coinAmountDisplay:s,currencyAmountDisplay:i,currencyAmountNoUnitDisplay:u},o}function Pe(e,t,n){return!Array.isArray(e)||!e?.length?[]:(e.forEach(o=>{let{coinAmountDisplay:r,currencyAmountDisplay:s,currencyAmountNoUnitDisplay:i}=ve(o,t,n?.[o.coinId]||0);o.coinAmountDisplay=r,o.currencyAmountDisplay=s,o.currencyAmountNoUnitDisplay=i}),e)}function We(e,t){if(!Array.isArray(e)||!e?.length)return[];let n=t.reduce((o,r)=>(o[r.coinId]=r,o),{});return e.forEach(o=>{let r=o.baseCoinId===0?o.coinId:o.baseCoinId,s=n[r]||{},{imageUrl:i,symbol:u}=s;o.chainImage=i,o.chainSymbol=u}),e}function Fe(e,t){return!Array.isArray(e)||!e?.length?[]:e.map(o=>{let r=me(t,o.coinId);return o={...o,...r},o})}function Ge(e){if(!Array.isArray(e)||!e?.length)return[];let t=[],n=e.filter(o=>+o.coinAmount>0);if(n&&n.length>=2){t=[{symbol:e[0].symbol,image:e[0].image,chainImage:e[0].chainImage,coinAmount:0,currencyAmount:0,tokenType:"wallet_extension_dashboard_tab_overview",coinId:"",overview:!0}];let o=e[0];(K(o)||ne(o)||Y(o))&&(t[0].coinId=e[0].coinId,t[0].addressType="")}return t}function Ue(e){if(!Array.isArray(e)||!e?.length)return[];let t=[];return t=e.filter(n=>Boolean(n.localType)),t=U(U(t,n=>n.tokenSort),n=>-n.coinAmount),t}function ze(e,t){return!Array.isArray(e)||!e?.length?[]:e.map(o=>{o.overview&&(o.tokenType=t(o.tokenType));let r=K(o)||Y(o);if(r&&!o.overview){let{localType:s,addressType:i}=o,u=t(ee[oe[s][i]]);o.chainName=u,o.tokenType=u}return!r&&!o.tokenType&&(o.tokenType=o.chainName),o})}function No({aggregation:e,coinSymbol:t,btcAggregation:n,nearAggregation:o,tonAggregation:r,coin:s}){let i=[],u=le(),T=ae(),_=(0,Z.useSelector)($),y=ce(),p=_e(s),I=de(),h=n||o||r;return!e&&!h||(h?i=p:(i=u.find(D=>D.aggregation&&D.symbol===t)?.childrenCoin||[],i=Fe(i,T)),i=We(i,I),i=Pe(i,_,y),i=Ue(i),i=[...Ge(i),...i],i=ze(i,m)),i}function Io(e,t){let n=fe(e,t),o=(0,Z.useSelector)($),r=ue(e),s=ve(n,o,r);return(0,F.useCreation)(()=>({...n,...s}),[n,s])}function xo(e,t,n){let{coinId:o,baseCoinId:r,symbol:s}=e,[i,u]=(0,f.useState)(null),T=(0,F.useLatest)(i),_=(0,f.useCallback)(async()=>{let{status:p,offlineAmount:I,expiredAt:h}=await Ce({coinId:o,address:t});u(p===1?{desc:m("wallet_extension_airdrop_toast_claim_before_expire_new",{num:I,token:s,time:Q(h,{format:"yyyyMMddHHmmss",locale:n})}),closable:!1,showTonMessage:!0}:null)},[o,t]),y=se("wallet-asset",{onError:()=>{r===M&&T.current?.showTonMessage&&_()},pollingInterval:10*1e3});return(0,f.useEffect)(()=>{r===M&&o&&t&&_()},[r,o,t]),(0,f.useEffect)(()=>{let p=y?.data?.coinId;T.current?.showTonMessage&&p===o&&_()},[o,y]),i}function So(e,t){let n="isShowTonTipsAtCoinDetail",[o,r]=(0,f.useState)(null),s=S.get(n);return(0,f.useEffect)(()=>{!s&&t===te.MNEMONIC&&e?.coinId===M?r({desc:m("wallet_extension_alert_ton_asset"),onClose:()=>{S.set(n,!0),r(null)},closable:!0,showTonMessage:!0}):r(null)},[t,e?.coinId]),o}function he({canChangeDefaultAddress:e}){let t="firstTimeOpenDetailPage",n=(0,f.useRef)();return(0,f.useEffect)(()=>{let o=S.get(t)!==!1;!e||!n.current||!o||(S.set(t,!1),setTimeout(()=>{n.current?.setVisible(!0)},500),setTimeout(()=>{n.current?.setVisible(!1)},3500))},[e,n]),n}l();c();var d=g(x()),q=g(ie());l();c();var w={refreshWrapper:"_refreshWrapper_7eog8_1",refreshIcon:"_refreshIcon_7eog8_5",hidden:"_hidden_7eog8_11",amount:"_amount_7eog8_14",refreshAnimation:"_refreshAnimation_7eog8_33",refresh:"_refresh_7eog8_1"};var He={maxWidth:156,popupStyle:{borderRadius:4},modifiers:[{name:"offset",options:{offset:[86,-10]}},{name:"arrow",options:{padding:({popper:e})=>e.width/2}}]},Ve={14:36,15:32,16:32,17:28,18:28,19:24,20:24,21:24,22:20,23:20,24:20,25:20,26:18,27:18};function Ke({coinSymbol:e,amountDisplay:t,currencyDisplay:n,justify:o=C.ALIGN.center}){let[r,s]=(0,d.useState)("hidden"),i=(0,d.useMemo)(()=>{let y=t.length,p={};return p.fontSize=Ve[y]||40,y>=28&&(p={fontSize:18,display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer"}),p},[t]),u=()=>{s("hidden")},T=(0,d.useCallback)(()=>{r!=="loading"&&s("show")},[r]),_=(0,d.useCallback)(()=>{r!=="loading"&&s("hidden")},[r]);return d.default.createElement("div",{className:"coin-detail-balance"},d.default.createElement(C.FlexBox,{align:C.ALIGN.center,justify:o,style:i,onMouseEnter:T,onMouseLeave:_,className:w.refreshWrapper},d.default.createElement(C.Box,{onAnimationEnd:u,className:(0,q.default)(w.refreshWrapper,{[w.refreshAnimation]:r==="success"})},i.textOverflow?d.default.createElement(A,{layerClassName:"coin-detail-balance__tooltip",style:i,title:`${t} ${e}`,type:A.TYPES.neutral,placement:A.DIRECTION.bottom,...He},t):t,d.default.createElement(Ae,{className:(0,q.default)(w.refreshIcon,{[w.hidden]:r==="hidden"}),status:r,handleRefresh:s}))),n&&d.default.createElement(C.FlexBox,{align:C.ALIGN.center,justify:o},d.default.createElement("div",{className:"coin-detail-balance__currency"},n)))}var Ye=Ke;l();c();var a=g(x());z();De();function $e({addressLabel:e,address:t,addressType:n,isDefaultAddress:o,baseCoin:r={},coin:s={},canChangeDefaultAddress:i,openAddressesDialog:u}){let T=he({canChangeDefaultAddress:i}),[_,y]=W(),{isNotBackupWallet:p}=ye(),I=ge(),h=R.includes(s?.localType),G=Te(re),D=()=>{if(G({button_clicked:"copy_address"}),p){I();return}if(!_){y(t);let J=m("wallet_extension_overview_receive_address_copied");n&&(J=pe(m,n,r)),B.success({title:J,desc:a.default.createElement("div",{className:"coin-detail-address__copy-message"},t)})}},Ie=()=>p?a.default.createElement("span",{className:"new-coin-detail-address-content-black"},O(t)):h?a.default.createElement("span",null,t):a.default.createElement(a.default.Fragment,null,a.default.createElement("span",{className:"new-coin-detail-address-content-black"},t));return a.default.createElement("div",{className:"new-coin-detail-address-wrapper"},a.default.createElement("div",{className:"new-coin-detail-address",onClick:D},a.default.createElement("div",{className:"new-coin-detail-address-title","data-testid":P.COIN_DETAIL_PAGE.ADDRESS_TITLE},m("extension_wallet_address_text_network_address",{network:e}),o&&i&&a.default.createElement(E,{className:"new-coin-detail-address-tag",size:E.SIZE.sm,type:E.TYPE.rounded,color:E.COLOR.grey},m("wallet_extension_btc_tag_default_address"))),a.default.createElement("div",{className:"new-coin-detail-address-inner"},a.default.createElement("div",{className:"new-coin-detail-address-content","data-testid":P.COIN_DETAIL_PAGE.ADDRESS_CONTENT},Ie()),a.default.createElement("div",{className:"new-coin-detail-address__icon"},a.default.createElement(k,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px",color:p?"var(--okd-color-content-disabled)":"var(--okd-color-content-primary)"}})))),i&&a.default.createElement("div",{className:"new-coin-detail-address-wrapper__default-address"},a.default.createElement(A,{popupRef:T,placement:A.DIRECTION.topRight,title:m("wallet_extension_hover_change_address_format")},a.default.createElement("div",{onClick:()=>{G({button_clicked:"default_address"}),u()},className:"new-coin-detail-address-wrapper__address-content","data-testid":P.COIN_DETAIL_PAGE.SET_DEFAULT_ADDRESS_BUTTON},m("extension_wallet_settings_title_set_default"),a.default.createElement(k,{className:"okx-wallet-plugin-arrow-small-right coin-detail__body__overview-address__icon"})))))}var je=$e;l();c();var we=g(x()),Ne=g(ie());function Ze({className:e,children:t}){return we.default.createElement("div",{className:(0,Ne.default)("coin-detail-overview-container",e)},t)}var qe=Ze;l();c();l();c();var N=g(x());z();function Je({address:e}){let[t,n]=W();return N.default.createElement("div",{className:"coin-detail-address"},N.default.createElement("div",{className:"coin-detail-address__text",onClick:()=>{if(!t){n(e);let r=m("wallet_extension_overview_receive_address_copied");B.success({title:r,desc:N.default.createElement("div",{className:"coin-detail-address__copy-message"},e)})}}},O(e),N.default.createElement("div",{className:"coin-detail-address__icon"},N.default.createElement(k,{className:"okx-wallet-plugin-copy",style:{fontSize:"20px"}}))))}var Qe=Je;export{Qe as a,Ye as b,eo as c,oo as d,No as e,Io as f,xo as g,So as h,he as i,je as j,qe as k};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-PFAKNC74.js.map
