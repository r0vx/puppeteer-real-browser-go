import{a as ke}from"./chunk-QFS44FRB.js";import{P as Fe}from"./chunk-DA5RJYYW.js";import{f as Ce}from"./chunk-WO6OHGU2.js";import{a as R,e as Ie,g as we,k as ne,u as Ee}from"./chunk-3S4BGA37.js";import{Mb as K,T as pe,U as z,kb as de,lb as fe,mb as _e,md as I,nb as Te,ob as Se,pb as ge}from"./chunk-POP3LIKS.js";import{c}from"./chunk-PMRTKWFS.js";import{ca as T,m as N,y as re}from"./chunk-G44PPNNQ.js";import{a as Me}from"./chunk-532YJKK4.js";import{a as Le}from"./chunk-SIITVWZR.js";import{A as oe}from"./chunk-XR4SQWL7.js";import{ga as te,j as ue,ra as le}from"./chunk-CYTB2B6Q.js";import{b as E}from"./chunk-OL67KS7C.js";import{f as g,o as s,q as a}from"./chunk-SHG7TIBL.js";s();a();var G=g(E()),xe=g(Me());var Je=()=>{let e=(0,xe.useLocation)(),{search:t}=e,{needUpdate:o,type:r}=Ce(t);return(0,G.useMemo)(()=>({needUpdate:o===pe.on,type:r}),[o,r])},Q=e=>{let{quoteStore:t,facetStore:o}=c(),r=t?.quote?.bestRoute||{},{fromToken:i,toToken:n,fromTokenAmount:m,receiveAmount:u}=r,{computedFacetOrderTokens:l}=o;return(0,G.useMemo)(()=>e===z.REDEEM?l:{fromToken:{...i,amount:m},toToken:{...n,amount:u}},[e,i,m,n,u,l])},Oe=e=>{let{fromToken:t,toToken:o}=Q(e);return(0,G.useMemo)(()=>t.chainId!==o.chainId?[t,o]:[t],[t,o])},Ze=e=>{let{quoteStore:t,fromToStore:o,facetStore:r,walletContractStore:i,accountStore:{walletConfig:n,address:m},slippageStore:u}=c(),l=e===z.REDEEM,p=e===z.INTENT_SWAP,{fromToken:f,toToken:S}=Q(e),d=Oe(e),x=n?.walletId,{data:C}=i?.transactionPayload||{},{computedFacetOrderFromToRate:F,computedFacetOrderToFromRate:A,computedFacetOrderMinimumReceived:M}=r,{quote:b,computedIsUsingCentralizedBridge:h,enableQuoteAggregates:L}=t,O=b?.bestRoute?.bridge,k=t?.computedIsOfflineType,{name:P,logo:B,estimatedTime:W}=t?.quote?.bestRoute||{},{computedRate:q,computedToFromRate:U,computedIsBridge:H,computedIsEvmChain:Y,computedIsFromBtcCoin:$,computedIsCrossChain:v}=o,{computedMinimumReceived:X}=u;return(0,G.useMemo)(()=>{let ce={walletId:x,address:m,networks:d,data:C,fromToken:f,toToken:S};return l?{rate:F,toFromRate:A,minimumReceived:M,isFromBtcCoin:!1,isEvmChain:!0,hideExchangeBtn:!1,...ce}:{estimatedTime:(parseInt(W||0,10)/60).toFixed(0)??"--",isIntentBridge:k,computedIsCrossChain:v,rate:q,toFromRate:U,minimumReceived:X,isFromBtcCoin:$,hideExchangeBtn:H||h,isEvmChain:Y,isIntentSwap:p,bridge:O,enableQuoteAggregates:L,name:P,logo:B,...ce}},[x,m,d,C,l,q,U,X,$,H,Y,h,O,F,A,M,f,S,p,L,P,B,W,k,v])};function Pe(){return{[K.SWAP]:{image:{light:de(),dark:fe()},title:{text:I("swaptrade_top_segmentedctl_swap")}},[K.BRIDGE]:{image:{light:_e(),dark:Te()},title:{text:I("swaptrade_top_segmentedctl_bridge")}},[K.CLAIM]:{image:{light:Se(),dark:ge()},title:{text:I("commonall_modal_btn_claim")}}}}var et=(e="")=>{let{commonStore:t}=c(),{currentTab:o}=t,r=e||o;return(0,G.useMemo)(()=>Pe()[r],[r])};s();a();var ie=g(E());var se=(e,t,o)=>`${e}${re.mul(t||0,re.pow(10,o||0))}`,ae=e=>{let{useCoin:t}=T.hooks;return t(e?.chainId,e.isNativeToken?"":e.tokenContractAddress)},Be=()=>{let{fromToStore:e,gasDropStore:t}=c(),{to:o}=e,r=ae({chainId:o.chainId}),{computedGasDropSelected:i,gasDropConfig:n}=t||{},{gasDrop:m}=n||{};return(0,ie.useMemo)(()=>i?{coinId:r?.coinId,assetChange:se("+",m,r?.decimals),useMinPrecision:!1,displayEstimate:!1,desc:I("swaptrade_transfer_text_for_gas")}:null,[i,m,r])};function We(e){let{fromToken:t,toToken:o}=Q(e),r=Be(),i=ae(t),n=ae(o);return(0,ie.useMemo)(()=>({fromList:[{coinId:i?.coinId,assetChange:se("-",t?.amount,i?.decimals),useMinPrecision:!1}],toList:[{coinId:n?.coinId,assetChange:se("+",o?.amount,n?.decimals),useMinPrecision:!1},r].filter(Boolean)}),[i?.coinId,i?.decimals,t?.amount,n?.coinId,n?.decimals,o?.amount,r])}s();a();var ft={container:"_container_wvaui_1",loading:"_loading_wvaui_5",wrap:"_wrap_wvaui_10",scroll:"_scroll_wvaui_13"};s();a();var ve=g(E());var qe=e=>{let{walletContractStore:t}=c(),o=ke(e);return(0,ve.useEffect)(()=>{Ee(e)&&t.setNativeCoin(o)},[o,e]),{coin:o}},Ct=qe;s();a();var ee=g(E());s();a();var Ae=g(E());s();a();var V=g(E());le();var j=({estimatedGasFeeInt:e,maxGasFeeInt:t,decimals:o,isClaim:r=!1})=>{let{quoteStore:i}=c(),n=ue(i,"quote.bestRoute.bridge.estimateBridgeFeeAmount");return(0,V.useMemo)(()=>{let m=ne(t,o),u=ne(e,o);return n&&!r&&(u=R.add(u,n,{returnString:!0}),m=R.add(m,n,{returnString:!0})),{maxGasFee:m,estimatedGasFee:u}},[t,o,e,n,r])},J=e=>{let{walletContractStore:t}=c();(0,V.useEffect)(()=>{t.setGasFee(e)},[e])};var Ue=(e,t,o=!1)=>{let{useFeeDisplay:r}=T.hooks,{walletContractStore:i}=c(),{coinAmount:n,coinSymbol:m,estimatedGasFeeInt:u,maxGasFeeInt:l,decimals:p,loading:f}=r(e,{calldata:t}),{maxGasFee:S,estimatedGasFee:d}=j({maxGasFeeInt:l,estimatedGasFeeInt:u,decimals:p,isClaim:o});return J(S),(0,Ae.useEffect)(()=>{i.setGasFeeLoading(f)},[f,i]),{maxGasFee:S,estimatedGasFee:d,coinAmount:n,coinSymbol:m,feeLoading:f}},he=Ue;s();a();var D=g(E()),Ge=g(Le());s();a();var Ne={"network-fee-title":"_network-fee-title_16onq_1",networkFeeTitle:"_network-fee-title_16onq_1","tooltip-icon":"_tooltip-icon_16onq_4",tooltipIcon:"_tooltip-icon_16onq_4","gas-type":"_gas-type_16onq_8",gasType:"_gas-type_16onq_8"};var He=({chainName:e,coinSymbol:t,isClaim:o=!1})=>{let{quoteStore:r,commonStore:i,fromToStore:n}=c(),{currencyConversion:m,computedNowCurrencySymbol:u}=i,{computedIsCrossChain:l}=n,{estimateBridgeFeeAmount:p,estimateBridgeFeeAmountUsd:f}=r?.quote?.bestRoute?.bridge||{},S=(0,D.useMemo)(()=>l?I("swaptrade_intro_dialog_desc_cross_fee_notice",{value:I("swaptrade_modal_desc_crosschain_valuediff_variavle",{price:p?Ie(m(f).toString(),u):"--",fee:p?`${we(p)} ${t}`:"--"})}):I("swaptrade_extension_tooltip_mining_fee"),[t,l,u,m,p,f]),d=(0,D.useMemo)(()=>D.default.createElement("span",{className:(0,Ge.default)("font-12 content-contrast",{[Ne.networkFeeTitle]:!o})},I("swaptrade_history_card_text_destination_chain_fee",{chainName:e})),[e]);return o?d:D.default.createElement(oe,{rebirthPopper:!0,popupProps:{className:"text-center"},maxWidth:200,placement:oe.DIRECTION.topRight,title:S},d)},Z=N(He);var Ye=({chainId:e,transactionPayload:t,isClaim:o=!1})=>{let{NetworkFeeEnter:r,SectionWrap:i}=T.components,{estimatedGasFee:n,feeLoading:m,coinSymbol:u}=he(e,t,o),{walletContractStore:l}=c(),{nativeCoin:p}=l;return ee.default.createElement(i,null,ee.default.createElement(r,{title:ee.default.createElement(Z,{chainName:p?.chainName,coinSymbol:u,isClaim:o}),coinId:p?.coinId,loading:m,networkFee:n,useMinPrecision:!1}))},so=N(Ye);s();a();var w=g(E());le();s();a();var me=g(E());s();a();s();a();var y={SLOW:"SLOW",MODERATE:"MODERATE",FAST:"FAST",CUSTOM:"CUSTOM"},De={[y.SLOW]:"slow",[y.MODERATE]:"standard",[y.FAST]:"fast",[y.CUSTOM]:"custom"};var $e=()=>({initialGasType:De[y.MODERATE]}),ye=$e;var Xe=(e,t,o,r=!1)=>{let{useFeeDisplay:i}=T.hooks,{walletContractStore:n}=c(),m=ye(),u=i(t,{gasInfo:e,calldata:o}),{coinAmount:l,coinSymbol:p,estimatedGasFeeInt:f,maxGasFeeInt:S,decimals:d,loading:x,error:C}=u,{maxGasFee:F,estimatedGasFee:A}=j({maxGasFeeInt:S,estimatedGasFeeInt:f,decimals:d,isClaim:r});return J(F),(0,me.useEffect)(()=>{n.setGasFeeLoading(x)},[x,n]),(0,me.useEffect)(()=>{n.setGasLimitError(C)},[C,n]),{txInitGasInfo:m,coinAmount:l,coinSymbol:p,maxGasFee:F,estimatedGasFee:A,gasType:e.gasType,feeLoading:u.loading,error:C}},be=Xe;s();a();var Re=e=>R.div(e,10**18).toString();var ze=({chainId:e,transactionPayload:t,isClaim:o=!1})=>{let{EthereumNetworkFee:r,NetworkFeeEnter:i,SectionWrap:n}=T.components,{useGasReturnActivity:m}=T.hooks,[u,l]=(0,w.useState)(!1),{walletContractStore:p,accountStore:f,mevStore:S}=c(),{gasInfo:d,setGasInfo:x,nativeCoin:C,setActivityId:F}=p,{computedIsMevOpen:A,mevInfo:M}=S,{to:b,from:h,data:L,value:O}=t||{},{coinId:k,chainName:P}=C||{},{txInitGasInfo:B,coinSymbol:W,gasType:q,estimatedGasFee:U,maxGasFee:H,feeLoading:Y,error:$}=be(d,e,t,o),v=m({coinId:k,fromAddress:te(h),toAddress:te(b),unavailable:d.gasType==="custom",disabled:!b||!h||!k,gasInfo:d,txType:2,fee:Re(d.networkFee||0)}),X=()=>{l(!1)};return(0,w.useEffect)(()=>{F(v?.activityId)},[v,F]),w.default.createElement(w.default.Fragment,null,w.default.createElement(n,null,w.default.createElement(i,{level:q,title:w.default.createElement(Z,{chainName:P,coinSymbol:W,isClaim:o}),coinId:k,loading:Y,networkFee:U,maxNetworkFee:H,gasReturn:v,estimateFailed:$,onClick:()=>{Fe({wallet_address:f.address,button_name:"network_fee"}),l(!0)},useMinPrecision:!1})),k&&w.default.createElement(r,{visible:u,coinId:k,address:h,inputData:L,tokenAddress:b,value:O,onBack:X,onClose:T.goHome,onGasChange:x,initialGasData:B,gasReturn:v,isMev:A,mevInfo:M}))},Lo=N(ze);export{Je as a,Q as b,Ze as c,et as d,Ct as e,Z as f,j as g,J as h,so as i,Lo as j,se as k,ae as l,We as m,ft as n};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-2A7WGNL6.js.map
