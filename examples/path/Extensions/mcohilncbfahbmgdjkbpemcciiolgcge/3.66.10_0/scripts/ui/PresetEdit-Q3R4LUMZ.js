import{a as xe,b as Te}from"./chunk-2RVMKQ5T.js";import{a as Se}from"./chunk-YLSPSQBP.js";import{b as be,d as Ee,e as Ne}from"./chunk-GNHSHFPF.js";import{a as he}from"./chunk-LJ45SM6Y.js";import"./chunk-ISKH54SW.js";import{a as Me}from"./chunk-UQXHDDOL.js";import{a as ye}from"./chunk-SANB6W4R.js";import{b as K}from"./chunk-2Q6HA5LZ.js";import{c as ge,e as ve}from"./chunk-MGI4EYIY.js";import{a as de}from"./chunk-UZCYU4C6.js";import"./chunk-HHY4FPQP.js";import{a as j,j as fe,l as _e}from"./chunk-4JPAA6SR.js";import{f as _,g as B}from"./chunk-3VKPY2QL.js";import{b as Z}from"./chunk-ULL77AIR.js";import"./chunk-ULXZERAJ.js";import{a as ce}from"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import"./chunk-ZTIVM5ML.js";import{a as z}from"./chunk-2E2OBQTS.js";import{a as P}from"./chunk-3S4BGA37.js";import{$a as pe,_a as ue,md as S}from"./chunk-POP3LIKS.js";import{m as le}from"./chunk-G44PPNNQ.js";import{a as Ct}from"./chunk-532YJKK4.js";import{a as q}from"./chunk-SIITVWZR.js";import{q as k}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import{I as D,j as O,ra as me}from"./chunk-CYTB2B6Q.js";import{ka as L}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as H}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-32ZJ4F2J.js";import{f as I,o as y,q as M}from"./chunk-SHG7TIBL.js";y();M();var a=I(H()),R=I(q());me();y();M();var N=I(H()),A=I(q());y();M();var E={root:"_root_1fcv2_1",title:"_title_1fcv2_12","input-container":"_input-container_1fcv2_19",inputContainer:"_input-container_1fcv2_19",input:"_input_1fcv2_19","input-tag":"_input-tag_1fcv2_25",inputTag:"_input-tag_1fcv2_25","custom-input":"_custom-input_1fcv2_28",customInput:"_custom-input_1fcv2_28","inner-input":"_inner-input_1fcv2_28",innerInput:"_inner-input_1fcv2_28","error-input":"_error-input_1fcv2_36",errorInput:"_error-input_1fcv2_36","err-text":"_err-text_1fcv2_39",errText:"_err-text_1fcv2_39"};var wt=({className:e,amountList:o,setAmountList:n,currentMode:t,currency:i,decimals:u,placeholderRef:m})=>{let l=(0,N.useMemo)(()=>t==="sell"?S("swaptrade_meme_input_label_sell_amount"):S("swaptrade_meme_input_label_pay_amount",{token:i}),[t,i]),[f,g]=(0,N.useMemo)(()=>t==="sell"?[!0,2]:[!1,u],[t,u]),r=(s,c)=>{if(f&&P.gt(s,100))return;let d=o.map((p,h)=>h===c?s:p);n(d)},v=(0,N.useMemo)(()=>o.some(s=>P.eq(s,0)),[o]),T=()=>{m.current?.scrollIntoView({behavior:"smooth",block:"center"})};return N.default.createElement("div",{className:(0,A.default)(e,E.root)},N.default.createElement("div",{className:(0,A.default)(E.title)},l),N.default.createElement("div",{className:(0,A.default)("flex items-center",E.inputContainer)},o.map((s,c)=>N.default.createElement(k.Number,{key:c,value:s,size:k.SIZE.sm,symbol:f?"%":null,useReactTransition:!0,autoComplete:"off",spellCheck:"false",precision:g,enableMinus:!1,min:0,className:E.input,inputClassName:E.inputTag,innerClassName:(0,A.default)(E.customInput,E.innerInput,{[E.errorInput]:P.eq(s,0)}),onChange:d=>{r(d,c)},onFocus:T}))),v&&N.default.createElement("div",{className:(0,A.default)(E.errText)},S("swaptrade_meme_input_error_no_zero")))},Ce=wt;y();M();var C=I(H()),Y=I(q());y();M();var U={root:"_root_1vg59_1",title:"_title_1vg59_12",tips:"_tips_1vg59_19",input:"_input_1vg59_26","custom-input":"_custom-input_1vg59_26",customInput:"_custom-input_1vg59_26"};var It=({className:e,name:o,setName:n,disabled:t})=>{let i=g=>{let r=g.target.value;r.length>12&&(r=r.substring(0,12)),n(r)},[u,m]=(0,C.useState)(!1),l=(0,C.useMemo)(()=>String(o).length>=1&&u,[o,u]),{isSm:f}=de();return C.default.createElement("div",{className:(0,Y.default)(e,U.root)},C.default.createElement("div",{className:(0,Y.default)(U.title)},S("swaptrade_meme_input_label_preset_name")),C.default.createElement(k,{value:o,size:f?k.SIZE.lg:k.SIZE.sm,error:()=>String(o).length<1?S("swaptrade_meme_input_error_preset_name_empty"):null,innerClassName:(0,Y.default)(U.input,U.customInput),disabled:t,errorType:k.TIP_TYPE.always,onChange:i,onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}),l&&C.default.createElement("div",{className:U.tips},`${o.length}/12`))},we=It;y();M();var x=I(H()),Ie=I(Ct());me();function ke({currentMode:e,computeBuyDefaultPresetList:o,computedSellDefaultPresetList:n}){return(0,x.useMemo)(()=>e==="buy"?o:n,[e,o,n])}function De({isEdit:e,currentMode:o,savePresetFn:n,onClose:t,setConfirmText:i,setConfirmVisible:u}){let m=(0,Ie.useHistory)(),l=(0,x.useCallback)(()=>{n(),t?t():m.goBack()},[m,t,n]),f=(0,x.useCallback)(()=>{if(!e){let r=o==="buy",v=r?ue:pe,T=r?"swaptrade_meme_dialog_desc_buy_only":"swaptrade_meme_dialog_desc_sell_only";if(!z.get(v)){i(S(T)),u(!0),z.set(v,"1");return}}n(),t?t():m.goBack()},[e,o,t,n,i,u,m]);return[l,f]}function Pe({slippage:e,setSlippageMode:o,setSlippageUse:n,setSlippageError:t,setCustomMaxUse:i,setCustomMaxError:u,editPresetValue:m,setEditPreset:l,isEdit:f}){return(0,x.useCallback)(({mode:r,fixedData:v,dynamicData:T})=>{if(o(r),r===Z.FIXED){let{value:s,level:c,error:d}=v;n(s),t(d),l({isEdit:f,value:{...m,slippage:{...e,mode:r,value:s?B(s):"",type:c}}})}if(r===Z.DYNAMIC){let{customMax:s,error:c}=T;i(s),u(c),l({isEdit:f,value:{...m,slippage:{...e,mode:r,customMax:s?B(s):""}}})}},[m,f,u,i,t,o,n,e,l])}function Fe({setEditPreset:e,isEdit:o,editPresetValue:n,priorityFee:t,setPriorityFeeError:i,setLatestSelectFeeType:u}){return(0,x.useCallback)((l,f,g)=>{e({isEdit:o,value:{...n,priorityFee:{...t,value:f,type:l}}}),i(g),l!=="custom"&&u(l)},[n,o,t,e,u,i])}function Ae({setAmountListUsed:e,setEditPreset:o,isEdit:n,editPresetValue:t,currentMode:i}){return(0,x.useCallback)(m=>{e(m),o({isEdit:n,value:{...t,amountList:m.map(l=>i==="sell"?B(l):l)}})},[e,o,n,t,i])}function Ue({defaultPresetList:e,id:o,slippage:n,priorityFee:t,amountList:i,slippageError:u,priorityFeeError:m,customMaxError:l,name:f,mevModeStatus:g}){let r=(0,x.useMemo)(()=>e.find(c=>c.id===o)||null,[e,o]),v=(0,x.useMemo)(()=>r?D(r.slippage.value,n.value)&&D(r.slippage.type,n.type)&&D(r.priorityFee.type,t.type)&&D(r.amountList,i)&&D(r.slippage.mode,n.mode)&&D(r.slippage.customMax,n.customMax):!0,[r,n,t,i]),T=(0,x.useMemo)(()=>u||m||l||f.length===0||i.some(c=>P.eq(c,0))||g===6,[u,m,l,f,i,g]),s=(0,x.useMemo)(()=>o?.includes(fe),[o]);return[r,v,T,s]}function Oe({newPreset:e,setSlippageUse:o,setSlippageMode:n,setCustomMaxUse:t,setPriorityFeeError:i,setSlippageError:u,setCustomMaxError:m,currentMode:l,setAmountListUsed:f,setEditPreset:g,isEdit:r,editPresetValue:v,slippage:T,priorityFee:s}){return(0,x.useCallback)(()=>{if(e){o(_(e.slippage.value)),n(e.slippage.mode),t(_(e.slippage.customMax)),i(!1),u(!1),m(!1);let d=e.amountList.map(p=>l==="sell"?_(p):p);f(d),g({isEdit:r,value:{...v,slippage:{...T,value:e.slippage.value,type:e.slippage.type,mode:e.slippage.mode,customMax:e.slippage.customMax},priorityFee:{...s,value:e.priorityFee.value,type:e.priorityFee.type},amountList:e.amountList}})}},[e,o,n,t,i,u,m,l,f,g,r,v,T,s])}y();M();var w={root:"_root_wwkuh_1",name:"_name_wwkuh_7",mev:"_mev_wwkuh_8",slippage:"_slippage_wwkuh_9",priority:"_priority_wwkuh_10",amount:"_amount_wwkuh_11",btns:"_btns_wwkuh_14","no-bg":"_no-bg_wwkuh_23",noBg:"_no-bg_wwkuh_23","placeholder-tg":"_placeholder-tg_wwkuh_26",placeholderTg:"_placeholder-tg_wwkuh_26"};var kt=le(({onClose:e})=>{let{configStore:o,quoteStore:n}=K(),{currentMode:t,computedConfig:i,tradeScene:u}=o,{mevUnstableShowLevel:m,jitoIsSuccess:l}=n,f=O(i,"nativeTokenInfo.decimals",0),g=O(i,"mevPriceThreshold"),r=O(i,"nativeTokenInfo.chainName"),{chainSymbol:v}=Me(),{editPreset:T,setEditPreset:s}=be(),{value:c,isEdit:d}=T,{slippage:p,priorityFee:h,name:G,amountList:X,id:He,priorityMode:Be,manualType:Ye}={..._e,...c},{savePresetFn:Re}=Ee(),[qe,V]=(0,a.useState)(!1),[ze,W]=(0,a.useState)(!1),[Ze,$]=(0,a.useState)(!1),[J,je]=(0,a.useState)(Be),[Q,Ke]=(0,a.useState)(Ye),Ge=he({priorityMode:J,manualType:Q,jitoIsSuccess:l,mevUnstableShowLevel:m}),Xe={low:_(p.config.low),medium:_(p.config.medium),high:_(p.config.high)},ee=_(p.min),te=_(p.max),Ve=_(p.dynamicMax),We=_(p.dynamicMin),$e=_(p.recommendMax),Je=_(p.recommendMin),Qe=b=>Te({value:b,min:ee,max:te,level:p.type}),[et,oe]=(0,a.useState)(_(p?.value)),[tt,ne]=(0,a.useState)(p.mode),[ot,re]=(0,a.useState)(_(p.customMax)),[nt,rt]=(0,a.useState)(h.type!==j.CUSTOM?h.type:j.MARKET),{getTokenAmount:st,getUsd:it}=Se(K),{computeBuyDefaultPresetList:at,computedSellDefaultPresetList:mt}=ye(),lt=ke({currentMode:t,computeBuyDefaultPresetList:at,computedSellDefaultPresetList:mt}),[ut,pt]=(0,a.useState)(!1),[ct,ft]=(0,a.useState)(""),[_t,dt]=De({isEdit:d,currentMode:t,savePresetFn:Re,onClose:e,setConfirmText:ft,setConfirmVisible:pt}),gt=b=>{s({isEdit:d,value:{...c,name:b}})},vt=b=>{je(b),s({isEdit:d,value:{...c,priorityMode:b}})},yt=b=>{Ke(b),s({isEdit:d,value:{...c,manualType:b}})},Mt=Pe({slippage:p,setSlippageMode:ne,setSlippageUse:oe,setSlippageError:V,setCustomMaxUse:re,setCustomMaxError:$,editPresetValue:c,setEditPreset:s,isEdit:d}),ht=Fe({setEditPreset:s,editPresetValue:c,isEdit:d,setPriorityFeeError:W,setLatestSelectFeeType:rt,priorityFee:h}),[St,se]=(0,a.useState)(X.map(b=>t==="sell"?Number(_(b)):b)),xt=Ae({setAmountListUsed:se,setEditPreset:s,isEdit:d,editPresetValue:c,currentMode:t}),[Tt,bt,Et,ie]=Ue({defaultPresetList:lt,id:He,slippage:p,priorityFee:h,amountList:X,slippageError:qe,priorityFeeError:ze,customMaxError:Ze,name:G,mevModeStatus:Ge}),Nt=Oe({newPreset:Tt,setSlippageUse:oe,setSlippageMode:ne,setCustomMaxUse:re,setPriorityFeeError:W,setSlippageError:V,setCustomMaxError:$,currentMode:t,setAmountListUsed:se,setEditPreset:s,isEdit:d,editPresetValue:c,slippage:p,priorityFee:h}),ae=(0,a.useRef)(null),Lt=ce();return a.default.createElement("div",{className:(0,R.default)(w.root)},a.default.createElement(we,{className:w.name,name:G,setName:gt,disabled:ie}),u===0&&a.default.createElement(xe,{className:w.mev,priorityMode:J,setMode:vt,manualType:Q,setManualType:yt,mevUnstableShowLevel:m,jitoIsSuccess:l,mevPriceThreshold:g,chainName:r}),a.default.createElement(ve,{className:w.slippage,mode:tt,fixedData:{value:et,level:p.type,levelMap:Xe,min:ee,max:te,validator:Qe},dynamicData:{showDynamicSlippage:!1,dynamicSlippage:"",supportCustomMax:p.supportCustomMax,customMax:ot,dynamicMax:Ve,dynamicMin:We,recommendMax:$e,recommendMin:Je},onChange:Mt}),a.default.createElement(ge.SelectMode,{className:w.priority,fee:h?.value,type:h?.type,feeMap:h.config,max:h?.max,currency:v,onChange:ht,recommendMaxValue:h?.recommendMaxValue,recommendMinValue:h?.recommendMinValue,latestSelectType:nt,getTokenAmount:st,getUsd:it,tradeScene:u}),a.default.createElement(Ce,{className:w.amount,amountList:St,setAmountList:xt,currency:v,currentMode:t,decimals:f,placeholderRef:ae}),a.default.createElement("div",{className:(0,R.default)({[w.placeholderTg]:Lt}),ref:ae}),a.default.createElement("div",{className:(0,R.default)("flex justify-between",w.btns)},ie&&a.default.createElement(L,{className:"flex-1",category:L.CATEGORY.outline,type:L.TYPE.primary,size:L.SIZE.lg,block:!0,disabled:bt,onClick:Nt},S("swaptrade_general_btn_reset")),a.default.createElement(L,{className:"flex-1",category:L.CATEGORY.fill,type:L.TYPE.primary,disabled:Et,size:L.SIZE.lg,block:!0,onClick:dt},S("swaptrade_dialog_btn_confirm"))),a.default.createElement(Ne,{onConfirm:_t,visible:ut,showChecked:!1,text:ct,confirmText:S("commonall_text_btn_ok_active")}))}),Xo=kt;export{Xo as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=PresetEdit-Q3R4LUMZ.js.map
