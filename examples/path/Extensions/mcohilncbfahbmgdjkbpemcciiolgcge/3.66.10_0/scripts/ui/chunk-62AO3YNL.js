import{g as Pe}from"./chunk-QJYNTF2A.js";import{a as Ge}from"./chunk-C6HPT3PU.js";import{a as ge,d as Te}from"./chunk-Y6T5M4AD.js";import{b as oe,c as se,g as re,j as ae,v as ne}from"./chunk-XUTIJBNA.js";import{f as X}from"./chunk-Q6REWZWR.js";import{b as ee}from"./chunk-FKISPHB5.js";import{b as J}from"./chunk-5QHVWW7O.js";import{e as R}from"./chunk-636UWIUZ.js";import{b as Q,i as te,m as me,o as le,q as pe,t as fe,u as de,w as he}from"./chunk-KDVER5QK.js";import{a as ce}from"./chunk-5CHE7P4E.js";import{b as ue}from"./chunk-67F2WFQO.js";import{o as Z}from"./chunk-XP3TNE3R.js";import{Kb as Y,jc as ie}from"./chunk-QRHYK2TW.js";import{_ as V}from"./chunk-4EIUGT5A.js";import{$ as O,J as K,L as $,V as k,X as N,Y as q,ba as j,ga as z,ia as I}from"./chunk-QHXUL3YM.js";import{H as U,n as W,y as C}from"./chunk-MOTAOJVG.js";import{q as _}from"./chunk-XR4SQWL7.js";import{I as H,ra as Ee}from"./chunk-CYTB2B6Q.js";import{b as x}from"./chunk-OL67KS7C.js";import{f as G,o as u,q as l}from"./chunk-SHG7TIBL.js";u();l();var Ce=G(x()),g=G(ie());u();l();I();U();function ye(t,{symbol:e,decimals:r}={}){let o;return t=z(j(t,r||18)),t==="0"?o="0":o=W.thousandFormat(t),e&&(o+=` ${e}`),o}I();function Ze(t){let e=t?.isSupportEip1559?t?.maxFeePerGas||0:t?.gasPrice||0,r=t?.gasLimit||0;return ge(O,q)(e,r)}function Je(t){let e=le(),{symbol:r,usdToThisRate:o}=(0,g.useSelector)(Y),n=K(e?.price,o),a=ye(t,{symbol:e?.symbol,decimals:e?.decimals}),m=Te({amount:t,rate:n,symbol:r},{useApproximate:!0});return`${a} ${m}`}function Qe(){let t=ue(),e=(0,g.useSelector)(se),r=(0,g.useSelector)(re),o=(0,g.useSelector)(ae),n=(0,g.useSelector)(oe),{setGasType:a,chainGasLevels:m,currentGasInfo:p,setCustomGasOption:c,chainGasLoading:f,chainGasLoadFailed:T,chainGasPriceLoading:b,chainGasLimitLoading:P,chainGasPriceLoadFailed:y,chainGasLimitLoadFailed:d}=X({to:e,from:t,value:r,data:o,tokenAddress:n});return{setGasType:a,chainGasLevels:m,currentGasInfo:p,setCustomGasOption:c,chainGasLoading:f,chainGasLoadFailed:T,chainGasPriceLoading:b,chainGasLimitLoading:P,chainGasPriceLoadFailed:y,chainGasLimitLoadFailed:d}}function Re(){let t=(0,g.useDispatch)(),{loadingNonce:e,nonce:r,suggestedNonce:o,request:n}=Pe();return(0,Ce.useEffect)(()=>{t(ne(o))},[o]),{loadingNonce:e,nonce:r,suggestedNonce:o,request:n}}u();l();var w=G(x()),E=G(ie()),_e=G(Z());var Le={mainTokens:[],chainTokens:[]},Ae=(t,e)=>{let r=(0,w.useRef)(Le),o=(0,E.useDispatch)(),n=(0,E.useSelector)(ee),a=fe(e),m=pe(e),p=ce(),c=t||p,f=()=>{let{chainTokens:T}=r.current;T.forEach(async({rpcUrl:b,chainId:P,account:y,address:d})=>{if(c!==y)return;let A=await m(d,y,d?null:await Q(b));o(te({chainId:P,account:y,address:d,balance:A}))})};(0,w.useEffect)(()=>{r.current=a},[a]),(0,_e.useUpdateEffect)(()=>{n!==0&&f()},[n])},it=Ae;u();l();var s=G(x()),be=G(Z());U();I();u();l();var L={customInput:"_customInput_1jr5r_1"};var De=({isSupportEip1559:t,baseFeePerGas:e,setBaseFeePerGas:r,maxPriorityFeePerGas:o,setMaxPriorityFeePerGas:n,gasLimit:a,setGasLimit:m,gasPrice:p,setGasPrice:c,chainGasLimitLoadFailed:f})=>s.default.createElement(s.default.Fragment,null,t?s.default.createElement(s.default.Fragment,null,s.default.createElement(_.Number,{title:C("extension_wallet_transaction_text_maxbase_fee"),enableMinus:!1,precision:9,value:e,onChange:r,className:L.customInput}),s.default.createElement(_.Number,{title:C("extension_wallet_transaction_text_priority_fee"),enableMinus:!1,precision:9,value:o,onChange:n,className:L.customInput})):s.default.createElement(_.Number,{title:C("wallet_transfer_gasfee_subtitle_gas_price"),enableMinus:!1,precision:9,value:p,onChange:c,className:L.customInput}),s.default.createElement(_.Number,{title:C("wallet_transfer_gasfee_subtitle_custom_gas_limit"),errorType:_.TIP_TYPE.always,error:f&&C("developer_mode_send_input_gaslimit_failure"),enableMinus:!1,precision:0,value:a,onChange:m}));function Ie({onBack:t,rpcInfo:e={},setGasType:r,visible:o,currentGasInfo:n={},chainGasLevels:a=[],setCustomGasOption:m,chainGasLimitLoadFailed:p=!1}){let c=(0,s.useMemo)(()=>a.find(({typeKey:i})=>i===V.CUSTOM)||{},[a]),{isSupportEip1559:f}=c,[T,b]=(0,s.useState)(c.gasLimit),[P,y]=(0,s.useState)(N(c.gasPrice)),[d,A]=(0,s.useState)(N(c.maxPriorityFeePerGas)),[D,xe]=(0,s.useState)(N(c.baseFeePerGas)),h=(0,s.useMemo)(()=>{let i={gasLimit:T};return f?(i.baseFeePerGas=k(D),i.maxPriorityFeePerGas=k(d),i.maxFeePerGas=$(i.baseFeePerGas,i.maxPriorityFeePerGas)):i.gasPrice=k(P),{...c,...i}},[T,P,D,c,f,d]),[M,ke,Ne]=J(e.chainId),S=(0,s.useMemo)(()=>{let i=!Number(h.gasPrice);return h.isSupportEip1559&&(i=!Number(h.maxPriorityFeePerGas)),i||!Number(h.gasLimit)},[h]),v=(0,be.useMemoizedFn)(async i=>{let B={...h};delete B.getLimit,m(h),r(h.typeKey),i?await ke(B):Ne(e?.chainId)}),we=(0,s.useMemo)(()=>({useDefaultGas:!!M,...c,estimatedTime:"",canConfirm:!S,onConfirm:v,chainName:e.name}),[M,e.name,S,c,v]);return s.default.createElement(Ge,{onBack:t,visible:o,supportDefaultGas:!0,feeDataList:a,feeType:n?.typeKey,onChange:i=>{r(i.typeKey)},custom:{...we,components:s.default.createElement(De,{isSupportEip1559:f,baseFeePerGas:D,setBaseFeePerGas:xe,maxPriorityFeePerGas:d,setMaxPriorityFeePerGas:A,gasLimit:T,setGasLimit:b,gasPrice:P,setGasPrice:y,chainGasLimitLoadFailed:p})}})}var Ft=s.default.memo(Ie);u();l();var Fe=G(x());Ee();var Dt=()=>{let t=de(),e=he(),{rpcNetworks:r=[]}=R(),o=me(()=>r,r,(n,a)=>!H(n,a));Fe.default.useEffect(()=>{let n=e?.reduce((a,{walletIdentities:m})=>[...a,...m.map(({account:{mainnet:p}})=>p)],[]);o.forEach(async a=>{n.forEach(m=>{let p=a.chainId;t(p,void 0,{...a,account:m})})})},[e,o])};export{ye as a,Ze as b,Je as c,Qe as d,Re as e,it as f,Ft as g,Dt as h};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-62AO3YNL.js.map
