import{a as nn}from"./chunk-3WSZFDH4.js";import{a as en}from"./chunk-WWBMCUD5.js";import{a as tn}from"./chunk-7SQRZDWM.js";import{a as De,b as on}from"./chunk-HRUNWJWV.js";import"./chunk-Q5M243XX.js";import{a as rn}from"./chunk-PETUQAWU.js";import"./chunk-JRNVHROF.js";import"./chunk-OMNHCLSU.js";import{a as Ro}from"./chunk-VY37IS5A.js";import{a as Zo}from"./chunk-DGIWAYI5.js";import"./chunk-HY7LAUD2.js";import"./chunk-C6HPT3PU.js";import"./chunk-ZZH7FUZX.js";import"./chunk-CQWP5UAS.js";import"./chunk-7FBDFG5E.js";import"./chunk-IK5VIKIS.js";import{a as $o,d as de}from"./chunk-Y6T5M4AD.js";import{e as Qo}from"./chunk-J3K74NCM.js";import"./chunk-UWCOP3B7.js";import"./chunk-6DUYAS7R.js";import{a as zo}from"./chunk-UFD2MUZI.js";import"./chunk-CEM2RCMY.js";import"./chunk-SKXNZFRN.js";import"./chunk-7X4DXTSI.js";import"./chunk-LURPYTXM.js";import{a as Wt,c as Ho,d as yt,e as Yo}from"./chunk-OADPFYBO.js";import"./chunk-CIEH2J25.js";import"./chunk-64LKONIY.js";import"./chunk-VVJ6BK3Q.js";import"./chunk-FUVVPSUI.js";import{B as _e,a as ce}from"./chunk-NKIUEXOA.js";import"./chunk-EP23RRSK.js";import{d as Ko,e as jo,f as Jo,h as qo}from"./chunk-4YDY4B6P.js";import"./chunk-CGFS6AE4.js";import"./chunk-DDT324RS.js";import"./chunk-2TQXMDYZ.js";import"./chunk-RNMISV22.js";import"./chunk-A267SEFJ.js";import"./chunk-VR7OPIR6.js";import{a as Xo}from"./chunk-4ZGOJDNI.js";import"./chunk-ZPQXBUKT.js";import"./chunk-35Y7QMWN.js";import"./chunk-VIT5MDY4.js";import"./chunk-RH6WPBEZ.js";import{a as kt}from"./chunk-TLCBIZ4W.js";import{r as Vo}from"./chunk-CDNJY7Z3.js";import{a as fe}from"./chunk-DBWXHHZT.js";import"./chunk-VVKAQ7K5.js";import{d as Mo,f as le,g as Uo}from"./chunk-7JSJY3SQ.js";import"./chunk-NWY3GPDX.js";import"./chunk-6JEFG7DQ.js";import"./chunk-B6YXJZUF.js";import"./chunk-4I2JSOYJ.js";import"./chunk-GTN3RCGH.js";import"./chunk-3VKPY2QL.js";import"./chunk-AOSRFQ4E.js";import"./chunk-ULL77AIR.js";import"./chunk-PJYSMRRW.js";import"./chunk-GKQQDLVP.js";import"./chunk-7YKP5374.js";import"./chunk-KGG7DXMS.js";import"./chunk-FGIHS4ZF.js";import"./chunk-U65R4NF3.js";import"./chunk-OTUJWRS5.js";import"./chunk-WIW5JVRP.js";import"./chunk-7CXUJS4C.js";import"./chunk-ULXZERAJ.js";import"./chunk-PJ5X5CUU.js";import"./chunk-TSVRDRPO.js";import"./chunk-PPTAKQQT.js";import"./chunk-IFQDHP3Z.js";import"./chunk-DA5RJYYW.js";import"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import"./chunk-ZTIVM5ML.js";import"./chunk-2E2OBQTS.js";import"./chunk-VICEBZ4G.js";import"./chunk-WO6OHGU2.js";import"./chunk-3S4BGA37.js";import"./chunk-POP3LIKS.js";import"./chunk-PMRTKWFS.js";import"./chunk-G44PPNNQ.js";import"./chunk-K2BSCLBF.js";import"./chunk-PZY7HRHV.js";import"./chunk-Z2L2F5M5.js";import"./chunk-IPLOJJIA.js";import"./chunk-RLPRDJ34.js";import"./chunk-2ASICJQL.js";import"./chunk-TQWSBAXG.js";import"./chunk-6JVCYB7O.js";import"./chunk-GR42TVIZ.js";import"./chunk-QMSSDBOR.js";import"./chunk-5RCFYEZ6.js";import"./chunk-5QHVWW7O.js";import"./chunk-5PDHABUQ.js";import"./chunk-B3SXRDEQ.js";import"./chunk-7HRNNJBX.js";import"./chunk-F6UVHIJV.js";import"./chunk-ZLJJZYPU.js";import"./chunk-5TNLDTW5.js";import"./chunk-36PYO4PJ.js";import{b as Ot,c as ko,d as Eo,e as Ee,f as W,g as F,h as st,i as it,j as ae,k as Do,l as Ft,m as se,n as Lo}from"./chunk-H5EE6AS6.js";import"./chunk-34JXWTF5.js";import{e as Bo}from"./chunk-JSOLAK4X.js";import"./chunk-R7LZSAVU.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import{j as me}from"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-YGIVEMKT.js";import"./chunk-T4RFDN7D.js";import{oa as Fo}from"./chunk-NQAVUB4Q.js";import{a as Oo}from"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import"./chunk-5A3RJQCM.js";import{a as wt,c as Po}from"./chunk-73HPZW2B.js";import"./chunk-LQBCLW7R.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-MKDQBVRZ.js";import"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-7C7MBE2C.js";import"./chunk-KJWX5V23.js";import"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import"./chunk-QYDRYMWS.js";import"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3C5KK.js";import"./chunk-XZE3L7K7.js";import{k as St}from"./chunk-BO5YOOQA.js";import{a as Wo}from"./chunk-Y5K5NJ6U.js";import"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import{a as lt}from"./chunk-Q7FGM7BT.js";import"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{a as H,o as ne,p as re}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import{a as oe}from"./chunk-WGVA2GGS.js";import{a as Pr}from"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as at}from"./chunk-XP3TNE3R.js";import{C as Q,F as ho,Fb as bo,H as te,Ib as It,Kb as ee,U as To,da as vo,ea as Co,fa as Ao,gb as ke,jc as E,la as Io,pa as Pe,zb as At}from"./chunk-QRHYK2TW.js";import"./chunk-PODZSVO7.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as mt}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import{c as So,e as Fr}from"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import{a as bt,b as R}from"./chunk-2FDQIA7D.js";import"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import"./chunk-YCFHPQAJ.js";import{$ as No,_ as yo,e as xo,n as go,s as wo,u as gt}from"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import{a as ie}from"./chunk-VL2YBSHB.js";import{d as Pt}from"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as Go}from"./chunk-62ZAND24.js";import{a as tt}from"./chunk-SIITVWZR.js";import{Bb as ao,Cb as so,Eb as io,Gd as _o,Id as po,J as nt,Jb as mo,K as Kt,Kd as uo,L as jt,Ld as Ct,Ma as Bt,Na as no,Nd as X,Oc as fo,P as be,Pd as Qt,Q as qe,R as Xe,U as Qe,Y as Gt,_ as Re,_d as rt,fb as ro,fd as co,ga as to,ia as q,ib as br,mc as lo,od as qt,oe as Rt,zd as Xt}from"./chunk-QHXUL3YM.js";import{H as Y,n as Je,y as i}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{A as Fe,G as O,d as Jt,q as xt}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-NNUMMJQC.js";import"./chunk-Z3JMRMVO.js";import"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as eo,fa as oo,ka as v}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as I}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-D2YP6KBJ.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-S5ACFHVS.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as m,o as a,q as s}from"./chunk-SHG7TIBL.js";a();s();var ve=m(I()),Tt=m(mt()),pr=m(at());var ur=m(E());a();s();var Ht=m(I()),wn=m(E()),yn=m(mt()),Nn=m(at());Y();a();s();var Ut=m(I()),an=m(E());a();s();var Mt={"metax-send-nft-page":"_metax-send-nft-page_1fw24_1",metaxSendNftPage:"_metax-send-nft-page_1fw24_1","metax-send-nft-page-content":"_metax-send-nft-page-content_1fw24_9",metaxSendNftPageContent:"_metax-send-nft-page-content_1fw24_9","metax-send-nft-page-content-main":"_metax-send-nft-page-content-main_1fw24_17",metaxSendNftPageContentMain:"_metax-send-nft-page-content-main_1fw24_17"};var kr=({title:t="",children:e,onBack:o=null,onClose:n=null,nav:r=null,loading:l,pageName:c})=>{let f=(0,an.useSelector)(F);return Ut.default.createElement(Go.Container,{loading:l,className:`${Mt.metaxSendNftPage} main-container ${c==="confirmDetail"&&f?.chain==0?"metax-send-btc-page":""}`},!r&&Ut.default.createElement(Wo,{title:t,onClose:n,onBack:o,closeable:!!n,className:c==="confirmDetail"&&f?.chain==0?"metax-send-btc-page-nav":""}),r,Ut.default.createElement("div",{className:`${Mt.metaxSendNftPageContent} ${c==="confirmDetail"&&f?.chain==0?Mt.metaxSendBtcContent:""}`},f&&Ut.default.createElement("div",{className:Mt.metaxSendNftPageContentMain},e)))},pe=kr;a();s();var V=m(I()),ue=m(E()),Ge=m(at());Y();a();s();Qt();var sn=async(t,e,o)=>{let n="",{coinId:r,baseCoinId:l}=o;return t?((r===Ct||l===Ct)&&!await jo(t)||(te({coinId:r})||te({coinId:l}))&&!(await Jo(t)).isValid||(r===X||l===X)&&!await Ko(t)||o.coinId!==Ct&&o.coinId!==X&&!te(o)&&!qo(t,{allowNonPrefixed:!1}))&&(n="wallet_manage_crypto_errortip_invalid_address_tips"):n="wallet_transfer_errortip_receive_address_empty",n},mn=({amount:t,balance:e,t:o})=>t==="0"?o("wallet_extension_nft_toast_input_amount_no0"):t?t>e?o("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:e}):"":o("wallet_extension_nft_toast_input_transfer_amount");a();s();var B=m(I()),pn=m(mt()),un=m(tt());Y();a();s();var Le=m(I());var Er=({disabled:t=!1,buttonText:e,nextJump:o=()=>{}})=>{let n=()=>{t||o&&o()};return Le.default.createElement(lt.FooterActions,{usePortal:!0},Le.default.createElement(v,{block:!0,category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,onClick:n,disabled:t},e))},ln=Er;a();s();var M={"metax-send-nft-form--hidden":"_metax-send-nft-form--hidden_od7wm_1",metaxSendNftFormHidden:"_metax-send-nft-form--hidden_od7wm_1","metax-send-nft-form__alert":"_metax-send-nft-form__alert_od7wm_4",metaxSendNftFormAlert:"_metax-send-nft-form__alert_od7wm_4","metax-send-nft-form__row":"_metax-send-nft-form__row_od7wm_7",metaxSendNftFormRow:"_metax-send-nft-form__row_od7wm_7","metax-send-nft-form__row__max":"_metax-send-nft-form__row__max_od7wm_10",metaxSendNftFormRowMax:"_metax-send-nft-form__row__max_od7wm_10","metax-send-nft-form__row__tip":"_metax-send-nft-form__row__tip_od7wm_16",metaxSendNftFormRowTip:"_metax-send-nft-form__row__tip_od7wm_16","metax-send-nft-form__row__max-amount":"_metax-send-nft-form__row__max-amount_od7wm_23",metaxSendNftFormRowMaxAmount:"_metax-send-nft-form__row__max-amount_od7wm_23","metax-send-nft-form__row__btn-max":"_metax-send-nft-form__row__btn-max_od7wm_29",metaxSendNftFormRowBtnMax:"_metax-send-nft-form__row__btn-max_od7wm_29","metax-send-nft-form__row__content":"_metax-send-nft-form__row__content_od7wm_42",metaxSendNftFormRowContent:"_metax-send-nft-form__row__content_od7wm_42","metax-send-nft-form__row__content--pointer":"_metax-send-nft-form__row__content--pointer_od7wm_51",metaxSendNftFormRowContentPointer:"_metax-send-nft-form__row__content--pointer_od7wm_51","metax-send-nft-form__row__content__title":"_metax-send-nft-form__row__content__title_od7wm_55",metaxSendNftFormRowContentTitle:"_metax-send-nft-form__row__content__title_od7wm_55","metax-send-nft-form__row__content__center":"_metax-send-nft-form__row__content__center_od7wm_60",metaxSendNftFormRowContentCenter:"_metax-send-nft-form__row__content__center_od7wm_60","metax-send-nft-form__row__content__narrow":"_metax-send-nft-form__row__content__narrow_od7wm_70",metaxSendNftFormRowContentNarrow:"_metax-send-nft-form__row__content__narrow_od7wm_70","metax-send-nft-form__waring__tips":"_metax-send-nft-form__waring__tips_od7wm_75",metaxSendNftFormWaringTips:"_metax-send-nft-form__waring__tips_od7wm_75"};a();s();var fn=m(I()),cn=m(E()),_n=m(at());qt();no();mo();var Dr=0,Lr=()=>{let{chain:t,tokenId:e,accountAddress:o,tokenStandard:n}=(0,cn.useSelector)(F),{loading:r,data:l,error:c}=(0,_n.useRequest)(async()=>{let _={chain:t,walletAddress:o,inscriptionIds:[e],tokenStandard:Po[n]},{data:d}=await io(Bt.postBtcNftStatus,_);return d?.assetStatusList||[]},{ready:t===Dr&&[wt.Ordinals,wt.ATOMICAL].includes(n)||t===co&&[wt.FractalOrdinals].includes(n)}),f=(0,fn.useMemo)(()=>[wt.ATOMICAL,wt.Ordinals,wt.FractalOrdinals].includes(n)&&l?.some(({unavailable:_})=>Number(_)===1)?1:0,[l,n]);return[r,f,c]},dn=Lr;var Gr=({nftBalance:t,nftInfo:e,amount:o,toAddress:n="",toError:r,amountError:l,onAmountChange:c,onToAddressChange:f,showAmount:_,onLoadingChange:d,tipMessage:y})=>{let[p,h,T]=dn(),N=(0,pn.useHistory)(),k=()=>{N.replace(re)};(0,B.useEffect)(()=>{d?.(p)},[p]);let S=(0,B.useMemo)(()=>T?i("extension_wallet_header_alert_nft_check_error"):h===1?i("extension_wallet_header_alert_utxo_limit_arc"):null,[T,h]);return B.default.createElement("div",{className:(0,un.default)(M["metax-send-nft-form"])},(h||T)&&B.default.createElement(Jt,{closable:!1,type:T?Jt.TYPE.error:Jt.TYPE.warn,className:M["metax-send-nft-form__alert"],title:S}),B.default.createElement("div",{className:M["metax-send-nft-form__row"]},B.default.createElement(xt.TextArea,{className:M["metax-send-nft-form__address"],inputClassName:M["metax-send-nft-form__address-input"],placeholder:i("wallet_extension_transaction_placeholder_input_address",{},{useBr:!1}),label:i("wallet_transfer_subtitle_receive_address"),value:n,error:r?i(r):"",disabled:!!h||p,size:xt.SIZE.xl,errorType:xt.TIP_TYPE.always,onChange:f,tips:y||i("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),_&&B.default.createElement("div",{className:M["metax-send-nft-form__row"]},B.default.createElement(xt.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:i("wallet_contract_interactiom_subtitle_amount"),size:xt.SIZE.xl,precision:0,enableMinus:!1,value:o,error:l||"",errorType:xt.TIP_TYPE.always,onChange:c}),B.default.createElement("div",{className:M["metax-send-nft-form__row__max"]},B.default.createElement("span",{className:M["metax-send-nft-form__row__max-amount"]},i("wallet_extension_nft_toast_owned"),":",t),B.default.createElement("span",{onClick:()=>{c(`${e.totalBalance||0}`)},className:M["metax-send-nft-form__row__btn-max"]},i("wallet_transfer_btn_max_balance_amount")))),B.default.createElement(ln,{nextJump:k,buttonText:i("wallet_transfer_btn_next"),disabled:!n||r||h||_&&(!o||l)}))},xn=Gr;function Br(t){let e=Mo(void 0,void 0,{key:t.nftInfo.baseCoinKey}),o=(0,ue.useSelector)(se),[n,r]=(0,V.useState)(null),[l,c]=(0,V.useState)(null),{run:f}=(0,Ge.useDebounceFn)(async(T,N)=>{!e||(T.toLowerCase()===N.toLowerCase()&&c(V.default.createElement("div",{className:M["metax-send-nft-form__waring"]},V.default.createElement("span",{className:M["metax-send-nft-form__waring__tips"]},i("wallet_extension_mid_textarea_same_address")))),r(await sn(T,N,e)))},{wait:200}),[_,d]=(0,V.useState)(null),{run:y}=(0,Ge.useDebounceFn)((T,N)=>{d(mn({amount:T,balance:N,t:i}))},{wait:200}),p=(0,V.useCallback)(T=>{t.setToAddress(T.target.value),f(T.target.value,t.fromAddress)},[t.fromAddress,f]),h=(0,V.useCallback)(T=>{let N=T.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");t.setAmount(N),y(N,t.nftBalance)},[t.nftBalance,y]);return V.default.createElement(xn,{...t,toError:n,tipMessage:l,amountError:_,showAmount:o,onToAddressChange:p,onAmountChange:h})}function Or(t){return{amount:t.nftSend.amount,toAddress:t.nftSend.toAddress,fromAddress:t.nftSend.nftInfo?.accountAddress,nftInfo:t.nftSend.nftInfo,nftBalance:t.nftSend.nftInfo?.totalBalance}}function Wr(t){return{setToAddress:e=>t(Ot.setToAddress(e)),setAmount:e=>t(Ot.setAmount(e))}}var gn=(0,ue.connect)(Or,Wr)(Br);var Mr=()=>{let t=(0,wn.useDispatch)(),e=(0,yn.useHistory)(),[o,{set:n}]=(0,Nn.useBoolean)(!1),r=(0,Ht.useCallback)(()=>{t(Ot.resetSend()),e.goBack()},[e]);return Ht.default.createElement(pe,{onBack:r,loading:o,title:i("wallet_home_btn_send")},Ht.default.createElement(gn,{onLoadingChange:n}))},hn=Mr;a();s();var zt=m(I()),cr=m(E()),_r=m(mt());Y();a();s();var $t=m(I()),lr=m(E());Qt();qt();a();s();var A=m(I()),Et=m(E()),Bn=m(mt()),Oe=m(tt());Y();a();s();Rt();Qt();no();mo();q();Fr();var Ur=t=>{let e=At(t),r=(bo(t)?.account||{})[Xt]||"";return{walletId:e,address:r}},Hr=async t=>{let e={coinId:X,address:t.address},o={fromAddr:t.fromAddress,toAddr:t.toAddress},{info:n={}}=await To(e,o),{sequenceNumber:r,chainId:l,expirationTimestampSecs:c,gasUnitPrice:f}=n;return{sequenceNumber:r,chainId:l,expirationTimestampSecs:c,gasUnitPrice:f,maxGasAmount:8e3}},Yr=t=>async e=>{let{signedTx:o,sequenceNumber:n,fromAddress:r,toAddress:l,gasUnitPrice:c,maxGasAmount:f,amount:_}=t,d={nonce:n},y=nt(c,f),p={signedTx:o,coinId:X,fromAdr:r,toAdr:l,serviceCharge:y,extJson:JSON.stringify(d),coinAmount:Qe(_),txSource:rt.NFT};return await e(tn(p))},Be=t=>async(e,o)=>{let n=o(),{address:r}=Ur(n),{type:l,maxGasAmount:c,gasUnitPrice:f,fromAddress:_,toAddress:d,receiver:y,sender:p,creator:h,collectionName:T,tokenName:N,version:k,amount:S}=t,x=await Hr({fromAddress:_,toAddress:d,address:r});c&&(x.maxGasAmount=c),f&&(x.gasUnitPrice=f);let D={};l===gt.OFFER_NFT||l===gt.OFFER_NFT_SIMULATE?(D.receiver=y,D.amount=S):D.sender=p;let b={type:l,base:x,data:{...D,creator:h,collectionName:T,tokenName:N,version:k}},L=await So().signTransaction(b,r,Xt);return{base:x,signedTx:L}},Tn=t=>async e=>{let{fromAddress:o,toAddress:n,amount:r}=t,{base:l,signedTx:c}=await e(Be(t)),f=await ce(Xt,c);return{txId:await e(Yr({...l,signedTx:c,fromAddress:o,toAddress:n,amount:r})),txHash:f}},vn=async(t={},e)=>{let o;try{o=await Io(e)}catch(l){o=t.maxGasAmount||2e3,console.log(l)}let{gasUnitPrice:n}=t,r=nt(n,o);return{gasUnitPrice:n,maxGasAmount:o,fee:r}},Cn=t=>async e=>{let{base:o,signedTx:n}=await e(Be({...t,type:gt.OFFER_NFT_SIMULATE}));return vn(o,n)},An=t=>async e=>{let{base:o,signedTx:n}=await e(Be({...t,type:gt.CLAIM_NFT_SIMULATE}));return vn(o,n)},In=t=>async e=>e(Tn({...t,type:gt.OFFER_NFT})),Sn=t=>async e=>e(Tn({...t,type:gt.CLAIM_NFT})),bn=async(t,e,o,n)=>{let r=_o({coinId:n})||{},l=Bt.getAptosResourceType.replace("{rpcUrl}",r.rpcUrl),c=Bt.getAptosTable.replace("{rpcUrl}",r.rpcUrl),{data:{data:{token_data:{handle:f}}}}=await ao(l.replace("{creator}",t)),{data:_}=await so(c.replace("{handle}",f),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:t,collection:e,name:o}});return _.largest_property_version};a();s();var Fn=m(E());q();var Vr=(t,e)=>$o((r,l)=>Kt(r,10**l.decimals),to)(t,e),xe=(t,e={})=>oe(t,{symbol:e?.symbol,useContractPrecision:!0,contractPrecision:{decimals:e?.decimals},precision:e?.displayPrecision}).value,ge=(t,e={})=>{let o=(0,Fn.useSelector)(ee),n=me(e.coinId),r=Vr(t,e);return de({amount:r,rate:n,symbol:o.symbol},{useApproximate:!0})};q();a();s();var ft=m(I()),Pn=m(tt()),kn=m(Pr());Y();a();s();var Yt={"metax-send-nft-confirm":"_metax-send-nft-confirm_1ihik_1",metaxSendNftConfirm:"_metax-send-nft-confirm_1ihik_1","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_1ihik_10",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_1ihik_10","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_1ihik_14",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_1ihik_14","confirm-transaction--copy":"_confirm-transaction--copy_1ihik_19",confirmTransactionCopy:"_confirm-transaction--copy_1ihik_19"};var G=({label:t,value:e,valueDisplay:o,canCopy:n})=>{let r=(0,ft.useCallback)(()=>{(0,kn.default)(e),O.success({title:i("wallet_transaction_history_toast_address_copied"),desc:e,duration:3,containerClassName:"address-copy-notification",showClose:!0,placement:O.DIRECTION.top})},[e]);return ft.default.createElement("div",{className:Yt["metax-send-nft-confirm"]},ft.default.createElement("div",{className:Yt["metax-send-nft-confirm__label"]},t),ft.default.createElement("div",{className:Yt["metax-send-nft-confirm__value"],onClick:n?r:void 0},ft.default.createElement(zo,{text:o,maxWidth:"215px"}),n&&ft.default.createElement("span",{className:(0,Pn.default)("okds-copy",Yt["confirm-transaction--copy"])})))};a();s();var u={"retina-border-basic":"_retina-border-basic_xpies_1",retinaBorderBasic:"_retina-border-basic_xpies_1","metax-send-nft-detail__base--container":"_metax-send-nft-detail__base--container_xpies_29",metaxSendNftDetailBaseContainer:"_metax-send-nft-detail__base--container_xpies_29","metax-send-nft-detail__name-container":"_metax-send-nft-detail__name-container_xpies_35",metaxSendNftDetailNameContainer:"_metax-send-nft-detail__name-container_xpies_35","metax-send-nft-detail__name":"_metax-send-nft-detail__name_xpies_35",metaxSendNftDetailName:"_metax-send-nft-detail__name_xpies_35","metax-send-nft-detail__hr":"_metax-send-nft-detail__hr_xpies_54",metaxSendNftDetailHr:"_metax-send-nft-detail__hr_xpies_54","metax-send-nft-detail__error":"_metax-send-nft-detail__error_xpies_89",metaxSendNftDetailError:"_metax-send-nft-detail__error_xpies_89","add-weight":"_add-weight_xpies_102",addWeight:"_add-weight_xpies_102","metax-send-nft-detail__icon":"_metax-send-nft-detail__icon_xpies_102",metaxSendNftDetailIcon:"_metax-send-nft-detail__icon_xpies_102","metax-send-nft-confirm":"_metax-send-nft-confirm_xpies_109",metaxSendNftConfirm:"_metax-send-nft-confirm_xpies_109","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_xpies_118",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_xpies_118","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_xpies_122",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_xpies_122","metax-send-nft-confirm__value__content-wrapper":"_metax-send-nft-confirm__value__content-wrapper_xpies_127",metaxSendNftConfirmValueContentWrapper:"_metax-send-nft-confirm__value__content-wrapper_xpies_127","metax-send-nft-confirm__value__title":"_metax-send-nft-confirm__value__title_xpies_132",metaxSendNftConfirmValueTitle:"_metax-send-nft-confirm__value__title_xpies_132","metax-send-nft-confirm__value__content":"_metax-send-nft-confirm__value__content_xpies_127",metaxSendNftConfirmValueContent:"_metax-send-nft-confirm__value__content_xpies_127"};a();s();var En=m(I()),Dn=m(E()),Ln=m(at());var Gn=(t,e)=>{let o=(0,Dn.useDispatch)(),[n,r]=(0,En.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return(0,Ln.useMount)(()=>{(async()=>{r({...n,loading:!0}),t.version=await bn(t.creator,t.collectionName,t.tokenName,t.coinId);let{gasUnitPrice:c,maxGasAmount:f,fee:_}=e?await o(An(t)):await o(Cn(t));r({aptosFee:_,gasUnitPrice:c,maxGasAmount:f,loading:!1,version:t.version})})()}),n};var $r=()=>{let t=(0,Et.useDispatch)(),{creatorAddress:e,name:o,projectName:n,accountAddress:r,baseCoinId:l,image:c,chainName:f,claim:_}=(0,Et.useSelector)(F),d=(0,Bn.useHistory)(),{name:y,keyringName:p}=(0,Et.useSelector)(It),{toAddress:h,amount:T=1}=(0,Et.useSelector)(st),{baseCoin:N,coin:k}=fe(l,!0),S=_?{fromAddress:r,toAddress:h,sender:r,creator:e,collectionName:n,tokenName:o,amount:T,coinId:k?.coinId}:{fromAddress:r,toAddress:h,receiver:h,creator:e,collectionName:n,tokenName:o,amount:T,coinId:k?.coinId},{aptosFee:x,gasUnitPrice:D,maxGasAmount:b,loading:L,version:z}=Gn(S,_),[_t,j]=(0,A.useState)(!1),et=Vo(),Dt=xe(x,N),dt=qe(et,Re(x)),Lt=ge(x,N),U=Pt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return A.default.createElement(A.default.Fragment,null,A.default.createElement("div",{className:u["metax-send-nft-detail"]},A.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},A.default.createElement(kt,{src:c,startStatus:!0,alt:"nft",backupImage:U,classnames:(0,Oe.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),A.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},A.default.createElement("div",{className:u["metax-send-nft-detail__name"]},o))),A.default.createElement(G,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${p} - ${y}`}),A.default.createElement(G,{label:i("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:Q(r),canCopy:!0}),A.default.createElement(G,{label:i("wallet_transfer_subtitle_receive_address"),value:h,valueDisplay:Q(h),canCopy:!0}),A.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),A.default.createElement(G,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:f}),A.default.createElement("div",{className:(0,Oe.default)(u["metax-send-nft-confirm"])},A.default.createElement("div",{className:u["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),A.default.createElement("div",{className:u["metax-send-nft-confirm__value"]},L?A.default.createElement(oo,null):A.default.createElement("div",{className:u["metax-send-nft-confirm__value__content-wrapper"]},A.default.createElement("div",{className:u["metax-send-nft-confirm__value__title"]},i("wallet_transfer_subtitle_trading_speed_average")," ",Dt),A.default.createElement("div",{className:u["metax-send-nft-confirm__value__content"]},Lt)))),!dt&&!L&&A.default.createElement("div",{className:u["metax-send-nft-detail__error"]},i("wallet_dapp_connection_errortip_insufficient_tip"))),A.default.createElement(lt.FooterActions,null,A.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(W()),dt?d.goBack():d.replace(H)}},i("wallet_dapp_connection_btn_reject")),A.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:_t,disabled:!dt||L,onClick:async()=>{try{j(!0),S.gasUnitPrice=D,S.maxGasAmount=b,S.version=z;let{txId:J,txHash:vt}=_?await t(Sn(S)):await t(In(S));_?await Pe(21,vt,h):await Pe(20,vt,r),St({tx_id:J}),t(W()),O.success({title:i("wallet_transfer_notif_transaction_submit")}),d.replace(H)}catch{O.error({title:i("wallet_home_toast_network_error")})}finally{j(!1)}}},i("wallet_set_password_btn_confirm"))))},On=$r;a();s();var Wn=m(I()),we=m(E());var Mn=()=>{let{accountAddress:t,inscriptionIdProtocol:e,localType:o}=(0,we.useSelector)(F),{toAddress:n}=(0,we.useSelector)(st),r=(0,we.useSelector)(At);return Wn.default.createElement(en,{unapproved:{walletId:r,params:{transfer:{from:t,to:n,data:e}},localType:o}})};a();s();var C=m(I()),K=m(E()),Rn=m(mt()),tr=m(tt());Y();q();a();s();var We=m(E());q();function Un(){let{baseCoinKey:t}=(0,We.useSelector)(F),o=le(void 0,void 0,{key:t})?.coinAmountInt,n=(0,We.useSelector)(it),{gasLimit:r,gasPrice:l,supportEip1559:c,maxFeePerGas:f,maxPriorityFeePerGas:_}=n;if(r==="0"||c&&(f==="0"||_==="0")||!c&&l==="0")return!1;let y=nt(`${(c?f:l)||0}`,`${r||0}`);return Xe(`${o||0}`,y)}a();s();var ye=m(E());Rt();Qt();q();function Hn(){let{contractAddress:t,accountAddress:e,baseCoinId:o,localType:n}=(0,ye.useSelector)(F),{gasLimit:r,gasPrice:l,maxFeePerGas:c,maxPriorityFeePerGas:f,supportEip1559:_}=(0,ye.useSelector)(Do),d=(0,ye.useSelector)(ae),y=Oo(),p=Qo({walletId:y,fromAddr:e,coinId:o}),h=_e({coinId:o,fromAddr:e,toAddr:t,localType:n});return{send:async({nonce:T,updateGasInfo:N,activityId:k})=>{let S=po(n)?.realChainIdHex,x={from:e,to:t,nonce:R(T),data:d,chainId:S,value:"0",gasLimit:R(r)};_?(x.type=go.FEE_MARKET,x.maxFeePerGas=R(c),x.maxPriorityFeePerGas=R(f)):x.gasPrice=R(l),N&&(x.maxFeePerGas?(x.maxFeePerGas=R(N.maxFeePerGas),x.maxPriorityFeePerGas=R(N.maxPriorityFeePerGas)):x.gasPrice=R(N.gasPrice));let b={...ho(x)};b.walletId=y,b.supportEip1559=_;let L=bt(_?x.maxFeePerGas:x.gasPrice),z=bt(x.gasLimit),_t={...x,value:bt(x.value),from:x.from,to:x.to,gas:z,gasPrice:L,priorityFee:bt(_?x.maxPriorityFeePerGas:0),nonce:bt(x.nonce),repeatTxType:xo.CONFIRMING,oldTxHash:""},j={coinId:o,coinAmount:0,fromAdr:x.from,toAdr:x.to,serviceCharge:nt(z,L),extJson:JSON.stringify(_t),txSource:rt.NFT,inputData:x.data?x.data:"",activityId:k},et=await p(b);return{serverTxId:await h(et,j)}}}}a();s();var P=m(I()),Nt=m(E()),qn=m(mt()),he=m(at()),Xn=m(tt());Y();a();s();a();s();var Vn=m(I()),$n=m(tt());Y();a();s();var Yn={root:"_root_1leh0_1"};function zr({className:t,style:e}){return Vn.default.createElement("div",{className:(0,$n.default)(Yn.root,t),style:e},i("wallet_extension_freegas_notif_networkfee_rebate"))}var Me=zr;a();s();var Zn=m(I());a();s();var zn={text:"_text_1qgtl_1"};function Zr({status:t}){return t!==yt.ok?null:Zn.default.createElement(Me,{className:zn.text})}var Ue=Zr;a();s();var Kn=m(I()),jn=m(tt());a();s();var ct={"retina-border-basic":"_retina-border-basic_tetol_1",retinaBorderBasic:"_retina-border-basic_tetol_1",root:"_root_tetol_29",render:"_render_tetol_67",iconWrapper:"_iconWrapper_tetol_71",icon:"_icon_tetol_71",error:"_error_tetol_81"};function Kr({className:t,children:e,error:o}){return Kn.default.createElement("div",{className:(0,jn.default)(ct.root,t,{[ct.error]:o})},e)}var He=Kr;a();s();Y();var Vt=m(I());var Ye=m(tt());function jr({className:t,status:e,tip:o,activity:n}){if(e!==yt.error&&e!==yt.ok||!o)return null;let{gas:r,totalTimes:l}=n,{text:c,key:f,args:_,error:d}=o,y=c||i(f,_||{}),p;return f===Wt.availableTimesLimit?p=i("wallet_extension_freegas_tooltip_5refund_day",{num:l}):f===Wt.exceedGasLimit?p=i("wallet_extension_freegas_tooltip_under_10u",{num:r}):f===Wt.exceedTodayGasLimit?p=i("wallet_extension_freegas_tooltip_paused_rules"):f===Wt.walletAssetNotEnough&&(p=i("wallet_extension_freegas_notif_greater_than10",{num:l})),p&&(y=Vt.default.createElement("div",{className:ct.iconWrapper},y,Vt.default.createElement(Fe,{title:p,trigger:Fe.TRIGGER_TYPES.hover},Vt.default.createElement(eo,{className:(0,Ye.default)("okx-wallet-plugin-information-circle",ct.icon,{[ct.error]:d})})))),Vt.default.createElement(He,{className:(0,Ye.default)(ct.render,t),error:d},y)}var Ve=jr;a();s();var Ne=m(E());q();var Jn=()=>{let t=(0,Ne.useSelector)(Ft),e=(0,Ne.useSelector)(it),{baseCoin:o}=fe(t,!0),{networkFee:n}=e,r=(0,Ne.useSelector)(ee),l=oe(Gt(n),{symbol:o.symbol,isStableCoin:o.stableCoin,precision:o.displayPrecision}).value,c=me(o.coinId),f=de({amount:Gt(n),rate:c,symbol:r.symbol},{useApproximate:!0});return{gasFeeToETHDisplay:l,gasFeeToCurrencyDisplay:f}};a();s();var $={arrow:"_arrow_166pr_1",gasReturnTip:"_gasReturnTip_166pr_6","metax-send-nft-confirm":"_metax-send-nft-confirm_166pr_9",metaxSendNftConfirm:"_metax-send-nft-confirm_166pr_9","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_166pr_18",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_166pr_18","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_166pr_22",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_166pr_22","metax-send-nft-confirm__value__content-wrapper":"_metax-send-nft-confirm__value__content-wrapper_166pr_27",metaxSendNftConfirmValueContentWrapper:"_metax-send-nft-confirm__value__content-wrapper_166pr_27","metax-send-nft-confirm__value__title":"_metax-send-nft-confirm__value__title_166pr_32",metaxSendNftConfirmValueTitle:"_metax-send-nft-confirm__value__title_166pr_32","metax-send-nft-confirm__value__content":"_metax-send-nft-confirm__value__content_166pr_27",metaxSendNftConfirmValueContent:"_metax-send-nft-confirm__value__content_166pr_27","metax-send-nft-confirm__value__narrow":"_metax-send-nft-confirm__value__narrow_166pr_41",metaxSendNftConfirmValueNarrow:"_metax-send-nft-confirm__value__narrow_166pr_41"};function Jr(){let t=(0,Nt.useSelector)(it),e=De(),{status:o}=e,{gasType:n}=t,r=No[n],l=r?i(r):"",{gasFeeToETHDisplay:c,gasFeeToCurrencyDisplay:f}=Jn();return o===yt.ok?P.default.createElement(P.default.Fragment,null,P.default.createElement(Ue,{status:o}),P.default.createElement("div",{className:$["metax-send-nft-confirm__value__content"]},l,"\xA0",c)):P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:$["metax-send-nft-confirm__value__title"]},l,"\xA0",c),P.default.createElement("div",{className:$["metax-send-nft-confirm__value__content"]},f))}var Qn=()=>{let t=(0,Nt.useDispatch)(),e=(0,qn.useHistory)(),{accountAddress:o,contractAddress:n}=(0,Nt.useSelector)(F),r=(0,Nt.useSelector)(Ft),l=(0,Nt.useSelector)(ae),[c,{setTrue:f,setFalse:_}]=(0,he.useBoolean)(!1),d=De(),y=(0,he.useMemoizedFn)(h=>{t(ko(h))}),p=()=>{t(W()),e.push(H)};return P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:$["metax-send-nft-confirm"]},P.default.createElement("div",{className:$["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),P.default.createElement("div",{className:$["metax-send-nft-confirm__value"],onClick:f},P.default.createElement("div",{className:$["metax-send-nft-confirm__value__content-wrapper"]},P.default.createElement(Jr,null)),P.default.createElement("div",{className:$["metax-send-nft-confirm__value__narrow"]},P.default.createElement("span",{className:(0,Xn.default)("okds-arrow-chevron-right-centered-md",$.arrow)}))),P.default.createElement(Zo,{visible:c,coinId:r,address:o,inputData:l,tokenAddress:n,value:"0",onBack:_,onClose:p,onGasChange:y,gasReturn:d})),P.default.createElement(Ve,{className:$.gasReturnTip,activity:d.activity,status:d.status,tip:d.tip}))};var qr=()=>{let t=(0,K.useDispatch)(),e=(0,K.useSelector)(Lo),{accountAddress:o,baseCoinId:n,image:r,name:l,chainName:c}=(0,K.useSelector)(F),f=Un(),_=(0,Rn.useHistory)(),{name:d,keyringName:y}=(0,K.useSelector)(It),p=(0,K.useSelector)(it),h=(0,K.useSelector)(Ft),[,T]=Uo(h),{toAddress:N,amount:k}=(0,K.useSelector)(st),S=(0,K.useSelector)(se),[x,D]=(0,C.useState)(!1),{send:b}=Hn(),L=Yo({coinId:h,txType:Ho.nft,fromAddress:o,toAddress:N,unavailable:p.gasType===yo.CUSTOM,fee:Gt(p.networkFee)}),z=L?.errorCode,_t=()=>{D(!0)},j=()=>{D(!1)},{gasPrice:et}=p,dt={fetchParams:{coinId:h,from:o,to:N,amount:k,gasPrice:et},userGasInfo:p,baseCoinAmountUse:"0"},Lt=(0,C.useMemo)(()=>S?Je.thousandFormat(k):"",[k,S]),U=(0,C.useCallback)(()=>{t(W()),f?_.goBack():_.replace(H)},[f]),J=(0,C.useCallback)(async Ce=>{if(!await Xo({callback:U}))return;let{nonce:Ae,updateGasInfo:Ie}=Ce;try{let pt=await b({nonce:Ae,updateGasInfo:Ie,activityId:L.activityId}),{serverTxId:Z}=pt||{};St({tx_id:Z}),O.success({title:i("wallet_transfer_notif_transaction_submit")}),t(W()),_.replace("/")}catch(pt){let Z=pt?.data?.originalError?.code;rn(Z)?(O.error({title:pt?.data?.originalError.msg||i("wallet_home_toast_network_error")}),L.clear()):pt.message!==ie&&O.error({title:i("wallet_home_toast_network_error")})}},[n,o,b]);(0,C.useEffect)(()=>{z===0&&typeof T?.chainId<"u"&&Fo({wallet_address:o,interactive_address:N,chain_id:T?.chainId,transaction_type:"send_nft"})},[z,T?.chainId]);let vt=Pt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return C.default.createElement(on,{gasReturn:L},C.default.createElement("div",{className:u["metax-send-nft-detail"]},C.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},C.default.createElement(kt,{src:r,alt:"nft",startStatus:!0,backupImage:vt,classnames:(0,tr.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),C.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},C.default.createElement("div",{className:u["metax-send-nft-detail__name"]},l))),C.default.createElement(G,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${y} - ${d}`}),C.default.createElement(G,{label:i("wallet_transfer_subtitle_send_address"),value:o,valueDisplay:Q(o),canCopy:!0}),C.default.createElement(G,{label:i("wallet_transfer_subtitle_receive_address"),value:N,valueDisplay:Q(N),canCopy:!0}),C.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),C.default.createElement(G,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:c}),C.default.createElement(Qn,null),!e&&!f&&C.default.createElement("div",{className:u["metax-send-nft-detail__error"]},i("wallet_dapp_connection_errortip_insufficient_tip")),S&&C.default.createElement(G,{label:i("wallet_extension_transaction_module_input_label_amount"),valueDisplay:Lt})),C.default.createElement(lt.FooterActions,null,C.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:U},i("wallet_dapp_connection_btn_reject")),C.default.createElement(nn,{dataForCheck:dt,onClick:J,beforeClick:_t,afterClick:j,btnProps:{loading:x,width:160,disabled:e||!f}},i("wallet_set_password_btn_confirm"))))},er=qr;a();s();var w=m(I()),ht=m(E()),sr=m(mt()),ir=m(at()),ze=m(tt());Y();a();s();var Te=m(I()),or=m(at());qt();q();var nr=(t={},e=!1,o=!1)=>{let[n,r]=(0,Te.useState)({}),[l,c]=(0,Te.useState)(!0),[f,_]=(0,Te.useState)(!1),d=n.fee;return(0,or.useMount)(()=>{(async()=>{try{let p=await vo(t);p?.fee&&r(p),c(!1)}catch{o&&(_(!0),c(!1))}})()}),e?{solanaFee:d,solanaFeeInfo:n,loading:l,error:f}:d};br();Rt();q();a();s();var rr=m(I());Rt();qt();var $e=({type:t,from:e,to:o,blockHash:n,coinAmount:r,mint:l,createAssociatedAddress:c,computeUnitPrice:f,computeUnitLimit:_,tokenStandard:d})=>{let y={type:t,payer:e,blockHash:n,from:e,to:o,amount:r,computeUnitPrice:f,computeUnitLimit:_},p;return t===wo.TRANSFER?p={...y}:p={...y,mint:l,createAssociatedAddress:c},d&&(p.tokenStandard=d),p},ar=()=>{let t=_e({});return(0,rr.useCallback)(async(e,{type:o,from:n,to:r,coinId:l,blockHash:c,coinAmount:f,mint:_=null,createAssociatedAddress:d,serviceCharge:y,computeUnitPrice:p,computeUnitLimit:h,txSource:T=rt.NORMAL,extJson:N=JSON.stringify({}),walletId:k,tokenStandard:S})=>{let x=$e({type:o,from:n,to:r,blockHash:c,coinAmount:f,mint:_,createAssociatedAddress:d,computeUnitPrice:p,computeUnitLimit:h,tokenStandard:S}),D=await e(Bo(x,n,k)),b=await ce(lo,D);return await t(D,{signedTx:D,coinAmount:f,coinId:l,fromAdr:n,toAdr:r,serviceCharge:y,txSource:T,extJson:N,txHash:b})},[t])};var Xr={solNft:0,solCompressNft:1,solToken2022Nft:2,solCoreNft:3},Qr=()=>{let t=(0,ht.useDispatch)(),e=(0,ht.useSelector)(F),{tokenId:o,accountAddress:n,baseCoinId:r,image:l,name:c,chainName:f,extendProperty:_}=e,d=le(r),{chainId:y}=d,{solNftType:p,tokenStandard:h}=_||{},T=Ro(),N=(0,sr.useHistory)(),k=(0,w.useRef)(!1),S=(0,w.useRef)(),{name:x,keyringName:D}=(0,ht.useSelector)(It),{toAddress:b}=(0,ht.useSelector)(st),[L,{setTrue:z,setFalse:_t}]=(0,ir.useBoolean)(!0),[j,et]=(0,w.useState)(""),[Dt,dt]=(0,w.useState)("0"),{loading:Lt,solanaFeeInfo:U}=nr({coinId:r,address:b},!0),J=Lt||L,{fee:vt,computeUnitPrice:Ce,feelimit:Ze}=U,{priorityFee:Ae,priorityGasPrice:Ie,priorityGasLimit:pt}=ke(Ze,Ce,Dt),Z=jt(vt,Ae),xr=ge(Z,d),gr=xe(Z,d),wr=(0,ht.useSelector)(At),[yr,Ke]=(0,w.useState)(!1),Nr=Pt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"}),Zt=(0,w.useMemo)(()=>p!==Xr.solNft?{msg:i("wallet_extension_transfer_error_unsupported_nft_transfer"),isEnough:!0}:J?{msg:"",isEnough:!1}:j?{msg:j,isEnough:!0}:be(d.coinAmountInt,Z)?{msg:i("wallet_dapp_connection_errortip_insufficient_tip"),isEnough:!1}:be(d.coinAmountInt,jt(Z,U.selfRent))?{msg:i("walletextension_toast_text_reserve_rent_exempt",{number:Kt(U.selfRent,10**d.decimals)}),isEnough:!1}:{msg:"",isEnough:!0},[J,d.coinAmountInt,d.decimals,Z,U.selfRent]),je=()=>{let ot={from:n,to:b,coinId:r,serviceCharge:Z,computeUnitPrice:Ie,computeUnitLimit:pt,txSource:rt.NFT,coinAmount:1,mint:o,createAssociatedAddress:!S.current,walletId:wr,type:"tokenTransfer"};return h===4&&(ot.type="mplTransfer",ot.tokenStandard=4),ot},hr=ar();return(0,w.useEffect)(()=>{o&&b&&y&&U.recentBlockhash&&(z(),et(""),(async()=>{try{let ut=je();ut.blockHash=U.recentBlockhash;let Se=$e(ut),Tr=Ao({mint:o,address:b}),{SolWallet:vr}=await ro(),Cr=await new vr().getSerializedTransaction({privateKey:"",data:Se}),Ar=T({coinId:r,from:n,chainId:y,simulateTransactionParam:{transaction:Cr}}),[Ir,Sr]=await Promise.all([Tr,Ar]);S.current=Ir?.data?.legal,dt(Sr.firstUnitLimit)}catch(ut){et(ut?.message||i("wallet_extension_alert_estimate_unavailable"))}finally{_t()}})())},[o,n,b,y,U.recentBlockhash]),w.default.createElement(w.default.Fragment,null,w.default.createElement("div",{className:u["metax-send-nft-detail"]},w.default.createElement("div",{className:u["metax-send-nft-detail__base--container"]},w.default.createElement(kt,{src:l,startStatus:!0,alt:"",backupImage:Nr,classnames:(0,ze.default)(u.addWeight,u["metax-send-nft-detail__icon"])}),w.default.createElement("div",{className:u["metax-send-nft-detail__name-container"]},w.default.createElement("div",{className:u["metax-send-nft-detail__name"]},c))),w.default.createElement(G,{label:i("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${D} - ${x}`}),w.default.createElement(G,{label:i("wallet_transfer_subtitle_send_address"),value:n,valueDisplay:Q(n),canCopy:!0}),w.default.createElement(G,{label:i("wallet_transfer_subtitle_receive_address"),value:b,valueDisplay:Q(b),canCopy:!0}),w.default.createElement("div",{className:u["metax-send-nft-detail__hr"]}),w.default.createElement(G,{label:i("wallet_extension_nft_popup_text_network"),valueDisplay:f}),w.default.createElement("div",{className:(0,ze.default)(u["metax-send-nft-confirm"])},w.default.createElement("div",{className:u["metax-send-nft-confirm__label"]},i("wallet_transfer_subtitle_network_fee")),w.default.createElement("div",{className:u["metax-send-nft-confirm__value"]},w.default.createElement("div",{className:u["metax-send-nft-confirm__value__content-wrapper"]},w.default.createElement("div",{className:u["metax-send-nft-confirm__value__title"]},i("wallet_transfer_subtitle_trading_speed_average")," ",gr),w.default.createElement("div",{className:u["metax-send-nft-confirm__value__content"]},xr)))),!J&&Zt.msg&&w.default.createElement("div",{className:u["metax-send-nft-detail__error"]},Zt.msg)),w.default.createElement(lt.FooterActions,null,w.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(W()),Zt.isEnough?N.goBack():N.replace(H)}},i("wallet_dapp_connection_btn_reject")),w.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:J||yr,disabled:Zt.msg,onClick:async()=>{if(!k.current){k.current=!0,Ke(!0);try{let ot=await Co({coinId:r,address:n},{fromAddr:n,toAddr:b}),ut=je();ut.blockHash=ot;let Se=await hr(t,ut);St({tx_id:Se}),t(W()),O.success({title:i("wallet_transfer_notif_transaction_submit")}),N.replace(H)}catch(ot){ot.message!==ie&&O.error({title:i("wallet_home_toast_network_error")})}k.current=!1,Ke(!1)}}},i("wallet_set_password_btn_confirm"))))},mr=Qr;var Rr=()=>{let{baseCoinId:t}=(0,lr.useSelector)(F);switch(t){case uo:case fo:return $t.default.createElement(Mn,null);case Ct:return $t.default.createElement(mr,null);case X:return $t.default.createElement(On,null);default:return $t.default.createElement(er,null)}},fr=Rr;var ta=()=>{let t=(0,_r.useHistory)(),e=(0,cr.useDispatch)(),o=(0,zt.useCallback)(()=>{e(Ee()),t.replace(ne)},[]);return zt.default.createElement(pe,{pageName:"confirmDetail",title:t.location.state?.nftInfo.claim?i("extension_aptos_nft_title_receiveconfirm"):i("wallet_trade_maintitle_transaction_confirm"),onBack:()=>{if(t.location.state?.nftInfo.claim){e(W()),e(Ee()),t.goBack();return}o()}},zt.default.createElement(fr,null))},dr=ta;var ea=()=>{let t=(0,Tt.useHistory)(),e=(0,ur.useDispatch)();return(0,pr.useMount)(()=>{t.location.state?e(Eo(t.location.state?.nftInfo)):t.replace(H)}),ve.default.createElement(Tt.Switch,null,ve.default.createElement(Tt.Route,{exact:!0,path:ne,component:hn}),ve.default.createElement(Tt.Route,{exact:!0,path:re,component:dr}))},dc=ea;export{dc as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendNft-GVFYFINQ.js.map
