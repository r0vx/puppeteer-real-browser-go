import{d as ct,e as dt,i as ut,j as ft,k as pt,l as Ct,n as v}from"./chunk-2A7WGNL6.js";import"./chunk-QFS44FRB.js";import{a as lt}from"./chunk-PJ5X5CUU.js";import{b as mt}from"./chunk-TSVRDRPO.js";import{c as nt}from"./chunk-PPTAKQQT.js";import{l as st,n as it}from"./chunk-IFQDHP3Z.js";import"./chunk-DA5RJYYW.js";import"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import"./chunk-ZTIVM5ML.js";import"./chunk-2E2OBQTS.js";import"./chunk-VICEBZ4G.js";import{f as at}from"./chunk-WO6OHGU2.js";import{a as tt,k as rt}from"./chunk-3S4BGA37.js";import{Mb as ot,Ub as et,md as C}from"./chunk-POP3LIKS.js";import{c as d}from"./chunk-PMRTKWFS.js";import{G as O,ca as b,l as R,m as L}from"./chunk-G44PPNNQ.js";import"./chunk-K2BSCLBF.js";import"./chunk-PZY7HRHV.js";import"./chunk-Z2L2F5M5.js";import"./chunk-IPLOJJIA.js";import"./chunk-RLPRDJ34.js";import"./chunk-2ASICJQL.js";import"./chunk-TQWSBAXG.js";import"./chunk-6JVCYB7O.js";import"./chunk-QO4JMOUQ.js";import{a as Ot}from"./chunk-532YJKK4.js";import{a as X}from"./chunk-SIITVWZR.js";import"./chunk-FYTT4U7M.js";import{d as q}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-CYTB2B6Q.js";import{fa as z,ka as _}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as w}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-D2YP6KBJ.js";import"./chunk-32ZJ4F2J.js";import{f as u,o as s,q as i}from"./chunk-SHG7TIBL.js";s();i();var o=u(w()),B=u(Ot()),j=u(X());s();i();var V={list:"list",coin:"coin",orderDetail:"orderDetail"};s();i();var x=u(w());s();i();var gt=u(w());var N=()=>{let{walletContractStore:e}=d(),{gasFee:t,nativeCoin:r}=e,{coinAmountInt:a,decimals:n}=r??{};return(0,gt.useMemo)(()=>{let l=rt(a,n);return tt.gte(l,t||"0")},[t,a,n])};var Nt=()=>{let{HeaderTip:e}=b.components,{walletContractStore:t}=d(),{gasInfo:r,gasLimitError:a,nativeCoin:n,compuletedGetNativeCoinError:l,compuletedGetNativeCoinLoading:m,computedTipsBtnProps:T}=t,{symbol:h}=n??{},f={type:q.TYPE.error,renderGasStation:!1},S=N(),p=()=>x.default.createElement(e,{type:q.TYPE.warn,message:C("swaptrade_extension_cinteraction_insufficient_networkfee",{symbol:h}),actions:[T],renderGasStation:!1}),P=()=>x.default.createElement(e,{...f,message:C("swaptrade_extension_cinteraction_might_error")}),I=()=>x.default.createElement(e,{...f,message:a});return m?null:l?x.default.createElement(e,{...f,message:C("swaptrade_history_error_retrieve_balance_error")}):a?I():S&&r?.gasLimitInfo?.queryGasLimitErrorUseDefault?P():S?null:p()},yt=L(Nt);s();i();var ht=u(w());var Mt=({chainId:e,tokenContractAddress:t,amount:r,isNativeToken:a})=>{let n=Ct({chainId:e,tokenContractAddress:t,isNativeToken:a}),{coinId:l,decimals:m}=n||{};return(0,ht.useMemo)(()=>[{coinId:l,assetChange:pt("+",r,m),useMinPrecision:!1}],[r,l,m])},St=Mt;s();i();var y=u(w()),It=u(X());s();i();var _t=u(w());var Bt=()=>{let{walletContractStore:e}=d(),t=N(),{gasInfo:r,gasLimitError:a,compuletedGetNativeCoinError:n,compuletedGetNativeCoinLoading:l,gasFeeLoading:m}=e;return(0,_t.useMemo)(()=>m||a||n||l||r?.isGasLimitLoading||r?.gasLimitInfo?.queryGasLimitErrorUseDefault||!t,[n,l,m,r?.gasLimitInfo?.queryGasLimitErrorUseDefault,r?.isGasLimitLoading,a,t])},Tt=Bt;s();i();var wt=u(w());s();i();var Z=class{constructor(){this.isLoading=!1;this.setLoading=t=>{this.isLoading=t};this.orderDetail=null;this.setOrderDetail=t=>{this.orderDetail=t};this.fetchOrderDetail=async t=>{this.setLoading(!0);let[r,a]=await O(nt.get(et,{params:{orderId:t}}));if(r){this.setError(r),this.setLoading(!1);return}let n=a.data;this.setOrderDetail(n)};this.payload=null;this.setPayload=t=>{this.payload=t};this.sourceClaimPayload=null;this.setSourceClaimPayload=t=>{this.sourceClaimPayload=t};this.error=null;this.reset=()=>{this.setLoading(!1),this.setOrderDetail(null),this.setPayload(null),this.setSourceClaimPayload(null),this.clearError()};R(this,{},{autoBind:!0})}setError(t){this.error=t}clearError(){this.error=null}},E=new Z;var Wt=e=>{let{sendTransactionStore:t,walletContractStore:r,swapStore:a}=d(),{toChainId:n,orderId:l}=e||{};return(0,wt.useCallback)(async()=>{let{history:m}=b,{payload:T}=E;it.info(st.CLAIM_PAYLOAD,{payload:T,tags:{orderId:l}});let[h,f]=await O(t.sendTransaction(n,T[0],r.walletSendParams));if(h){a.onWalletFail(h,l,!0);return}let{result:S,nonce:p}=lt(n,f);await a.updateClaimOrder({mainOrderId:l,redeemTxHash:S,nonce:p}),m?.goBack()},[t,n,r.walletSendParams,a,l])},Et=Wt;s();i();var M={footer:"_footer_18rul_1","button-style":"_button-style_18rul_8",buttonStyle:"_button-style_18rul_8"};var Ft=({onChangeHeight:e,trade:t})=>{let r=(0,y.useRef)(null),[a,n]=(0,y.useState)(!1),{walletContractStore:l}=d(),{computedCancelBtnProps:m}=l;(0,y.useEffect)(()=>{let f=p=>{e&&e(p.offsetHeight)},S=new MutationObserver(p=>{f(p[0]?.target)});return r.current&&(f(r.current),S.observe(r.current,{childList:!0})),()=>{S.disconnect()}},[e]);let T=Tt(),h=Et(t);return y.default.createElement("div",{className:(0,It.default)(M.footer)},y.default.createElement(_,{block:!0,circle:!1,className:M.buttonStyle,size:_.SIZE.lg,category:_.CATEGORY.outline,type:_.TYPE.primary,loading:m.loading,loadingText:m.btnText,disabled:m.disabled,onClick:m.onClick},m.btnText),y.default.createElement(_,{block:!0,circle:!1,className:M.buttonStyle,size:_.SIZE.lg,type:_.TYPE.highlight,category:_.CATEGORY.fill,disabled:T,loading:a,loadingText:C("swaptrade_common_btn_confirm"),onClick:async()=>{n(!0),await h(),n(!1)}},C("swaptrade_common_btn_confirm")))},Lt=L(Ft);s();i();var $=u(w());var Ht=({chainId:e,transactionPayload:t})=>{let{fromToStore:r}=d(),{isEvmChain:a}=r;return dt(e),a(e)?$.default.createElement(ft,{chainId:e,transactionPayload:t,isClaim:!0}):$.default.createElement(ut,{chainId:e,transactionPayload:t,isClaim:!0})},bt=Ht;var Ut=()=>{let[e,t]=(0,o.useState)(""),{components:{MultipleChangeSummary:r,TxTypeWithTools:a,SectionWrap:n,InteractiveAddress:l,ModuleWrap:m,ViewData:T}}=b,h=(0,B.useHistory)(),[f,S]=(0,o.useState)(80),{search:p}=(0,B.useLocation)(),{orderId:P,source:I}=(0,o.useMemo)(()=>at(p),[p]),{swapStore:D,accountStore:W,fromToStore:vt,walletContractStore:Pt}=d(),{computedAccountId:Dt}=W,{isEvmChain:kt}=vt,{gasInfo:F}=Pt,{orderDetail:c,setPayload:k,payload:J,setLoading:H,setSourceClaimPayload:K,sourceClaimPayload:U}=E;(0,o.useEffect)(()=>{I&&(I===V.list||I===V.coin)&&e&&mt("bridge_claim_click","history_main",e)},[I,e]),(0,o.useEffect)(()=>{P&&E.fetchOrderDetail(P)},[P]),(0,o.useEffect)(()=>()=>{E.reset()},[]),(0,o.useEffect)(()=>{if(c){let G=W.getAddressByChainId(c.toChainId);t(G),D.fetchClaimCalldata(c,G).then(A=>{if(H(!1),!A){h.goBack();return}let{payload:Y,sourceClaimPayload:At}=A;k(Y),K(At)}).catch(()=>{H(!1)})}},[D,c,W,k,H,K,h]);let Q=(0,o.useCallback)(async(G,A)=>{let Y=await D.formatClaimPayload(G,A);k(Y)},[k,D]);(0,o.useEffect)(()=>{c&&U&&F&&Q(U,c)},[F.networkFee,c,U,k,D,F,Q]);let xt=ct(ot.CLAIM),Gt=St({chainId:c?.toChainId,tokenContractAddress:c?.toTokenAddress,isNativeToken:c?.isNativeToken==="1",amount:c?.bridgeChildOrderDetailVo?.toAmountOut});return E.isLoading?o.default.createElement("div",{className:(0,j.default)(v.container,v.loading)},o.default.createElement(z,{size:z.SIZE.lg})):o.default.createElement("div",{className:v.container},o.default.createElement("div",{style:{height:`calc(100% - ${f}px)`},className:(0,j.default)(v.wrap)},o.default.createElement("div",{className:v.scroll,id:"wallet_scroll"},o.default.createElement(yt,null),o.default.createElement(a,{txTypeInfo:{baseInfo:xt}},o.default.createElement(r,{title:C("swaptrade_orders_label_receive"),summaryList:Gt})),o.default.createElement(bt,{chainId:c?.toChainId,transactionPayload:J?.[0]}),o.default.createElement(n,null,o.default.createElement(l,{title:C("swaptrade_transfer_textarea_wallet_used"),address:e,walletId:Dt})),o.default.createElement(n,{bordered:!1},kt(c?.toChainId)&&o.default.createElement(T,{copyable:{hideDesc:!0},data:J?.[0]?.data})))),o.default.createElement(Lt,{onChangeHeight:S,trade:c}))},he=L(Ut);export{he as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Claim-ZVRCXWPZ.js.map
