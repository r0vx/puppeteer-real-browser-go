import{a as F}from"./chunk-LTLRDXME.js";import{e as k}from"./chunk-MN3UHDTX.js";import{g as P}from"./chunk-AZNX5TUC.js";import{o as K}from"./chunk-XP3TNE3R.js";import{Db as w,Ea as R,Eb as B,dc as q,jc as L}from"./chunk-QRHYK2TW.js";import{b}from"./chunk-OL67KS7C.js";import{f as c,o as p,q as C}from"./chunk-SHG7TIBL.js";p();C();var d=c(b()),M=c(L()),I=c(K());p();C();var v=c(b()),y=c(L());function x(t){let n=(0,y.useSelector)(w),i=(0,y.useSelector)(B),s=P(),f=t??s;return(0,v.useCallback)(r=>r?k({coins:r,walletIdentityMap:n,createdMap:i,walletId:f}):[],[n,i,f])}var Q=t=>{let n=(0,d.useMemo)(()=>i=>F(i,{enableEmptyAccount:t}),[t]);return(0,M.useSelector)(n)},oe=(t,{beforeRequest:n,onFinally:i,reloadDeps:s,enableEmptyAccountCoins:f=!1,enable:r,filter:U=!0}={})=>{let D=Q(f),z=(0,M.useSelector)(q),g=(0,d.useRef)(null),A=x(),o=(0,d.useRef)({}),G=(0,I.useMemoizedFn)(async(e=0)=>{if(r===!1)return{list:[],pageNo:e,isNoMore:!0};let h=await n?.();if(h)return h;let S=0,l=null,u=null,W=e;t?.chainIds||(t.chainIds=D.map(m=>m.chainId));do{o.current[e]=o.current[e]||0;let m=++o.current[e];if(u=await R({...t,userUniqueId:z,pageNo:e}),m<o.current[e]||typeof o.current[e]>"u")return{list:[],pageNo:e};o.current[e]===m&&delete o.current[e],U?l=A(u):l=u,W++,S++}while(u&&u.length>0&&l?.length===0&&S<5);return{list:l,pageNo:W,isNoMore:l.length===0}}),a;typeof r=="boolean"?s?a=[...s,r]:a=[r]:a=s;let{data:j,loading:E,loadingMore:H,reload:J}=(0,I.useInfiniteScroll)(e=>G(e?.pageNo??0),{target:g,isNoMore:e=>e?.isNoMore,onFinally:i,reloadDeps:a});return{data:j,loading:E,loadingMore:H,listRef:g,reload:J}};export{x as a,Q as b,oe as c};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-LXDEJX7F.js.map
