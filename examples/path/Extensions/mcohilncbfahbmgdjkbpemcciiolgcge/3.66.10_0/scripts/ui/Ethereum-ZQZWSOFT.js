import{a as yr}from"./chunk-7PZ6AMJ4.js";import{b as gr,f as xr,g as Cr,h as hr}from"./chunk-62AO3YNL.js";import{a as lr}from"./chunk-OAQKAWH5.js";import"./chunk-LZXZV4RZ.js";import{a as fr,b as _r,c as yt,d as q,e as Tr}from"./chunk-UDTBPUPJ.js";import{k as ur}from"./chunk-QJYNTF2A.js";import"./chunk-SR7OSGG2.js";import{a as pr}from"./chunk-TW4KQJBW.js";import{a as dr}from"./chunk-J6QJFZTY.js";import{a as cr}from"./chunk-7DDBBEVP.js";import"./chunk-RF6MZE6O.js";import{a as mr}from"./chunk-7VC7N33E.js";import{a as Bt}from"./chunk-PETUQAWU.js";import{a as sr}from"./chunk-JRNVHROF.js";import"./chunk-O2YW3UOK.js";import{a as ir}from"./chunk-EI5LQA46.js";import{a as ar}from"./chunk-Q2NFJPGV.js";import{a as tr}from"./chunk-JIT4MLY3.js";import{a as nr}from"./chunk-W3MRBSTV.js";import"./chunk-HPJHY2AY.js";import{a as rr}from"./chunk-CK7Z2DAQ.js";import{g as or}from"./chunk-5E2Y3UHC.js";import{a as We}from"./chunk-OQZ6UOCK.js";import{a as Oe,b as Yo,c as zo,d as Vo,e as Xo,f as Jo}from"./chunk-EUGYCX2N.js";import{i as jo,m as Ae,n as Zo,o as $o}from"./chunk-TEVAE4SY.js";import{a as Ko,b as Qo}from"./chunk-NZOYKJV7.js";import"./chunk-L7GCKA7W.js";import{a as qo}from"./chunk-V2QGBG3D.js";import"./chunk-IFQLVQH6.js";import"./chunk-5TLDWKXV.js";import{a as Te}from"./chunk-7GRDW7ZD.js";import{a as Ro}from"./chunk-DGIWAYI5.js";import"./chunk-HY7LAUD2.js";import"./chunk-C6HPT3PU.js";import"./chunk-ZZH7FUZX.js";import"./chunk-7FBDFG5E.js";import"./chunk-IK5VIKIS.js";import"./chunk-Y6T5M4AD.js";import{a as $,e as Ho}from"./chunk-J3K74NCM.js";import"./chunk-UWCOP3B7.js";import"./chunk-7KQVTMRC.js";import"./chunk-UFD2MUZI.js";import"./chunk-CEM2RCMY.js";import"./chunk-SKXNZFRN.js";import{a as ce,d as Pe}from"./chunk-7X4DXTSI.js";import{a as ht}from"./chunk-LURPYTXM.js";import"./chunk-OADPFYBO.js";import{a as le}from"./chunk-CIEH2J25.js";import{b as Je}from"./chunk-64LKONIY.js";import{Y as Uo}from"./chunk-VVJ6BK3Q.js";import"./chunk-FUVVPSUI.js";import{A as Wo,a as Bo,l as v}from"./chunk-NKIUEXOA.js";import"./chunk-EP23RRSK.js";import"./chunk-4YDY4B6P.js";import{d as Oo}from"./chunk-CGFS6AE4.js";import"./chunk-DDT324RS.js";import"./chunk-2TQXMDYZ.js";import"./chunk-RNMISV22.js";import{a as Lt}from"./chunk-A267SEFJ.js";import"./chunk-VR7OPIR6.js";import"./chunk-PTDCFHZ4.js";import"./chunk-CXSOAP4V.js";import"./chunk-RT3YHZTS.js";import{a as er}from"./chunk-HBWTVKRO.js";import{a as Ge}from"./chunk-4ZGOJDNI.js";import"./chunk-ZPQXBUKT.js";import"./chunk-35Y7QMWN.js";import"./chunk-VIT5MDY4.js";import"./chunk-RH6WPBEZ.js";import{l as Mo,m as Do,u as Go}from"./chunk-CDNJY7Z3.js";import"./chunk-DBWXHHZT.js";import"./chunk-VVKAQ7K5.js";import"./chunk-7JSJY3SQ.js";import{a as Lo}from"./chunk-NWY3GPDX.js";import"./chunk-6JEFG7DQ.js";import"./chunk-B6YXJZUF.js";import"./chunk-4I2JSOYJ.js";import"./chunk-GTN3RCGH.js";import"./chunk-3VKPY2QL.js";import"./chunk-AOSRFQ4E.js";import"./chunk-ULL77AIR.js";import"./chunk-PJYSMRRW.js";import"./chunk-GKQQDLVP.js";import"./chunk-7YKP5374.js";import"./chunk-KGG7DXMS.js";import"./chunk-FGIHS4ZF.js";import"./chunk-U65R4NF3.js";import"./chunk-OTUJWRS5.js";import"./chunk-WIW5JVRP.js";import"./chunk-7CXUJS4C.js";import"./chunk-ULXZERAJ.js";import"./chunk-PJ5X5CUU.js";import"./chunk-TSVRDRPO.js";import"./chunk-PPTAKQQT.js";import"./chunk-IFQDHP3Z.js";import"./chunk-DA5RJYYW.js";import"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import"./chunk-ZTIVM5ML.js";import"./chunk-2E2OBQTS.js";import"./chunk-VICEBZ4G.js";import"./chunk-WO6OHGU2.js";import"./chunk-3S4BGA37.js";import"./chunk-POP3LIKS.js";import"./chunk-PMRTKWFS.js";import"./chunk-G44PPNNQ.js";import"./chunk-K2BSCLBF.js";import"./chunk-PZY7HRHV.js";import"./chunk-Z2L2F5M5.js";import"./chunk-IPLOJJIA.js";import"./chunk-RLPRDJ34.js";import"./chunk-2ASICJQL.js";import"./chunk-TQWSBAXG.js";import"./chunk-6JVCYB7O.js";import"./chunk-GR42TVIZ.js";import{a as Po}from"./chunk-NDFYN4CL.js";import"./chunk-QMSSDBOR.js";import"./chunk-5RCFYEZ6.js";import{a as vo}from"./chunk-QHL5OBL4.js";import"./chunk-XUTIJBNA.js";import"./chunk-LOILO52X.js";import"./chunk-Q6REWZWR.js";import"./chunk-FKISPHB5.js";import"./chunk-5QHVWW7O.js";import"./chunk-5PDHABUQ.js";import{a as Ao,b as ko}from"./chunk-NPQMAAOH.js";import"./chunk-B3SXRDEQ.js";import{b as So}from"./chunk-A5XY2FFW.js";import{a as Eo,b as wo}from"./chunk-7HRNNJBX.js";import"./chunk-F6UVHIJV.js";import"./chunk-ZLJJZYPU.js";import"./chunk-5TNLDTW5.js";import"./chunk-36PYO4PJ.js";import{e as dt}from"./chunk-636UWIUZ.js";import"./chunk-34JXWTF5.js";import"./chunk-JSOLAK4X.js";import{a as _t,c as To,d as go,g as bt,h as Tt,i as xo}from"./chunk-R7LZSAVU.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-YGIVEMKT.js";import"./chunk-T4RFDN7D.js";import{J as fo,c as uo}from"./chunk-NQAVUB4Q.js";import{a as Ct}from"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import"./chunk-5A3RJQCM.js";import"./chunk-LQBCLW7R.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-MKDQBVRZ.js";import"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import{b as bo}from"./chunk-7C7MBE2C.js";import"./chunk-KJWX5V23.js";import{e as ho,o as Fo}from"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import"./chunk-QYDRYMWS.js";import{m as xt}from"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3C5KK.js";import"./chunk-XZE3L7K7.js";import{l as po}from"./chunk-BO5YOOQA.js";import{a as De}from"./chunk-Y5K5NJ6U.js";import"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import{a as Me}from"./chunk-Q7FGM7BT.js";import"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{a as Co}from"./chunk-QMENNGDH.js";import{a as No}from"./chunk-KANXVZ35.js";import{p as Io,r as vt}from"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as me}from"./chunk-XP3TNE3R.js";import{W as so,aa as mo,jc as gt,mb as co,nb as ft}from"./chunk-QRHYK2TW.js";import"./chunk-PODZSVO7.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as wn}from"./chunk-532YJKK4.js";import{j as _e,p as Ft}from"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import{s as pt,u as to}from"./chunk-ZDOH3CEJ.js";import{c as lo,e as En}from"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-NU4UJZBB.js";import{a as W,b as we}from"./chunk-2FDQIA7D.js";import"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import{e as _o,h as Xe}from"./chunk-YCFHPQAJ.js";import{A as no,E as kt,T as Nt,Y as ut,_ as ao,da as St,e as oo,fa as io,n as $e,z as ro}from"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as E}from"./chunk-62ZAND24.js";import{a as yo}from"./chunk-SIITVWZR.js";import{D as de,Eb as Zt,Gd as At,I as gn,J as zt,Jb as hn,L as ie,Lb as $t,M as st,Ma as Qt,Na as Cn,O as Vt,Pd as Jt,Q as se,R as Ke,S as Qe,Y as jt,_d as eo,fc as yn,gc as Ze,ia as Ee,ma as Kt,od as Xt,oe as In,pd as Pt,ra as xn}from"./chunk-QHXUL3YM.js";import{H as B,n as je,y as l}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{H as U,d as oe,o as lt,q as wt,r as ct}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-NNUMMJQC.js";import"./chunk-Z3JMRMVO.js";import{L as Ie,a as Ut,b as Ht,f as Yt,o as qt,ra as Be}from"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as mt,ka as Y}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as S}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-D2YP6KBJ.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-S5ACFHVS.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as x,o as a,q as i}from"./chunk-SHG7TIBL.js";a();i();var pe=x(S());gn();a();i();var tt=x(S()),Ar=x(gt()),kr=x(wn()),Nr=x(me());a();i();Be();var Pn=e=>{let t=q(e?.chainId),o=e?.image;return Ut(o)?e.image=o[0]:Ht(o)&&(e.image=null),{token:e,baseCoin:t}},Ir=Pn;a();i();var Er=x(gt()),Mt=x(me());B();Ft();var An=(e={},t={},o=!0,r=!1)=>{let s=(0,Er.useDispatch)(),p=e.address,u=Ct(),m=_r(),c=Te(),n=(0,Mt.useMemoizedFn)(async()=>{c({all_confirmation:"cancel",trade:"add_token"}),await m(p,!1),await _e(s)}),{loading:d,onClick:T}=le(n),f={actionType:v.ACTION_TYPE.CANCEL,btnText:l("wallet_dapp_connection_btn_reject"),onClick:T,loading:d},_=(0,Mt.useMemoizedFn)(async()=>{try{c({all_confirmation:"confirm",trade:"add_token"});let h=await _t(t.localType,u),w={...e,contractAddress:p,blockChain:h.shortName,localType:t.localType,chainId:t.chainId};await ko(w),await m(p,!0),await _e(s)}catch(h){U.error(h?.data?.originalError?.msg||l("wallet_extenshion_toast_add_failed"))}}),{loading:g,onClick:C}=le(_),I={actionType:v.ACTION_TYPE.CONFIRM,disabled:!o||r,onClick:C,loading:g};return[f,I]},wr=An;a();i();var et=x(S());B();var kn=({contractAddress:e,chainInfo:t})=>{let[o,r]=(0,et.useState)({}),[s,p]=(0,et.useState)(!0),u=async()=>{try{p(!0);let m=await Ao({contractAddress:e,chainInfo:t});r(m),p(!1)}catch{U.error({title:l("wallet_extension_loading_toast_retrieve_tokeninfo_fail")})}};return(0,et.useEffect)(()=>{u()},[]),{coinInfo:o,loading:s}},Pr=kn;var Nn=({unapproved:e})=>{let t=(0,Ar.useSelector)(wo),{token:o,baseCoin:r}=Ir(e),[s,p]=(0,tt.useState)(!0),u=Ct();(0,Nr.useMount)(async()=>{let T=await _t(r.localType,u);p(!!T)});let{coinInfo:m,loading:c}=Pr({contractAddress:o?.address,chainInfo:{coinId:r?.coinId}}),n=wr(o,r,s,c);if(!o||t!==Eo.addToken)return tt.default.createElement(kr.Redirect,{to:Co});let d={...o,symbol:m?.symbol,decimals:m?.decimals};return tt.default.createElement(dr,{token:d,supported:s,buttonGroup:n,networkName:r.chainName,loading:c})},Sr=Nn;a();i();var M=x(S()),Dr=x(me());B();a();i();var Fr=x(S());Be();Ee();var Sn=({unapproved:e,walletAccount:t,customGasInfo:o={}})=>{let{params:r}=e,{walletId:s}=t,p=q(),{coinId:u}=p,m=qo(u,s)?.coinAmountInt,{gasType:c,isNetworkFeeLoading:n,networkFee:d,getLimit:T}=o,{minGasFee:f}=Mo(o),_=Do(o),g=(0,Fr.useMemo)(()=>{if(Ie(m))return r;let P=m,A=[];return r.forEach(R=>{P=st(P,d),se(P,0)&&A.push(R)}),A},[m,r,d]),C=n&&Qe(T,0),I={level:c||ao.STANDARD,loading:n,coinId:p?.coinId,networkFee:C?void 0:f,maxNetworkFee:C?void 0:d,estimateFailed:_},h=n||g.length&&g.length===r.length,w=Ie(m)||Ke(m,d);return{isNetworkFeeLoading:n,estimateFailed:_,networkFeeProps:I,canApproveTxs:g,isSufficientGas:w,canApproveAll:h}},br=Sn;a();i();var Lr=x(S());B();xn();In();Jt();Cn();hn();Ee();var vr=100,Fn=e=>e.msg||l("wallet_home_toast_network_error"),bn=({txParams:e,gasLimit:t,supportEip1559:o})=>({...e,value:W(e.value),gas:t,gasPrice:W(o?e.maxFeePerGas:e.gasPrice),priorityFee:W(o?e.maxPriorityFeePerGas:0),nonce:W(e.nonce),repeatTxType:oo.CONFIRMING,oldTxHash:"",inscriptionType:1}),vn=({ext:e,signature:t,coinId:o,txParams:r,fromAdr:s,toAdr:p,networkFee:u,txHash:m,walletId:c,walletAccount:n})=>({extJson:JSON.stringify(e),signedTx:t,coinId:o,coinAmount:W(r.value||0),fromAdr:s,toAdr:p,serviceCharge:u,txHash:m,txSource:eo.DAPP,inputData:r.data,accountId:c,txType:1,walletType:n?.serverWalletType}),Ln=({unapproved:e,walletAccount:t,isSufficientGas:o,canApproveTxs:r,customGasInfo:s,isNetworkFeeLoading:p})=>{let{id:u}=e,{walletId:m,address:c}=t,n=xt(m),d=Te(m),{coinId:T}=q(),f=pr(),_=cr(),g=(0,Lr.useCallback)(async()=>{d({trade:"sendEvmInscriptions",all_confirmation:"cancel"}),await f({id:u})},[f,d,u]),{loading:C,onClick:I}=le(g),h={loading:C,onClick:I,actionType:v.ACTION_TYPE.CANCEL,btnText:l("wallet_dapp_connection_btn_reject")},w=n||p,{gasPrice:P,supportEip1559:A,gasLimitInfo:R={},gasLimit:O,maxFeePerGas:H,maxPriorityFeePerGas:j,networkFee:F}=s,X=Wo({fromAddr:r[0]?.txParams?.from,walletId:m,localType:Pt}),J=async()=>{try{let Q=r.length,qe=r[0],{from:Ce,to:ze,value:Ve}=qe.txParams;if(d({trade:"sendEvmInscriptions",all_confirmation:"confirm"}),!await Ge({callback:g,walletId:m}))return;let{data:he}=await so({checkTypes:[St.OVERWRITTEN],coinId:T,from:Ce,to:ze,amount:W(Ve||0),gasPrice:P}),Ne=he.find(({checkType:L})=>L===St.OVERWRITTEN)||{},{newNonce:Se,toastType:ye,pendingNum:ne}=Ne;if(ye===io.FAILED){U.error(l("wallet_extension_function_toast_failed_single")),await Lt(1500),await f({id:u});return}let ae=ie(ne,Q);if(se(ae,vr)){U.error(l("wallet_extension_function_toast_pending",{TotalNum:ae,ExceededNum:vr}));return}let Fe=[],be=[];for(let L=0;L<r.length;L++){let fe=r[L],{txParams:b}=fe,{from:Et,to:at}=b;b.nonce=Kt(we(ie(Se,L))),A?(delete fe.gasPrice,b.maxFeePerGas=we(H),b.maxPriorityFeePerGas=we(j),b.type=$e.FEE_MARKET):(delete b.maxFeePerGas,delete b.maxPriorityFeePerGas,delete b.type,b.gasPrice=we(P)),b.gas=we(O),b.gasLimit=we(O),b.gasLimitInfo=R,b.gasType=s.gasType;let ve=Po(fe.txParams),it=await X({params:ve}),Le=await Bo(Pt,it),_n=bn({txParams:b,gasLimit:O,supportEip1559:A}),Tn=vn({ext:_n,signature:it,coinId:T,txParams:b,fromAdr:Et,toAdr:at,networkFee:F,txHash:Le,walletId:m,walletAccount:t});be.push(Tn),Fe.push({id:fe.id,txHash:Le})}await Zt(Qt.postSendEvmInscriptions,{txList:be}),await _({id:u,result:Fe})}catch(Q){U.error(Fn(Q)),await Lt(1500),await _({id:u,error:"Failed"})}},{loading:ee,onClick:te}=le(J),K={loading:ee,disabled:w,actionType:v.ACTION_TYPE.CONFIRM,onClick:te};return w?[h,K]:(o||(K={actionType:v.ACTION_TYPE.FILL_UP,txId:u,coinId:T,walletId:m,address:c,receiveOnly:o}),[h,K])},Br=Ln;a();i();B();var Bn=e=>{for(let t=0;t<e.length;t++){let o=e[t],r=o();if(r)return r}return null},Mn=({walletAccount:e,canApproveTxs:t,canApproveAll:o,isSufficientGas:r})=>{let s=xt(e.walletId),p=()=>s?{type:oe.TYPE.error,message:l("wallet_extension_function_alert_wallet_unsupported")}:null,u=q(),m=or({baseCoin:u,isSufficientGas:r});return Bn([p,m,()=>o?null:{type:oe.TYPE.warn,message:l("wallet_extension_function_alert_available_balance",{gasToken:u.symbol,num:t.length})}])},Mr=Mn;var Dn=({unapproved:e})=>{let{coinId:t}=q(),{txParams:o={}}=e?.params?.[0],{from:r,to:s,data:p,value:u}=o,{walletId:m}=e,c=er(e),n=Te(m),d=We(e),[T,f]=(0,M.useState)({}),_=(0,M.useCallback)(j=>{f(j)},[]),{networkFeeProps:g,canApproveTxs:C,canApproveAll:I,isSufficientGas:h,isNetworkFeeLoading:w}=br({unapproved:e,walletAccount:c,customGasInfo:T}),P=Br({unapproved:e,walletAccount:c,canApproveTxs:C,customGasInfo:T,isSufficientGas:h,isNetworkFeeLoading:w}),A=Mr({walletAccount:c,canApproveTxs:C,canApproveAll:I,isSufficientGas:h}),[R,{setTrue:O,setFalse:H}]=(0,Dr.useBoolean)(!1);return M.default.createElement(E.Container,null,M.default.createElement(De,{title:l("wallet_extension_function_title_bulk_signing"),closeable:!1,backable:!1}),M.default.createElement(ce,null,M.default.createElement(rr,{...d})),M.default.createElement(ce,null,M.default.createElement(ht,{onClick:O,...g})),M.default.createElement(ce,{bordered:!1},M.default.createElement(Je,{title:l("wallet_extension_network_address_title_walletused"),address:c.address,walletId:c.walletId,onCopyCallback:()=>{n({trade:"sendEvmInscriptions",all_confirmation:"wallet_used_address"})}})),M.default.createElement(Me,{placeholder:!0,offsetBottom:0,borderTop:!0},M.default.createElement(Pe,{...A}),M.default.createElement(v,{buttonGroup:P})),M.default.createElement(Ro,{visible:R,coinId:t,address:r,inputData:p,tokenAddress:s,value:W(u),onBack:H,onClose:null,onGasChange:_}))},Gr=Dn;a();i();var z=x(S());Be();Xt();yn();Ee();to();a();i();var Vr=x(S());a();i();var zr=x(S()),rt=x(gt()),ot=x(me());B();Ft();to();a();i();var Z=x(S());a();i();En();var Re=()=>(0,Z.useCallback)(async(t,o)=>{await lo().updateReportTimestamp(t,o)},[]);var Gn=()=>{let e=Re();return(0,Z.useCallback)(async o=>{await e(o,"CAN_CONFIRM")},[e])},Or=(e,t)=>{let o=Gn(),r=(0,Z.useRef)(!1);(0,Z.useEffect)(()=>{!t&&!r.current&&(r.current=!0,o(e))},[e,t,o])},Wr=()=>{let e=Re();return(0,Z.useCallback)(async o=>{await e(o,"CLICK_CONFIRM")},[e])},Rr=()=>{let e=Re();return(0,Z.useCallback)(async t=>{await e(t,"SIGN")},[e])},Ur=()=>{let e=Re();return(0,Z.useCallback)(async t=>{await e(t,"START_PUBLISH")},[e])},Hr=()=>{let e=Re();return(0,Z.useCallback)(async t=>{await e(t,"FINISH_PUBLISH")},[e])},Yr=()=>{let e=Re();return(0,Z.useCallback)(async t=>{await e(t,"END_REQUEST")},[e])};a();i();Be();var qr=({isMev:e,mevInfo:t,unapproved:o,modifiedData:r,customGasInfo:s,updateData:p,gasReturnActivity:u})=>{let{nonce:m,updateGasInfo:c}=p,n=qt(o),{method:d}=n;n.txParams=n.params,delete n.params;let{supportEip1559:T,gasLimitInfo:f={},gasLimit:_,maxFeePerGas:g,gasPrice:C,maxPriorityFeePerGas:I}=s,{authorizationList:h}=n.txParams,w=h&&h.length>0;if(r&&n.txParams&&(n.txParams.data=r),n.txParams.supportEip1559=T,T?(delete n?.txParams.gasPrice,n.txParams.maxFeePerGas=$(g),n.txParams.maxPriorityFeePerGas=$(I),n.txParams.type=$e.FEE_MARKET):(delete n?.txParams.maxFeePerGas,delete n?.txParams.maxPriorityFeePerGas,delete n?.txParams.type,n.txParams.gasPrice=$(C)),w&&(n.txParams.type=$e.AUTH_7702,n.txParams.authorizationList=h),c){let P=Object.entries(c).reduce((A,[R,O])=>(A[R]=$(O),A),{});n.txParams={...n.txParams,...P}}return n.txParams.gas=$(_),n.txParams.gasLimit=$(_),n.txParams.nonce=$(m),n.txParams.chainId=$(n.chainId),n.gasLimitInfo=f||{},n.mevSuppliers=e?t?.mevSuppliers:[],n.activityId=u?.activityId,n.gasType=s.gasType,n?.txParams?.data||(n.isBaseCoinTransfer=!0),d===kt.KAIA_SIGN_TRANSACTION&&(n.txParams.signFn=kt.KAIA_SIGN_TRANSACTION,n.txParams.kaiaTxType=n.txParams.typeInt),n};var On=(e,t)=>{let o=(0,rt.useSelector)(s=>go(s,e)),r=(0,rt.useSelector)(s=>To(s,e)??t);return{mevInfo:o,isMev:r}},Wn=({walletId:e,from:t,to:o})=>(0,ot.useMemoizedFn)(r=>{let s=r;r===ro&&(s="sdk-error"),pt(`evm_tx_failed-${s}`,{to:o},{tags:{walletId:e,from:t}})}),Rn=({unapproved:e,needMev:t=!0,gasLimitParams:o,onBeforeSign:r,txToastCheckParams:s,preExecParams:p,extraParams:u,confirmBtnText:m="",cancelBtnText:c="",showApproveAddressAtPopup:n,onDataChange:d,reserveValue:T="0"})=>{let{id:f,params:_={},extParams:g={},chainId:C}=e,I=(0,rt.useDispatch)(),h=q(C),w=We(e),{from:P,to:A,value:R,authorizationList:O}=_,{coinId:H,chainName:j}=h,{walletId:F}=yt(e.origin,P)||{},{isMev:X,mevInfo:J}=On(f,g?.isMev),ee=Wr(),te=Rr(),K=Ur(),Q=Hr(),qe=Yr(),Ce=(0,ot.useMemoizedFn)((ye,ne)=>{I(bt.setIsMev({isMev:ye,id:f})),I(bt.setMevInfo({mevInfo:ne,id:f}))});Or();let ze=Te(F),Ve=Ho({walletId:F,fromAddr:P,coinId:H}),ue=(0,ot.useMemoizedFn)(async()=>{ze({trade:"contract_interaction",all_confirmation:"cancel",network:j,dapp_url:e.origin}),fo(),await I(Tt(f)),await _e(I)}),he=Yo(),Ne=Wn({extParams:g,walletId:F,from:P,to:A}),Se=(0,ot.useMemoizedFn)(async({modifiedData:ye,customGasInfo:ne,gasReturnActivity:ae,preExecInfo:Fe,reportGasReturnActivityDataInConfirm:be})=>{try{let{gasPrice:L}=ne;if(ee(f),await Ge({callback:ue,walletId:F})){let b=W(R||0),Et=await he({to:A,from:P,coinId:H,gasPrice:L,userGasInfo:ne,amount:b,baseCoinAmountUse:b,authorizationList:O,...s||{}});be();let at=qr({isMev:X,mevInfo:J,unapproved:e,updateData:Et,modifiedData:ye,customGasInfo:ne,gasReturnActivity:ae}),ve=at.txParams;r&&(ve=r(ve)),te(f);let it=await Ve(ve);K(f);let Le=await I(xo(f,{...at,txParams:ve,signedTx:it,walletId:F,coinId:H,preExecInfo:Fe,...u||{}},{failTxWhenError:!1}));Q(f),Bt(Le?.code)?(ae?.clear(),U.error({title:Le?.msg||l("wallet_home_toast_network_error"),duration:3})):(po({tx_id:Le?.serverTxId}),qe(f))}}catch(L){let fe=L?.data?.originalError;Bt(fe?.code)?(ae?.clear(),U.error({title:fe?.msg||l("wallet_home_toast_network_error"),duration:3})):L?.message===no?U.error(l("wallet_extension_tg_error_network")):L?.message!==Uo&&L?.message!==Go&&U.error(L?.message||l("wallet_home_toast_network_error")),Ne(L?.message)}await _e(I)});return zr.default.createElement(Jo,{showApproveAddressAtPopup:n,confirmBtnText:m,cancelBtnText:c,preExecParams:p,txToastCheckParams:s,needMev:t,coinId:H,openMev:X,onConfirmReplace:!0,dappInfo:w,gasLimitParams:o||{},txParams:_,txType:e?.type,walletId:F,isShowBlockSwapMevTooltip:g?.isShowBlockSwapMevTooltip,onMevChange:Ce,onCancel:ue,onConfirm:Se,onDataChange:d,reserveValue:T})},It=Rn;function Un({unapproved:e}){return Vr.default.createElement(It,{unapproved:e})}var Dt=Un;a();i();var N=x(S());B();Ee();a();i();var ke=x(S()),Gt=x(yo());Be();B();Ee();a();i();var Ue={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function Hn({nonce:e,suggestedNonce:t,setNonce:o}){let r=p=>{o(p)},s;return e&&(se(e,t)?s=l("developer_mode_send_tooltip_higher",{num:t}):Vt(e,t)&&(s=l("developer_mode_send_tooltip_lower",{num:t}))),ke.default.createElement(mr.Row,{className:Ue.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},ke.default.createElement("div",{className:Ue.content},ke.default.createElement("div",{className:Ue.inner},ke.default.createElement(wt.Number,{innerClassName:(0,Gt.default)({"rpc-evm-send-edit-nonce__warning-input":!!s}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:l("developer_mode_send_maintitle_nonce"),placeholder:`${Ie(t)?"":je.thousandFormat(t)}`,size:wt.SIZE.xl,value:e,onAdd:()=>!e&&t!==null?(r(ie(t,1)),!1):!0,onSub:()=>!e&&se(t,0)?(r(st(t-1)),!1):!0,onChange:r})),s&&ke.default.createElement("div",{className:Ue.warningText},ke.default.createElement(mt,{className:(0,Gt.default)(Ue.icon,"okx-wallet-plugin-warning-circle")}),s)))}var jr=Hn;a();i();var ge=x(S());B();a();i();var k=x(S()),nt=x(me()),Kr=x(yo());B();a();i();var D={root:"_root_424m3_1",icon:"_icon_424m3_1",editApproveAmountModal:"_editApproveAmountModal_424m3_10",content:"_content_424m3_22",editArea:"_editArea_424m3_25",unlimitedText:"_unlimitedText_424m3_30",unlimitedSymbol:"_unlimitedSymbol_424m3_39",symbolClassName:"_symbolClassName_424m3_45",quickHandler:"_quickHandler_424m3_48",balanceWrap:"_balanceWrap_424m3_55",balance:"_balance_424m3_55",maxBalance:"_maxBalance_424m3_68",maxDisabled:"_maxDisabled_424m3_76",unlimited:"_unlimited_424m3_30",text:"_text_424m3_84",authQuantityWarnTip:"_authQuantityWarnTip_424m3_91",danger:"_danger_424m3_98",info:"_info_424m3_101",approveTip:"_approveTip_424m3_104",footerActions:"_footerActions_424m3_112"};var Yn=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},qn=({txTypeInfo:e,approve:t,onUpdateAuthAmount:o})=>{let{tokenInfo:r,amount:s}=t||{},{decimals:p,symbol:u}=r,m=Ae(u,12),[c,n]=(0,k.useState)(!1),[d,{toggle:T,setFalse:f,setTrue:_}]=(0,nt.useBoolean)(!1),[g,C]=(0,k.useState)(0),I=(0,k.useMemo)(()=>d?{type:D.danger,text:l("wallet_extension_approve_alert_high_risk_unlimited")}:!d&&je.eq(g||0,0)?{type:D.info,text:l("wallet_extension_approve_cannot_zero")}:null,[d,g]),h=(0,nt.useMemoizedFn)((A=s)=>{ft(A)?(C(0),_()):(C(Ko(A,p)),f()),n(!0)}),w=(0,k.useMemo)(()=>d?!1:!je.gt(`${g||0}`,0),[d,g]),P=(0,nt.useMemoizedFn)(()=>{n(!1);let A=d?co:Qo(g,p);o(A)});return k.default.createElement(E.Box,{className:D.root},k.default.createElement(E.Box,{className:D.icon,onClick:()=>{h()}},k.default.createElement(mt,{className:"okx-wallet-plugin-draw-20"})),k.default.createElement(lt.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:c},k.default.createElement(E.Box,{className:D.editApproveAmountModal},k.default.createElement(E.Box,{className:D.content},k.default.createElement(Oe,{txTypeInfo:e,bordered:!1}),k.default.createElement(E.Box,{className:D.editArea},d?k.default.createElement(vt.Text,{className:D.unlimitedText},l("wallet_extension_transfer_title_unlimited_amount",{token:k.default.createElement(vt.Text,{className:D.unlimitedSymbol},m)})):k.default.createElement(Oo,{symbol:m,autoSize:Yn,placeholder:"0",decimals:p,value:g,onChange:C,style:{fontWeight:700,height:"42px"},symbolClassName:D.symbolClassName})),k.default.createElement(E.Box,{className:D.quickHandler},k.default.createElement(E.Box,{onClick:T,className:D.unlimited},k.default.createElement(E.Box,{className:D.text},l("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),k.default.createElement(ct,{checked:d}))),!!I&&k.default.createElement(E.Box,{className:(0,Kr.default)(D.authQuantityWarnTip,I.type)},I.text)),k.default.createElement(E.Box,{className:D.approveTip},l("wallet_extension_approve_desc_dapp_right")),k.default.createElement(Me,{affixStyle:{position:"none"},placeholder:!1,className:D.footerActions},k.default.createElement(Y,{block:!0,disabled:w,category:Y.CATEGORY.fill,type:Y.TYPE.primary,size:Y.SIZE.lg,onClick:P},l("wallet_extension_approve_btn_amount_confirmation"))))))},Qr=qn;var zn=({onUpdateAuthAmount:e,dappInfo:t,loading:o,approveToken:r,title:s})=>{let{isApprove:p,isRevoke:u,address:m,customApproveAmount:c=0,symbol:n=Xe,decimals:d=0,icon:T=_o}=r,f=Ae(n,12);if(o)return ge.default.createElement(nr,null);if(p){let _={title:{text:s},subTitle:t.host};if(u){let C={image:{light:"/cdn/assets/imgs/2411/55679A63BA670217.png",dark:"/cdn/assets/imgs/2411/E42714B599040ADC.png"},..._};return ge.default.createElement(Oe,{txTypeInfo:{baseInfo:C}},ge.default.createElement(Zo,{imageUrl:T,text:f}))}let g={image:{light:"/cdn/assets/imgs/2411/EF6FBB80F8021B76.png",dark:"/cdn/assets/imgs/2411/E457296ACFFE1EA9.png"},..._};return ge.default.createElement(Oe,{txTypeInfo:{baseInfo:g}},ge.default.createElement($o,{approveInfoList:[{amount:c,canEditAmount:!0,autoOpen:!1,tokenInfo:{address:m,decimals:d,symbol:n}}],renderEditApproveAmount:C=>ge.default.createElement(Qr,{txTypeInfo:{baseInfo:g},approve:C,onUpdateAuthAmount:e})}))}return ge.default.createElement(Oe,{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:l("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:t.host}}})},Zr=zn;a();i();B();var Vn=({chainGasLoadFailed:e,isSufficientBalance:t,isSufficientGas:o,transaction:r,actions:s,modifiedDataError:p,walletInfo:u,params:m,rpcInfo:c,addressCheckRet:n})=>{let{addressCheckLoading:d,addressCheckError:T}=n,f=t&&o,{chain:_,nonce:g,loading:C,gas:I}=r,{sign:h,cancel:w}=s,{chainGasLoading:P}=I,{loading:A,onClick:R}=le(w),O={actionType:v.ACTION_TYPE.CANCEL,onClick:R,loading:A},H=async()=>{try{if(!await Ge({walletId:u?.walletId,callback:w}))return}catch{}let te=K=>{let Q=ho[u?.keyringIdentityType];uo({tx_source:"dapp",from_addr:m.from,to_addr:m.to,main_token_symbol:c?.symbol,token_symbol:K?.extraParams?.coinSymbol||"",contract_address:m?.to,volume_token:m?.value,volume_usdt:"",tx_hash_unique:K?.txHash,wallet_type:Q,chain_id:parseInt(_.chainId,16)})};h(u?.walletId,te,c)},j=()=>{globalThis.open(c.faucetUrl)},F=P||e||!f&&!c?.faucetUrl||g.pending||C.sign||C.token||p||T||d,{loading:X,onClick:J}=le(H),ee={disabled:F,actionType:v.ACTION_TYPE.CONFIRM,onClick:J,loading:X};return!f&&c?.faucetUrl&&(ee.actionType=v.ACTION_TYPE.FILL_UP,ee.onClick=j,ee.btnText=l("wallet_extension_transfer_btn_via_faucet")),[O,ee]},$r=Vn;a();i();B();Ee();var jn=({customGasInfo:e})=>()=>e?.isSupportEip1559&&e?.baseFeePerGas==="0"?{type:oe.TYPE.warn,message:l("wallet_extension_transaction_error_base_zero")}:null,Kn=({modifiedDataError:e})=>()=>e?{}:null,Qn=({isSufficientBalance:e})=>()=>e?null:{type:oe.TYPE.warn,message:l("wallet_extension_popup_dapp_insufficient_balance")},Zn=({isSufficientGas:e,chain:t})=>()=>e?null:{type:oe.TYPE.warn,message:l("wallet_extension_popup_insufficient_network_fee",{token:t.symbol})},$n=({chainGasLoadFailed:e,chainGasError:t})=>()=>e?{type:Pe.TIP_TYPE.FEE_ERROR_WITH_MESSAGE,errorMsg:t}:null,Xn=({auth:e,contract:t,asset:o})=>()=>ft(e.customApproveAmount)?{type:oe.TYPE.warn,message:l("wallet_extension_popup_unlimited_transfer",{contract:t,asset:o})}:se(e.customApproveAmount,0)?{type:oe.TYPE.warn,message:l("extension_approve_alert_authorized_tips",{contract:t,asset:o})}:null,Jn=e=>()=>e?{type:Pe.TIP_TYPE.COMMON_ERROR,message:e}:null,ea=({customGasInfo:e,chainGasError:t,chainGasLoadFailed:o,modifiedDataError:r,isSufficientBalance:s,isSufficientGas:p,isRevokeTx:u,transaction:m,loading:c,addressCheckRet:n})=>{let{auth:d,chain:T}=m,{addressCheckLoading:f,addressCheckError:_}=n,g=Ae(d.name||Xe),C=Ae(d.symbol||Xe),I=jn({customGasInfo:e}),h=Kn({modifiedDataError:r}),w=Qn({isSufficientBalance:s,chain:T}),P=Zn({isSufficientGas:p,chain:T}),A=$n({chainGasLoadFailed:o,chainGasError:t}),R=()=>u?{type:oe.TYPE.info,message:l("extension_revoke_approval_alert_evoke_authorization",{contract:g,asset:C})}:null,O=Jn(_),H=Xn({auth:d,contract:g,asset:C});if(c||f)return null;let j=[h,O,P,w,R,H,A,I];for(let F=0;F<j.length;F++){let X=j[F],J=X();if(J)return J}return null},Xr=ea;var Ot=({unapproved:e,rpcInfo:t})=>{let{origin:o,params:r,method:s,chainId:p}=e,{from:u,value:m,to:c,typeInt:n}=r,[d,T]=(0,N.useState)(""),[f,_]=(0,N.useState)(!1),g=Vo(d),C=yt(o,u),[I,h]=ur({...r,...e,walletId:C?.walletId},t),w=(0,N.useMemo)(()=>[ut.FeeDelegatedValueTransfer,ut.FeeDelegatedValueTransferMemo,ut.FeeDelegatedSmartContractExecution].includes(n),[n]),{title:P,auth:A,meta:R,nonce:O,gas:H,loading:j,data:F}=I,{setNonce:X,setAuthAmount:J}=h,{setGasType:ee,currentGasInfo:te,chainGasLevels:K,chainGasLoading:Q,chainGasError:qe,chainGasLoadFailed:Ce,setCustomGasOption:ze,chainGasLimitLoadFailed:Ve}=H,ue=Fo(void 0,void 0,t),he=gr(te);ir(t),xr(u,t),hr();let Ne=Ke(ue?.balance,ie(he,jt(m||0))),Se=Ke(ue?.balance,he),{cancel:ye}=h,ne=We(e),ae=sr({from:u,to:c,method:s,dappData:JSON.stringify({from:u,to:c,data:F,value:m}),dappInfo:ne,chainIndex:W(p),isRpcChain:!0,handleCancel:ye},mo),Fe=Xr({customGasInfo:te,chainGasError:qe,chainGasLoadFailed:Ce,isSufficientGas:Se,isSufficientBalance:Ne,isRevokeTx:A.isRevoke,modifiedDataError:g,transaction:I,loading:Q,addressCheckRet:ae}),be=$r({chainGasLoadFailed:Ce,isSufficientBalance:Ne,isSufficientGas:Se,transaction:I,actions:h,modifiedDataError:g,walletInfo:C,params:r,rpcInfo:t,addressCheckRet:ae});return N.default.createElement(E.Container,null,N.default.createElement(Zr,{title:P,confirmBuryPointFn:()=>{},onUpdateAuthAmount:L=>{J(L)},dappInfo:R.originInfo,loading:j.token,approveToken:A}),N.default.createElement(ce,null,N.default.createElement(ht,{isFree:w,onClick:()=>{_(!0)},level:te?.typeKey,injectCoin:ue,loading:Q,estimateFailed:Ce,networkFee:Q?void 0:zt(he,10**ue?.decimals)})),N.default.createElement(ce,null,N.default.createElement(Je,{title:l("wallet_extension_network_address_title_walletused"),address:C.address,walletId:C.walletId}),!!c&&N.default.createElement(Je,{title:l("wallet_extension_popup_text_interact_with"),address:c})),N.default.createElement(jr,{nonce:O.custom,suggestedNonce:O.suggested,setNonce:X}),F?N.default.createElement(ce,{bordered:!1},N.default.createElement(tr,{data:F,copyable:{hideDesc:!0}})):N.default.createElement(ce,{bordered:!1},N.default.createElement(zo,{value:d,error:g,onChange:T})),N.default.createElement(Me,{placeholder:!0,offsetBottom:0,borderTop:!0,style:{zIndex:10}},!g&&N.default.createElement(Pe,{...Fe}),N.default.createElement(v,{buttonGroup:be})),Q?null:N.default.createElement(Cr,{onBack:()=>{_(!1)},visible:f,rpcInfo:t,setGasType:ee,chainGasLevels:K,setCustomGasOption:ze,currentGasInfo:te,chainGasLimitLoadFailed:Ve}))};a();i();var G=x(S()),en=x(me());B();Xt();a();i();var xe={root:"_root_184nf_1",main:"_main_184nf_5",tips:"_tips_184nf_10",list:"_list_184nf_16",item:"_item_184nf_16",title:"_title_184nf_22",footer:"_footer_184nf_29"};var Jr={uniqueId:Ze,rpcUrl:l("wallet_extension_rpc_title_official")},ta=({targetRpcChain:e,targetMainChain:t,handleSelect:o})=>{let[r,s]=(0,G.useState)({}),p=[...e],u=!!t.length;u&&p.unshift(Jr);let[m,c]=(0,G.useState)(!1),{updateRpcNetwork:n}=dt(),d=(0,G.useCallback)(async()=>{try{c(!0);let f=e.find(_=>!!_.isDefaultRpc);if(r.isDefaultRpc||r.uniqueId===Ze&&!f)return;f&&await n({...f,isDefaultRpc:!1}),await n({...r,isDefaultRpc:!0})}catch(f){console.log(f)}finally{c(!1)}},[r,e,n]),T=(0,G.useCallback)(async()=>{await d(),o(r)},[r,o,d]);return(0,en.useMount)(()=>{let f=e.find(_=>_.isDefaultRpc);f?s(f):u&&s(Jr)}),G.default.createElement(E.FlexBox,{className:xe.root,direction:E.DIRECTION.vertical},G.default.createElement(De,{backable:!1,closeable:!1,title:l("wallet_extension_rpc_title_select_rpc")}),G.default.createElement(E.Box,{className:xe.main},G.default.createElement(E.Box,{className:xe.tips},l("wallet_extension_rpc_desc_select_rpc_current")),G.default.createElement(E.Box,{className:xe.list},p.map(f=>G.default.createElement(E.Box,{className:xe.item,onClick:()=>{s(f)}},G.default.createElement(Io,{ellipsis:!0,className:xe.title},f.rpcUrl),G.default.createElement(ct.Circle,{checked:f.uniqueId===r.uniqueId}))))),G.default.createElement(E.Box,{className:xe.footer},G.default.createElement(v,{buttonGroup:[{loading:m,disabled:!r.uniqueId,actionType:v.ACTION_TYPE.CONFIRM,onClick:T,"data-testid":No.DAPP_ENTRY_PAGE.RPC_SELECTOR_CONFIRM_BUTTON}]})))},tn=ta;a();i();var on={root:"_root_1ou6i_1"};var Wt=(e,t)=>{(0,z.useEffect)(()=>{if(!t)return Yt;let o=setTimeout(()=>{pt(`evm-dapp-loading-exceeds-5s-${e}`)},5e3);return()=>{clearTimeout(o)}},[e,t])},oa=({status:e,evmMainNetworks:t,chainNotifyModalLoading:o})=>(Wt("status",e==="loading"),Wt("evmMainNetworks",!t?.length),Wt("chainNotifyModalLoading",o),z.default.createElement(E.Box,{className:on.root},z.default.createElement(So,null))),ra=e=>{let{unapproved:t}=e,{rpcNetworks:o,status:r}=dt(),s=Lo({appBaseChain:"ethereum"})||[],p=s.filter(T=>Qe(T.realChainIdHex,t.chainId)),u=o.filter(T=>Qe(T.chainId,t.chainId)),[m,c]=(0,z.useState)(null),n=p?.[0]?.chainName||u?.[0]?.name,{loading:d}=ar({unapproved:t,network:n,providerType:$t});return r==="loading"||!s?.length||d?z.default.createElement(oa,{status:r,evmMainNetworks:s,chainNotifyModalLoading:d}):p.length+u.length>1?m?m.uniqueId===Ze?z.default.createElement(Dt,{...e}):z.default.createElement(Ot,{...e,rpcInfo:m}):z.default.createElement(tn,{networkType:t.networkType,targetRpcChain:u,targetMainChain:p,handleSelect:c}):p.length?z.default.createElement(Dt,{...e}):z.default.createElement(Ot,{...e,rpcInfo:u[0]})},rn=ra;a();i();var Ye=x(S()),un=x(gt()),fn=x(me());Ft();a();i();var re=x(S()),mn=x(me());B();a();i();B();function nn(e){let t=e,o=t.msg||t.message||t.originalError?.message||l("wallet_extension_general_error_extension_code_error");U.error({title:o})}Jt();Ee();a();i();var Rt=x(S());B();a();i();var an={root:"_root_1r48s_1"};function na({onCancel:e}){return Rt.default.createElement(E.Container,{className:an.root},Rt.default.createElement(jo,{confirmBtnText:l("wallet_extension_transfer_btn_confirm_all"),cancelBtnText:l("wallet_extension_transfer_btn_reject_all"),handleCancel:e}))}var sn=na;function aa({txParams:e,unapproved:t,onCancel:o,modifiedCalls:r}){let{chainId:s,extParams:{chain7702Data:{contractAddress:p}},walletId:u}=t,{from:m,authorizationList:c}=e||{},n=c&&c.length>0,d=q(s),[T,f]=(0,re.useState)(""),{gasLimitParams:_}=lr({isUpgrade7702:!0,fromAddress:m,disabled:!e||!n,localType:d.localType,inputData:T||e?.data,upgradeAddress:p}),g=(0,re.useMemo)(()=>_?.stateOverrideList?{stateOverrideList:_.stateOverrideList}:{},[_]),C=h=>{if(!n)return h;let{nonce:w,...P}=h,A=At({localType:d.localType});return{...P,nonce:w,authorizationList:[{chainId:A?.realChainIdHex,address:p,nonce:$(Number(W(w))+1),fromAddress:m,walletId:u,localType:d.localType}]}};if(!e||n&&!_)return re.default.createElement(sn,{onCancel:o});let I=(r||[]).reduce((h,w)=>{let P=w.value?W(w.value).toString():"0";return`${ie(h,P)}`},"0");return re.default.createElement(It,{reserveValue:I,showApproveAddressAtPopup:!0,needMev:!0,confirmBtnText:l("wallet_extension_transfer_btn_confirm_all"),cancelBtnText:l("wallet_extension_transfer_btn_reject_all"),txToastCheckParams:g,preExecParams:g,gasLimitParams:_,unapproved:{...t,params:e},onBeforeSign:C,extraParams:{eip7702UpgradeAddress:n?p:void 0,modifiedCalls:r},onDataChange:f})}function ia({unapproved:e,shouldUpgrade7702:t,onCancel:o}){let{chainId:r}=e,[s,p]=(0,re.useState)(null),[u,m]=(0,re.useState)(null);return(0,mn.useMount)(()=>{(async()=>{try{let{params:{from:c,calls:n},extParams:{chain7702Data:{contractAddress:d,contractData:T}}}=e,f={from:c,to:c,value:"0x0"},_=[...n];if(t){let g=At({chainId:r});_.unshift({to:c,value:"0x0",data:T}),f.authorizationList=[{chainId:g.realChainIdHex,address:d}]}f.data=await Xo({type:1,chainIndex:r,calls:_}),m(_),p(f)}catch(c){nn(c)}})()}),re.default.createElement(aa,{unapproved:e,txParams:s,modifiedCalls:u,onCancel:o})}var ln=ia;a();i();var V=x(S()),cn=x(me());Be();B();a();i();var He={content:"_content_1qv1a_1",title:"_title_1qv1a_5",subTitle:"_subTitle_1qv1a_12",footerWrapper:"_footerWrapper_1qv1a_19",footer:"_footer_1qv1a_19"};function ma({status:e,walletId:t,chainIndex:o,onCancel:r,onClose:s}){let[p,u]=(0,V.useState)(e),m,c=async()=>{let f=((await vo(t))?.chainList||[]).find(_=>_.chainIndex===o)?.status;Ie(f)||(f===3?s(!1):u(f))};return p===1||p===4?m={loading:!1,btnText:l("wallet_extension_transfer_bttmsheet_btn_apply_continue"),onClick:()=>{s(!0)}}:m={loading:!0,btnText:l("wallet_extension_transfer_bttmsheet_btn_processing")},bo("wallet-tx-status-toast",{onSuccess:c}),(0,cn.useMount)(()=>{c()}),V.default.createElement(E.Container,null,V.default.createElement(De,{closeable:!1,backable:!1}),V.default.createElement(lt.Action,{isFull:!0,visible:!0,hideCloseBtn:!0,escToClose:!1,maskClosable:!1,renderContent:()=>V.default.createElement("div",{className:He.content},V.default.createElement("div",{className:He.title},l("wallet_extension_transfer_bttmsheet_title_okx7702")),V.default.createElement("div",{className:He.subTitle},l("wallet_extension_transfer_bttmsheet_desc_okx7702")),V.default.createElement(yr,null)),footerClassName:He.footerWrapper,renderFooter:()=>V.default.createElement("div",{className:He.footer},V.default.createElement(Y,{category:Y.CATEGORY.outline,type:Y.TYPE.primary,size:Y.SIZE.lg,onClick:r},l("wallet_extension_btn_general_cancel")),V.default.createElement(Y,{category:Y.CATEGORY.fill,type:Y.TYPE.primary,size:Y.SIZE.lg,...m},m.btnText))}))}var pn=ma;function la({unapproved:e}){let{id:t,extParams:o,chainId:r}=e,{chain7702Data:{status:s}}=o,p=(0,un.useDispatch)(),[u,m]=(0,Ye.useState)(s!==3),[c,n]=(0,Ye.useState)(!1),d=(0,fn.useMemoizedFn)(async()=>{await p(Tt(t)),await _e(p)});return u?Ye.default.createElement(pn,{status:s,walletId:e.walletId,chainIndex:r,onCancel:d,onClose:T=>{m(!1),n(T)}}):Ye.default.createElement(ln,{unapproved:e,shouldUpgrade7702:c,onCancel:d})}var dn=la;var Mp=(0,pe.memo)(({unapproved:e})=>{switch(e.method){case Nt.SEND_EVM_INSCRIPTIONS:return pe.default.createElement(Gr,{unapproved:e});case Nt.WALLET_SEND_CALLS:return pe.default.createElement(dn,{unapproved:e});default:break}switch(e.type){case de.ETH_SIGN:case de.PERSONAL_SIGN:case de.ETH_SIGN_TYPED_DATA:case de.ETH_GET_ENCRYPTION_PUBLIC_KEY:case de.ETH_DECRYPT:return pe.default.createElement(Tr,{unapproved:e});case de.WATCH_ASSET:return pe.default.createElement(Sr,{unapproved:e});case de.ADD_ETHEREUM_CHAIN:return pe.default.createElement(fr,{unapproved:e});default:return pe.default.createElement(rn,{unapproved:e})}});export{Mp as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Ethereum-ZQZWSOFT.js.map
