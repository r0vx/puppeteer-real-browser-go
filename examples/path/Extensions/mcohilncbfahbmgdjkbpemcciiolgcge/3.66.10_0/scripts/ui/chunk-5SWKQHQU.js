import{b as Oi}from"./chunk-BJAL3374.js";import{a as Kf}from"./chunk-VYKQ62AB.js";import{a as jf}from"./chunk-KTFU3F6C.js";import{m as Nf}from"./chunk-EBMX24YQ.js";import{b as Cf}from"./chunk-3C4MEE67.js";import{d as Cs}from"./chunk-R4BHRBC7.js";import{c as st,n as process,o as H,p as I,q as R}from"./chunk-SHG7TIBL.js";var ln=st(ce=>{"use strict";H();R();Object.defineProperty(ce,"__esModule",{value:!0});ce.output=ce.exists=ce.hash=ce.bytes=ce.bool=ce.number=void 0;function Zn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}ce.number=Zn;function Ns(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}ce.bool=Ns;function Hi(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}ce.bytes=Hi;function js(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Zn(t.outputLen),Zn(t.blockLen)}ce.hash=js;function Ks(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}ce.exists=Ks;function Vs(t,e){Hi(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}ce.output=Vs;var Vf={number:Zn,bool:Ns,bytes:Hi,hash:js,exists:Ks,output:Vs};ce.default=Vf});var zs=st(Fn=>{"use strict";H();R();Object.defineProperty(Fn,"__esModule",{value:!0});Fn.crypto=void 0;Fn.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var wr=st(Q=>{"use strict";H();R();Object.defineProperty(Q,"__esModule",{value:!0});Q.randomBytes=Q.wrapConstructorWithOpts=Q.wrapConstructor=Q.checkOpts=Q.Hash=Q.concatBytes=Q.toBytes=Q.utf8ToBytes=Q.asyncLoop=Q.nextTick=Q.hexToBytes=Q.bytesToHex=Q.isLE=Q.rotr=Q.createView=Q.u32=Q.u8=void 0;var Wn=zs(),zf=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Q.u8=zf;var Df=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));Q.u32=Df;var Zf=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);Q.createView=Zf;var Ff=(t,e)=>t<<32-e|t>>>e;Q.rotr=Ff;Q.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Q.isLE)throw new Error("Non little-endian hardware is not supported");var Wf=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gf(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Wf[t[r]];return e}Q.bytesToHex=Gf;function Xf(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let s=r*2,i=t.slice(s,s+2),l=Number.parseInt(i,16);if(Number.isNaN(l)||l<0)throw new Error("Invalid byte sequence");e[r]=l}return e}Q.hexToBytes=Xf;var Yf=async()=>{};Q.nextTick=Yf;async function Qf(t,e,r){let s=Date.now();for(let i=0;i<t;i++){r(i);let l=Date.now()-s;l>=0&&l<e||(await(0,Q.nextTick)(),s+=l)}}Q.asyncLoop=Qf;function Ds(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}Q.utf8ToBytes=Ds;function ki(t){if(typeof t=="string"&&(t=Ds(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}Q.toBytes=ki;function Jf(...t){if(!t.every(s=>s instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((s,i)=>s+i.length,0),r=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){let l=t[s];r.set(l,i),i+=l.length}return r}Q.concatBytes=Jf;var Ri=class{clone(){return this._cloneInto()}};Q.Hash=Ri;var tu=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function eu(t,e){if(e!==void 0&&(typeof e!="object"||!tu(e)))throw new TypeError("Options should be object or undefined");return Object.assign(t,e)}Q.checkOpts=eu;function ru(t){let e=s=>t().update(ki(s)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}Q.wrapConstructor=ru;function nu(t){let e=(s,i)=>t(i).update(ki(s)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=s=>t(s),e}Q.wrapConstructorWithOpts=nu;function iu(t=32){if(Wn.crypto.web)return Wn.crypto.web.getRandomValues(new Uint8Array(t));if(Wn.crypto.node)return new Uint8Array(Wn.crypto.node.randomBytes(t).buffer);throw new Error("The environment doesn't have randomBytes function")}Q.randomBytes=iu});var Zs=st(dn=>{"use strict";H();R();Object.defineProperty(dn,"__esModule",{value:!0});dn.hmac=void 0;var Gn=ln(),Ui=wr(),Xn=class extends Ui.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Gn.default.hash(e);let s=(0,Ui.toBytes)(r);if(this.iHash=e.create(),!(this.iHash instanceof Ui.Hash))throw new TypeError("Expected instance of class which extends utils.Hash");let i=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;let l=new Uint8Array(i);l.set(s.length>this.iHash.blockLen?e.create().update(s).digest():s);for(let m=0;m<l.length;m++)l[m]^=54;this.iHash.update(l),this.oHash=e.create();for(let m=0;m<l.length;m++)l[m]^=106;this.oHash.update(l),l.fill(0)}update(e){return Gn.default.exists(this),this.iHash.update(e),this}digestInto(e){Gn.default.exists(this),Gn.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:s,finished:i,destroyed:l,blockLen:m,outputLen:x}=this;return e=e,e.finished=i,e.destroyed=l,e.blockLen=m,e.outputLen=x,e.oHash=r._cloneInto(e.oHash),e.iHash=s._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},su=(t,e,r)=>new Xn(t,e).update(r).digest();dn.hmac=su;dn.hmac.create=(t,e)=>new Xn(t,e)});var Fs=st(Yn=>{"use strict";H();R();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.SHA2=void 0;var qi=ln(),pn=wr();function ou(t,e,r,s){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,s);let i=BigInt(32),l=BigInt(4294967295),m=Number(r>>i&l),x=Number(r&l),B=s?4:0,L=s?0:4;t.setUint32(e+B,m,s),t.setUint32(e+L,x,s)}var $i=class extends pn.Hash{constructor(e,r,s,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=s,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,pn.createView)(this.buffer)}update(e){qi.default.exists(this);let{view:r,buffer:s,blockLen:i}=this;e=(0,pn.toBytes)(e);let l=e.length;for(let m=0;m<l;){let x=Math.min(i-this.pos,l-m);if(x===i){let B=(0,pn.createView)(e);for(;i<=l-m;m+=i)this.process(B,m);continue}s.set(e.subarray(m,m+x),this.pos),this.pos+=x,m+=x,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){qi.default.exists(this),qi.default.output(e,this),this.finished=!0;let{buffer:r,view:s,blockLen:i,isLE:l}=this,{pos:m}=this;r[m++]=128,this.buffer.subarray(m).fill(0),this.padOffset>i-m&&(this.process(s,0),m=0);for(let B=m;B<i;B++)r[B]=0;ou(s,i-8,BigInt(this.length*8),l),this.process(s,0);let x=(0,pn.createView)(e);this.get().forEach((B,L)=>x.setUint32(4*L,B,l))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let s=e.slice(0,r);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:s,length:i,finished:l,destroyed:m,pos:x}=this;return e.length=i,e.pos=x,e.finished=l,e.destroyed=m,i%r&&e.buffer.set(s),e}};Yn.SHA2=$i});var Ws=st(Qn=>{"use strict";H();R();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.sha256=void 0;var fu=Fs(),Te=wr(),uu=(t,e,r)=>t&e^~t&r,au=(t,e,r)=>t&e^t&r^e&r,hu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ir=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sr=new Uint32Array(64),Ci=class extends fu.SHA2{constructor(){super(64,32,8,!1),this.A=ir[0]|0,this.B=ir[1]|0,this.C=ir[2]|0,this.D=ir[3]|0,this.E=ir[4]|0,this.F=ir[5]|0,this.G=ir[6]|0,this.H=ir[7]|0}get(){let{A:e,B:r,C:s,D:i,E:l,F:m,G:x,H:B}=this;return[e,r,s,i,l,m,x,B]}set(e,r,s,i,l,m,x,B){this.A=e|0,this.B=r|0,this.C=s|0,this.D=i|0,this.E=l|0,this.F=m|0,this.G=x|0,this.H=B|0}process(e,r){for(let K=0;K<16;K++,r+=4)sr[K]=e.getUint32(r,!1);for(let K=16;K<64;K++){let V=sr[K-15],X=sr[K-2],Kt=(0,Te.rotr)(V,7)^(0,Te.rotr)(V,18)^V>>>3,Et=(0,Te.rotr)(X,17)^(0,Te.rotr)(X,19)^X>>>10;sr[K]=Et+sr[K-7]+Kt+sr[K-16]|0}let{A:s,B:i,C:l,D:m,E:x,F:B,G:L,H:U}=this;for(let K=0;K<64;K++){let V=(0,Te.rotr)(x,6)^(0,Te.rotr)(x,11)^(0,Te.rotr)(x,25),X=U+V+uu(x,B,L)+hu[K]+sr[K]|0,Et=((0,Te.rotr)(s,2)^(0,Te.rotr)(s,13)^(0,Te.rotr)(s,22))+au(s,i,l)|0;U=L,L=B,B=x,x=m+X|0,m=l,l=i,i=s,s=X+Et|0}s=s+this.A|0,i=i+this.B|0,l=l+this.C|0,m=m+this.D|0,x=x+this.E|0,B=B+this.F|0,L=L+this.G|0,U=U+this.H|0,this.set(s,i,l,m,x,B,L,U)}roundClean(){sr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};Qn.sha256=(0,Te.wrapConstructor)(()=>new Ci)});var zi=st(F=>{"use strict";H();R();Object.defineProperty(F,"__esModule",{value:!0});F.utils=F.schnorr=F.verify=F.signSync=F.sign=F.getSharedSecret=F.recoverPublicKey=F.getPublicKey=F.Signature=F.Point=F.CURVE=void 0;var cu=Nf(),nt=BigInt(0),gt=BigInt(1),ie=BigInt(2),yn=BigInt(3),lu=BigInt(8),Ni=ie**BigInt(256),ot={a:nt,b:BigInt(7),P:Ni-ie**BigInt(32)-BigInt(977),n:Ni-BigInt("432420386565659656852420866394968145599"),h:gt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};F.CURVE=ot;function Gs(t){let{a:e,b:r}=ot,s=O(t*t),i=O(s*t);return O(i+e*t+r)}var Jn=ot.a===nt,ht=class{constructor(e,r,s){this.x=e,this.y=r,this.z=s}static fromAffine(e){if(!(e instanceof J))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new ht(e.x,e.y,gt)}static toAffineBatch(e){let r=yu(e.map(s=>s.z));return e.map((s,i)=>s.toAffine(r[i]))}static normalizeZ(e){return ht.toAffineBatch(e).map(ht.fromAffine)}equals(e){if(!(e instanceof ht))throw new TypeError("JacobianPoint expected");let{x:r,y:s,z:i}=this,{x:l,y:m,z:x}=e,B=O(i**ie),L=O(x**ie),U=O(r*L),K=O(l*B),V=O(O(s*x)*L),X=O(O(m*i)*B);return U===K&&V===X}negate(){return new ht(this.x,O(-this.y),this.z)}double(){let{x:e,y:r,z:s}=this,i=O(e**ie),l=O(r**ie),m=O(l**ie),x=O(ie*(O((e+l)**ie)-i-m)),B=O(yn*i),L=O(B**ie),U=O(L-ie*x),K=O(B*(x-U)-lu*m),V=O(ie*r*s);return new ht(U,K,V)}add(e){if(!(e instanceof ht))throw new TypeError("JacobianPoint expected");let{x:r,y:s,z:i}=this,{x:l,y:m,z:x}=e;if(l===nt||m===nt)return this;if(r===nt||s===nt)return e;let B=O(i**ie),L=O(x**ie),U=O(r*L),K=O(l*B),V=O(O(s*x)*L),X=O(O(m*i)*B),Kt=O(K-U),Et=O(X-V);if(Kt===nt)return Et===nt?this.double():ht.ZERO;let j=O(Kt**ie),Z=O(Kt*j),se=O(U*j),ge=O(Et**ie-Z-ie*se),Be=O(Et*(se-ge)-V*Z),Ze=O(i*x*Kt);return new ht(ge,Be,Ze)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=ht.ZERO;if(typeof e=="bigint"&&e===nt)return r;let s=Qs(e);if(s===gt)return this;if(!Jn){let K=r,V=this;for(;s>nt;)s&gt&&(K=K.add(V)),V=V.double(),s>>=gt;return K}let{k1neg:i,k1:l,k2neg:m,k2:x}=to(s),B=r,L=r,U=this;for(;l>nt||x>nt;)l&gt&&(B=B.add(U)),x&gt&&(L=L.add(U)),U=U.double(),l>>=gt,x>>=gt;return i&&(B=B.negate()),m&&(L=L.negate()),L=new ht(O(L.x*ot.beta),L.y,L.z),B.add(L)}precomputeWindow(e){let r=Jn?128/e+1:256/e+1,s=[],i=this,l=i;for(let m=0;m<r;m++){l=i,s.push(l);for(let x=1;x<2**(e-1);x++)l=l.add(i),s.push(l);i=l.double()}return s}wNAF(e,r){!r&&this.equals(ht.BASE)&&(r=J.BASE);let s=r&&r._WINDOW_SIZE||1;if(256%s)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&ji.get(r);i||(i=this.precomputeWindow(s),r&&s!==1&&(i=ht.normalizeZ(i),ji.set(r,i)));let l=ht.ZERO,m=ht.ZERO,x=1+(Jn?128/s:256/s),B=2**(s-1),L=BigInt(2**s-1),U=2**s,K=BigInt(s);for(let V=0;V<x;V++){let X=V*B,Kt=Number(e&L);if(e>>=K,Kt>B&&(Kt-=U,e+=gt),Kt===0){let Et=i[X];V%2&&(Et=Et.negate()),m=m.add(Et)}else{let Et=i[X+Math.abs(Kt)-1];Kt<0&&(Et=Et.negate()),l=l.add(Et)}}return{p:l,f:m}}multiply(e,r){let s=Qs(e),i,l;if(Jn){let{k1neg:m,k1:x,k2neg:B,k2:L}=to(s),{p:U,f:K}=this.wNAF(x,r),{p:V,f:X}=this.wNAF(L,r);m&&(U=U.negate()),B&&(V=V.negate()),V=new ht(O(V.x*ot.beta),V.y,V.z),i=U.add(V),l=K.add(X)}else{let{p:m,f:x}=this.wNAF(s,r);i=m,l=x}return ht.normalizeZ([i,l])[0]}toAffine(e=Ur(this.z)){let{x:r,y:s,z:i}=this,l=e,m=O(l*l),x=O(m*l),B=O(r*m),L=O(s*x);if(O(i*l)!==gt)throw new Error("invZ was invalid");return new J(B,L)}};ht.BASE=new ht(ot.Gx,ot.Gy,gt);ht.ZERO=new ht(nt,gt,nt);var ji=new WeakMap,J=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,ji.delete(this)}static fromCompressedHex(e){let r=e.length===32,s=le(r?e:e.subarray(1));if(!ri(s))throw new Error("Point is not on curve");let i=Gs(s),l=gu(i),m=(l&gt)===gt;r?m&&(l=O(-l)):(e[0]&1)===1!==m&&(l=O(-l));let x=new J(s,l);return x.assertValidity(),x}static fromUncompressedHex(e){let r=le(e.subarray(1,33)),s=le(e.subarray(33,65)),i=new J(r,s);return i.assertValidity(),i}static fromHex(e){let r=Le(e),s=r.length,i=r[0];if(s===32||s===33&&(i===2||i===3))return this.fromCompressedHex(r);if(s===65&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${s}`)}static fromPrivateKey(e){return J.BASE.multiply(ke(e))}static fromSignature(e,r,s){e=Le(e);let i=ro(e),{r:l,s:m}=io(r);if(s!==0&&s!==1)throw new Error("Cannot recover signature: invalid recovery bit");let x=s&1?"03":"02",B=J.fromHex(x+Ge(l)),{n:L}=ot,U=Ur(l,L),K=O(-i*U,L),V=O(m*U,L),X=J.BASE.multiplyAndAddUnsafe(B,K,V);if(!X)throw new Error("Cannot recover signature: point at infinify");return X.assertValidity(),X}toRawBytes(e=!1){return Xe(this.toHex(e))}toHex(e=!1){let r=Ge(this.x);return e?`${this.y&gt?"03":"02"}${r}`:`04${r}${Ge(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:s}=this;if(!ri(r)||!ri(s))throw new Error(e);let i=O(s*s),l=Gs(r);if(O(i-l)!==nt)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new J(this.x,O(-this.y))}double(){return ht.fromAffine(this).double().toAffine()}add(e){return ht.fromAffine(this).add(ht.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ht.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,r,s){let i=ht.fromAffine(this),l=r===nt||r===gt||this!==J.BASE?i.multiplyUnsafe(r):i.multiply(r),m=ht.fromAffine(e).multiplyUnsafe(s),x=l.add(m);return x.equals(ht.ZERO)?void 0:x.toAffine()}};F.Point=J;J.BASE=new J(ot.Gx,ot.Gy);J.ZERO=new J(nt,nt);function Xs(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Ys(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Rr(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:le(r),left:t.subarray(e+2)}}function du(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Rr(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=Ys(t.subarray(2)),{data:s,left:i}=Ys(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Rr(i)}`);return{r:e,s}}var Ie=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=mn(e),s="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${s}: Expected string or Uint8Array`);let i=r?Rr(e):e;if(i.length!==128)throw new Error(`${s}: Expected 64-byte hex`);return new Ie(ni(i.slice(0,64)),ni(i.slice(64,128)))}static fromDER(e){let r=mn(e);if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:s,s:i}=du(r?e:Xe(e));return new Ie(s,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!kr(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!kr(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=ot.n>>gt;return this.s>e}normalizeS(){return this.hasHighS()?new Ie(this.r,ot.n-this.s):this}toDERRawBytes(e=!1){return Xe(this.toDERHex(e))}toDERHex(e=!1){let r=Xs(gn(this.s));if(e)return r;let s=Xs(gn(this.r)),i=gn(s.length/2),l=gn(r.length/2);return`30${gn(s.length/2+r.length/2+4)}02${i}${s}02${l}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Xe(this.toCompactHex())}toCompactHex(){return Ge(this.r)+Ge(this.s)}};F.Signature=Ie;function Or(...t){if(!t.every(mn))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((s,i)=>s+i.length,0),r=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){let l=t[s];r.set(l,i),i+=l.length}return r}function mn(t){return t instanceof Uint8Array}var pu=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Rr(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=pu[t[r]];return e}function Ge(t){if(t>Ni)throw new Error("Expected number < 2^256");return t.toString(16).padStart(64,"0")}function Hr(t){return Xe(Ge(t))}function gn(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function ni(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function Xe(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let s=r*2,i=t.slice(s,s+2),l=Number.parseInt(i,16);if(Number.isNaN(l)||l<0)throw new Error("Invalid byte sequence");e[r]=l}return e}function le(t){return ni(Rr(t))}function Le(t){return t instanceof Uint8Array?Uint8Array.from(t):Xe(t)}function Qs(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&kr(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function O(t,e=ot.P){let r=t%e;return r>=nt?r:e+r}function Me(t,e){let{P:r}=ot,s=t;for(;e-- >nt;)s*=s,s%=r;return s}function gu(t){let{P:e}=ot,r=BigInt(6),s=BigInt(11),i=BigInt(22),l=BigInt(23),m=BigInt(44),x=BigInt(88),B=t*t*t%e,L=B*B*t%e,U=Me(L,yn)*L%e,K=Me(U,yn)*L%e,V=Me(K,ie)*B%e,X=Me(V,s)*V%e,Kt=Me(X,i)*X%e,Et=Me(Kt,m)*Kt%e,j=Me(Et,x)*Et%e,Z=Me(j,m)*Kt%e,se=Me(Z,yn)*L%e,ge=Me(se,l)*X%e,Be=Me(ge,r)*B%e;return Me(Be,ie)}function Ur(t,e=ot.P){if(t===nt||e<=nt)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=O(t,e),s=e,i=nt,l=gt,m=gt,x=nt;for(;r!==nt;){let L=s/r,U=s%r,K=i-m*L,V=l-x*L;s=r,r=U,i=m,l=x,m=K,x=V}if(s!==gt)throw new Error("invert: does not exist");return O(i,e)}function yu(t,e=ot.P){let r=new Array(t.length),s=t.reduce((l,m,x)=>m===nt?l:(r[x]=l,O(l*m,e)),gt),i=Ur(s,e);return t.reduceRight((l,m,x)=>m===nt?l:(r[x]=O(l*r[x],e),O(l*m,e)),i),r}var Js=(t,e)=>(t+e/ie)/e,ti=ie**BigInt(128);function to(t){let{n:e}=ot,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-gt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),l=r,m=Js(l*t,e),x=Js(-s*t,e),B=O(t-m*r-x*i,e),L=O(-m*s-x*l,e),U=B>ti,K=L>ti;if(U&&(B=e-B),K&&(L=e-L),B>ti||L>ti)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:U,k1:B,k2neg:K,k2:L}}function ro(t){let{n:e}=ot,s=t.length*8-256,i=le(t);return s>0&&(i=i>>BigInt(s)),i>=e&&(i-=e),i}var ii=class{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return F.utils.hmacSha256(this.k,...e)}hmacSync(...e){if(typeof F.utils.hmacSha256Sync!="function")throw new Error("utils.hmacSha256Sync is undefined, you need to set it");let r=F.utils.hmacSha256Sync(this.k,...e);if(r instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return r}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}};function kr(t){return nt<t&&t<ot.n}function ri(t){return nt<t&&t<ot.P}function no(t,e,r){let s=le(t);if(!kr(s))return;let{n:i}=ot,l=J.BASE.multiply(s),m=O(l.x,i);if(m===nt)return;let x=O(Ur(s,i)*O(e+r*m,i),i);if(x===nt)return;let B=new Ie(m,x),L=(l.x===B.r?0:2)|Number(l.y&gt);return{sig:B,recovery:L}}function ke(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=ni(t)}else if(mn(t)){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=le(t)}else throw new TypeError("Expected valid private key");if(!kr(e))throw new Error("Expected private key: 0 < key < n");return e}function Ki(t){return t instanceof J?(t.assertValidity(),t):J.fromHex(t)}function io(t){if(t instanceof Ie)return t.assertValidity(),t;try{return Ie.fromDER(t)}catch{return Ie.fromCompact(t)}}function mu(t,e=!1){return J.fromPrivateKey(t).toRawBytes(e)}F.getPublicKey=mu;function vu(t,e,r,s=!1){return J.fromSignature(t,e,r).toRawBytes(s)}F.recoverPublicKey=vu;function eo(t){let e=mn(t),r=typeof t=="string",s=(e||r)&&t.length;return e?s===33||s===65:r?s===66||s===130:t instanceof J}function wu(t,e,r=!1){if(eo(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!eo(e))throw new TypeError("getSharedSecret: second arg must be public key");let s=Ki(e);return s.assertValidity(),s.multiply(ke(t)).toRawBytes(r)}F.getSharedSecret=wu;function so(t){let e=t.length>32?t.slice(0,32):t;return le(e)}function bu(t){let e=so(t),r=O(e,ot.n);return oo(r<nt?e:r)}function oo(t){if(typeof t!="bigint")throw new Error("Expected bigint");let e=Ge(t);return Xe(e)}function fo(t,e,r){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);let s=Le(t),i=ke(e),l=[oo(i),bu(s)];if(r!=null){r===!0&&(r=F.utils.randomBytes(32));let B=Le(r);if(B.length!==32)throw new Error("sign: Expected 32 bytes of extra data");l.push(B)}let m=Or(...l),x=so(s);return{seed:m,m:x,d:i}}function uo(t,e){let{sig:r,recovery:s}=t,{canonical:i,der:l,recovered:m}=Object.assign({canonical:!0,der:!0},e);i&&r.hasHighS()&&(r=r.normalizeS(),s^=1);let x=l?r.toDERRawBytes():r.toCompactRawBytes();return m?[x,s]:x}async function xu(t,e,r={}){let{seed:s,m:i,d:l}=fo(t,e,r.extraEntropy),m,x=new ii;for(await x.reseed(s);!(m=no(await x.generate(),i,l));)await x.reseed();return uo(m,r)}F.sign=xu;function Mu(t,e,r={}){let{seed:s,m:i,d:l}=fo(t,e,r.extraEntropy),m,x=new ii;for(x.reseedSync(s);!(m=no(x.generateSync(),i,l));)x.reseedSync();return uo(m,r)}F.signSync=Mu;var _u={strict:!0};function Su(t,e,r,s=_u){let i;try{i=io(t),e=Le(e)}catch{return!1}let{r:l,s:m}=i;if(s.strict&&i.hasHighS())return!1;let x=ro(e),B;try{B=Ki(r)}catch{return!1}let{n:L}=ot,U=Ur(m,L),K=O(x*U,L),V=O(l*U,L),X=J.BASE.multiplyAndAddUnsafe(B,K,V);return X?O(X.x,L)===l:!1}F.verify=Su;function si(t){return O(le(t),ot.n)}function Vi(t){return(t.y&gt)===nt}var fr=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromHex(e){let r=Le(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let s=le(r.subarray(0,32)),i=le(r.subarray(32,64));return new fr(s,i)}assertValidity(){let{r:e,s:r}=this;if(!ri(e)||!kr(r))throw new Error("Invalid signature")}toHex(){return Ge(this.r)+Ge(this.s)}toRawBytes(){return Xe(this.toHex())}};function Eu(t){return J.fromPrivateKey(t).toRawX()}function ao(t,e,r){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);let s=Le(t),i=ke(e),l=Le(r);if(l.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let m=J.fromPrivateKey(i),x=m.toRawX(),B=Vi(m)?i:ot.n-i;return{m:s,P:m,px:x,d:B,rand:l}}function ho(t,e){return Hr(t^le(e))}function co(t){let e=O(le(t),ot.n);if(e===nt)throw new Error("sign: Creation of signature failed. k is zero");let r=J.fromPrivateKey(e),s=r.toRawX(),i=Vi(r)?e:ot.n-e;return{R:r,rx:s,k:i}}function lo(t,e,r,s){return new fr(t.x,O(e+r*s,ot.n)).toRawBytes()}async function Au(t,e,r=F.utils.randomBytes()){let{m:s,px:i,d:l,rand:m}=ao(t,e,r),x=ho(l,await F.utils.taggedHash(or.aux,m)),{R:B,rx:L,k:U}=co(await F.utils.taggedHash(or.nonce,x,i,s)),K=si(await F.utils.taggedHash(or.challenge,L,i,s)),V=lo(B,U,K,l);if(!await yo(V,s,i))throw new Error("sign: Invalid signature produced");return V}function Bu(t,e,r=F.utils.randomBytes()){let{m:s,px:i,d:l,rand:m}=ao(t,e,r),x=ho(l,F.utils.taggedHashSync(or.aux,m)),{R:B,rx:L,k:U}=co(F.utils.taggedHashSync(or.nonce,x,i,s)),K=si(F.utils.taggedHashSync(or.challenge,L,i,s)),V=lo(B,U,K,l);if(!mo(V,s,i))throw new Error("sign: Invalid signature produced");return V}function po(t,e,r){let s=t instanceof fr,i=s?t:fr.fromHex(t);return s&&i.assertValidity(),{...i,m:Le(e),P:Ki(r)}}function go(t,e,r,s){let i=J.BASE.multiplyAndAddUnsafe(e,ke(r),O(-s,ot.n));return!(!i||!Vi(i)||i.x!==t)}async function yo(t,e,r){try{let{r:s,s:i,m:l,P:m}=po(t,e,r),x=si(await F.utils.taggedHash(or.challenge,Hr(s),m.toRawX(),l));return go(s,m,i,x)}catch{return!1}}function mo(t,e,r){try{let{r:s,s:i,m:l,P:m}=po(t,e,r),x=si(F.utils.taggedHashSync(or.challenge,Hr(s),m.toRawX(),l));return go(s,m,i,x)}catch{return!1}}F.schnorr={Signature:fr,getPublicKey:Eu,sign:Au,verify:yo,signSync:Bu,verifySync:mo};J.BASE._setWindowSize(8);var ye={node:cu,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},or={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},ei={};F.utils={isValidPrivateKey(t){try{return ke(t),!0}catch{return!1}},privateAdd:(t,e)=>{let r=ke(t),s=ke(e);return Hr(O(r+s,ot.n))},privateNegate:t=>{let e=ke(t);return Hr(ot.n-e)},pointAddScalar:(t,e,r)=>{let s=J.fromHex(t),i=ke(e),l=J.BASE.multiplyAndAddUnsafe(s,i,gt);if(!l)throw new Error("Tweaked point at infinity");return l.toRawBytes(r)},pointMultiply:(t,e,r)=>{let s=J.fromHex(t),i=le(Le(e));return s.multiply(i).toRawBytes(r)},hashToPrivateKey:t=>{if(t=Le(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");let e=O(le(t),ot.n-gt)+gt;return Hr(e)},randomBytes:(t=32)=>{if(ye.web)return ye.web.getRandomValues(new Uint8Array(t));if(ye.node){let{randomBytes:e}=ye.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>F.utils.hashToPrivateKey(F.utils.randomBytes(40)),bytesToHex:Rr,hexToBytes:Xe,concatBytes:Or,mod:O,invert:Ur,sha256:async(...t)=>{if(ye.web){let e=await ye.web.subtle.digest("SHA-256",Or(...t));return new Uint8Array(e)}else if(ye.node){let{createHash:e}=ye.node,r=e("sha256");return t.forEach(s=>r.update(s)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(ye.web){let r=await ye.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),s=Or(...e),i=await ye.web.subtle.sign("HMAC",r,s);return new Uint8Array(i)}else if(ye.node){let{createHmac:r}=ye.node,s=r("sha256",t);return e.forEach(i=>s.update(i)),Uint8Array.from(s.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=ei[t];if(r===void 0){let s=await F.utils.sha256(Uint8Array.from(t,i=>i.charCodeAt(0)));r=Or(s,s),ei[t]=r}return F.utils.sha256(r,...e)},taggedHashSync:(t,...e)=>{if(typeof F.utils.sha256Sync!="function")throw new Error("utils.sha256Sync is undefined, you need to set it");let r=ei[t];if(r===void 0){let s=F.utils.sha256Sync(Uint8Array.from(t,i=>i.charCodeAt(0)));r=Or(s,s),ei[t]=r}return F.utils.sha256Sync(r,...e)},precompute(t=8,e=J.BASE){let r=e===J.BASE?e:new J(e.x,e.y);return r._setWindowSize(t),r.multiply(yn),r}}});var oi=st(kt=>{"use strict";H();R();Object.defineProperty(kt,"__esModule",{value:!0});kt.schnorr=kt.Signature=kt.Point=kt.CURVE=kt.utils=kt.getSharedSecret=kt.recoverPublicKey=kt.verify=kt.signSync=kt.sign=kt.getPublicKey=void 0;var Tu=Zs(),Iu=Ws(),Lu=zi(),Pe=zi();Object.defineProperty(kt,"getPublicKey",{enumerable:!0,get:function(){return Pe.getPublicKey}});Object.defineProperty(kt,"sign",{enumerable:!0,get:function(){return Pe.sign}});Object.defineProperty(kt,"signSync",{enumerable:!0,get:function(){return Pe.signSync}});Object.defineProperty(kt,"verify",{enumerable:!0,get:function(){return Pe.verify}});Object.defineProperty(kt,"recoverPublicKey",{enumerable:!0,get:function(){return Pe.recoverPublicKey}});Object.defineProperty(kt,"getSharedSecret",{enumerable:!0,get:function(){return Pe.getSharedSecret}});Object.defineProperty(kt,"utils",{enumerable:!0,get:function(){return Pe.utils}});Object.defineProperty(kt,"CURVE",{enumerable:!0,get:function(){return Pe.CURVE}});Object.defineProperty(kt,"Point",{enumerable:!0,get:function(){return Pe.Point}});Object.defineProperty(kt,"Signature",{enumerable:!0,get:function(){return Pe.Signature}});Object.defineProperty(kt,"schnorr",{enumerable:!0,get:function(){return Pe.schnorr}});Lu.utils.hmacSha256Sync=(t,...e)=>{let r=Tu.hmac.create(Iu.sha256,t);return e.forEach(s=>r.update(s)),r.digest()}});var ui=st(ct=>{"use strict";H();R();Object.defineProperty(ct,"__esModule",{value:!0});ct.RLP_EMPTY_STRING=ct.KECCAK256_RLP=ct.KECCAK256_RLP_S=ct.KECCAK256_RLP_ARRAY=ct.KECCAK256_RLP_ARRAY_S=ct.KECCAK256_NULL=ct.KECCAK256_NULL_S=ct.TWO_POW256=ct.SECP256K1_ORDER_DIV_2=ct.SECP256K1_ORDER=ct.MAX_INTEGER_BIGINT=ct.MAX_INTEGER=ct.MAX_UINT64=void 0;var fi=Cs(),vo=oi();ct.MAX_UINT64=BigInt("0xffffffffffffffff");ct.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");ct.MAX_INTEGER_BIGINT=BigInt(2)**BigInt(256)-BigInt(1);ct.SECP256K1_ORDER=vo.CURVE.n;ct.SECP256K1_ORDER_DIV_2=vo.CURVE.n/BigInt(2);ct.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");ct.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";ct.KECCAK256_NULL=fi.Buffer.from(ct.KECCAK256_NULL_S,"hex");ct.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";ct.KECCAK256_RLP_ARRAY=fi.Buffer.from(ct.KECCAK256_RLP_ARRAY_S,"hex");ct.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";ct.KECCAK256_RLP=fi.Buffer.from(ct.KECCAK256_RLP_S,"hex");ct.RLP_EMPTY_STRING=fi.Buffer.from([128])});var Bo=st(Ue=>{"use strict";H();R();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.RLP=Ue.utils=Ue.decode=Ue.encode=void 0;function Fi(t){if(Array.isArray(t)){let r=[];for(let i=0;i<t.length;i++)r.push(Fi(t[i]));let s=ai(...r);return ai(bo(s.length,192),s)}let e=Ao(t);return e.length===1&&e[0]<128?e:ai(bo(e.length,128),e)}Ue.encode=Fi;function qr(t,e,r){if(r>t.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return t.slice(e,r)}function wo(t){if(t[0]===0)throw new Error("invalid RLP: extra zeros");return _o(Mo(t))}function bo(t,e){if(t<56)return Uint8Array.from([t+e]);let r=Zi(t),s=r.length/2,i=Zi(e+55+s);return Uint8Array.from(hi(i+r))}function xo(t,e=!1){if(typeof t>"u"||t===null||t.length===0)return Uint8Array.from([]);let r=Ao(t),s=Di(r);if(e)return s;if(s.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return s.data}Ue.decode=xo;function Di(t){let e,r,s,i,l,m=[],x=t[0];if(x<=127)return{data:t.slice(0,1),remainder:t.slice(1)};if(x<=183){if(e=x-127,x===128?s=Uint8Array.from([]):s=qr(t,1,e),e===2&&s[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:s,remainder:t.slice(e)}}else if(x<=191){if(r=x-182,t.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(e=wo(qr(t,1,r)),e<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return s=qr(t,r,e+r),{data:s,remainder:t.slice(e+r)}}else if(x<=247){for(e=x-191,i=qr(t,1,e);i.length;)l=Di(i),m.push(l.data),i=l.remainder;return{data:m,remainder:t.slice(e)}}else{if(r=x-246,e=wo(qr(t,1,r)),e<56)throw new Error("invalid RLP: encoded list too short");let B=r+e;if(B>t.length)throw new Error("invalid RLP: total length is larger than the data");for(i=qr(t,r,B);i.length;)l=Di(i),m.push(l.data),i=l.remainder;return{data:m,remainder:t.slice(B)}}}var Pu=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Mo(t){let e="";for(let r=0;r<t.length;r++)e+=Pu[t[r]];return e}function _o(t){let e=Number.parseInt(t,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function hi(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let s=r*2;e[r]=_o(t.slice(s,s+2))}return e}function ai(...t){if(t.length===1)return t[0];let e=t.reduce((s,i)=>s+i.length,0),r=new Uint8Array(e);for(let s=0,i=0;s<t.length;s++){let l=t[s];r.set(l,i),i+=l.length}return r}function So(t){return new TextEncoder().encode(t)}function Zi(t){if(t<0)throw new Error("Invalid integer as argument, must be unsigned!");let e=t.toString(16);return e.length%2?`0${e}`:e}function Ou(t){return t.length%2?`0${t}`:t}function Eo(t){return t.length>=2&&t[0]==="0"&&t[1]==="x"}function Hu(t){return typeof t!="string"?t:Eo(t)?t.slice(2):t}function Ao(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return Eo(t)?hi(Ou(Hu(t))):So(t);if(typeof t=="number"||typeof t=="bigint")return t?hi(Zi(t)):Uint8Array.from([]);if(t==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof t)}Ue.utils={bytesToHex:Mo,concatBytes:ai,hexToBytes:hi,utf8ToBytes:So};Ue.RLP={encode:Fi,decode:xo}});var Lo=st(_e=>{"use strict";H();R();Object.defineProperty(_e,"__esModule",{value:!0});_e.add=_e.toBig=_e.split=_e.fromBig=void 0;var ci=BigInt(2**32-1),Wi=BigInt(32);function Gi(t,e=!1){return e?{h:Number(t&ci),l:Number(t>>Wi&ci)}:{h:Number(t>>Wi&ci)|0,l:Number(t&ci)|0}}_e.fromBig=Gi;function To(t,e=!1){let r=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:l,l:m}=Gi(t[i],e);[r[i],s[i]]=[l,m]}return[r,s]}_e.split=To;var Ru=(t,e)=>BigInt(t>>>0)<<Wi|BigInt(e>>>0);_e.toBig=Ru;var ku=(t,e,r)=>t>>>r,Uu=(t,e,r)=>t<<32-r|e>>>r,qu=(t,e,r)=>t>>>r|e<<32-r,$u=(t,e,r)=>t<<32-r|e>>>r,Cu=(t,e,r)=>t<<64-r|e>>>r-32,Nu=(t,e,r)=>t>>>r-32|e<<64-r,ju=(t,e)=>e,Ku=(t,e)=>t,Vu=(t,e,r)=>t<<r|e>>>32-r,zu=(t,e,r)=>e<<r|t>>>32-r,Du=(t,e,r)=>e<<r-32|t>>>64-r,Zu=(t,e,r)=>t<<r-32|e>>>64-r;function Io(t,e,r,s){let i=(e>>>0)+(s>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}_e.add=Io;var Fu=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Wu=(t,e,r,s)=>e+r+s+(t/2**32|0)|0,Gu=(t,e,r,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Xu=(t,e,r,s,i)=>e+r+s+i+(t/2**32|0)|0,Yu=(t,e,r,s,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0)+(i>>>0),Qu=(t,e,r,s,i,l)=>e+r+s+i+l+(t/2**32|0)|0,Ju={fromBig:Gi,split:To,toBig:_e.toBig,shrSH:ku,shrSL:Uu,rotrSH:qu,rotrSL:$u,rotrBH:Cu,rotrBL:Nu,rotr32H:ju,rotr32L:Ku,rotlSH:Vu,rotlSL:zu,rotlBH:Du,rotlBL:Zu,add:Io,add3L:Fu,add3H:Wu,add4L:Gu,add4H:Xu,add5H:Qu,add5L:Yu};_e.default=Ju});var $o=st(St=>{"use strict";H();R();Object.defineProperty(St,"__esModule",{value:!0});St.shake256=St.shake128=St.keccak_512=St.keccak_384=St.keccak_256=St.keccak_224=St.sha3_512=St.sha3_384=St.sha3_256=St.sha3_224=St.Keccak=St.keccakP=void 0;var $r=ln(),bn=Lo(),wn=wr(),[Ho,Ro,ko]=[[],[],[]],ta=BigInt(0),vn=BigInt(1),ea=BigInt(2),ra=BigInt(7),na=BigInt(256),ia=BigInt(113);for(let t=0,e=vn,r=1,s=0;t<24;t++){[r,s]=[s,(2*r+3*s)%5],Ho.push(2*(5*s+r)),Ro.push((t+1)*(t+2)/2%64);let i=ta;for(let l=0;l<7;l++)e=(e<<vn^(e>>ra)*ia)%na,e&ea&&(i^=vn<<(vn<<BigInt(l))-vn);ko.push(i)}var[sa,oa]=bn.default.split(ko,!0),Po=(t,e,r)=>r>32?bn.default.rotlBH(t,e,r):bn.default.rotlSH(t,e,r),Oo=(t,e,r)=>r>32?bn.default.rotlBL(t,e,r):bn.default.rotlSL(t,e,r);function Uo(t,e=24){let r=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let m=0;m<10;m++)r[m]=t[m]^t[m+10]^t[m+20]^t[m+30]^t[m+40];for(let m=0;m<10;m+=2){let x=(m+8)%10,B=(m+2)%10,L=r[B],U=r[B+1],K=Po(L,U,1)^r[x],V=Oo(L,U,1)^r[x+1];for(let X=0;X<50;X+=10)t[m+X]^=K,t[m+X+1]^=V}let i=t[2],l=t[3];for(let m=0;m<24;m++){let x=Ro[m],B=Po(i,l,x),L=Oo(i,l,x),U=Ho[m];i=t[U],l=t[U+1],t[U]=B,t[U+1]=L}for(let m=0;m<50;m+=10){for(let x=0;x<10;x++)r[x]=t[m+x];for(let x=0;x<10;x++)t[m+x]^=~r[(x+2)%10]&r[(x+4)%10]}t[0]^=sa[s],t[1]^=oa[s]}r.fill(0)}St.keccakP=Uo;var br=class extends wn.Hash{constructor(e,r,s,i=!1,l=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=s,this.enableXOF=i,this.rounds=l,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,$r.default.number(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,wn.u32)(this.state)}keccak(){Uo(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){$r.default.exists(this);let{blockLen:r,state:s}=this;e=(0,wn.toBytes)(e);let i=e.length;for(let l=0;l<i;){let m=Math.min(r-this.pos,i-l);for(let x=0;x<m;x++)s[this.pos++]^=e[l++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:r,pos:s,blockLen:i}=this;e[s]^=r,(r&128)!==0&&s===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){$r.default.exists(this,!1),$r.default.bytes(e),this.finish();let r=this.state,{blockLen:s}=this;for(let i=0,l=e.length;i<l;){this.posOut>=s&&this.keccak();let m=Math.min(s-this.posOut,l-i);e.set(r.subarray(this.posOut,this.posOut+m),i),this.posOut+=m,i+=m}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $r.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if($r.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:r,suffix:s,outputLen:i,rounds:l,enableXOF:m}=this;return e||(e=new br(r,s,i,m,l)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=l,e.suffix=s,e.outputLen=i,e.enableXOF=m,e.destroyed=this.destroyed,e}};St.Keccak=br;var ur=(t,e,r)=>(0,wn.wrapConstructor)(()=>new br(e,t,r));St.sha3_224=ur(6,144,224/8);St.sha3_256=ur(6,136,256/8);St.sha3_384=ur(6,104,384/8);St.sha3_512=ur(6,72,512/8);St.keccak_224=ur(1,144,224/8);St.keccak_256=ur(1,136,256/8);St.keccak_384=ur(1,104,384/8);St.keccak_512=ur(1,72,512/8);var qo=(t,e,r)=>(0,wn.wrapConstructorWithOpts)((s={})=>new br(e,t,s.dkLen===void 0?r:s.dkLen,!0));St.shake128=qo(31,168,128/8);St.shake256=qo(31,136,256/8)});var Yi=st((yt,xn)=>{"use strict";H();R();var fa=yt&&yt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0});yt.crypto=yt.wrapHash=yt.equalsBytes=yt.hexToBytes=yt.bytesToUtf8=yt.utf8ToBytes=yt.createView=yt.concatBytes=yt.toHex=yt.bytesToHex=yt.assertBytes=yt.assertBool=void 0;var Xi=fa(ln()),ua=wr(),aa=Xi.default.bool;yt.assertBool=aa;var ha=Xi.default.bytes;yt.assertBytes=ha;var Mn=wr();Object.defineProperty(yt,"bytesToHex",{enumerable:!0,get:function(){return Mn.bytesToHex}});Object.defineProperty(yt,"toHex",{enumerable:!0,get:function(){return Mn.bytesToHex}});Object.defineProperty(yt,"concatBytes",{enumerable:!0,get:function(){return Mn.concatBytes}});Object.defineProperty(yt,"createView",{enumerable:!0,get:function(){return Mn.createView}});Object.defineProperty(yt,"utf8ToBytes",{enumerable:!0,get:function(){return Mn.utf8ToBytes}});function ca(t){if(!(t instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof t}`);return new TextDecoder().decode(t)}yt.bytesToUtf8=ca;function la(t){let e=t.startsWith("0x")?t.substring(2):t;return(0,ua.hexToBytes)(e)}yt.hexToBytes=la;function da(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}yt.equalsBytes=da;function pa(t){return e=>(Xi.default.bytes(e),t(e))}yt.wrapHash=pa;yt.crypto=(()=>{let t=typeof self=="object"&&"crypto"in self?self.crypto:void 0,e=typeof xn<"u"&&typeof xn.require=="function"&&xn.require.bind(xn);return{node:e&&!t?e("crypto"):void 0,web:t}})()});var di=st(qe=>{"use strict";H();R();Object.defineProperty(qe,"__esModule",{value:!0});qe.keccak512=qe.keccak384=qe.keccak256=qe.keccak224=void 0;var _n=$o(),li=Yi();qe.keccak224=(0,li.wrapHash)(_n.keccak_224);qe.keccak256=(()=>{let t=(0,li.wrapHash)(_n.keccak_256);return t.create=_n.keccak_256.create,t})();qe.keccak384=(0,li.wrapHash)(_n.keccak_384);qe.keccak512=(0,li.wrapHash)(_n.keccak_512)});var Cr=st(ne=>{"use strict";H();R();Object.defineProperty(ne,"__esModule",{value:!0});ne.isHexString=ne.getKeys=ne.fromAscii=ne.fromUtf8=ne.toAscii=ne.arrayContainsArray=ne.getBinarySize=ne.padToEven=ne.stripHexPrefix=ne.isHexPrefixed=void 0;function Co(t){if(typeof t!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof t}`);return t[0]==="0"&&t[1]==="x"}ne.isHexPrefixed=Co;var ga=t=>{if(typeof t!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof t}`);return Co(t)?t.slice(2):t};ne.stripHexPrefix=ga;function No(t){let e=t;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}ne.padToEven=No;function ya(t){if(typeof t!="string")throw new Error(`[getBinarySize] method requires input type 'string', recieved ${typeof t}`);return I.Buffer.byteLength(t,"utf8")}ne.getBinarySize=ya;function ma(t,e,r){if(Array.isArray(t)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof t}'`);if(Array.isArray(e)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof e}'`);return e[r===!0?"some":"every"](s=>t.indexOf(s)>=0)}ne.arrayContainsArray=ma;function va(t){let e="",r=0,s=t.length;for(t.substring(0,2)==="0x"&&(r=2);r<s;r+=2){let i=parseInt(t.substr(r,2),16);e+=String.fromCharCode(i)}return e}ne.toAscii=va;function wa(t){let e=I.Buffer.from(t,"utf8");return`0x${No(e.toString("hex")).replace(/^0+|0+$/g,"")}`}ne.fromUtf8=wa;function ba(t){let e="";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r).toString(16);e+=i.length<2?`0${i}`:i}return`0x${e}`}ne.fromAscii=ba;function xa(t,e,r){if(!Array.isArray(t))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof t}`);if(typeof e!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof t}`);let s=[];for(let i=0;i<t.length;i++){let l=t[i][e];if(r===!0&&!l)l="";else if(typeof l!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof l}`);s.push(l)}return s}ne.getKeys=xa;function Ma(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e<"u"&&e>0&&t.length!==2+2*e)}ne.isHexString=Ma});var pi=st($e=>{"use strict";H();R();Object.defineProperty($e,"__esModule",{value:!0});$e.assertIsString=$e.assertIsArray=$e.assertIsBuffer=$e.assertIsHexString=void 0;var _a=Cr(),Sa=function(t){if(!(0,_a.isHexString)(t)){let e=`This method only supports 0x-prefixed hex strings but input was: ${t}`;throw new Error(e)}};$e.assertIsHexString=Sa;var Ea=function(t){if(!I.Buffer.isBuffer(t)){let e=`This method only supports Buffer but input was: ${t}`;throw new Error(e)}};$e.assertIsBuffer=Ea;var Aa=function(t){if(!Array.isArray(t)){let e=`This method only supports number arrays but input was: ${t}`;throw new Error(e)}};$e.assertIsArray=Aa;var Ba=function(t){if(typeof t!="string"){let e=`This method only supports strings but input was: ${t}`;throw new Error(e)}};$e.assertIsString=Ba});var Nr=st(N=>{"use strict";H();R();Object.defineProperty(N,"__esModule",{value:!0});N.bigIntToUnpaddedBuffer=N.bigIntToHex=N.bufArrToArr=N.arrToBufArr=N.validateNoLeadingZeroes=N.baToJSON=N.toUtf8=N.short=N.addHexPrefix=N.toUnsigned=N.fromSigned=N.bufferToInt=N.bigIntToBuffer=N.bufferToBigInt=N.bufferToHex=N.toBuffer=N.unpadHexString=N.unpadArray=N.unpadBuffer=N.setLengthRight=N.setLengthLeft=N.zeros=N.intToBuffer=N.intToHex=void 0;var Sn=pi(),xr=Cr(),Ta=function(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Received an invalid integer type: ${t}`);return`0x${t.toString(16)}`};N.intToHex=Ta;var Ia=function(t){let e=(0,N.intToHex)(t);return I.Buffer.from((0,xr.padToEven)(e.slice(2)),"hex")};N.intToBuffer=Ia;var La=function(t){return I.Buffer.allocUnsafe(t).fill(0)};N.zeros=La;var jo=function(t,e,r){let s=(0,N.zeros)(e);return r?t.length<e?(t.copy(s),s):t.slice(0,e):t.length<e?(t.copy(s,e-t.length),s):t.slice(-e)},Pa=function(t,e){return(0,Sn.assertIsBuffer)(t),jo(t,e,!1)};N.setLengthLeft=Pa;var Oa=function(t,e){return(0,Sn.assertIsBuffer)(t),jo(t,e,!0)};N.setLengthRight=Oa;var Qi=function(t){let e=t[0];for(;t.length>0&&e.toString()==="0";)t=t.slice(1),e=t[0];return t},Ha=function(t){return(0,Sn.assertIsBuffer)(t),Qi(t)};N.unpadBuffer=Ha;var Ra=function(t){return(0,Sn.assertIsArray)(t),Qi(t)};N.unpadArray=Ra;var ka=function(t){return(0,Sn.assertIsHexString)(t),t=(0,xr.stripHexPrefix)(t),"0x"+Qi(t)};N.unpadHexString=ka;var Ua=function(t){if(t==null)return I.Buffer.allocUnsafe(0);if(I.Buffer.isBuffer(t))return I.Buffer.from(t);if(Array.isArray(t)||t instanceof Uint8Array)return I.Buffer.from(t);if(typeof t=="string"){if(!(0,xr.isHexString)(t))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${t}`);return I.Buffer.from((0,xr.padToEven)((0,xr.stripHexPrefix)(t)),"hex")}if(typeof t=="number")return(0,N.intToBuffer)(t);if(typeof t=="bigint"){if(t<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${t}`);let e=t.toString(16);return e.length%2&&(e="0"+e),I.Buffer.from(e,"hex")}if(t.toArray)return I.Buffer.from(t.toArray());if(t.toBuffer)return I.Buffer.from(t.toBuffer());throw new Error("invalid type")};N.toBuffer=Ua;var qa=function(t){return t=(0,N.toBuffer)(t),"0x"+t.toString("hex")};N.bufferToHex=qa;function Ji(t){let e=(0,N.bufferToHex)(t);return BigInt(e==="0x"?0:e)}N.bufferToBigInt=Ji;function ts(t){return(0,N.toBuffer)("0x"+t.toString(16))}N.bigIntToBuffer=ts;var $a=function(t){let e=Number(Ji(t));if(!Number.isSafeInteger(e))throw new Error("Number exceeds 53 bits");return e};N.bufferToInt=$a;var Ca=function(t){return BigInt.asIntN(256,Ji(t))};N.fromSigned=Ca;var Na=function(t){return ts(BigInt.asUintN(256,t))};N.toUnsigned=Na;var ja=function(t){return typeof t!="string"||(0,xr.isHexPrefixed)(t)?t:"0x"+t};N.addHexPrefix=ja;function Ka(t,e=50){let r=I.Buffer.isBuffer(t)?t.toString("hex"):t;return r.length<=e?r:r.slice(0,e)+"\u2026"}N.short=Ka;var Va=function(t){let e=/^(00)+|(00)+$/g;if(t=(0,xr.stripHexPrefix)(t),t.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return I.Buffer.from(t.replace(e,""),"hex").toString("utf8")};N.toUtf8=Va;var za=function(t){if(I.Buffer.isBuffer(t))return`0x${t.toString("hex")}`;if(t instanceof Array){let e=[];for(let r=0;r<t.length;r++)e.push((0,N.baToJSON)(t[r]));return e}};N.baToJSON=za;var Da=function(t){for(let[e,r]of Object.entries(t))if(r!==void 0&&r.length>0&&r[0]===0)throw new Error(`${e} cannot have leading zeroes, received: ${r.toString("hex")}`)};N.validateNoLeadingZeroes=Da;function Ko(t){return Array.isArray(t)?t.map(e=>Ko(e)):I.Buffer.from(t)}N.arrToBufArr=Ko;function Vo(t){return Array.isArray(t)?t.map(e=>Vo(e)):Uint8Array.from(t??[])}N.bufArrToArr=Vo;var Za=t=>"0x"+t.toString(16);N.bigIntToHex=Za;function Fa(t){return(0,N.unpadBuffer)(ts(t))}N.bigIntToUnpaddedBuffer=Fa});var es=st(G=>{"use strict";H();R();Object.defineProperty(G,"__esModule",{value:!0});G.accountBodyToRLP=G.accountBodyToSlim=G.accountBodyFromSlim=G.isZeroAddress=G.zeroAddress=G.importPublic=G.privateToAddress=G.privateToPublic=G.publicToAddress=G.pubToAddress=G.isValidPublic=G.isValidPrivate=G.generateAddress2=G.generateAddress=G.isValidChecksumAddress=G.toChecksumAddress=G.isValidAddress=G.Account=void 0;var En=Bo(),Kr=di(),Vr=oi(),Wa=Yi(),Lt=Nr(),ar=ui(),Se=pi(),Ga=Cr(),jr=BigInt(0),zr=class{constructor(e=jr,r=jr,s=ar.KECCAK256_RLP,i=ar.KECCAK256_NULL){this.nonce=e,this.balance=r,this.storageRoot=s,this.codeHash=i,this._validate()}static fromAccountData(e){let{nonce:r,balance:s,storageRoot:i,codeHash:l}=e;return new zr(r!==void 0?(0,Lt.bufferToBigInt)((0,Lt.toBuffer)(r)):void 0,s!==void 0?(0,Lt.bufferToBigInt)((0,Lt.toBuffer)(s)):void 0,i!==void 0?(0,Lt.toBuffer)(i):void 0,l!==void 0?(0,Lt.toBuffer)(l):void 0)}static fromRlpSerializedAccount(e){let r=(0,Lt.arrToBufArr)(En.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(r))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(r)}static fromValuesArray(e){let[r,s,i,l]=e;return new zr((0,Lt.bufferToBigInt)(r),(0,Lt.bufferToBigInt)(s),i,l)}_validate(){if(this.nonce<jr)throw new Error("nonce must be greater than zero");if(this.balance<jr)throw new Error("balance must be greater than zero");if(this.storageRoot.length!==32)throw new Error("storageRoot must have a length of 32");if(this.codeHash.length!==32)throw new Error("codeHash must have a length of 32")}raw(){return[(0,Lt.bigIntToUnpaddedBuffer)(this.nonce),(0,Lt.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return I.Buffer.from(En.RLP.encode((0,Lt.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(ar.KECCAK256_NULL)}isEmpty(){return this.balance===jr&&this.nonce===jr&&this.codeHash.equals(ar.KECCAK256_NULL)}};G.Account=zr;var Xa=function(t){try{(0,Se.assertIsString)(t)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(t)};G.isValidAddress=Xa;var Ya=function(t,e){(0,Se.assertIsHexString)(t);let r=(0,Ga.stripHexPrefix)(t).toLowerCase(),s="";e!==void 0&&(s=(0,Lt.bufferToBigInt)((0,Lt.toBuffer)(e)).toString()+"0x");let i=I.Buffer.from(s+r,"utf8"),l=(0,Wa.bytesToHex)((0,Kr.keccak256)(i)),m="0x";for(let x=0;x<r.length;x++)parseInt(l[x],16)>=8?m+=r[x].toUpperCase():m+=r[x];return m};G.toChecksumAddress=Ya;var Qa=function(t,e){return(0,G.isValidAddress)(t)&&(0,G.toChecksumAddress)(t,e)===t};G.isValidChecksumAddress=Qa;var Ja=function(t,e){return(0,Se.assertIsBuffer)(t),(0,Se.assertIsBuffer)(e),(0,Lt.bufferToBigInt)(e)===BigInt(0)?I.Buffer.from((0,Kr.keccak256)(En.RLP.encode((0,Lt.bufArrToArr)([t,null])))).slice(-20):I.Buffer.from((0,Kr.keccak256)(En.RLP.encode((0,Lt.bufArrToArr)([t,e])))).slice(-20)};G.generateAddress=Ja;var th=function(t,e,r){if((0,Se.assertIsBuffer)(t),(0,Se.assertIsBuffer)(e),(0,Se.assertIsBuffer)(r),t.length!==20)throw new Error("Expected from to be of length 20");if(e.length!==32)throw new Error("Expected salt to be of length 32");let s=(0,Kr.keccak256)(I.Buffer.concat([I.Buffer.from("ff","hex"),t,e,(0,Kr.keccak256)(r)]));return(0,Lt.toBuffer)(s).slice(-20)};G.generateAddress2=th;var eh=function(t){return Vr.utils.isValidPrivateKey(t)};G.isValidPrivate=eh;var rh=function(t,e=!1){if((0,Se.assertIsBuffer)(t),t.length===64)try{return Vr.Point.fromHex(I.Buffer.concat([I.Buffer.from([4]),t])),!0}catch{return!1}if(!e)return!1;try{return Vr.Point.fromHex(t),!0}catch{return!1}};G.isValidPublic=rh;var nh=function(t,e=!1){if((0,Se.assertIsBuffer)(t),e&&t.length!==64&&(t=I.Buffer.from(Vr.Point.fromHex(t).toRawBytes(!1).slice(1))),t.length!==64)throw new Error("Expected pubKey to be of length 64");return I.Buffer.from((0,Kr.keccak256)(t)).slice(-20)};G.pubToAddress=nh;G.publicToAddress=G.pubToAddress;var ih=function(t){return(0,Se.assertIsBuffer)(t),I.Buffer.from(Vr.Point.fromPrivateKey(t).toRawBytes(!1).slice(1))};G.privateToPublic=ih;var sh=function(t){return(0,G.publicToAddress)((0,G.privateToPublic)(t))};G.privateToAddress=sh;var oh=function(t){return(0,Se.assertIsBuffer)(t),t.length!==64&&(t=I.Buffer.from(Vr.Point.fromHex(t).toRawBytes(!1).slice(1))),t};G.importPublic=oh;var fh=function(){let e=(0,Lt.zeros)(20);return(0,Lt.bufferToHex)(e)};G.zeroAddress=fh;var uh=function(t){try{(0,Se.assertIsString)(t)}catch{return!1}return(0,G.zeroAddress)()===t};G.isZeroAddress=uh;function Do(t){let[e,r,s,i]=t;return[e,r,(0,Lt.arrToBufArr)(s).length===0?ar.KECCAK256_RLP:s,(0,Lt.arrToBufArr)(i).length===0?ar.KECCAK256_NULL:i]}G.accountBodyFromSlim=Do;var zo=new Uint8Array(0);function ah(t){let[e,r,s,i]=t;return[e,r,(0,Lt.arrToBufArr)(s).equals(ar.KECCAK256_RLP)?zo:s,(0,Lt.arrToBufArr)(i).equals(ar.KECCAK256_NULL)?zo:i]}G.accountBodyToSlim=ah;function hh(t,e=!0){let r=e?Do(t):t;return(0,Lt.arrToBufArr)(En.RLP.encode(r))}G.accountBodyToRLP=hh});var Zo=st(yi=>{"use strict";H();R();Object.defineProperty(yi,"__esModule",{value:!0});yi.Address=void 0;var An=es(),gi=Nr(),Oe=class{constructor(e){if(e.length!==20)throw new Error("Invalid address length");this.buf=e}static zero(){return new Oe((0,gi.zeros)(20))}static fromString(e){if(!(0,An.isValidAddress)(e))throw new Error("Invalid address");return new Oe((0,gi.toBuffer)(e))}static fromPublicKey(e){if(!I.Buffer.isBuffer(e))throw new Error("Public key should be Buffer");let r=(0,An.pubToAddress)(e);return new Oe(r)}static fromPrivateKey(e){if(!I.Buffer.isBuffer(e))throw new Error("Private key should be Buffer");let r=(0,An.privateToAddress)(e);return new Oe(r)}static generate(e,r){if(typeof r!="bigint")throw new Error("Expected nonce to be a bigint");return new Oe((0,An.generateAddress)(e.buf,(0,gi.bigIntToBuffer)(r)))}static generate2(e,r,s){if(!I.Buffer.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!I.Buffer.isBuffer(s))throw new Error("Expected initCode to be a Buffer");return new Oe((0,An.generateAddress2)(e.buf,r,s))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(Oe.zero())}isPrecompileOrSystemAddress(){let e=(0,gi.bufferToBigInt)(this.buf),r=BigInt(0),s=BigInt("0xffff");return e>=r&&e<=s}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return I.Buffer.from(this.buf)}};yi.Address=Oe});var Wo=st(ae=>{"use strict";H();R();Object.defineProperty(ae,"__esModule",{value:!0});ae.hashPersonalMessage=ae.isValidSignature=ae.fromRpcSig=ae.toCompactSig=ae.toRpcSig=ae.ecrecover=ae.ecsign=void 0;var ch=di(),Fo=oi(),pe=Nr(),rs=ui(),lh=pi();function dh(t,e,r){let[s,i]=(0,Fo.signSync)(t,e,{recovered:!0,der:!1}),l=I.Buffer.from(s.slice(0,32)),m=I.Buffer.from(s.slice(32,64)),x=r===void 0?BigInt(i+27):BigInt(i+35)+BigInt(r)*BigInt(2);return{r:l,s:m,v:x}}ae.ecsign=dh;function mi(t,e){return t===BigInt(0)||t===BigInt(1)?t:e===void 0?t-BigInt(27):t-(e*BigInt(2)+BigInt(35))}function vi(t){return t===BigInt(0)||t===BigInt(1)}var ph=function(t,e,r,s,i){let l=I.Buffer.concat([(0,pe.setLengthLeft)(r,32),(0,pe.setLengthLeft)(s,32)],64),m=mi(e,i);if(!vi(m))throw new Error("Invalid signature v value");let x=(0,Fo.recoverPublicKey)(t,l,Number(m));return I.Buffer.from(x.slice(1))};ae.ecrecover=ph;var gh=function(t,e,r,s){let i=mi(t,s);if(!vi(i))throw new Error("Invalid signature v value");return(0,pe.bufferToHex)(I.Buffer.concat([(0,pe.setLengthLeft)(e,32),(0,pe.setLengthLeft)(r,32),(0,pe.toBuffer)(t)]))};ae.toRpcSig=gh;var yh=function(t,e,r,s){let i=mi(t,s);if(!vi(i))throw new Error("Invalid signature v value");let l=r;return(t>BigInt(28)&&t%BigInt(2)===BigInt(1)||t===BigInt(1)||t===BigInt(28))&&(l=I.Buffer.from(r),l[0]|=128),(0,pe.bufferToHex)(I.Buffer.concat([(0,pe.setLengthLeft)(e,32),(0,pe.setLengthLeft)(l,32)]))};ae.toCompactSig=yh;var mh=function(t){let e=(0,pe.toBuffer)(t),r,s,i;if(e.length>=65)r=e.slice(0,32),s=e.slice(32,64),i=(0,pe.bufferToBigInt)(e.slice(64));else if(e.length===64)r=e.slice(0,32),s=e.slice(32,64),i=BigInt((0,pe.bufferToInt)(e.slice(32,33))>>7),s[0]&=127;else throw new Error("Invalid signature length");return i<27&&(i=i+BigInt(27)),{v:i,r,s}};ae.fromRpcSig=mh;var vh=function(t,e,r,s=!0,i){if(e.length!==32||r.length!==32||!vi(mi(t,i)))return!1;let l=(0,pe.bufferToBigInt)(e),m=(0,pe.bufferToBigInt)(r);return!(l===BigInt(0)||l>=rs.SECP256K1_ORDER||m===BigInt(0)||m>=rs.SECP256K1_ORDER||s&&m>=rs.SECP256K1_ORDER_DIV_2)};ae.isValidSignature=vh;var wh=function(t){(0,lh.assertIsBuffer)(t);let e=I.Buffer.from(`Ethereum Signed Message:
${t.length}`,"utf-8");return I.Buffer.from((0,ch.keccak256)(I.Buffer.concat([e,t])))};ae.hashPersonalMessage=wh});var Go=st(Mr=>{"use strict";H();R();Object.defineProperty(Mr,"__esModule",{value:!0});Mr.toType=Mr.TypeOutput=void 0;var wi=Nr(),bh=Cr(),Bn;(function(t){t[t.Number=0]="Number",t[t.BigInt=1]="BigInt",t[t.Buffer=2]="Buffer",t[t.PrefixedHexString=3]="PrefixedHexString"})(Bn=Mr.TypeOutput||(Mr.TypeOutput={}));function xh(t,e){if(t===null)return null;if(t===void 0)return;if(typeof t=="string"&&!(0,bh.isHexString)(t))throw new Error(`A string must be provided with a 0x-prefix, given: ${t}`);if(typeof t=="number"&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");let r=(0,wi.toBuffer)(t);switch(e){case Bn.Buffer:return r;case Bn.BigInt:return(0,wi.bufferToBigInt)(r);case Bn.Number:{let s=(0,wi.bufferToBigInt)(r);if(s>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(s)}case Bn.PrefixedHexString:return(0,wi.bufferToHex)(r);default:throw new Error("unknown outputType")}}Mr.toType=xh});var Yo=st((bi,Xo)=>{H();R();(function(t,e){typeof bi=="object"&&typeof Xo<"u"?e(bi):typeof define=="function"&&define.amd?define(["exports"],e):e(t.async={})})(bi,function(t){"use strict";function e(h,...u){return(...c)=>h(...u,...c)}function r(h){return function(...u){var c=u.pop();return h.call(this,u,c)}}var s=typeof queueMicrotask=="function"&&queueMicrotask,i=typeof setImmediate=="function"&&setImmediate,l=typeof process=="object"&&typeof process.nextTick=="function";function m(h){setTimeout(h,0)}function x(h){return(u,...c)=>h(()=>u(...c))}var B;s?B=queueMicrotask:i?B=setImmediate:l?B=process.nextTick:B=m;var L=x(B);function U(h){return X(h)?function(...u){let c=u.pop(),w=h.apply(this,u);return K(w,c)}:r(function(u,c){var w;try{w=h.apply(this,u)}catch(_){return c(_)}if(w&&typeof w.then=="function")return K(w,c);c(null,w)})}function K(h,u){return h.then(c=>{V(u,null,c)},c=>{V(u,c&&c.message?c:new Error(c))})}function V(h,u,c){try{h(u,c)}catch(w){L(_=>{throw _},w)}}function X(h){return h[Symbol.toStringTag]==="AsyncFunction"}function Kt(h){return h[Symbol.toStringTag]==="AsyncGenerator"}function Et(h){return typeof h[Symbol.asyncIterator]=="function"}function j(h){if(typeof h!="function")throw new Error("expected a function");return X(h)?U(h):h}function Z(h,u=h.length){if(!u)throw new Error("arity is undefined");function c(...w){return typeof w[u-1]=="function"?h.apply(this,w):new Promise((_,S)=>{w[u-1]=(E,...A)=>{if(E)return S(E);_(A.length>1?A:A[0])},h.apply(this,w)})}return c}function se(h){return function(c,...w){return Z(function(S){var E=this;return h(c,(A,T)=>{j(A).apply(E,w.concat(T))},S)})}}function ge(h,u,c,w){u=u||[];var _=[],S=0,E=j(c);return h(u,(A,T,$)=>{var tt=S++;E(A,(ut,et)=>{_[tt]=et,$(ut)})},A=>{w(A,_)})}function Be(h){return h&&typeof h.length=="number"&&h.length>=0&&h.length%1===0}let Ze={};function we(h){function u(...c){if(h!==null){var w=h;h=null,w.apply(this,c)}}return Object.assign(u,h),u}function Ut(h){return h[Symbol.iterator]&&h[Symbol.iterator]()}function Fe(h){var u=-1,c=h.length;return function(){return++u<c?{value:h[u],key:u}:null}}function v(h){var u=-1;return function(){var w=h.next();return w.done?null:(u++,{value:w.value,key:u})}}function n(h){var u=h?Object.keys(h):[],c=-1,w=u.length;return function _(){var S=u[++c];return S==="__proto__"?_():c<w?{value:h[S],key:S}:null}}function f(h){if(Be(h))return Fe(h);var u=Ut(h);return u?v(u):n(h)}function a(h){return function(...u){if(h===null)throw new Error("Callback was already called.");var c=h;h=null,c.apply(this,u)}}function d(h,u,c,w){let _=!1,S=!1,E=!1,A=0,T=0;function $(){A>=u||E||_||(E=!0,h.next().then(({value:et,done:be})=>{if(!(S||_)){if(E=!1,be){_=!0,A<=0&&w(null);return}A++,c(et,T,tt),T++,$()}}).catch(ut))}function tt(et,be){if(A-=1,!S){if(et)return ut(et);if(et===!1){_=!0,S=!0;return}if(be===Ze||_&&A<=0)return _=!0,w(null);$()}}function ut(et){S||(E=!1,_=!0,w(et))}$()}var g=h=>(u,c,w)=>{if(w=we(w),h<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!u)return w(null);if(Kt(u))return d(u,h,c,w);if(Et(u))return d(u[Symbol.asyncIterator](),h,c,w);var _=f(u),S=!1,E=!1,A=0,T=!1;function $(ut,et){if(!E)if(A-=1,ut)S=!0,w(ut);else if(ut===!1)S=!0,E=!0;else{if(et===Ze||S&&A<=0)return S=!0,w(null);T||tt()}}function tt(){for(T=!0;A<h&&!S;){var ut=_();if(ut===null){S=!0,A<=0&&w(null);return}A+=1,c(ut.value,ut.key,a($))}T=!1}tt()};function b(h,u,c,w){return g(u)(h,j(c),w)}var M=Z(b,4);function p(h,u,c){c=we(c);var w=0,_=0,{length:S}=h,E=!1;S===0&&c(null);function A(T,$){T===!1&&(E=!0),E!==!0&&(T?c(T):(++_===S||$===Ze)&&c(null))}for(;w<S;w++)u(h[w],w,a(A))}function o(h,u,c){return M(h,1/0,u,c)}function y(h,u,c){var w=Be(h)?p:o;return w(h,j(u),c)}var P=Z(y,3);function C(h,u,c){return ge(P,h,u,c)}var q=Z(C,3),W=se(q);function ft(h,u,c){return M(h,1,u,c)}var Y=Z(ft,3);function Re(h,u,c){return ge(Y,h,u,c)}var lt=Z(Re,3),mt=se(lt);let We=Symbol("promiseCallback");function vt(){let h,u;function c(w,..._){if(w)return u(w);h(_.length>1?_:_[0])}return c[We]=new Promise((w,_)=>{h=w,u=_}),c}function Pt(h,u,c){typeof u!="number"&&(c=u,u=null),c=we(c||vt());var w=Object.keys(h).length;if(!w)return c(null);u||(u=w);var _={},S=0,E=!1,A=!1,T=Object.create(null),$=[],tt=[],ut={};Object.keys(h).forEach(k=>{var D=h[k];if(!Array.isArray(D)){et(k,[D]),tt.push(k);return}var rt=D.slice(0,D.length-1),Rt=rt.length;if(Rt===0){et(k,D),tt.push(k);return}ut[k]=Rt,rt.forEach(oe=>{if(!h[oe])throw new Error("async.auto task `"+k+"` has a non-existent dependency `"+oe+"` in "+rt.join(", "));Lr(oe,()=>{Rt--,Rt===0&&et(k,D)})})}),at(),be();function et(k,D){$.push(()=>hn(k,D))}function be(){if(!E){if($.length===0&&S===0)return c(null,_);for(;$.length&&S<u;){var k=$.shift();k()}}}function Lr(k,D){var rt=T[k];rt||(rt=T[k]=[]),rt.push(D)}function mr(k){var D=T[k]||[];D.forEach(rt=>rt()),be()}function hn(k,D){if(!A){var rt=a((oe,...xe)=>{if(S--,oe===!1){E=!0;return}if(xe.length<2&&([xe]=xe),oe){var Pr={};if(Object.keys(_).forEach(vr=>{Pr[vr]=_[vr]}),Pr[k]=xe,A=!0,T=Object.create(null),E)return;c(oe,Pr)}else _[k]=xe,mr(k)});S++;var Rt=j(D[D.length-1]);D.length>1?Rt(_,rt):Rt(rt)}}function at(){for(var k,D=0;tt.length;)k=tt.pop(),D++,z(k).forEach(rt=>{--ut[rt]===0&&tt.push(rt)});if(D!==w)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function z(k){var D=[];return Object.keys(h).forEach(rt=>{let Rt=h[rt];Array.isArray(Rt)&&Rt.indexOf(k)>=0&&D.push(rt)}),D}return c[We]}var Ln=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,Vt=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,zt=/,/,Pn=/(=.+)?(\s*)$/;function Dt(h){let u="",c=0,w=h.indexOf("*/");for(;c<h.length;)if(h[c]==="/"&&h[c+1]==="/"){let _=h.indexOf(`
`,c);c=_===-1?h.length:_}else if(w!==-1&&h[c]==="/"&&h[c+1]==="*"){let _=h.indexOf("*/",c);_!==-1?(c=_+2,w=h.indexOf("*/",c)):(u+=h[c],c++)}else u+=h[c],c++;return u}function Zt(h){let u=Dt(h.toString()),c=u.match(Ln);if(c||(c=u.match(Vt)),!c)throw new Error(`could not parse args in autoInject
Source:
`+u);let[,w]=c;return w.replace(/\s/g,"").split(zt).map(_=>_.replace(Pn,"").trim())}function Gr(h,u){var c={};return Object.keys(h).forEach(w=>{var _=h[w],S,E=X(_),A=!E&&_.length===1||E&&_.length===0;if(Array.isArray(_))S=[..._],_=S.pop(),c[w]=S.concat(S.length>0?T:_);else if(A)c[w]=_;else{if(S=Zt(_),_.length===0&&!E&&S.length===0)throw new Error("autoInject task functions require explicit parameters.");E||S.pop(),c[w]=S.concat(T)}function T($,tt){var ut=S.map(et=>$[et]);ut.push(tt),j(_)(...ut)}}),Pt(c,u)}class Ft{constructor(){this.head=this.tail=null,this.length=0}removeLink(u){return u.prev?u.prev.next=u.next:this.head=u.next,u.next?u.next.prev=u.prev:this.tail=u.prev,u.prev=u.next=null,this.length-=1,u}empty(){for(;this.head;)this.shift();return this}insertAfter(u,c){c.prev=u,c.next=u.next,u.next?u.next.prev=c:this.tail=c,u.next=c,this.length+=1}insertBefore(u,c){c.prev=u.prev,c.next=u,u.prev?u.prev.next=c:this.head=c,u.prev=c,this.length+=1}unshift(u){this.head?this.insertBefore(this.head,u):qt(this,u)}push(u){this.tail?this.insertAfter(this.tail,u):qt(this,u)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var u=this.head;u;)yield u.data,u=u.next}remove(u){for(var c=this.head;c;){var{next:w}=c;u(c)&&this.removeLink(c),c=w}return this}}function qt(h,u){h.length=1,h.head=h.tail=u}function Er(h,u,c){if(u==null)u=1;else if(u===0)throw new RangeError("Concurrency must not be zero");var w=j(h),_=0,S=[];let E={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function A(z,k){E[z].push(k)}function T(z,k){let D=(...rt)=>{$(z,D),k(...rt)};E[z].push(D)}function $(z,k){if(!z)return Object.keys(E).forEach(D=>E[D]=[]);if(!k)return E[z]=[];E[z]=E[z].filter(D=>D!==k)}function tt(z,...k){E[z].forEach(D=>D(...k))}var ut=!1;function et(z,k,D,rt){if(rt!=null&&typeof rt!="function")throw new Error("task callback must be a function");at.started=!0;var Rt,oe;function xe(vr,...cn){if(vr)return D?oe(vr):Rt();if(cn.length<=1)return Rt(cn[0]);Rt(cn)}var Pr=at._createTaskItem(z,D?xe:rt||xe);if(k?at._tasks.unshift(Pr):at._tasks.push(Pr),ut||(ut=!0,L(()=>{ut=!1,at.process()})),D||!rt)return new Promise((vr,cn)=>{Rt=vr,oe=cn})}function be(z){return function(k,...D){_-=1;for(var rt=0,Rt=z.length;rt<Rt;rt++){var oe=z[rt],xe=S.indexOf(oe);xe===0?S.shift():xe>0&&S.splice(xe,1),oe.callback(k,...D),k!=null&&tt("error",k,oe.data)}_<=at.concurrency-at.buffer&&tt("unsaturated"),at.idle()&&tt("drain"),at.process()}}function Lr(z){return z.length===0&&at.idle()?(L(()=>tt("drain")),!0):!1}let mr=z=>k=>{if(!k)return new Promise((D,rt)=>{T(z,(Rt,oe)=>{if(Rt)return rt(Rt);D(oe)})});$(z),A(z,k)};var hn=!1,at={_tasks:new Ft,_createTaskItem(z,k){return{data:z,callback:k}},*[Symbol.iterator](){yield*at._tasks[Symbol.iterator]()},concurrency:u,payload:c,buffer:u/4,started:!1,paused:!1,push(z,k){return Array.isArray(z)?Lr(z)?void 0:z.map(D=>et(D,!1,!1,k)):et(z,!1,!1,k)},pushAsync(z,k){return Array.isArray(z)?Lr(z)?void 0:z.map(D=>et(D,!1,!0,k)):et(z,!1,!0,k)},kill(){$(),at._tasks.empty()},unshift(z,k){return Array.isArray(z)?Lr(z)?void 0:z.map(D=>et(D,!0,!1,k)):et(z,!0,!1,k)},unshiftAsync(z,k){return Array.isArray(z)?Lr(z)?void 0:z.map(D=>et(D,!0,!0,k)):et(z,!0,!0,k)},remove(z){at._tasks.remove(z)},process(){if(!hn){for(hn=!0;!at.paused&&_<at.concurrency&&at._tasks.length;){var z=[],k=[],D=at._tasks.length;at.payload&&(D=Math.min(D,at.payload));for(var rt=0;rt<D;rt++){var Rt=at._tasks.shift();z.push(Rt),S.push(Rt),k.push(Rt.data)}_+=1,at._tasks.length===0&&tt("empty"),_===at.concurrency&&tt("saturated");var oe=a(be(z));w(k,oe)}hn=!1}},length(){return at._tasks.length},running(){return _},workersList(){return S},idle(){return at._tasks.length+_===0},pause(){at.paused=!0},resume(){at.paused!==!1&&(at.paused=!1,L(at.process))}};return Object.defineProperties(at,{saturated:{writable:!1,value:mr("saturated")},unsaturated:{writable:!1,value:mr("unsaturated")},empty:{writable:!1,value:mr("empty")},drain:{writable:!1,value:mr("drain")},error:{writable:!1,value:mr("error")}}),at}function $t(h,u){return Er(h,1,u)}function Ct(h,u,c){return Er(h,u,c)}function On(h,u,c,w){w=we(w);var _=j(c);return Y(h,(S,E,A)=>{_(u,S,(T,$)=>{u=$,A(T)})},S=>w(S,u))}var pt=Z(On,4);function Ot(...h){var u=h.map(j);return function(...c){var w=this,_=c[c.length-1];return typeof _=="function"?c.pop():_=vt(),pt(u,c,(S,E,A)=>{E.apply(w,S.concat((T,...$)=>{A(T,$)}))},(S,E)=>_(S,...E)),_[We]}}function Xr(...h){return Ot(...h.reverse())}function Wt(h,u,c,w){return ge(g(u),h,c,w)}var bt=Z(Wt,4);function Hn(h,u,c,w){var _=j(c);return bt(h,u,(S,E)=>{_(S,(A,...T)=>A?E(A):E(A,T))},(S,E)=>{for(var A=[],T=0;T<E.length;T++)E[T]&&(A=A.concat(...E[T]));return w(S,A)})}var wt=Z(Hn,4);function Gt(h,u,c){return wt(h,1/0,u,c)}var pr=Z(Gt,3);function Xt(h,u,c){return wt(h,1,u,c)}var At=Z(Xt,3);function Yr(...h){return function(...u){var c=u.pop();return c(null,...h)}}function dt(h,u){return(c,w,_,S)=>{var E=!1,A;let T=j(_);c(w,($,tt,ut)=>{T($,(et,be)=>{if(et||et===!1)return ut(et);if(h(be)&&!A)return E=!0,A=u(!0,$),ut(null,Ze);ut()})},$=>{if($)return S($);S(null,E?A:u(!1))})}}function Yt(h,u,c){return dt(w=>w,(w,_)=>_)(P,h,u,c)}var gr=Z(Yt,3);function Qt(h,u,c,w){return dt(_=>_,(_,S)=>S)(g(u),h,c,w)}var Bt=Z(Qt,4);function Rn(h,u,c){return dt(w=>w,(w,_)=>_)(g(1),h,u,c)}var Tt=Z(Rn,3);function Nt(h){return(u,...c)=>j(u)(...c,(w,..._)=>{typeof console=="object"&&(w?console.error&&console.error(w):console[h]&&_.forEach(S=>console[h](S)))})}var Qr=Nt("dir");function Jt(h,u,c){c=a(c);var w=j(h),_=j(u),S;function E(T,...$){if(T)return c(T);T!==!1&&(S=$,_(...$,A))}function A(T,$){if(T)return c(T);if(T!==!1){if(!$)return c(null,...S);w(E)}}return A(null,!0)}var xt=Z(Jt,3);function Jr(h,u,c){let w=j(u);return xt(h,(..._)=>{let S=_.pop();w(..._,(E,A)=>S(E,!A))},c)}function jt(h){return(u,c,w)=>h(u,w)}function te(h,u,c){return P(h,jt(j(u)),c)}var yr=Z(te,3);function ee(h,u,c,w){return g(u)(h,jt(j(c)),w)}var Mt=Z(ee,4);function kn(h,u,c){return Mt(h,1,u,c)}var _t=Z(kn,3);function Ht(h){return X(h)?h:function(...u){var c=u.pop(),w=!0;u.push((..._)=>{w?L(()=>c(..._)):c(..._)}),h.apply(this,u),w=!1}}function Un(h,u,c){return dt(w=>!w,w=>!w)(P,h,u,c)}var It=Z(Un,3);function re(h,u,c,w){return dt(_=>!_,_=>!_)(g(u),h,c,w)}var Ye=Z(re,4);function tn(h,u,c){return dt(w=>!w,w=>!w)(Y,h,u,c)}var Qe=Z(tn,3);function en(h,u,c,w){var _=new Array(u.length);h(u,(S,E,A)=>{c(S,(T,$)=>{_[E]=!!$,A(T)})},S=>{if(S)return w(S);for(var E=[],A=0;A<u.length;A++)_[A]&&E.push(u[A]);w(null,E)})}function rn(h,u,c,w){var _=[];h(u,(S,E,A)=>{c(S,(T,$)=>{if(T)return A(T);$&&_.push({index:E,value:S}),A(T)})},S=>{if(S)return w(S);w(null,_.sort((E,A)=>E.index-A.index).map(E=>E.value))})}function Je(h,u,c,w){var _=Be(u)?en:rn;return _(h,u,j(c),w)}function nn(h,u,c){return Je(P,h,u,c)}var tr=Z(nn,3);function sn(h,u,c,w){return Je(g(u),h,c,w)}var er=Z(sn,4);function on(h,u,c){return Je(Y,h,u,c)}var rr=Z(on,3);function fn(h,u){var c=a(u),w=j(Ht(h));function _(S){if(S)return c(S);S!==!1&&w(_)}return _()}var Ar=Z(fn,2);function un(h,u,c,w){var _=j(c);return bt(h,u,(S,E)=>{_(S,(A,T)=>A?E(A):E(A,{key:T,val:S}))},(S,E)=>{for(var A={},{hasOwnProperty:T}=Object.prototype,$=0;$<E.length;$++)if(E[$]){var{key:tt}=E[$],{val:ut}=E[$];T.call(A,tt)?A[tt].push(ut):A[tt]=[ut]}return w(S,A)})}var nr=Z(un,4);function Br(h,u,c){return nr(h,1/0,u,c)}function Tr(h,u,c){return nr(h,1,u,c)}var Ir=Nt("log");function Mf(h,u,c,w){w=we(w);var _={},S=j(c);return g(u)(h,(E,A,T)=>{S(E,A,($,tt)=>{if($)return T($);_[A]=tt,T($)})},E=>w(E,_))}var qn=Z(Mf,4);function ds(h,u,c){return qn(h,1/0,u,c)}function ps(h,u,c){return qn(h,1,u,c)}function gs(h,u=c=>c){var c=Object.create(null),w=Object.create(null),_=j(h),S=r((E,A)=>{var T=u(...E);T in c?L(()=>A(null,...c[T])):T in w?w[T].push(A):(w[T]=[A],_(...E,($,...tt)=>{$||(c[T]=tt);var ut=w[T];delete w[T];for(var et=0,be=ut.length;et<be;et++)ut[et]($,...tt)}))});return S.memo=c,S.unmemoized=h,S}var $n;l?$n=process.nextTick:i?$n=setImmediate:$n=m;var ys=x($n),Bi=Z((h,u,c)=>{var w=Be(u)?[]:{};h(u,(_,S,E)=>{j(_)((A,...T)=>{T.length<2&&([T]=T),w[S]=T,E(A)})},_=>c(_,w))},3);function ms(h,u){return Bi(P,h,u)}function vs(h,u,c){return Bi(g(u),h,c)}function Ti(h,u){var c=j(h);return Er((w,_)=>{c(w[0],_)},u,1)}class _f{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(u){let c;for(;u>0&&Ii(this.heap[u],this.heap[c=ws(u)]);){let w=this.heap[u];this.heap[u]=this.heap[c],this.heap[c]=w,u=c}}percDown(u){let c;for(;(c=Sf(u))<this.heap.length&&(c+1<this.heap.length&&Ii(this.heap[c+1],this.heap[c])&&(c=c+1),!Ii(this.heap[u],this.heap[c]));){let w=this.heap[u];this.heap[u]=this.heap[c],this.heap[c]=w,u=c}}push(u){u.pushCount=++this.pushCount,this.heap.push(u),this.percUp(this.heap.length-1)}unshift(u){return this.heap.push(u)}shift(){let[u]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),u}toArray(){return[...this]}*[Symbol.iterator](){for(let u=0;u<this.heap.length;u++)yield this.heap[u].data}remove(u){let c=0;for(let w=0;w<this.heap.length;w++)u(this.heap[w])||(this.heap[c]=this.heap[w],c++);this.heap.splice(c);for(let w=ws(this.heap.length-1);w>=0;w--)this.percDown(w);return this}}function Sf(h){return(h<<1)+1}function ws(h){return(h+1>>1)-1}function Ii(h,u){return h.priority!==u.priority?h.priority<u.priority:h.pushCount<u.pushCount}function bs(h,u){var c=Ti(h,u),{push:w,pushAsync:_}=c;c._tasks=new _f,c._createTaskItem=({data:E,priority:A},T)=>({data:E,priority:A,callback:T});function S(E,A){return Array.isArray(E)?E.map(T=>({data:T,priority:A})):{data:E,priority:A}}return c.push=function(E,A=0,T){return w(S(E,A),T)},c.pushAsync=function(E,A=0,T){return _(S(E,A),T)},delete c.unshift,delete c.unshiftAsync,c}function Ef(h,u){if(u=we(u),!Array.isArray(h))return u(new TypeError("First argument to race must be an array of functions"));if(!h.length)return u();for(var c=0,w=h.length;c<w;c++)j(h[c])(u)}var xs=Z(Ef,2);function Cn(h,u,c,w){var _=[...h].reverse();return pt(_,u,c,w)}function Nn(h){var u=j(h);return r(function(w,_){return w.push((S,...E)=>{let A={};if(S&&(A.error=S),E.length>0){var T=E;E.length<=1&&([T]=E),A.value=T}_(null,A)}),u.apply(this,w)})}function Ms(h){var u;return Array.isArray(h)?u=h.map(Nn):(u={},Object.keys(h).forEach(c=>{u[c]=Nn.call(this,h[c])})),u}function Li(h,u,c,w){let _=j(c);return Je(h,u,(S,E)=>{_(S,(A,T)=>{E(A,!T)})},w)}function Af(h,u,c){return Li(P,h,u,c)}var _s=Z(Af,3);function Bf(h,u,c,w){return Li(g(u),h,c,w)}var Ss=Z(Bf,4);function Tf(h,u,c){return Li(Y,h,u,c)}var Es=Z(Tf,3);function As(h){return function(){return h}}let Pi=5,Bs=0;function jn(h,u,c){var w={times:Pi,intervalFunc:As(Bs)};if(arguments.length<3&&typeof h=="function"?(c=u||vt(),u=h):(If(w,h),c=c||vt()),typeof u!="function")throw new Error("Invalid arguments for async.retry");var _=j(u),S=1;function E(){_((A,...T)=>{A!==!1&&(A&&S++<w.times&&(typeof w.errorFilter!="function"||w.errorFilter(A))?setTimeout(E,w.intervalFunc(S-1)):c(A,...T))})}return E(),c[We]}function If(h,u){if(typeof u=="object")h.times=+u.times||Pi,h.intervalFunc=typeof u.interval=="function"?u.interval:As(+u.interval||Bs),h.errorFilter=u.errorFilter;else if(typeof u=="number"||typeof u=="string")h.times=+u||Pi;else throw new Error("Invalid arguments for async.retry")}function Ts(h,u){u||(u=h,h=null);let c=h&&h.arity||u.length;X(u)&&(c+=1);var w=j(u);return r((_,S)=>{(_.length<c-1||S==null)&&(_.push(S),S=vt());function E(A){w(..._,A)}return h?jn(h,E,S):jn(E,S),S[We]})}function Is(h,u){return Bi(Y,h,u)}function Lf(h,u,c){return dt(Boolean,w=>w)(P,h,u,c)}var Kn=Z(Lf,3);function Pf(h,u,c,w){return dt(Boolean,_=>_)(g(u),h,c,w)}var Vn=Z(Pf,4);function Of(h,u,c){return dt(Boolean,w=>w)(Y,h,u,c)}var zn=Z(Of,3);function Hf(h,u,c){var w=j(u);return q(h,(S,E)=>{w(S,(A,T)=>{if(A)return E(A);E(A,{value:S,criteria:T})})},(S,E)=>{if(S)return c(S);c(null,E.sort(_).map(A=>A.value))});function _(S,E){var A=S.criteria,T=E.criteria;return A<T?-1:A>T?1:0}}var Ls=Z(Hf,3);function Ps(h,u,c){var w=j(h);return r((_,S)=>{var E=!1,A;function T(){var $=h.name||"anonymous",tt=new Error('Callback function "'+$+'" timed out.');tt.code="ETIMEDOUT",c&&(tt.info=c),E=!0,S(tt)}_.push((...$)=>{E||(S(...$),clearTimeout(A))}),A=setTimeout(T,u),w(..._)})}function Rf(h){for(var u=Array(h);h--;)u[h]=h;return u}function Dn(h,u,c,w){var _=j(c);return bt(Rf(h),u,_,w)}function Os(h,u,c){return Dn(h,1/0,u,c)}function Hs(h,u,c){return Dn(h,1,u,c)}function Rs(h,u,c,w){arguments.length<=3&&typeof u=="function"&&(w=c,c=u,u=Array.isArray(h)?[]:{}),w=we(w||vt());var _=j(c);return P(h,(S,E,A)=>{_(u,S,E,A)},S=>w(S,u)),w[We]}function kf(h,u){var c=null,w;return _t(h,(_,S)=>{j(_)((E,...A)=>{if(E===!1)return S(E);A.length<2?[w]=A:w=A,c=E,S(E?null:{})})},()=>u(c,w))}var ks=Z(kf);function Us(h){return(...u)=>(h.unmemoized||h)(...u)}function Uf(h,u,c){c=a(c);var w=j(u),_=j(h),S=[];function E(T,...$){if(T)return c(T);S=$,T!==!1&&_(A)}function A(T,$){if(T)return c(T);if(T!==!1){if(!$)return c(null,...S);w(E)}}return _(A)}var an=Z(Uf,3);function qs(h,u,c){let w=j(h);return an(_=>w((S,E)=>_(S,!E)),u,c)}function qf(h,u){if(u=we(u),!Array.isArray(h))return u(new Error("First argument to waterfall must be an array of functions"));if(!h.length)return u();var c=0;function w(S){var E=j(h[c++]);E(...S,a(_))}function _(S,...E){if(S!==!1){if(S||c===h.length)return u(S,...E);w(E)}}w([])}var $s=Z(qf),$f={apply:e,applyEach:W,applyEachSeries:mt,asyncify:U,auto:Pt,autoInject:Gr,cargo:$t,cargoQueue:Ct,compose:Xr,concat:pr,concatLimit:wt,concatSeries:At,constant:Yr,detect:gr,detectLimit:Bt,detectSeries:Tt,dir:Qr,doUntil:Jr,doWhilst:xt,each:yr,eachLimit:Mt,eachOf:P,eachOfLimit:M,eachOfSeries:Y,eachSeries:_t,ensureAsync:Ht,every:It,everyLimit:Ye,everySeries:Qe,filter:tr,filterLimit:er,filterSeries:rr,forever:Ar,groupBy:Br,groupByLimit:nr,groupBySeries:Tr,log:Ir,map:q,mapLimit:bt,mapSeries:lt,mapValues:ds,mapValuesLimit:qn,mapValuesSeries:ps,memoize:gs,nextTick:ys,parallel:ms,parallelLimit:vs,priorityQueue:bs,queue:Ti,race:xs,reduce:pt,reduceRight:Cn,reflect:Nn,reflectAll:Ms,reject:_s,rejectLimit:Ss,rejectSeries:Es,retry:jn,retryable:Ts,seq:Ot,series:Is,setImmediate:L,some:Kn,someLimit:Vn,someSeries:zn,sortBy:Ls,timeout:Ps,times:Os,timesLimit:Dn,timesSeries:Hs,transform:Rs,tryEach:ks,unmemoize:Us,until:qs,waterfall:$s,whilst:an,all:It,allLimit:Ye,allSeries:Qe,any:Kn,anyLimit:Vn,anySeries:zn,find:gr,findLimit:Bt,findSeries:Tt,flatMap:pr,flatMapLimit:wt,flatMapSeries:At,forEach:yr,forEachSeries:_t,forEachLimit:Mt,forEachOf:P,forEachOfSeries:Y,forEachOfLimit:M,inject:pt,foldl:pt,foldr:Cn,select:tr,selectLimit:er,selectSeries:rr,wrapSync:U,during:an,doDuring:xt};t.default=$f,t.apply=e,t.applyEach=W,t.applyEachSeries=mt,t.asyncify=U,t.auto=Pt,t.autoInject=Gr,t.cargo=$t,t.cargoQueue=Ct,t.compose=Xr,t.concat=pr,t.concatLimit=wt,t.concatSeries=At,t.constant=Yr,t.detect=gr,t.detectLimit=Bt,t.detectSeries=Tt,t.dir=Qr,t.doUntil=Jr,t.doWhilst=xt,t.each=yr,t.eachLimit=Mt,t.eachOf=P,t.eachOfLimit=M,t.eachOfSeries=Y,t.eachSeries=_t,t.ensureAsync=Ht,t.every=It,t.everyLimit=Ye,t.everySeries=Qe,t.filter=tr,t.filterLimit=er,t.filterSeries=rr,t.forever=Ar,t.groupBy=Br,t.groupByLimit=nr,t.groupBySeries=Tr,t.log=Ir,t.map=q,t.mapLimit=bt,t.mapSeries=lt,t.mapValues=ds,t.mapValuesLimit=qn,t.mapValuesSeries=ps,t.memoize=gs,t.nextTick=ys,t.parallel=ms,t.parallelLimit=vs,t.priorityQueue=bs,t.queue=Ti,t.race=xs,t.reduce=pt,t.reduceRight=Cn,t.reflect=Nn,t.reflectAll=Ms,t.reject=_s,t.rejectLimit=Ss,t.rejectSeries=Es,t.retry=jn,t.retryable=Ts,t.seq=Ot,t.series=Is,t.setImmediate=L,t.some=Kn,t.someLimit=Vn,t.someSeries=zn,t.sortBy=Ls,t.timeout=Ps,t.times=Os,t.timesLimit=Dn,t.timesSeries=Hs,t.transform=Rs,t.tryEach=ks,t.unmemoize=Us,t.until=qs,t.waterfall=$s,t.whilst=an,t.all=It,t.allLimit=Ye,t.allSeries=Qe,t.any=Kn,t.anyLimit=Vn,t.anySeries=zn,t.find=gr,t.findLimit=Bt,t.findSeries=Tt,t.flatMap=pr,t.flatMapLimit=wt,t.flatMapSeries=At,t.forEach=yr,t.forEachSeries=_t,t.forEachLimit=Mt,t.forEachOf=P,t.forEachOfSeries=Y,t.forEachOfLimit=M,t.inject=pt,t.foldl=pt,t.foldr=Cn,t.select=tr,t.selectLimit=er,t.selectSeries=rr,t.wrapSync=U,t.during=an,t.doDuring=xt,Object.defineProperty(t,"__esModule",{value:!0})})});var Qo=st(xi=>{"use strict";H();R();Object.defineProperty(xi,"__esModule",{value:!0});xi.AsyncEventEmitter=void 0;var Mh=Yo(),_h=Cf(),ns=class extends _h.EventEmitter{emit(e,...r){let[s,i]=r,l=this,m=l._events[e]??[];return i===void 0&&typeof s=="function"&&(i=s,s=void 0),(e==="newListener"||e==="removeListener")&&(s={event:s,fn:i},i=void 0),m=Array.isArray(m)?m:[m],(0,Mh.eachSeries)(m.slice(),function(x,B){let L;if(x.length<2){try{x.call(l,s)}catch(U){L=U}return B(L)}x.call(l,s,B)},i),l.listenerCount(e)>0}once(e,r){let s=this,i;if(typeof r!="function")throw new TypeError("listener must be a function");return r.length>=2?i=function(l,m){s.removeListener(e,i),r(l,m)}:i=function(l){s.removeListener(e,i),r(l,i)},s.on(e,i),s}first(e,r){let s=this._events[e]??[];if(typeof r!="function")throw new TypeError("listener must be a function");return Array.isArray(s)||(this._events[e]=s=[s]),s.unshift(r),this}before(e,r,s){return this.beforeOrAfter(e,r,s)}after(e,r,s){return this.beforeOrAfter(e,r,s,"after")}beforeOrAfter(e,r,s,i){let l=this._events[e]??[],m,x,B=i==="after"?1:0;if(typeof s!="function")throw new TypeError("listener must be a function");if(typeof r!="function")throw new TypeError("target must be a function");for(Array.isArray(l)||(this._events[e]=l=[l]),x=l.length,m=l.length;m--;)if(l[m]===r){x=m+B;break}return l.splice(x,0,s),this}on(e,r){return super.on(e,r)}addListener(e,r){return super.addListener(e,r)}prependListener(e,r){return super.prependListener(e,r)}prependOnceListener(e,r){return super.prependOnceListener(e,r)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,r){return super.removeListener(e,r)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}};xi.AsyncEventEmitter=ns});var Jo=st(Mi=>{"use strict";H();R();Object.defineProperty(Mi,"__esModule",{value:!0});Mi.Lock=void 0;var is=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise(e=>this.promiseResolverQueue.push(e))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;let e=this.promiseResolverQueue.shift();e&&e(!0)}}};Mi.Lock=is});var Tn=st(it=>{"use strict";H();R();var Sh=it&&it.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,i)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),hr=it&&it.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Sh(e,t,r)};Object.defineProperty(it,"__esModule",{value:!0});it.toAscii=it.stripHexPrefix=it.padToEven=it.isHexString=it.isHexPrefixed=it.getKeys=it.getBinarySize=it.fromUtf8=it.fromAscii=it.arrayContainsArray=void 0;hr(ui(),it);hr(es(),it);hr(Zo(),it);hr(Wo(),it);hr(Nr(),it);hr(Go(),it);hr(Qo(),it);var Ce=Cr();Object.defineProperty(it,"arrayContainsArray",{enumerable:!0,get:function(){return Ce.arrayContainsArray}});Object.defineProperty(it,"fromAscii",{enumerable:!0,get:function(){return Ce.fromAscii}});Object.defineProperty(it,"fromUtf8",{enumerable:!0,get:function(){return Ce.fromUtf8}});Object.defineProperty(it,"getBinarySize",{enumerable:!0,get:function(){return Ce.getBinarySize}});Object.defineProperty(it,"getKeys",{enumerable:!0,get:function(){return Ce.getKeys}});Object.defineProperty(it,"isHexPrefixed",{enumerable:!0,get:function(){return Ce.isHexPrefixed}});Object.defineProperty(it,"isHexString",{enumerable:!0,get:function(){return Ce.isHexString}});Object.defineProperty(it,"padToEven",{enumerable:!0,get:function(){return Ce.padToEven}});Object.defineProperty(it,"stripHexPrefix",{enumerable:!0,get:function(){return Ce.stripHexPrefix}});Object.defineProperty(it,"toAscii",{enumerable:!0,get:function(){return Ce.toAscii}});hr(Jo(),it)});var Dr=st(he=>{"use strict";H();R();Object.defineProperty(he,"__esModule",{value:!0});he.numberToBuffer=he.normalize=he.recoverPublicKey=he.concatSig=he.legacyToBuffer=he.isNullish=he.padWithZeroes=void 0;var Ee=Tn(),ss=Oi();function os(t,e){if(t!==""&&!/^[a-f0-9]+$/iu.test(t))throw new Error(`Expected an unprefixed hex string. Received: ${t}`);if(e<0)throw new Error(`Expected a non-negative integer target length. Received: ${e}`);return String.prototype.padStart.call(t,e,"0")}he.padWithZeroes=os;function Eh(t){return t==null}he.isNullish=Eh;function Ah(t){return typeof t=="string"&&!(0,ss.isHexString)(t)?I.Buffer.from(t):(0,Ee.toBuffer)(t)}he.legacyToBuffer=Ah;function Bh(t,e,r){let s=(0,Ee.fromSigned)(e),i=(0,Ee.fromSigned)(r),l=(0,Ee.bufferToInt)(t),m=os((0,Ee.toUnsigned)(s).toString("hex"),64),x=os((0,Ee.toUnsigned)(i).toString("hex"),64),B=(0,ss.stripHexPrefix)((0,ss.intToHex)(l));return(0,Ee.addHexPrefix)(m.concat(x,B))}he.concatSig=Bh;function Th(t,e){let r=(0,Ee.fromRpcSig)(e);return(0,Ee.ecrecover)(t,r.v,r.r,r.s)}he.recoverPublicKey=Th;function Ih(t){if(!!t){if(typeof t=="number"){if(t<0)return"0x";let e=(0,Ee.toBuffer)(t);t=(0,Ee.bufferToHex)(e)}if(typeof t!="string"){let e="eth-sig-util.normalize() requires hex string or integer input.";throw e+=` received ${typeof t}: ${t}`,new Error(e)}return(0,Ee.addHexPrefix)(t.toLowerCase())}}he.normalize=Ih;function Lh(t){let e=t.toString(16),r=e.length%2?"0":"";return I.Buffer.from(r+e,"hex")}he.numberToBuffer=Lh});var ef=st(cr=>{"use strict";H();R();Object.defineProperty(cr,"__esModule",{value:!0});cr.extractPublicKey=cr.recoverPersonalSignature=cr.personalSign=void 0;var Zr=Tn(),Ne=Dr();function Ph({privateKey:t,data:e}){if((0,Ne.isNullish)(e))throw new Error("Missing data parameter");if((0,Ne.isNullish)(t))throw new Error("Missing privateKey parameter");let r=(0,Ne.legacyToBuffer)(e),s=(0,Zr.hashPersonalMessage)(r),i=(0,Zr.ecsign)(s,t);return(0,Ne.concatSig)((0,Zr.toBuffer)(i.v),i.r,i.s)}cr.personalSign=Ph;function Oh({data:t,signature:e}){if((0,Ne.isNullish)(t))throw new Error("Missing data parameter");if((0,Ne.isNullish)(e))throw new Error("Missing signature parameter");let r=tf(t,e),s=(0,Zr.publicToAddress)(r);return(0,Zr.bufferToHex)(s)}cr.recoverPersonalSignature=Oh;function Hh({data:t,signature:e}){if((0,Ne.isNullish)(t))throw new Error("Missing data parameter");if((0,Ne.isNullish)(e))throw new Error("Missing signature parameter");return`0x${tf(t,e).toString("hex")}`}cr.extractPublicKey=Hh;function tf(t,e){let r=(0,Zr.hashPersonalMessage)((0,Ne.legacyToBuffer)(t));return(0,Ne.recoverPublicKey)(r,e)}});var nf=st((rf,fs)=>{H();R();(function(t,e){"use strict";function r(v,n){if(!v)throw new Error(n||"Assertion failed")}function s(v,n){v.super_=n;var f=function(){};f.prototype=n.prototype,v.prototype=new f,v.prototype.constructor=v}function i(v,n,f){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((n==="le"||n==="be")&&(f=n,n=10),this._init(v||0,n||10,f||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var l;try{l=Cs().Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,f){return n.cmp(f)>0?n:f},i.min=function(n,f){return n.cmp(f)<0?n:f},i.prototype._init=function(n,f,a){if(typeof n=="number")return this._initNumber(n,f,a);if(typeof n=="object")return this._initArray(n,f,a);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),n=n.toString().replace(/\s+/g,"");var d=0;n[0]==="-"&&d++,f===16?this._parseHex(n,d):this._parseBase(n,f,d),n[0]==="-"&&(this.negative=1),this.strip(),a==="le"&&this._initArray(this.toArray(),f,a)},i.prototype._initNumber=function(n,f,a){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),f,a)},i.prototype._initArray=function(n,f,a){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var g,b,M=0;if(a==="be")for(d=n.length-1,g=0;d>=0;d-=3)b=n[d]|n[d-1]<<8|n[d-2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);else if(a==="le")for(d=0,g=0;d<n.length;d+=3)b=n[d]|n[d+1]<<8|n[d+2]<<16,this.words[g]|=b<<M&67108863,this.words[g+1]=b>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);return this.strip()};function m(v,n,f){for(var a=0,d=Math.min(v.length,f),g=n;g<d;g++){var b=v.charCodeAt(g)-48;a<<=4,b>=49&&b<=54?a|=b-49+10:b>=17&&b<=22?a|=b-17+10:a|=b&15}return a}i.prototype._parseHex=function(n,f){this.length=Math.ceil((n.length-f)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var d,g,b=0;for(a=n.length-6,d=0;a>=f;a-=6)g=m(n,a,a+6),this.words[d]|=g<<b&67108863,this.words[d+1]|=g>>>26-b&4194303,b+=24,b>=26&&(b-=26,d++);a+6!==f&&(g=m(n,f,a+6),this.words[d]|=g<<b&67108863,this.words[d+1]|=g>>>26-b&4194303),this.strip()};function x(v,n,f,a){for(var d=0,g=Math.min(v.length,f),b=n;b<g;b++){var M=v.charCodeAt(b)-48;d*=a,M>=49?d+=M-49+10:M>=17?d+=M-17+10:d+=M}return d}i.prototype._parseBase=function(n,f,a){this.words=[0],this.length=1;for(var d=0,g=1;g<=67108863;g*=f)d++;d--,g=g/f|0;for(var b=n.length-a,M=b%d,p=Math.min(b,b-M)+a,o=0,y=a;y<p;y+=d)o=x(n,y,y+d,f),this.imuln(g),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(M!==0){var P=1;for(o=x(n,y,n.length,f),y=0;y<M;y++)P*=f;this.imuln(P),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}},i.prototype.copy=function(n){n.words=new Array(this.length);for(var f=0;f<this.length;f++)n.words[f]=this.words[f];n.length=this.length,n.negative=this.negative,n.red=this.red},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],U=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,f){n=n||10,f=f|0||1;var a;if(n===16||n==="hex"){a="";for(var d=0,g=0,b=0;b<this.length;b++){var M=this.words[b],p=((M<<d|g)&16777215).toString(16);g=M>>>24-d&16777215,g!==0||b!==this.length-1?a=B[6-p.length]+p+a:a=p+a,d+=2,d>=26&&(d-=26,b--)}for(g!==0&&(a=g.toString(16)+a);a.length%f!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(n===(n|0)&&n>=2&&n<=36){var o=L[n],y=U[n];a="";var P=this.clone();for(P.negative=0;!P.isZero();){var C=P.modn(y).toString(n);P=P.idivn(y),P.isZero()?a=C+a:a=B[o-C.length]+C+a}for(this.isZero()&&(a="0"+a);a.length%f!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(n,f){return r(typeof l<"u"),this.toArrayLike(l,n,f)},i.prototype.toArray=function(n,f){return this.toArrayLike(Array,n,f)},i.prototype.toArrayLike=function(n,f,a){var d=this.byteLength(),g=a||Math.max(1,d);r(d<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0"),this.strip();var b=f==="le",M=new n(g),p,o,y=this.clone();if(b){for(o=0;!y.isZero();o++)p=y.andln(255),y.iushrn(8),M[o]=p;for(;o<g;o++)M[o]=0}else{for(o=0;o<g-d;o++)M[o]=0;for(o=0;!y.isZero();o++)p=y.andln(255),y.iushrn(8),M[g-o-1]=p}return M},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var f=n,a=0;return f>=4096&&(a+=13,f>>>=13),f>=64&&(a+=7,f>>>=7),f>=8&&(a+=4,f>>>=4),f>=2&&(a+=2,f>>>=2),a+f},i.prototype._zeroBits=function(n){if(n===0)return 26;var f=n,a=0;return(f&8191)===0&&(a+=13,f>>>=13),(f&127)===0&&(a+=7,f>>>=7),(f&15)===0&&(a+=4,f>>>=4),(f&3)===0&&(a+=2,f>>>=2),(f&1)===0&&a++,a},i.prototype.bitLength=function(){var n=this.words[this.length-1],f=this._countBits(n);return(this.length-1)*26+f};function K(v){for(var n=new Array(v.bitLength()),f=0;f<n.length;f++){var a=f/26|0,d=f%26;n[f]=(v.words[a]&1<<d)>>>d}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,f=0;f<this.length;f++){var a=this._zeroBits(this.words[f]);if(n+=a,a!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var f=0;f<n.length;f++)this.words[f]=this.words[f]|n.words[f];return this.strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var f;this.length>n.length?f=n:f=this;for(var a=0;a<f.length;a++)this.words[a]=this.words[a]&n.words[a];return this.length=f.length,this.strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var f,a;this.length>n.length?(f=this,a=n):(f=n,a=this);for(var d=0;d<a.length;d++)this.words[d]=f.words[d]^a.words[d];if(this!==f)for(;d<f.length;d++)this.words[d]=f.words[d];return this.length=f.length,this.strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var f=Math.ceil(n/26)|0,a=n%26;this._expand(f),a>0&&f--;for(var d=0;d<f;d++)this.words[d]=~this.words[d]&67108863;return a>0&&(this.words[d]=~this.words[d]&67108863>>26-a),this.strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,f){r(typeof n=="number"&&n>=0);var a=n/26|0,d=n%26;return this._expand(a+1),f?this.words[a]=this.words[a]|1<<d:this.words[a]=this.words[a]&~(1<<d),this.strip()},i.prototype.iadd=function(n){var f;if(this.negative!==0&&n.negative===0)return this.negative=0,f=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,f=this.isub(n),n.negative=1,f._normSign();var a,d;this.length>n.length?(a=this,d=n):(a=n,d=this);for(var g=0,b=0;b<d.length;b++)f=(a.words[b]|0)+(d.words[b]|0)+g,this.words[b]=f&67108863,g=f>>>26;for(;g!==0&&b<a.length;b++)f=(a.words[b]|0)+g,this.words[b]=f&67108863,g=f>>>26;if(this.length=a.length,g!==0)this.words[this.length]=g,this.length++;else if(a!==this)for(;b<a.length;b++)this.words[b]=a.words[b];return this},i.prototype.add=function(n){var f;return n.negative!==0&&this.negative===0?(n.negative=0,f=this.sub(n),n.negative^=1,f):n.negative===0&&this.negative!==0?(this.negative=0,f=n.sub(this),this.negative=1,f):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var f=this.iadd(n);return n.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var a=this.cmp(n);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,g;a>0?(d=this,g=n):(d=n,g=this);for(var b=0,M=0;M<g.length;M++)f=(d.words[M]|0)-(g.words[M]|0)+b,b=f>>26,this.words[M]=f&67108863;for(;b!==0&&M<d.length;M++)f=(d.words[M]|0)+b,b=f>>26,this.words[M]=f&67108863;if(b===0&&M<d.length&&d!==this)for(;M<d.length;M++)this.words[M]=d.words[M];return this.length=Math.max(this.length,M),d!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function V(v,n,f){f.negative=n.negative^v.negative;var a=v.length+n.length|0;f.length=a,a=a-1|0;var d=v.words[0]|0,g=n.words[0]|0,b=d*g,M=b&67108863,p=b/67108864|0;f.words[0]=M;for(var o=1;o<a;o++){for(var y=p>>>26,P=p&67108863,C=Math.min(o,n.length-1),q=Math.max(0,o-v.length+1);q<=C;q++){var W=o-q|0;d=v.words[W]|0,g=n.words[q]|0,b=d*g+P,y+=b/67108864|0,P=b&67108863}f.words[o]=P|0,p=y|0}return p!==0?f.words[o]=p|0:f.length--,f.strip()}var X=function(n,f,a){var d=n.words,g=f.words,b=a.words,M=0,p,o,y,P=d[0]|0,C=P&8191,q=P>>>13,W=d[1]|0,ft=W&8191,Y=W>>>13,Re=d[2]|0,lt=Re&8191,mt=Re>>>13,We=d[3]|0,vt=We&8191,Pt=We>>>13,Ln=d[4]|0,Vt=Ln&8191,zt=Ln>>>13,Pn=d[5]|0,Dt=Pn&8191,Zt=Pn>>>13,Gr=d[6]|0,Ft=Gr&8191,qt=Gr>>>13,Er=d[7]|0,$t=Er&8191,Ct=Er>>>13,On=d[8]|0,pt=On&8191,Ot=On>>>13,Xr=d[9]|0,Wt=Xr&8191,bt=Xr>>>13,Hn=g[0]|0,wt=Hn&8191,Gt=Hn>>>13,pr=g[1]|0,Xt=pr&8191,At=pr>>>13,Yr=g[2]|0,dt=Yr&8191,Yt=Yr>>>13,gr=g[3]|0,Qt=gr&8191,Bt=gr>>>13,Rn=g[4]|0,Tt=Rn&8191,Nt=Rn>>>13,Qr=g[5]|0,Jt=Qr&8191,xt=Qr>>>13,Jr=g[6]|0,jt=Jr&8191,te=Jr>>>13,yr=g[7]|0,ee=yr&8191,Mt=yr>>>13,kn=g[8]|0,_t=kn&8191,Ht=kn>>>13,Un=g[9]|0,It=Un&8191,re=Un>>>13;a.negative=n.negative^f.negative,a.length=19,p=Math.imul(C,wt),o=Math.imul(C,Gt),o=o+Math.imul(q,wt)|0,y=Math.imul(q,Gt);var Ye=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,p=Math.imul(ft,wt),o=Math.imul(ft,Gt),o=o+Math.imul(Y,wt)|0,y=Math.imul(Y,Gt),p=p+Math.imul(C,Xt)|0,o=o+Math.imul(C,At)|0,o=o+Math.imul(q,Xt)|0,y=y+Math.imul(q,At)|0;var tn=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(tn>>>26)|0,tn&=67108863,p=Math.imul(lt,wt),o=Math.imul(lt,Gt),o=o+Math.imul(mt,wt)|0,y=Math.imul(mt,Gt),p=p+Math.imul(ft,Xt)|0,o=o+Math.imul(ft,At)|0,o=o+Math.imul(Y,Xt)|0,y=y+Math.imul(Y,At)|0,p=p+Math.imul(C,dt)|0,o=o+Math.imul(C,Yt)|0,o=o+Math.imul(q,dt)|0,y=y+Math.imul(q,Yt)|0;var Qe=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,p=Math.imul(vt,wt),o=Math.imul(vt,Gt),o=o+Math.imul(Pt,wt)|0,y=Math.imul(Pt,Gt),p=p+Math.imul(lt,Xt)|0,o=o+Math.imul(lt,At)|0,o=o+Math.imul(mt,Xt)|0,y=y+Math.imul(mt,At)|0,p=p+Math.imul(ft,dt)|0,o=o+Math.imul(ft,Yt)|0,o=o+Math.imul(Y,dt)|0,y=y+Math.imul(Y,Yt)|0,p=p+Math.imul(C,Qt)|0,o=o+Math.imul(C,Bt)|0,o=o+Math.imul(q,Qt)|0,y=y+Math.imul(q,Bt)|0;var en=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(en>>>26)|0,en&=67108863,p=Math.imul(Vt,wt),o=Math.imul(Vt,Gt),o=o+Math.imul(zt,wt)|0,y=Math.imul(zt,Gt),p=p+Math.imul(vt,Xt)|0,o=o+Math.imul(vt,At)|0,o=o+Math.imul(Pt,Xt)|0,y=y+Math.imul(Pt,At)|0,p=p+Math.imul(lt,dt)|0,o=o+Math.imul(lt,Yt)|0,o=o+Math.imul(mt,dt)|0,y=y+Math.imul(mt,Yt)|0,p=p+Math.imul(ft,Qt)|0,o=o+Math.imul(ft,Bt)|0,o=o+Math.imul(Y,Qt)|0,y=y+Math.imul(Y,Bt)|0,p=p+Math.imul(C,Tt)|0,o=o+Math.imul(C,Nt)|0,o=o+Math.imul(q,Tt)|0,y=y+Math.imul(q,Nt)|0;var rn=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(rn>>>26)|0,rn&=67108863,p=Math.imul(Dt,wt),o=Math.imul(Dt,Gt),o=o+Math.imul(Zt,wt)|0,y=Math.imul(Zt,Gt),p=p+Math.imul(Vt,Xt)|0,o=o+Math.imul(Vt,At)|0,o=o+Math.imul(zt,Xt)|0,y=y+Math.imul(zt,At)|0,p=p+Math.imul(vt,dt)|0,o=o+Math.imul(vt,Yt)|0,o=o+Math.imul(Pt,dt)|0,y=y+Math.imul(Pt,Yt)|0,p=p+Math.imul(lt,Qt)|0,o=o+Math.imul(lt,Bt)|0,o=o+Math.imul(mt,Qt)|0,y=y+Math.imul(mt,Bt)|0,p=p+Math.imul(ft,Tt)|0,o=o+Math.imul(ft,Nt)|0,o=o+Math.imul(Y,Tt)|0,y=y+Math.imul(Y,Nt)|0,p=p+Math.imul(C,Jt)|0,o=o+Math.imul(C,xt)|0,o=o+Math.imul(q,Jt)|0,y=y+Math.imul(q,xt)|0;var Je=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(Je>>>26)|0,Je&=67108863,p=Math.imul(Ft,wt),o=Math.imul(Ft,Gt),o=o+Math.imul(qt,wt)|0,y=Math.imul(qt,Gt),p=p+Math.imul(Dt,Xt)|0,o=o+Math.imul(Dt,At)|0,o=o+Math.imul(Zt,Xt)|0,y=y+Math.imul(Zt,At)|0,p=p+Math.imul(Vt,dt)|0,o=o+Math.imul(Vt,Yt)|0,o=o+Math.imul(zt,dt)|0,y=y+Math.imul(zt,Yt)|0,p=p+Math.imul(vt,Qt)|0,o=o+Math.imul(vt,Bt)|0,o=o+Math.imul(Pt,Qt)|0,y=y+Math.imul(Pt,Bt)|0,p=p+Math.imul(lt,Tt)|0,o=o+Math.imul(lt,Nt)|0,o=o+Math.imul(mt,Tt)|0,y=y+Math.imul(mt,Nt)|0,p=p+Math.imul(ft,Jt)|0,o=o+Math.imul(ft,xt)|0,o=o+Math.imul(Y,Jt)|0,y=y+Math.imul(Y,xt)|0,p=p+Math.imul(C,jt)|0,o=o+Math.imul(C,te)|0,o=o+Math.imul(q,jt)|0,y=y+Math.imul(q,te)|0;var nn=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(nn>>>26)|0,nn&=67108863,p=Math.imul($t,wt),o=Math.imul($t,Gt),o=o+Math.imul(Ct,wt)|0,y=Math.imul(Ct,Gt),p=p+Math.imul(Ft,Xt)|0,o=o+Math.imul(Ft,At)|0,o=o+Math.imul(qt,Xt)|0,y=y+Math.imul(qt,At)|0,p=p+Math.imul(Dt,dt)|0,o=o+Math.imul(Dt,Yt)|0,o=o+Math.imul(Zt,dt)|0,y=y+Math.imul(Zt,Yt)|0,p=p+Math.imul(Vt,Qt)|0,o=o+Math.imul(Vt,Bt)|0,o=o+Math.imul(zt,Qt)|0,y=y+Math.imul(zt,Bt)|0,p=p+Math.imul(vt,Tt)|0,o=o+Math.imul(vt,Nt)|0,o=o+Math.imul(Pt,Tt)|0,y=y+Math.imul(Pt,Nt)|0,p=p+Math.imul(lt,Jt)|0,o=o+Math.imul(lt,xt)|0,o=o+Math.imul(mt,Jt)|0,y=y+Math.imul(mt,xt)|0,p=p+Math.imul(ft,jt)|0,o=o+Math.imul(ft,te)|0,o=o+Math.imul(Y,jt)|0,y=y+Math.imul(Y,te)|0,p=p+Math.imul(C,ee)|0,o=o+Math.imul(C,Mt)|0,o=o+Math.imul(q,ee)|0,y=y+Math.imul(q,Mt)|0;var tr=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(tr>>>26)|0,tr&=67108863,p=Math.imul(pt,wt),o=Math.imul(pt,Gt),o=o+Math.imul(Ot,wt)|0,y=Math.imul(Ot,Gt),p=p+Math.imul($t,Xt)|0,o=o+Math.imul($t,At)|0,o=o+Math.imul(Ct,Xt)|0,y=y+Math.imul(Ct,At)|0,p=p+Math.imul(Ft,dt)|0,o=o+Math.imul(Ft,Yt)|0,o=o+Math.imul(qt,dt)|0,y=y+Math.imul(qt,Yt)|0,p=p+Math.imul(Dt,Qt)|0,o=o+Math.imul(Dt,Bt)|0,o=o+Math.imul(Zt,Qt)|0,y=y+Math.imul(Zt,Bt)|0,p=p+Math.imul(Vt,Tt)|0,o=o+Math.imul(Vt,Nt)|0,o=o+Math.imul(zt,Tt)|0,y=y+Math.imul(zt,Nt)|0,p=p+Math.imul(vt,Jt)|0,o=o+Math.imul(vt,xt)|0,o=o+Math.imul(Pt,Jt)|0,y=y+Math.imul(Pt,xt)|0,p=p+Math.imul(lt,jt)|0,o=o+Math.imul(lt,te)|0,o=o+Math.imul(mt,jt)|0,y=y+Math.imul(mt,te)|0,p=p+Math.imul(ft,ee)|0,o=o+Math.imul(ft,Mt)|0,o=o+Math.imul(Y,ee)|0,y=y+Math.imul(Y,Mt)|0,p=p+Math.imul(C,_t)|0,o=o+Math.imul(C,Ht)|0,o=o+Math.imul(q,_t)|0,y=y+Math.imul(q,Ht)|0;var sn=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(sn>>>26)|0,sn&=67108863,p=Math.imul(Wt,wt),o=Math.imul(Wt,Gt),o=o+Math.imul(bt,wt)|0,y=Math.imul(bt,Gt),p=p+Math.imul(pt,Xt)|0,o=o+Math.imul(pt,At)|0,o=o+Math.imul(Ot,Xt)|0,y=y+Math.imul(Ot,At)|0,p=p+Math.imul($t,dt)|0,o=o+Math.imul($t,Yt)|0,o=o+Math.imul(Ct,dt)|0,y=y+Math.imul(Ct,Yt)|0,p=p+Math.imul(Ft,Qt)|0,o=o+Math.imul(Ft,Bt)|0,o=o+Math.imul(qt,Qt)|0,y=y+Math.imul(qt,Bt)|0,p=p+Math.imul(Dt,Tt)|0,o=o+Math.imul(Dt,Nt)|0,o=o+Math.imul(Zt,Tt)|0,y=y+Math.imul(Zt,Nt)|0,p=p+Math.imul(Vt,Jt)|0,o=o+Math.imul(Vt,xt)|0,o=o+Math.imul(zt,Jt)|0,y=y+Math.imul(zt,xt)|0,p=p+Math.imul(vt,jt)|0,o=o+Math.imul(vt,te)|0,o=o+Math.imul(Pt,jt)|0,y=y+Math.imul(Pt,te)|0,p=p+Math.imul(lt,ee)|0,o=o+Math.imul(lt,Mt)|0,o=o+Math.imul(mt,ee)|0,y=y+Math.imul(mt,Mt)|0,p=p+Math.imul(ft,_t)|0,o=o+Math.imul(ft,Ht)|0,o=o+Math.imul(Y,_t)|0,y=y+Math.imul(Y,Ht)|0,p=p+Math.imul(C,It)|0,o=o+Math.imul(C,re)|0,o=o+Math.imul(q,It)|0,y=y+Math.imul(q,re)|0;var er=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(er>>>26)|0,er&=67108863,p=Math.imul(Wt,Xt),o=Math.imul(Wt,At),o=o+Math.imul(bt,Xt)|0,y=Math.imul(bt,At),p=p+Math.imul(pt,dt)|0,o=o+Math.imul(pt,Yt)|0,o=o+Math.imul(Ot,dt)|0,y=y+Math.imul(Ot,Yt)|0,p=p+Math.imul($t,Qt)|0,o=o+Math.imul($t,Bt)|0,o=o+Math.imul(Ct,Qt)|0,y=y+Math.imul(Ct,Bt)|0,p=p+Math.imul(Ft,Tt)|0,o=o+Math.imul(Ft,Nt)|0,o=o+Math.imul(qt,Tt)|0,y=y+Math.imul(qt,Nt)|0,p=p+Math.imul(Dt,Jt)|0,o=o+Math.imul(Dt,xt)|0,o=o+Math.imul(Zt,Jt)|0,y=y+Math.imul(Zt,xt)|0,p=p+Math.imul(Vt,jt)|0,o=o+Math.imul(Vt,te)|0,o=o+Math.imul(zt,jt)|0,y=y+Math.imul(zt,te)|0,p=p+Math.imul(vt,ee)|0,o=o+Math.imul(vt,Mt)|0,o=o+Math.imul(Pt,ee)|0,y=y+Math.imul(Pt,Mt)|0,p=p+Math.imul(lt,_t)|0,o=o+Math.imul(lt,Ht)|0,o=o+Math.imul(mt,_t)|0,y=y+Math.imul(mt,Ht)|0,p=p+Math.imul(ft,It)|0,o=o+Math.imul(ft,re)|0,o=o+Math.imul(Y,It)|0,y=y+Math.imul(Y,re)|0;var on=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(on>>>26)|0,on&=67108863,p=Math.imul(Wt,dt),o=Math.imul(Wt,Yt),o=o+Math.imul(bt,dt)|0,y=Math.imul(bt,Yt),p=p+Math.imul(pt,Qt)|0,o=o+Math.imul(pt,Bt)|0,o=o+Math.imul(Ot,Qt)|0,y=y+Math.imul(Ot,Bt)|0,p=p+Math.imul($t,Tt)|0,o=o+Math.imul($t,Nt)|0,o=o+Math.imul(Ct,Tt)|0,y=y+Math.imul(Ct,Nt)|0,p=p+Math.imul(Ft,Jt)|0,o=o+Math.imul(Ft,xt)|0,o=o+Math.imul(qt,Jt)|0,y=y+Math.imul(qt,xt)|0,p=p+Math.imul(Dt,jt)|0,o=o+Math.imul(Dt,te)|0,o=o+Math.imul(Zt,jt)|0,y=y+Math.imul(Zt,te)|0,p=p+Math.imul(Vt,ee)|0,o=o+Math.imul(Vt,Mt)|0,o=o+Math.imul(zt,ee)|0,y=y+Math.imul(zt,Mt)|0,p=p+Math.imul(vt,_t)|0,o=o+Math.imul(vt,Ht)|0,o=o+Math.imul(Pt,_t)|0,y=y+Math.imul(Pt,Ht)|0,p=p+Math.imul(lt,It)|0,o=o+Math.imul(lt,re)|0,o=o+Math.imul(mt,It)|0,y=y+Math.imul(mt,re)|0;var rr=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,p=Math.imul(Wt,Qt),o=Math.imul(Wt,Bt),o=o+Math.imul(bt,Qt)|0,y=Math.imul(bt,Bt),p=p+Math.imul(pt,Tt)|0,o=o+Math.imul(pt,Nt)|0,o=o+Math.imul(Ot,Tt)|0,y=y+Math.imul(Ot,Nt)|0,p=p+Math.imul($t,Jt)|0,o=o+Math.imul($t,xt)|0,o=o+Math.imul(Ct,Jt)|0,y=y+Math.imul(Ct,xt)|0,p=p+Math.imul(Ft,jt)|0,o=o+Math.imul(Ft,te)|0,o=o+Math.imul(qt,jt)|0,y=y+Math.imul(qt,te)|0,p=p+Math.imul(Dt,ee)|0,o=o+Math.imul(Dt,Mt)|0,o=o+Math.imul(Zt,ee)|0,y=y+Math.imul(Zt,Mt)|0,p=p+Math.imul(Vt,_t)|0,o=o+Math.imul(Vt,Ht)|0,o=o+Math.imul(zt,_t)|0,y=y+Math.imul(zt,Ht)|0,p=p+Math.imul(vt,It)|0,o=o+Math.imul(vt,re)|0,o=o+Math.imul(Pt,It)|0,y=y+Math.imul(Pt,re)|0;var fn=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(fn>>>26)|0,fn&=67108863,p=Math.imul(Wt,Tt),o=Math.imul(Wt,Nt),o=o+Math.imul(bt,Tt)|0,y=Math.imul(bt,Nt),p=p+Math.imul(pt,Jt)|0,o=o+Math.imul(pt,xt)|0,o=o+Math.imul(Ot,Jt)|0,y=y+Math.imul(Ot,xt)|0,p=p+Math.imul($t,jt)|0,o=o+Math.imul($t,te)|0,o=o+Math.imul(Ct,jt)|0,y=y+Math.imul(Ct,te)|0,p=p+Math.imul(Ft,ee)|0,o=o+Math.imul(Ft,Mt)|0,o=o+Math.imul(qt,ee)|0,y=y+Math.imul(qt,Mt)|0,p=p+Math.imul(Dt,_t)|0,o=o+Math.imul(Dt,Ht)|0,o=o+Math.imul(Zt,_t)|0,y=y+Math.imul(Zt,Ht)|0,p=p+Math.imul(Vt,It)|0,o=o+Math.imul(Vt,re)|0,o=o+Math.imul(zt,It)|0,y=y+Math.imul(zt,re)|0;var Ar=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,p=Math.imul(Wt,Jt),o=Math.imul(Wt,xt),o=o+Math.imul(bt,Jt)|0,y=Math.imul(bt,xt),p=p+Math.imul(pt,jt)|0,o=o+Math.imul(pt,te)|0,o=o+Math.imul(Ot,jt)|0,y=y+Math.imul(Ot,te)|0,p=p+Math.imul($t,ee)|0,o=o+Math.imul($t,Mt)|0,o=o+Math.imul(Ct,ee)|0,y=y+Math.imul(Ct,Mt)|0,p=p+Math.imul(Ft,_t)|0,o=o+Math.imul(Ft,Ht)|0,o=o+Math.imul(qt,_t)|0,y=y+Math.imul(qt,Ht)|0,p=p+Math.imul(Dt,It)|0,o=o+Math.imul(Dt,re)|0,o=o+Math.imul(Zt,It)|0,y=y+Math.imul(Zt,re)|0;var un=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(un>>>26)|0,un&=67108863,p=Math.imul(Wt,jt),o=Math.imul(Wt,te),o=o+Math.imul(bt,jt)|0,y=Math.imul(bt,te),p=p+Math.imul(pt,ee)|0,o=o+Math.imul(pt,Mt)|0,o=o+Math.imul(Ot,ee)|0,y=y+Math.imul(Ot,Mt)|0,p=p+Math.imul($t,_t)|0,o=o+Math.imul($t,Ht)|0,o=o+Math.imul(Ct,_t)|0,y=y+Math.imul(Ct,Ht)|0,p=p+Math.imul(Ft,It)|0,o=o+Math.imul(Ft,re)|0,o=o+Math.imul(qt,It)|0,y=y+Math.imul(qt,re)|0;var nr=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,p=Math.imul(Wt,ee),o=Math.imul(Wt,Mt),o=o+Math.imul(bt,ee)|0,y=Math.imul(bt,Mt),p=p+Math.imul(pt,_t)|0,o=o+Math.imul(pt,Ht)|0,o=o+Math.imul(Ot,_t)|0,y=y+Math.imul(Ot,Ht)|0,p=p+Math.imul($t,It)|0,o=o+Math.imul($t,re)|0,o=o+Math.imul(Ct,It)|0,y=y+Math.imul(Ct,re)|0;var Br=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(Br>>>26)|0,Br&=67108863,p=Math.imul(Wt,_t),o=Math.imul(Wt,Ht),o=o+Math.imul(bt,_t)|0,y=Math.imul(bt,Ht),p=p+Math.imul(pt,It)|0,o=o+Math.imul(pt,re)|0,o=o+Math.imul(Ot,It)|0,y=y+Math.imul(Ot,re)|0;var Tr=(M+p|0)+((o&8191)<<13)|0;M=(y+(o>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,p=Math.imul(Wt,It),o=Math.imul(Wt,re),o=o+Math.imul(bt,It)|0,y=Math.imul(bt,re);var Ir=(M+p|0)+((o&8191)<<13)|0;return M=(y+(o>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,b[0]=Ye,b[1]=tn,b[2]=Qe,b[3]=en,b[4]=rn,b[5]=Je,b[6]=nn,b[7]=tr,b[8]=sn,b[9]=er,b[10]=on,b[11]=rr,b[12]=fn,b[13]=Ar,b[14]=un,b[15]=nr,b[16]=Br,b[17]=Tr,b[18]=Ir,M!==0&&(b[19]=M,a.length++),a};Math.imul||(X=V);function Kt(v,n,f){f.negative=n.negative^v.negative,f.length=v.length+n.length;for(var a=0,d=0,g=0;g<f.length-1;g++){var b=d;d=0;for(var M=a&67108863,p=Math.min(g,n.length-1),o=Math.max(0,g-v.length+1);o<=p;o++){var y=g-o,P=v.words[y]|0,C=n.words[o]|0,q=P*C,W=q&67108863;b=b+(q/67108864|0)|0,W=W+M|0,M=W&67108863,b=b+(W>>>26)|0,d+=b>>>26,b&=67108863}f.words[g]=M,a=b,b=d}return a!==0?f.words[g]=a:f.length--,f.strip()}function Et(v,n,f){var a=new j;return a.mulp(v,n,f)}i.prototype.mulTo=function(n,f){var a,d=this.length+n.length;return this.length===10&&n.length===10?a=X(this,n,f):d<63?a=V(this,n,f):d<1024?a=Kt(this,n,f):a=Et(this,n,f),a};function j(v,n){this.x=v,this.y=n}j.prototype.makeRBT=function(n){for(var f=new Array(n),a=i.prototype._countBits(n)-1,d=0;d<n;d++)f[d]=this.revBin(d,a,n);return f},j.prototype.revBin=function(n,f,a){if(n===0||n===a-1)return n;for(var d=0,g=0;g<f;g++)d|=(n&1)<<f-g-1,n>>=1;return d},j.prototype.permute=function(n,f,a,d,g,b){for(var M=0;M<b;M++)d[M]=f[n[M]],g[M]=a[n[M]]},j.prototype.transform=function(n,f,a,d,g,b){this.permute(b,n,f,a,d,g);for(var M=1;M<g;M<<=1)for(var p=M<<1,o=Math.cos(2*Math.PI/p),y=Math.sin(2*Math.PI/p),P=0;P<g;P+=p)for(var C=o,q=y,W=0;W<M;W++){var ft=a[P+W],Y=d[P+W],Re=a[P+W+M],lt=d[P+W+M],mt=C*Re-q*lt;lt=C*lt+q*Re,Re=mt,a[P+W]=ft+Re,d[P+W]=Y+lt,a[P+W+M]=ft-Re,d[P+W+M]=Y-lt,W!==p&&(mt=o*C-y*q,q=o*q+y*C,C=mt)}},j.prototype.guessLen13b=function(n,f){var a=Math.max(f,n)|1,d=a&1,g=0;for(a=a/2|0;a;a=a>>>1)g++;return 1<<g+1+d},j.prototype.conjugate=function(n,f,a){if(!(a<=1))for(var d=0;d<a/2;d++){var g=n[d];n[d]=n[a-d-1],n[a-d-1]=g,g=f[d],f[d]=-f[a-d-1],f[a-d-1]=-g}},j.prototype.normalize13b=function(n,f){for(var a=0,d=0;d<f/2;d++){var g=Math.round(n[2*d+1]/f)*8192+Math.round(n[2*d]/f)+a;n[d]=g&67108863,g<67108864?a=0:a=g/67108864|0}return n},j.prototype.convert13b=function(n,f,a,d){for(var g=0,b=0;b<f;b++)g=g+(n[b]|0),a[2*b]=g&8191,g=g>>>13,a[2*b+1]=g&8191,g=g>>>13;for(b=2*f;b<d;++b)a[b]=0;r(g===0),r((g&-8192)===0)},j.prototype.stub=function(n){for(var f=new Array(n),a=0;a<n;a++)f[a]=0;return f},j.prototype.mulp=function(n,f,a){var d=2*this.guessLen13b(n.length,f.length),g=this.makeRBT(d),b=this.stub(d),M=new Array(d),p=new Array(d),o=new Array(d),y=new Array(d),P=new Array(d),C=new Array(d),q=a.words;q.length=d,this.convert13b(n.words,n.length,M,d),this.convert13b(f.words,f.length,y,d),this.transform(M,b,p,o,d,g),this.transform(y,b,P,C,d,g);for(var W=0;W<d;W++){var ft=p[W]*P[W]-o[W]*C[W];o[W]=p[W]*C[W]+o[W]*P[W],p[W]=ft}return this.conjugate(p,o,d),this.transform(p,o,q,b,d,g),this.conjugate(q,b,d),this.normalize13b(q,d),a.negative=n.negative^f.negative,a.length=n.length+f.length,a.strip()},i.prototype.mul=function(n){var f=new i(null);return f.words=new Array(this.length+n.length),this.mulTo(n,f)},i.prototype.mulf=function(n){var f=new i(null);return f.words=new Array(this.length+n.length),Et(this,n,f)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){r(typeof n=="number"),r(n<67108864);for(var f=0,a=0;a<this.length;a++){var d=(this.words[a]|0)*n,g=(d&67108863)+(f&67108863);f>>=26,f+=d/67108864|0,f+=g>>>26,this.words[a]=g&67108863}return f!==0&&(this.words[a]=f,this.length++),this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var f=K(n);if(f.length===0)return new i(1);for(var a=this,d=0;d<f.length&&f[d]===0;d++,a=a.sqr());if(++d<f.length)for(var g=a.sqr();d<f.length;d++,g=g.sqr())f[d]!==0&&(a=a.mul(g));return a},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var f=n%26,a=(n-f)/26,d=67108863>>>26-f<<26-f,g;if(f!==0){var b=0;for(g=0;g<this.length;g++){var M=this.words[g]&d,p=(this.words[g]|0)-M<<f;this.words[g]=p|b,b=M>>>26-f}b&&(this.words[g]=b,this.length++)}if(a!==0){for(g=this.length-1;g>=0;g--)this.words[g+a]=this.words[g];for(g=0;g<a;g++)this.words[g]=0;this.length+=a}return this.strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,f,a){r(typeof n=="number"&&n>=0);var d;f?d=(f-f%26)/26:d=0;var g=n%26,b=Math.min((n-g)/26,this.length),M=67108863^67108863>>>g<<g,p=a;if(d-=b,d=Math.max(0,d),p){for(var o=0;o<b;o++)p.words[o]=this.words[o];p.length=b}if(b!==0)if(this.length>b)for(this.length-=b,o=0;o<this.length;o++)this.words[o]=this.words[o+b];else this.words[0]=0,this.length=1;var y=0;for(o=this.length-1;o>=0&&(y!==0||o>=d);o--){var P=this.words[o]|0;this.words[o]=y<<26-g|P>>>g,y=P&M}return p&&y!==0&&(p.words[p.length++]=y),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(n,f,a){return r(this.negative===0),this.iushrn(n,f,a)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var f=n%26,a=(n-f)/26,d=1<<f;if(this.length<=a)return!1;var g=this.words[a];return!!(g&d)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var f=n%26,a=(n-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(f!==0&&a++,this.length=Math.min(a,this.length),f!==0){var d=67108863^67108863>>>f<<f;this.words[this.length-1]&=d}return this.strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,f,a){var d=n.length+a,g;this._expand(d);var b,M=0;for(g=0;g<n.length;g++){b=(this.words[g+a]|0)+M;var p=(n.words[g]|0)*f;b-=p&67108863,M=(b>>26)-(p/67108864|0),this.words[g+a]=b&67108863}for(;g<this.length-a;g++)b=(this.words[g+a]|0)+M,M=b>>26,this.words[g+a]=b&67108863;if(M===0)return this.strip();for(r(M===-1),M=0,g=0;g<this.length;g++)b=-(this.words[g]|0)+M,M=b>>26,this.words[g]=b&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(n,f){var a=this.length-n.length,d=this.clone(),g=n,b=g.words[g.length-1]|0,M=this._countBits(b);a=26-M,a!==0&&(g=g.ushln(a),d.iushln(a),b=g.words[g.length-1]|0);var p=d.length-g.length,o;if(f!=="mod"){o=new i(null),o.length=p+1,o.words=new Array(o.length);for(var y=0;y<o.length;y++)o.words[y]=0}var P=d.clone()._ishlnsubmul(g,1,p);P.negative===0&&(d=P,o&&(o.words[p]=1));for(var C=p-1;C>=0;C--){var q=(d.words[g.length+C]|0)*67108864+(d.words[g.length+C-1]|0);for(q=Math.min(q/b|0,67108863),d._ishlnsubmul(g,q,C);d.negative!==0;)q--,d.negative=0,d._ishlnsubmul(g,1,C),d.isZero()||(d.negative^=1);o&&(o.words[C]=q)}return o&&o.strip(),d.strip(),f!=="div"&&a!==0&&d.iushrn(a),{div:o||null,mod:d}},i.prototype.divmod=function(n,f,a){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,g,b;return this.negative!==0&&n.negative===0?(b=this.neg().divmod(n,f),f!=="mod"&&(d=b.div.neg()),f!=="div"&&(g=b.mod.neg(),a&&g.negative!==0&&g.iadd(n)),{div:d,mod:g}):this.negative===0&&n.negative!==0?(b=this.divmod(n.neg(),f),f!=="mod"&&(d=b.div.neg()),{div:d,mod:b.mod}):(this.negative&n.negative)!==0?(b=this.neg().divmod(n.neg(),f),f!=="div"&&(g=b.mod.neg(),a&&g.negative!==0&&g.isub(n)),{div:b.div,mod:g}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?f==="div"?{div:this.divn(n.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modn(n.words[0]))}:this._wordDiv(n,f)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var f=this.divmod(n);if(f.mod.isZero())return f.div;var a=f.div.negative!==0?f.mod.isub(n):f.mod,d=n.ushrn(1),g=n.andln(1),b=a.cmp(d);return b<0||g===1&&b===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modn=function(n){r(n<=67108863);for(var f=(1<<26)%n,a=0,d=this.length-1;d>=0;d--)a=(f*a+(this.words[d]|0))%n;return a},i.prototype.idivn=function(n){r(n<=67108863);for(var f=0,a=this.length-1;a>=0;a--){var d=(this.words[a]|0)+f*67108864;this.words[a]=d/n|0,f=d%n}return this.strip()},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var f=this,a=n.clone();f.negative!==0?f=f.umod(n):f=f.clone();for(var d=new i(1),g=new i(0),b=new i(0),M=new i(1),p=0;f.isEven()&&a.isEven();)f.iushrn(1),a.iushrn(1),++p;for(var o=a.clone(),y=f.clone();!f.isZero();){for(var P=0,C=1;(f.words[0]&C)===0&&P<26;++P,C<<=1);if(P>0)for(f.iushrn(P);P-- >0;)(d.isOdd()||g.isOdd())&&(d.iadd(o),g.isub(y)),d.iushrn(1),g.iushrn(1);for(var q=0,W=1;(a.words[0]&W)===0&&q<26;++q,W<<=1);if(q>0)for(a.iushrn(q);q-- >0;)(b.isOdd()||M.isOdd())&&(b.iadd(o),M.isub(y)),b.iushrn(1),M.iushrn(1);f.cmp(a)>=0?(f.isub(a),d.isub(b),g.isub(M)):(a.isub(f),b.isub(d),M.isub(g))}return{a:b,b:M,gcd:a.iushln(p)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var f=this,a=n.clone();f.negative!==0?f=f.umod(n):f=f.clone();for(var d=new i(1),g=new i(0),b=a.clone();f.cmpn(1)>0&&a.cmpn(1)>0;){for(var M=0,p=1;(f.words[0]&p)===0&&M<26;++M,p<<=1);if(M>0)for(f.iushrn(M);M-- >0;)d.isOdd()&&d.iadd(b),d.iushrn(1);for(var o=0,y=1;(a.words[0]&y)===0&&o<26;++o,y<<=1);if(o>0)for(a.iushrn(o);o-- >0;)g.isOdd()&&g.iadd(b),g.iushrn(1);f.cmp(a)>=0?(f.isub(a),d.isub(g)):(a.isub(f),g.isub(d))}var P;return f.cmpn(1)===0?P=d:P=g,P.cmpn(0)<0&&P.iadd(n),P},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var f=this.clone(),a=n.clone();f.negative=0,a.negative=0;for(var d=0;f.isEven()&&a.isEven();d++)f.iushrn(1),a.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;a.isEven();)a.iushrn(1);var g=f.cmp(a);if(g<0){var b=f;f=a,a=b}else if(g===0||a.cmpn(1)===0)break;f.isub(a)}while(!0);return a.iushln(d)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var f=n%26,a=(n-f)/26,d=1<<f;if(this.length<=a)return this._expand(a+1),this.words[a]|=d,this;for(var g=d,b=a;g!==0&&b<this.length;b++){var M=this.words[b]|0;M+=g,g=M>>>26,M&=67108863,this.words[b]=M}return g!==0&&(this.words[b]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var f=n<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this.strip();var a;if(this.length>1)a=1;else{f&&(n=-n),r(n<=67108863,"Number is too big");var d=this.words[0]|0;a=d===n?0:d<n?-1:1}return this.negative!==0?-a|0:a},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var f=this.ucmp(n);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var f=0,a=this.length-1;a>=0;a--){var d=this.words[a]|0,g=n.words[a]|0;if(d!==g){d<g?f=-1:d>g&&(f=1);break}}return f},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new Ut(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var Z={k256:null,p224:null,p192:null,p25519:null};function se(v,n){this.name=v,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}se.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},se.prototype.ireduce=function(n){var f=n,a;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),a=f.bitLength();while(a>this.n);var d=a<this.n?-1:f.ucmp(this.p);return d===0?(f.words[0]=0,f.length=1):d>0?f.isub(this.p):f.strip(),f},se.prototype.split=function(n,f){n.iushrn(this.n,0,f)},se.prototype.imulK=function(n){return n.imul(this.k)};function ge(){se.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ge,se),ge.prototype.split=function(n,f){for(var a=4194303,d=Math.min(n.length,9),g=0;g<d;g++)f.words[g]=n.words[g];if(f.length=d,n.length<=9){n.words[0]=0,n.length=1;return}var b=n.words[9];for(f.words[f.length++]=b&a,g=10;g<n.length;g++){var M=n.words[g]|0;n.words[g-10]=(M&a)<<4|b>>>22,b=M}b>>>=22,n.words[g-10]=b,b===0&&n.length>10?n.length-=10:n.length-=9},ge.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var f=0,a=0;a<n.length;a++){var d=n.words[a]|0;f+=d*977,n.words[a]=f&67108863,f=d*64+(f/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function Be(){se.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(Be,se);function Ze(){se.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Ze,se);function we(){se.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(we,se),we.prototype.imulK=function(n){for(var f=0,a=0;a<n.length;a++){var d=(n.words[a]|0)*19+f,g=d&67108863;d>>>=26,n.words[a]=g,f=d}return f!==0&&(n.words[n.length++]=f),n},i._prime=function(n){if(Z[n])return Z[n];var f;if(n==="k256")f=new ge;else if(n==="p224")f=new Be;else if(n==="p192")f=new Ze;else if(n==="p25519")f=new we;else throw new Error("Unknown prime "+n);return Z[n]=f,f};function Ut(v){if(typeof v=="string"){var n=i._prime(v);this.m=n.p,this.prime=n}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}Ut.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},Ut.prototype._verify2=function(n,f){r((n.negative|f.negative)===0,"red works only with positives"),r(n.red&&n.red===f.red,"red works only with red numbers")},Ut.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):n.umod(this.m)._forceRed(this)},Ut.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},Ut.prototype.add=function(n,f){this._verify2(n,f);var a=n.add(f);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},Ut.prototype.iadd=function(n,f){this._verify2(n,f);var a=n.iadd(f);return a.cmp(this.m)>=0&&a.isub(this.m),a},Ut.prototype.sub=function(n,f){this._verify2(n,f);var a=n.sub(f);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},Ut.prototype.isub=function(n,f){this._verify2(n,f);var a=n.isub(f);return a.cmpn(0)<0&&a.iadd(this.m),a},Ut.prototype.shl=function(n,f){return this._verify1(n),this.imod(n.ushln(f))},Ut.prototype.imul=function(n,f){return this._verify2(n,f),this.imod(n.imul(f))},Ut.prototype.mul=function(n,f){return this._verify2(n,f),this.imod(n.mul(f))},Ut.prototype.isqr=function(n){return this.imul(n,n.clone())},Ut.prototype.sqr=function(n){return this.mul(n,n)},Ut.prototype.sqrt=function(n){if(n.isZero())return n.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var a=this.m.add(new i(1)).iushrn(2);return this.pow(n,a)}for(var d=this.m.subn(1),g=0;!d.isZero()&&d.andln(1)===0;)g++,d.iushrn(1);r(!d.isZero());var b=new i(1).toRed(this),M=b.redNeg(),p=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,p).cmp(M)!==0;)o.redIAdd(M);for(var y=this.pow(o,d),P=this.pow(n,d.addn(1).iushrn(1)),C=this.pow(n,d),q=g;C.cmp(b)!==0;){for(var W=C,ft=0;W.cmp(b)!==0;ft++)W=W.redSqr();r(ft<q);var Y=this.pow(y,new i(1).iushln(q-ft-1));P=P.redMul(Y),y=Y.redSqr(),C=C.redMul(y),q=ft}return P},Ut.prototype.invm=function(n){var f=n._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},Ut.prototype.pow=function(n,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return n.clone();var a=4,d=new Array(1<<a);d[0]=new i(1).toRed(this),d[1]=n;for(var g=2;g<d.length;g++)d[g]=this.mul(d[g-1],n);var b=d[0],M=0,p=0,o=f.bitLength()%26;for(o===0&&(o=26),g=f.length-1;g>=0;g--){for(var y=f.words[g],P=o-1;P>=0;P--){var C=y>>P&1;if(b!==d[0]&&(b=this.sqr(b)),C===0&&M===0){p=0;continue}M<<=1,M|=C,p++,!(p!==a&&(g!==0||P!==0))&&(b=this.mul(b,d[M]),p=0,M=0)}o=26}return b},Ut.prototype.convertTo=function(n){var f=n.umod(this.m);return f===n?f.clone():f},Ut.prototype.convertFrom=function(n){var f=n.clone();return f.red=null,f},i.mont=function(n){return new Fe(n)};function Fe(v){Ut.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Fe,Ut),Fe.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},Fe.prototype.convertFrom=function(n){var f=this.imod(n.mul(this.rinv));return f.red=null,f},Fe.prototype.imul=function(n,f){if(n.isZero()||f.isZero())return n.words[0]=0,n.length=1,n;var a=n.imul(f),d=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=a.isub(d).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},Fe.prototype.mul=function(n,f){if(n.isZero()||f.isZero())return new i(0)._forceRed(this);var a=n.mul(f),d=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=a.isub(d).iushrn(this.shift),b=g;return g.cmp(this.m)>=0?b=g.isub(this.m):g.cmpn(0)<0&&(b=g.iadd(this.m)),b._forceRed(this)},Fe.prototype.invm=function(n){var f=this.imod(n._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof fs>"u"||fs,rf)});var af=st(Ke=>{"use strict";H();R();var Rh=Ke&&Ke.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.rawEncode=Ke.parseNumber=Ke.solidityPack=void 0;var dr=Tn(),kh=Oi(),_r=Rh(nf()),of=Dr();function Uh(t,e){if(t.length!==e.length)throw new Error("Number of types are not matching the values");let r=[];for(let s=0;s<t.length;s++){let i=uf(t[s]),l=e[s];r.push(ff(i,l,null))}return I.Buffer.concat(r)}Ke.solidityPack=Uh;function _i(t){return t.lastIndexOf("]")===t.length-1}function Si(t){let e=t.match(/(.*)\[(.*?)\]$/u);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function Fr(t){return parseInt(/^\D+(\d+)$/u.exec(t)[1],10)}function lr(t){let e=typeof t;if(e==="string")return(0,dr.isHexPrefixed)(t)?new _r.default((0,kh.stripHexPrefix)(t),16):new _r.default(t,10);if(e==="number")return new _r.default(t);if(t.toArray)return t;throw new Error("Argument is not a number")}Ke.parseNumber=lr;function ff(t,e,r){let s,i;if(_i(t)){let l=t.replace(/\[.*?\]/u,"");if(!_i(l)){let x=Si(t);if(x!=="dynamic"&&x!==0&&e.length>x)throw new Error(`Elements exceed array size: ${x}`)}let m=e.map(function(x){return ff(l,x,256)});return I.Buffer.concat(m)}else{if(t==="bytes")return e;if(t==="string")return I.Buffer.from(e,"utf8");if(t==="bool"){r=r||8;let l=Array(r/4).join("0");return I.Buffer.from(e?`${l}1`:`${l}0`,"hex")}else if(t==="address"){let l=20;return r&&(l=r/8),(0,dr.setLengthLeft)((0,dr.toBuffer)(e),l)}else if(t.startsWith("bytes")){if(s=Fr(t),s<1||s>32)throw new Error(`Invalid bytes<N> width: ${s}`);return typeof e=="number"&&(e=(0,of.normalize)(e)),(0,dr.setLengthRight)((0,dr.toBuffer)(e),s)}else if(t.startsWith("uint")){if(s=Fr(t),s%8||s<8||s>256)throw new Error(`Invalid uint<N> width: ${s}`);if(i=lr(e),i.bitLength()>s)throw new Error(`Supplied uint exceeds width: ${s} vs ${i.bitLength()}`);return r=r||s,i.toArrayLike(I.Buffer,"be",r/8)}else if(t.startsWith("int")){if(s=Fr(t),s%8||s<8||s>256)throw new Error(`Invalid int<N> width: ${s}`);if(i=lr(e),i.bitLength()>s)throw new Error(`Supplied int exceeds width: ${s} vs ${i.bitLength()}`);return r=r||s,i.toTwos(s).toArrayLike(I.Buffer,"be",r/8)}}throw new Error(`Unsupported or invalid type: ${t}`)}function uf(t){return t.startsWith("int[")?`int256${t.slice(3)}`:t==="int"?"int256":t.startsWith("uint[")?`uint256${t.slice(4)}`:t==="uint"?"uint256":t.startsWith("fixed[")?`fixed128x128${t.slice(5)}`:t==="fixed"?"fixed128x128":t.startsWith("ufixed[")?`ufixed128x128${t.slice(6)}`:t==="ufixed"?"ufixed128x128":t}function qh(t,e){let r=[],s=[],i=0;t.forEach(function(l){if(_i(l)){let m=Si(l);m!=="dynamic"?i+=32*m:i+=32}else i+=32});for(let l=0;l<t.length;l++){let m=uf(t[l]),x=e[l],B=je(m,x);$h(m)?(r.push(je("uint256",i)),s.push(B),i+=B.length):r.push(B)}return I.Buffer.concat(r.concat(s))}Ke.rawEncode=qh;function je(t,e){let r,s,i,l;if(t==="address")return je("uint160",lr(e));if(t==="bool")return je("uint8",e?1:0);if(t==="string")return je("bytes",I.Buffer.from(e,"utf8"));if(_i(t)){if(typeof e.length>"u")throw new Error("Not an array?");if(r=Si(t),r!=="dynamic"&&r!==0&&e.length>r)throw new Error(`Elements exceed array size: ${r}`);i=[],t=t.slice(0,t.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&i.push(je(t,e[l]));if(r==="dynamic"){let m=je("uint256",e.length);i.unshift(m)}return I.Buffer.concat(i)}else{if(t==="bytes")return e=I.Buffer.from(e),i=I.Buffer.concat([je("uint256",e.length),e]),e.length%32!==0&&(i=I.Buffer.concat([i,(0,dr.zeros)(32-e.length%32)])),i;if(t.startsWith("bytes")){if(r=Fr(t),r<1||r>32)throw new Error(`Invalid bytes<N> width: ${r}`);return typeof e=="number"&&(e=(0,of.normalize)(e)),(0,dr.setLengthRight)((0,dr.toBuffer)(e),32)}else if(t.startsWith("uint")){if(r=Fr(t),r%8||r<8||r>256)throw new Error(`Invalid uint<N> width: ${r}`);if(s=lr(e),s.bitLength()>r)throw new Error(`Supplied uint exceeds width: ${r} vs ${s.bitLength()}`);if(s<0)throw new Error("Supplied uint is negative");return s.toArrayLike(I.Buffer,"be",32)}else if(t.startsWith("int")){if(r=Fr(t),r%8||r<8||r>256)throw new Error(`Invalid int<N> width: ${r}`);if(s=lr(e),s.bitLength()>r)throw new Error(`Supplied int exceeds width: ${r} vs ${s.bitLength()}`);return s.toTwos(256).toArrayLike(I.Buffer,"be",32)}else if(t.startsWith("ufixed")){if(r=sf(t),s=lr(e),s<0)throw new Error("Supplied ufixed is negative");return je("uint256",s.mul(new _r.default(2).pow(new _r.default(r[1]))))}else if(t.startsWith("fixed"))return r=sf(t),je("int256",lr(e).mul(new _r.default(2).pow(new _r.default(r[1]))))}throw new Error(`Unsupported or invalid type: ${t}`)}function $h(t){return t==="string"||t==="bytes"||Si(t)==="dynamic"}function sf(t){let e=/^\D+(\d+)x(\d+)$/u.exec(t);return[parseInt(e[1],10),parseInt(e[2],10)]}});var pf=st(fe=>{"use strict";H();R();Object.defineProperty(fe,"__esModule",{value:!0});fe.recoverTypedSignature=fe.signTypedData=fe.typedSignatureHash=fe.TypedDataUtils=fe.TYPED_MESSAGE_SCHEMA=fe.SignTypedDataVersion=void 0;var Ch=Oi(),me=Tn(),Ve=di(),In=af(),ze=Dr(),de;(function(t){t.V1="V1",t.V3="V3",t.V4="V4"})(de=fe.SignTypedDataVersion||(fe.SignTypedDataVersion={}));fe.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Wr(t,e){if(Object.keys(de).includes(t)){if(e&&!e.includes(t))throw new Error(`SignTypedDataVersion not allowed: '${t}'. Allowed versions are: ${e.join(", ")}`)}else throw new Error(`Invalid version: '${t}'`)}function hf(t,e,r,s,i){if(Wr(i,[de.V3,de.V4]),t[r]!==void 0)return["bytes32",i===de.V4&&s==null?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,me.arrToBufArr)((0,Ve.keccak256)(as(r,s,t,i)))];if(s===void 0)throw new Error(`missing value for field ${e} of type ${r}`);if(r==="bytes")return typeof s=="number"?s=(0,ze.numberToBuffer)(s):(0,Ch.isHexString)(s)?s=(0,ze.numberToBuffer)(parseInt(s,16)):s=I.Buffer.from(s,"utf8"),["bytes32",(0,me.arrToBufArr)((0,Ve.keccak256)(s))];if(r==="string")return typeof s=="number"?s=(0,ze.numberToBuffer)(s):s=I.Buffer.from(s??"","utf8"),["bytes32",(0,me.arrToBufArr)((0,Ve.keccak256)(s))];if(r.lastIndexOf("]")===r.length-1){if(i===de.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let l=r.slice(0,r.lastIndexOf("[")),m=s.map(x=>hf(t,e,l,x,i));return["bytes32",(0,me.arrToBufArr)((0,Ve.keccak256)((0,In.rawEncode)(m.map(([x])=>x),m.map(([,x])=>x))))]}return[r,s]}function as(t,e,r,s){Wr(s,[de.V3,de.V4]);let i=["bytes32"],l=[lf(t,r)];for(let m of r[t]){if(s===de.V3&&e[m.name]===void 0)continue;let[x,B]=hf(r,m.name,m.type,e[m.name],s);i.push(x),l.push(B)}return(0,In.rawEncode)(i,l)}function cf(t,e){let r="",s=hs(t,e);s.delete(t);let i=[t,...Array.from(s).sort()];for(let l of i){if(!e[l])throw new Error(`No type definition specified: ${l}`);r+=`${l}(${e[l].map(({name:x,type:B})=>`${B} ${x}`).join(",")})`}return r}function hs(t,e,r=new Set){if([t]=t.match(/^\w*/u),r.has(t)||e[t]===void 0)return r;r.add(t);for(let s of e[t])hs(s.type,e,r);return r}function us(t,e,r,s){return Wr(s,[de.V3,de.V4]),(0,me.arrToBufArr)((0,Ve.keccak256)(as(t,e,r,s)))}function lf(t,e){let r=I.Buffer.from(cf(t,e),"utf-8");return(0,me.arrToBufArr)((0,Ve.keccak256)(r))}function df(t){let e={};for(let r in fe.TYPED_MESSAGE_SCHEMA.properties)t[r]&&(e[r]=t[r]);return"types"in e&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e}function Nh(t,e){Wr(e,[de.V3,de.V4]);let r=df(t),s=[I.Buffer.from("1901","hex")];return s.push(us("EIP712Domain",r.domain,r.types,e)),r.primaryType!=="EIP712Domain"&&s.push(us(r.primaryType,r.message,r.types,e)),(0,me.arrToBufArr)((0,Ve.keccak256)(I.Buffer.concat(s)))}fe.TypedDataUtils={encodeData:as,encodeType:cf,findTypeDependencies:hs,hashStruct:us,hashType:lf,sanitizeData:df,eip712Hash:Nh};function jh(t){let e=cs(t);return(0,me.bufferToHex)(e)}fe.typedSignatureHash=jh;function cs(t){let e=new Error("Expect argument to be non-empty array");if(typeof t!="object"||!("length"in t)||!t.length)throw e;let r=t.map(function(l){return l.type!=="bytes"?l.value:(0,ze.legacyToBuffer)(l.value)}),s=t.map(function(l){return l.type}),i=t.map(function(l){if(!l.name)throw e;return`${l.type} ${l.name}`});return(0,me.arrToBufArr)((0,Ve.keccak256)((0,In.solidityPack)(["bytes32","bytes32"],[(0,Ve.keccak256)((0,In.solidityPack)(new Array(t.length).fill("string"),i)),(0,Ve.keccak256)((0,In.solidityPack)(s,r))])))}function Kh({privateKey:t,data:e,version:r}){if(Wr(r),(0,ze.isNullish)(e))throw new Error("Missing data parameter");if((0,ze.isNullish)(t))throw new Error("Missing private key parameter");let s=r===de.V1?cs(e):fe.TypedDataUtils.eip712Hash(e,r),i=(0,me.ecsign)(s,t);return(0,ze.concatSig)((0,me.toBuffer)(i.v),i.r,i.s)}fe.signTypedData=Kh;function Vh({data:t,signature:e,version:r}){if(Wr(r),(0,ze.isNullish)(t))throw new Error("Missing data parameter");if((0,ze.isNullish)(e))throw new Error("Missing signature parameter");let s=r===de.V1?cs(t):fe.TypedDataUtils.eip712Hash(t,r),i=(0,ze.recoverPublicKey)(s,e),l=(0,me.publicToAddress)(i);return(0,me.bufferToHex)(l)}fe.recoverTypedSignature=Vh});var wf=st(ue=>{"use strict";H();R();var zh=ue&&ue.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,i)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),Dh=ue&&ue.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gf=ue&&ue.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zh(e,t,r);return Dh(e,t),e};Object.defineProperty(ue,"__esModule",{value:!0});ue.getEncryptionPublicKey=ue.decryptSafely=ue.decrypt=ue.encryptSafely=ue.encrypt=void 0;var Sr=gf(jf()),He=gf(Kf()),De=Dr();function yf({publicKey:t,data:e,version:r}){if((0,De.isNullish)(t))throw new Error("Missing publicKey parameter");if((0,De.isNullish)(e))throw new Error("Missing data parameter");if((0,De.isNullish)(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof e!="string")throw new Error("Message data must be given as a string");let s=Sr.box.keyPair(),i;try{i=He.decodeBase64(t)}catch{throw new Error("Bad public key")}let l=He.decodeUTF8(e),m=Sr.randomBytes(Sr.box.nonceLength),x=Sr.box(l,m,i,s.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:He.encodeBase64(m),ephemPublicKey:He.encodeBase64(s.publicKey),ciphertext:He.encodeBase64(x)}}default:throw new Error("Encryption type/version not supported")}}ue.encrypt=yf;function Zh({publicKey:t,data:e,version:r}){if((0,De.isNullish)(t))throw new Error("Missing publicKey parameter");if((0,De.isNullish)(e))throw new Error("Missing data parameter");if((0,De.isNullish)(r))throw new Error("Missing version parameter");let s=2**11,i=16;if(typeof e=="object"&&"toJSON"in e)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let l={data:e,padding:""},x=I.Buffer.byteLength(JSON.stringify(l),"utf-8")%s,B=0;x>0&&(B=s-x-i),l.padding="0".repeat(B);let L=JSON.stringify(l);return yf({publicKey:t,data:L,version:r})}ue.encryptSafely=Zh;function mf({encryptedData:t,privateKey:e}){if((0,De.isNullish)(t))throw new Error("Missing encryptedData parameter");if((0,De.isNullish)(e))throw new Error("Missing privateKey parameter");switch(t.version){case"x25519-xsalsa20-poly1305":{let r=vf(e),s=Sr.box.keyPair.fromSecretKey(r).secretKey,i=He.decodeBase64(t.nonce),l=He.decodeBase64(t.ciphertext),m=He.decodeBase64(t.ephemPublicKey),x=Sr.box.open(l,i,m,s),B;try{B=He.encodeUTF8(x)}catch{throw new Error("Decryption failed.")}if(B)return B;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}ue.decrypt=mf;function Fh({encryptedData:t,privateKey:e}){if((0,De.isNullish)(t))throw new Error("Missing encryptedData parameter");if((0,De.isNullish)(e))throw new Error("Missing privateKey parameter");return JSON.parse(mf({encryptedData:t,privateKey:e})).data}ue.decryptSafely=Fh;function Wh(t){let e=vf(t),r=Sr.box.keyPair.fromSecretKey(e).publicKey;return He.encodeBase64(r)}ue.getEncryptionPublicKey=Wh;function vf(t){let e=I.Buffer.from(t,"hex").toString("base64");return He.decodeBase64(e)}});var xf=st(ve=>{"use strict";H();R();var Gh=ve&&ve.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,i)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),ls=ve&&ve.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Gh(e,t,r)};Object.defineProperty(ve,"__esModule",{value:!0});ve.normalize=ve.concatSig=void 0;ls(ef(),ve);ls(pf(),ve);ls(wf(),ve);var bf=Dr();Object.defineProperty(ve,"concatSig",{enumerable:!0,get:function(){return bf.concatSig}});Object.defineProperty(ve,"normalize",{enumerable:!0,get:function(){return bf.normalize}})});var tc=st(Ae=>{"use strict";H();R();var Xh=Ae&&Ae.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,i)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),Yh=Ae&&Ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qh=Ae&&Ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Xh(e,t,r);return Yh(e,t),e};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.transformTypedData=void 0;var Ei=Qh(xf());function Ai(t){switch(Object.prototype.toString.call(t)){case"[object Object]":{let e=Object.keys(t).map(r=>[r,Ai(t[r])]);return Object.fromEntries(e)}case"[object Array]":return t.map(e=>Ai(e));case"[object BigInt]":return t.toString();default:return t}}var Jh=(t,e)=>{if(!e)throw new Error("Trezor: Only version 4 of typed data signing is supported");let r=Ei.SignTypedDataVersion.V4,{types:s,primaryType:i,domain:l,message:m}=Ei.TypedDataUtils.sanitizeData(t),x=Ei.TypedDataUtils.hashStruct("EIP712Domain",Ai(l),s,r).toString("hex"),B=null;return i!=="EIP712Domain"&&(B=Ei.TypedDataUtils.hashStruct(i,Ai(m),s,r).toString("hex")),Object.assign({domain_separator_hash:x,message_hash:B},t)};Ae.transformTypedData=Jh;Ae.default=Ae.transformTypedData});export{tc as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-5SWKQHQU.js.map
