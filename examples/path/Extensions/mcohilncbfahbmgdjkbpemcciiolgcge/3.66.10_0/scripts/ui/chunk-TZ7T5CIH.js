import{a as G}from"./chunk-C5O75IHM.js";import{a as B}from"./chunk-O3U6IW2R.js";import{a as K}from"./chunk-MZGXPN5Z.js";import{a as j}from"./chunk-PIQKWFMY.js";import{a as P}from"./chunk-WPAZ67JY.js";import{a as I,g as v}from"./chunk-E7MGN3V4.js";import{i as w,u as x}from"./chunk-MWPAA6TC.js";import{b}from"./chunk-7C7MBE2C.js";import{e as D,g as V}from"./chunk-AZNX5TUC.js";import{a as h}from"./chunk-CZZFLX67.js";import{o as k}from"./chunk-XP3TNE3R.js";import{hc as A,jc as F}from"./chunk-QRHYK2TW.js";import{c as u,e as O}from"./chunk-AS4Z3FNS.js";import{Eb as C,Jb as re,Ma as N,Na as te,Zd as L,a as W,b as ee,oe}from"./chunk-QHXUL3YM.js";import{b as T}from"./chunk-OL67KS7C.js";import{f as R,o as c,q as l}from"./chunk-SHG7TIBL.js";c();l();var H=(o=>(o.CREATE_FAIL_FROM_NETWORK_ERROR="CREATE_FAIL_FROM_NETWORK_ERROR",o.CREATE_FAIL_FROM_SERVER_ERROR="CREATE_FAIL_FROM_SERVER_ERROR",o.CREATE_FAIL_FROM_SERVER_LIMIT="CREATE_FAIL_FROM_SERVER_LIMIT",o.PENDING="PENDING",o))(H||{}),p={...H,...I};c();l();var i=R(T()),d=R(F()),$=R(k());c();l();function M(e){let t=e?.type||e?.message;return t==="ERR_SERVER_TINE_LIMIT"?{type:"ERR_SERVER_TINE_LIMIT"}:t==="ERR_SERVER_LIMIT"?{type:"ERR_SERVER_LIMIT"}:t==="ERR_NETWORK"?{type:"ERR_NETWORK"}:t==="ERR_SERVER_COMMON"?{type:"ERR_SERVER_COMMON",msg:e?.message}:{type:"ERR_DEFAULT"}}O();c();l();var U=R(T());ee();var q=()=>(0,U.useCallback)(e=>{try{let t=e===p.CREATE_FAIL_FROM_SERVER_ERROR?"Server":"Local";W.captureException(`CreateWalletToServerInHomePage-${t}`)}catch(t){console.log(t)}},[]);c();l();O();oe();te();re();var S=R(T()),z=R(F());var Q=()=>{let e=D({keyringType:L.MPC}),t=(0,z.useSelector)(A),s=(0,S.useCallback)(async()=>{Promise.all(e.map(r=>{let o=r?.mpcId||"",n=r?.walletIdentities?.length-1;return C(N.syncMpcwallet,{mpcId:o,deriveIndex:n})})).then(r=>{u().setIsNeedSyncMpcIndex(!1)}).catch(r=>{console.log("syncMpcWallet error:")})},[e?.length]);(0,S.useEffect)(()=>{e?.length&&t&&s()},[e?.length,s,t])};var se=e=>{let{needSyncMap:t={},createdMap:s={}}=(0,d.useSelector)(({metamask:Z})=>Z),r=Boolean(s[e]),o=Boolean(t[e]),n=B(),m=!r||o||n,[a,E]=(0,i.useState)(m?p.PENDING:""),[f,_]=(0,i.useState)("");return(0,$.useUpdateEffect)(()=>{E(p.PENDING)},[e]),(0,i.useEffect)(()=>{!n&&r&&!o&&E("")},[n,r,o]),{errorMsg:f,errorType:a,isWalletCreated:r,isWalletNeedSync:o,setErrorMsg:_,setErrorType:E}},ne=e=>{let{walletId:t,setErrorMsg:s,setErrorType:r}=e,o=q();return(0,i.useCallback)(async()=>{let m=await u().getWalletTypeCreated(t);r(p.PENDING);try{await u().createWalletToServer({walletId:t,walletType:m,noticeBackend:!0}),h()}catch(a){switch(a?.message){case"ERR_NETWORK":r(p.CREATE_FAIL_FROM_NETWORK_ERROR),o();break;case"ERR_SERVER_LIMIT":r(p.CREATE_FAIL_FROM_SERVER_LIMIT),o(p.CREATE_FAIL_FROM_SERVER_LIMIT);break;default:r(p.CREATE_FAIL_FROM_SERVER_ERROR),s(a?.message);break}}},[o,t])},ae=e=>(0,i.useCallback)(async()=>{try{await u().syncWalletToServer(e)}catch{}},[e]),ce=({walletId:e,setErrorType:t,isWalletCreated:s,isWalletNeedSync:r,setErrorMsg:o})=>{let n=(0,d.useDispatch)(),m=(0,i.useCallback)(async()=>{try{await n(v())}catch(E){let{type:f,msg:_}=M(E);t(f),_!==void 0&&o(_)}},[o,t,n]),a=K();(0,i.useEffect)(()=>{(async()=>s&&!r&&(await m(),await u().getAccountKeys(),await a([e],!1)))()},[m,s,r,a,e])},Ge=()=>{Q();let e=V(),{errorMsg:t,errorType:s,isWalletCreated:r,isWalletNeedSync:o,setErrorMsg:n,setErrorType:m}=se(e),a=ne({walletId:e,setErrorMsg:n,setErrorType:m}),E=ae(e);ce({walletId:e,setErrorType:m,setErrorMsg:n,isWalletCreated:r,isWalletNeedSync:o});let f=(0,i.useCallback)(async()=>{r?o&&await E():await a()},[a,r,o,E]);return(0,i.useEffect)(()=>{f()},[f]),[{errorType:s,errorMsg:t},{createWalletToServer:a}]};c();l();var X=R(T()),g=R(F());var Y=R(k());c();l();var J=e=>({projects:e.collectionFilter.join(","),saleStatus:e.saleStatusFilter.join(",")});var le=()=>{let e=(0,g.useDispatch)(),{filterInfo:t}=j(),{currentNetworkUniqueId:s}=P(),r=G();return(0,Y.useMemoizedFn)((n={},m)=>{let a=m??s,E={...J(t),...n},f=r(a).join(",");e(x({address:f,chain:a,...E}))})},ot=()=>{let e=le(),t=(0,g.useSelector)(w),s=b("wallet-nft");return(0,X.useEffect)(()=>{e()},[s,e]),t};export{M as a,p as b,Ge as c,le as d,ot as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-TZ7T5CIH.js.map
