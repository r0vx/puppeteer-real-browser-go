import{b as ve}from"./chunk-GHMG2Y4A.js";import{b as Ne,c as Le,d as We,e as Fe}from"./chunk-Z475AMKL.js";import{d as Ue}from"./chunk-PZSN2XKL.js";import{b as B,c as Oe}from"./chunk-6Q4OK5GJ.js";import"./chunk-OAW4CIA6.js";import"./chunk-A267SEFJ.js";import{a as Be}from"./chunk-VR7OPIR6.js";import"./chunk-32XJE5HT.js";import{b as ue,c as de,d as fe,e as we,f as ge,g as _e,l as Pe,m as Ee,n as he,o as be}from"./chunk-MRHV2NKN.js";import"./chunk-ONWPWBS4.js";import"./chunk-UM2UK5YS.js";import{a as Ae,b as Se}from"./chunk-U7FUSLT6.js";import{Aa as Y,l as se}from"./chunk-NQAVUB4Q.js";import"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3L7K7.js";import{c as Me}from"./chunk-NS7RQN2C.js";import"./chunk-7IRBVBKW.js";import{a as xe}from"./chunk-OS3ZP336.js";import"./chunk-WJ3PVDDF.js";import{c as Re,f as ke,g as z,h as G}from"./chunk-SRDHWFY4.js";import"./chunk-OVC6PVQJ.js";import"./chunk-7IJVOYMR.js";import"./chunk-BO5YOOQA.js";import{j as ae,k as ne,l as ie,m as me}from"./chunk-QTKQMZ5K.js";import"./chunk-Y5K5NJ6U.js";import"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import{a as ye}from"./chunk-Q7FGM7BT.js";import"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import{i as Ce,j as Ie}from"./chunk-IK72BO4I.js";import{$a as ce,H as pe,a as x}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as le}from"./chunk-XP3TNE3R.js";import{Cb as re,jc as Te}from"./chunk-QRHYK2TW.js";import"./chunk-PODZSVO7.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as mo}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import{m as oe,r as no}from"./chunk-ZDOH3CEJ.js";import{c as te,e as io}from"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import"./chunk-62ZAND24.js";import"./chunk-SIITVWZR.js";import{B as Q,I as so,ja as J,la as X,ra as ao,v as Z}from"./chunk-QHXUL3YM.js";import{H as j,y as d}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{D as T,H as ee,q as k}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import{H as q,ra as ro}from"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{ka as R}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as V}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as _,o as s,q as a}from"./chunk-SHG7TIBL.js";s();a();var P=_(V()),U=_(Te()),N=_(le());ro();j();s();a();s();a();var lo=()=>()=>Promise.resolve(!1),De=lo;var He=De;io();s();a();var C=_(V()),O=_(Te()),Ke=_(mo());function qe(){let n=(0,O.useDispatch)(),t=(0,Ke.useHistory)(),i=(0,O.useSelector)(re),[m,r]=(0,C.useState)(!1);return(0,C.useEffect)(()=>{i&&!m&&t.push(x)},[i,m,t,n]),(0,C.useCallback)(()=>{r(!0)},[])}ao();s();a();var Ve=n=>{let{onboardingTabs:t}=n.metamask;if(!t||Object.keys(t).length!==1)return null;let i=Object.keys(t)[0],m=t[i];return{location:i,tabId:m}};so();no();s();a();var c=_(V());j();var Ye=({onSubmit:n,formClass:t,itemClass:i,formErrorClass:m,setFormValues:r,bulkButtonStyle:L={},disabled:W,loading:F,showConfirm:o=!0,showForgetPassword:E=!1,showPasswordIndicator:h=!0,forgetPwdFrom:v="",forgetPasswordPath:b})=>{let A=T.useForm();return c.default.createElement(T,{form:A,size:R.SIZE.lg,onSubmit:n,validateTrigger:["onChange"],className:t,errorClassName:m,onValuesChange:(w,g)=>{r(g)}},c.default.createElement(T.Item,{name:"password",style:{marginBottom:"0px"},className:i},c.default.createElement(k.Password,{autoFocus:!0,autoComplete:"off",inputClassName:B.passwordInput,size:k.SIZE.xl,placeholder:d("wallet_set_password_maintitle_enter_password")})),h&&c.default.createElement(T.Item,{noStyle:!0,shouldUpdate:(w,g)=>w.password!==g.password},({getFieldValue:w})=>{let g=w("password");return c.default.createElement(Se,{password:g})}),o&&c.default.createElement(T.Item,{name:"confirmPassword",style:{flex:1,margin:"16px 0px 0px"},dependencies:["password"],className:i,rules:[({getFieldValue:w})=>({validator:(g,S)=>{let D=w("password");return S&&D!==S?Promise.reject(d("wallet_set_password_errortip_password_not_match")):Promise.resolve()}})]},c.default.createElement(k.Password,{autoComplete:"off",inputClassName:B.passwordInput,size:k.SIZE.xl,placeholder:d("wallet_set_password_input_reenter")})),E&&c.default.createElement(Me,{className:B.forgot,from:v,replace:!0,path:b}),c.default.createElement(ye.FooterActions,{affixStyle:L,renderNative:!0,buttonGroup:[{loading:F,disabled:W,block:!0,type:R.TYPE.highlight,category:R.CATEGORY.fill,size:R.SIZE.lg,onClick:n,btnText:d("wallet_set_password_btn_confirm")}]}))};s();a();var ze=_(le());function po(n=""){let t=n==="create"?"create_wallet":"import_wallet";return(0,ze.useMount)(()=>{try{ke({source:t,platform:z(),tg_platform:G()})}catch{}}),{confirmMonitor:m=>{try{Re({platform:z(),tg_platform:G(),is_biometrics_enabled:m?"yes":"no",source:t})}catch{}}}}var Ge=po;var f={SEED:"seed",KEY:"key",HARDWARE:"hardware",CREATE:"create",MPC:"mpc",BULK:"bulk"},gt=({history:n})=>{let t=Be(),[i,{set:m}]=(0,N.useBoolean)(!1),[r,L]=(0,P.useState)({}),W=Fe(),F=He(),o=(0,U.useDispatch)(),{seedPhrase:E,privateKey:h,mpcInfo:v,unlockHardwareWallets:b,chooseNetworkList:A,isTonMnemonic:w}=(0,U.useSelector)(e=>({seedPhrase:ue(e),privateKey:de(e),mpcInfo:we(e),unlockHardwareWallets:fe(e),chooseNetworkList:ge(e),onboardingInitiator:Ve(e),isTonMnemonic:_e(e)})),g=J()===Q?"telegram":"extension",S=qe(),D=We(),H=t.get("from"),$e=H===f.HARDWARE,je=Le(),M=H===f.BULK,{setValue:Ze}=Ue(),{confirmMonitor:Qe}=Ge(H),I=async(e,l)=>{try{o(ve(!0)).then(async()=>{if(S(),await o(xe()),D(e))return;if(e===f.CREATE){je();return}let u=`${pe}/${e}`,{keyringName:K="",walletName:p=""}=l||{},to=`${K}-${p}`;if(e===f.HARDWARE&&X()===Z){globalThis.platform.openExtensionInPopup(`${u}?anim=1`);return}n.push({pathname:u,state:{walletName:to,anim:"1",next:x}})}).catch(()=>{})}catch{}},$=P.default.useMemo(()=>{let{password:e,confirmPassword:l}=r;return!(e?.length>=Ae&&e===l)},[i,h,E,b,r]),Je=(0,N.useMemoizedFn)(async()=>{if(Y(),E){let p=await o(ne(r.password,{mnemonic:E?.trim().toLowerCase().match(/\w+/gu)?.join(" ")||"",isTonMnemonic:w}));I(f.SEED,p),o(Pe())}if(h){let p=await o(ie(r.password,{privateKey:h,baseChains:A}));I(f.KEY,p),o(Ee())}if(M){Ze(r.password),n.push(ce);return}let{cipherText:e,privateKey:l,mpcId:u,userInfo:K}=v;if(e&&l&&u){let p=await o(me(r.password,{cipherText:e,privateKey:l},{mpcId:u,userInfo:K},!0));I(f.MPC,p),o(be())}if(!q(b)){await te().setPassword(r.password,!0);let p=await o(Ne(b));I(f.HARDWARE,p),o(he())}if(!E&&!h&&!(e&&l&&u)&&q(b)){let p=await o(ae(r.password));I(f.CREATE,p)}},[$,r,E,h,A]),Xe=()=>W(r?.password),eo=async()=>{m(!0),Qe(),Y();let e=await F();try{e?await Xe():(await Je(),o(Ce(1)),o(Ie(void 0)),se({button_name:"password",platform:g}))}catch(l){l.message===oe&&ee.error(d("wallet_home_toast_network_error"))}finally{m(!1)}};(0,P.useEffect)(()=>{if(M){let e=document.querySelector("#app");e&&(e.classList.remove("fullscreen"),e.classList.add("popup"))}return()=>{if(M){let e=document.querySelector("#app");e&&(e.classList.remove("popup"),e.classList.add("fullscreen"))}}},[]);let oo=M?{position:"absolute",bottom:0,left:0}:{};return P.default.createElement(Oe,{title:d("wallet_signup_maintitle_set_password"),desc:d($e?"wallet_extension_signup_subtitle_set_password_hardware":"wallet_extension_subtitle_password_unlock")},({formClass:e,formErrorClass:l,itemClass:u})=>P.default.createElement(Ye,{onSubmit:eo,formClass:e,itemClass:u,formErrorClass:l,setFormValues:L,bulkButtonStyle:oo,disabled:$,loading:i}))};export{gt as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CreatePassword-GWFOFIRP.js.map
