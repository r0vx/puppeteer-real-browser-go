import{d as jo}from"./chunk-FUVVPSUI.js";import{c as Jo,k as J,l as q}from"./chunk-4YDY4B6P.js";import{a as Qo}from"./chunk-4ZGOJDNI.js";import{a as j}from"./chunk-DBWXHHZT.js";import{E as Go,N as qo,b as _o,d as No,e as Ro,f as N,g as Bo,h as Lo,i as ko,j as Do,l as vo,m as Oo,n as Po,o as Mo,p as wo,r as Uo,s as K,u as Ho,v as Vo,y as $o}from"./chunk-ZLJJZYPU.js";import{f as Zo,g as Ko}from"./chunk-OK4242CI.js";import{a as zo}from"./chunk-67F2WFQO.js";import{a as Yo}from"./chunk-UR7XESQE.js";import{a as To,g as G,ua as So,va as bo}from"./chunk-QMENNGDH.js";import{a as ho,e as yo}from"./chunk-WGVA2GGS.js";import{o as _}from"./chunk-XP3TNE3R.js";import{Kb as go,Y as Io,jc as I}from"./chunk-QRHYK2TW.js";import{a as O}from"./chunk-532YJKK4.js";import{ia as C}from"./chunk-4EIUGT5A.js";import{a as Wo}from"./chunk-VL2YBSHB.js";import{J as x,K as po,M as $,O as Co,P as b,Q as Z,ba as Ao,ca as Eo,ga as xo,ia as F}from"./chunk-QHXUL3YM.js";import{H as Re,y as lo}from"./chunk-MOTAOJVG.js";import{H as Fo}from"./chunk-XR4SQWL7.js";import{H as V,L as ao,ra as fo}from"./chunk-CYTB2B6Q.js";import{b as S}from"./chunk-OL67KS7C.js";import{f as u,o as t,q as s}from"./chunk-SHG7TIBL.js";t();s();var Xo="DontShowError";t();s();var fe=u(I()),le=u(_());Re();t();s();fo();var ce=u(O());t();s();var l=u(I());F();t();s();var W=u(S());t();s();F();var Be=(0,W.createContext)({coinId:null,fromAddress:""});function oe(){return(0,W.useContext)(Be)}function ee(){let{coinId:o}=oe();return o}function R(){let{fromAddress:o}=oe();return o}function g(o){return(e,r,n)=>{if(!e)return e;let i;return n?i=Eo(e,o??r.decimals):i=Ao(e,o??r.decimals),xo(i)}}var re=()=>(0,l.useSelector)(_o),Cr=()=>(0,l.useSelector)(N),E=()=>{let{coin:o}=m(),e=g(o.decimals),r=(0,l.useSelector)(ko);return e(r,o,!1)},ne=()=>(0,l.useSelector)(Do),Ar=()=>{let o=E(),{coin:e}=m();return x(o,10**e.decimals)},Q=()=>(0,l.useSelector)(wo),X=()=>(0,l.useSelector)(Oo),oo=()=>{let o=g(),e=X(),r=A();return o(po(e,10**r.decimals),r,!0)},te=()=>(0,l.useSelector)(Mo),eo=()=>(0,l.useSelector)(Po),se=()=>{let o=(0,l.useSelector)(go),e=(0,l.useSelector)(Uo);return e===-1?o.currencyId:e},ie=()=>{let o=(0,l.useSelector)(vo),{baseCoin:e}=m();return o===-1?e.coinId:o},ro=()=>(0,l.useSelector)(Ho),ue=()=>(0,l.useSelector)(Vo);var no={vdecimalNum:0,decimals:0,symbol:""};function h(){let{coinId:o}=(0,ce.useParams)(),e=ee();return Number(e)||Number(o)}var m=()=>{let o=h(),{coin:e,baseCoin:r}=j(o,!0),n=V(e)?no:e,i=V(r)?no:r;return{coin:n,baseCoin:i}},A=()=>{let o=ie(),{coin:e}=j(o,!1);return V(e)?no:e};t();s();var to=u(I()),me=u(O());var ae=()=>{let o=(0,me.useHistory)(),e=(0,to.useSelector)(Lo),r=(0,to.useSelector)(N),{coin:n}=m();return async()=>{await jo(n.localType,{name:e?.name,type:e?.type,address:r}),o.go(-3)}};function Gr(){let o=(0,fe.useSelector)(K),e=te(),r=eo(),{coin:n}=m();return(!!o.key||!!o.text)&&o.type!==C.COMMON_TIP||e||r||!n.coinId}function qr(o){let[e,{setTrue:r,setFalse:n}]=(0,le.useBoolean)(),i=ae();return{loading:e,onClick:async(...a)=>{r();try{if(!await Qo()){n();return}if(o){let d=await o(...a),{pause:p}=d||{};p||await i()}}catch(f){if(f?.message===Wo||f?.message===Xo)n();else{let p=f?.data?.msg||f?.msg||f?.data?.originalError?.msg||f?.message||lo("wallet_extension_general_error_extension_code_error");Fo.error({title:p})}}n()}}}t();s();t();s();var P=u(_()),M=u(S());var B=Symbol("UNSET_INPUT");function Le(){let[o,e]=(0,M.useState)(B),r=(0,P.useLatest)(o);return(0,M.useEffect)(()=>{$o(o!==B)},[o]),{latestRequestInputRef:r,setLatestRequestInput:e}}function ke({domainInputValue:o,coinId:e},r,n=!1){let{latestRequestInputRef:i,setLatestRequestInput:a}=Le(),f=(0,P.useLatest)(o),{run:d,cancel:p}=(0,P.useDebounceFn)(v=>{Io({coinId:e,domain:v}).then(({data:y})=>{v===f.current&&y?.address&&r({address:y?.address,domain:v})}).catch(y=>{console.log(y)}).finally(()=>{i.current===v&&a(B)})},{wait:800});return(0,M.useEffect)(()=>(o.indexOf(".")!==-1&&!n?(a(o),d(o)):a(B),()=>{p&&p()}),[o,n]),{loading:i.current!==B,abort:()=>{p&&p(),a(B)}}}var De=ke;t();s();var pe=u(O());function ve(){let o=(0,pe.useHistory)(),e=re();return()=>{o.push(e||To)}}var Oe=ve;t();s();var cn=()=>{let o=R(),{baseCoin:e}=m(),r=zo(e.localType);return e.localType?o||r:""};t();s();var w=u(I()),de=u(O()),Ce=u(_());function En(){return(0,w.useSelector)(No)}function xn(){let o=(0,w.useSelector)(Ro),e=(0,w.useSelector)(N),r=(0,w.useSelector)(Bo);return!e||o||!!r.key}function Fn(){let o=h(),e=(0,de.useHistory)(),r=R(),{amount:n}=Yo(e&&e.location.search.slice(1));return(0,Ce.useMemoizedFn)(()=>{let i={pathname:`${G}/${o}${So}`};r&&(i.search=`?from=${r}`),n&&(i.search=i.search?`${i.search}&amount=${n}`:`?amount=${n}`),e.push(i)})}t();s();t();s();t();s();var L=u(S()),Ae=u(_());function Pe(o,e){let[r,n]=(0,L.useState)(0),i=(0,L.useRef)(0);Array.isArray(e)&&(e={override:!1,fns:e});let a=e?.override?e?.fns||[]:[...o||[],...e?.fns||[]],f=(0,L.useCallback)((d,p)=>{(async()=>{let y=++i.current;n(T=>T+1);try{let T={key:"",args:{}};for(let Ne of a){let mo=await Ne(d);if(mo){T=mo;break}}y===i.current&&p(T)}finally{n(T=>T-1)}})()},a);return{isCheckingError:r>0,runErrorFns:f}}function Ee(o,e,r){let{callback:n,disabled:i}=r||{};(0,Ae.useDebounceEffect)(()=>{(async()=>{i||e(o,n)})()},[e,o,i],{wait:100})}var xe=Pe;function Nn(o,e,r){let n=E();Ee(n,o,{callback:e,disabled:r})}var U=xe;t();s();var so=u(_());function Me(){return(0,so.useMemoizedFn)(o=>o?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function we(){let{baseCoin:o}=m();return(0,so.useMemoizedFn)(async e=>await Jo(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function vn(){let o=Me(),e=we();return[o,e]}t();s();var k=u(S()),ge=u(I());t();s();var Fe=u(S());F();var Ue=o=>{let e=Zo(o),r=Ko();return(0,Fe.useCallback)((n,i,a)=>{let{useApproximate:f=!0}=a||{},d=r?.[n]?.coinToUSDRate;return yo(x(i,x(d,e.usdToThisRate)),{useApproximate:f,currencySign:e.symbol}).value},[r,e.symbol,e.usdToThisRate])},Ie=Ue;F();function He(){let{coin:o}=m(),e=z();return(0,k.useCallback)(()=>o.baseCoinId===0&&b(e,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT}:null,[e])}function io(){let o=co();return(0,k.useCallback)(e=>Z(e,o)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:C.BALANCE_INSUFFICIENT}:null,[o])}function uo(){let o=se(),e=Ie(o),{coin:r}=m(),n=z();return(0,k.useCallback)(i=>{if(Z(i,n)){let a=e(r.coinId,n,{useApproximate:!1}),f=ho(n,{precision:r.decimals,symbol:r.symbol}).value;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:a,cryptoamount:f},type:C.BALANCE_INSUFFICIENT}}return null},[n])}var Jn=o=>{let e=(0,ge.useDispatch)(),r=He(),n=io(),i=uo(),a=[r,n,i],{runErrorFns:f}=U(a,o),d=Y();(0,k.useEffect)(()=>{f(d,p=>{e(Go(p))})},[f,d])};t();s();var D=u(S()),he=u(I());F();t();s();var H={AMOUNT:"amount",FEE:"fee"};function Ve(){let o=A(),e=ye();return(0,D.useCallback)(()=>b(e,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT,highlight:H.FEE}:null,[e,o.symbol])}function $e(){let o=io();return(0,D.useCallback)(e=>{let r=o(e);return r?{...r,highlight:H.AMOUNT}:null},[o])}function Ge(){let o=uo();return(0,D.useCallback)(e=>{let r=o(e);return r?{...r,highlight:H.AMOUNT}:null},[o])}function qe(){let o=Ve(),e=$e(),r=Ge();return[o,e,r]}function at(o){let e=(0,he.useDispatch)(),r=qe(),{runErrorFns:n}=U(r,o),i=Y();(0,D.useEffect)(()=>{n(i,a=>{e(qo(a))})},[n,i])}t();s();var Te=u(O()),Se=u(_());F();fo();function Nt(){let o=ne(),e=E();return!!o.key&&o.type!==C.COMMON_TIP||ao(e)||e===""||b(e,0)}function Rt(){let o=h(),e=(0,Te.useHistory)(),r=R();return(0,Se.useMemoizedFn)(()=>{let n={pathname:`${G}/${o}${bo}`};r&&(n.search=`?from=${r}`),e.push(n)})}t();s();F();var be=()=>{let o=h();return J(o)},wt=()=>{let o=g(),e=be(),{coin:r}=m();return o(q(e,r.decimals),r,!1)},_e=()=>{let o=be(),e=ro();return e===null?o:e},co=()=>{let o=g(),e=_e(),{coin:r}=m();return o(q(e,r.decimals),r,!1)},We=()=>{let{coin:o}=m(),e=A(),r=X(),n=_e();return o.coinId===e.coinId?$(n,r):n},z=()=>{let{coin:o}=m(),e=A(),r=oo(),n=co();return o.coinId===e.coinId?$(n,r):n},Y=()=>{let o=Q(),e=z(),r=E();return o?Co(e,0)?"0":e:r},ze=()=>{let o=A();return J(o.coinId)},Ye=()=>{let{coin:o}=m(),e=A(),r=ze(),n=ue(),i=ro();return n!==null?n:o.coinId===e.coinId&&i!==null?i:r},Ze=()=>{let o=g(),e=Ye(),r=A();return o(q(e,r.decimals),r,!1)},ye=()=>{let o=Ze(),e=oo();return $(o,e)},Ut=()=>{let{coin:o}=m(),e=Q(),r=E(),n=We();return e?n:x(r,10**o.decimals)};t();s();t();s();var Ke=u(I());export{De as a,Be as b,R as c,h as d,m as e,A as f,Cr as g,E as h,ne as i,Ar as j,Q as k,X as l,oo as m,te as n,eo as o,se as p,ie as q,ro as r,ue as s,Oe as t,cn as u,ae as v,En as w,xn as x,Fn as y,Nn as z,U as A,Me as B,we as C,vn as D,He as E,io as F,uo as G,Jn as H,H as I,Ve as J,$e as K,qe as L,at as M,Nt as N,Rt as O,be as P,wt as Q,_e as R,co as S,z as T,ze as U,Ye as V,ye as W,Ut as X,Xo as Y,Gr as Z,qr as _};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-VVJ6BK3Q.js.map
