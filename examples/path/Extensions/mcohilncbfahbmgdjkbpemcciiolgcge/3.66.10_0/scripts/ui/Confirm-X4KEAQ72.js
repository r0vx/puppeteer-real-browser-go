import"./chunk-O2YW3UOK.js";import{a as It}from"./chunk-YH2YQHH6.js";import{a as xt}from"./chunk-MZSDFALS.js";import"./chunk-32BL2FRE.js";import{a as yt}from"./chunk-UBIBVQQG.js";import{a as dt}from"./chunk-4XFT4R4M.js";import{a as Q,b as X,d as $}from"./chunk-PZSN2XKL.js";import{a as J}from"./chunk-A267SEFJ.js";import{a as _t}from"./chunk-P3XA54LG.js";import"./chunk-ONWPWBS4.js";import"./chunk-UM2UK5YS.js";import"./chunk-JU4HVVJ2.js";import{a as ft}from"./chunk-OS3ZP336.js";import{d as lt,l as mt}from"./chunk-QTKQMZ5K.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{_a as pt}from"./chunk-QMENNGDH.js";import"./chunk-APGT6UVG.js";import{o as Wt}from"./chunk-XP3TNE3R.js";import{Cb as ct,jc as Gt}from"./chunk-QRHYK2TW.js";import"./chunk-QO4JMOUQ.js";import{a as Rt}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import{c as ut,e as Ot}from"./chunk-AS4Z3FNS.js";import{ka as at}from"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as m}from"./chunk-62ZAND24.js";import{a as Kt}from"./chunk-SIITVWZR.js";import"./chunk-QHXUL3YM.js";import{H as j,y as k}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import{la as Z,oa as st,ra as Dt}from"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as nt,fa as it,ka as T}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as P}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-2EEW2VNF.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as x,h as y,o as r,q as o}from"./chunk-SHG7TIBL.js";r();o();var B=x(P());r();o();var F=x(P());var ht=x(Kt());r();o();r();o();var S={root:"_root_na3xe_1",icon:"_icon_na3xe_12",loading:"_loading_na3xe_16",finished:"_finished_na3xe_22",failed:"_failed_na3xe_25"};var gt=(e,t)=>()=>F.default.createElement(nt,{className:(0,ht.default)(e,S.icon,t)}),Ht=gt("okds-success-circle",S.finished),Mt=gt("okx-wallet-plugin-warning-circle",S.failed),zt=()=>F.default.createElement(it,{loaderClassName:S.loading}),Ut=()=>null,Vt={[0]:Ut,[1]:zt,[2]:Ht,[3]:Mt},wt=({status:e})=>{let t=Vt[e];return F.default.createElement(m.Box,{className:S.root},F.default.createElement(t,null))};r();o();var Tt=x(P());j();r();o();var kt={root:"_root_mrqdw_1"};var bt=({status:e,success:t=0,failed:s=0,duplicated:i=0})=>{let a={[0]:null,[1]:{key:"wallet_extension_private_key_title_importing_private_key",params:{}},[2]:{key:s>0||i>0?"wallet_extension_private_key_title_num_imports_successful":"wallet_extension_private_key_title_import_successful",params:{num:t}},[3]:{key:"wallet_extension_private_key_title_import_failed",params:{}}}[e],l=a?k(a.key,a.params):"";return l?Tt.default.createElement(m.Box,{className:kt.root},l):null};r();o();var O=x(P());j();r();o();var D={root:"_root_a49x9_1",item:"_item_a49x9_8",retry:"_retry_a49x9_15",divider:"_divider_a49x9_26"};function Yt({status:e,total:t=0,success:s=0,failed:i=0,duplicated:u=0}){let a={importing:{key:"wallet_extension_private_key_text_importing_num_entries",params:{num:s},retry:!1},success:{key:"wallet_extension_private_key_text_num_entries_imported",params:{num:s},retry:!1},duplicated:{key:"wallet_extension_private_key_duplicate_imports",params:{num:u},retry:!1},failed:{key:"wallet_extension_private_key_text_num_failed_entries",params:{num:i},retry:i>0}};return{items:{[0]:[],[1]:[a.importing],[2]:[s===t?a.success:void 0,u>0?a.duplicated:void 0,i>0?a.failed:void 0].filter(Boolean),[3]:[u>0?a.duplicated:void 0,i>0?a.failed:void 0].filter(Boolean)}[e]}}var vt=({status:e,total:t,success:s,failed:i,duplicated:u,onRetry:a})=>{let{items:l=[]}=Yt({status:e,total:t,success:s,failed:i,duplicated:u});return O.default.createElement(m.Box,{className:D.root},l.map((b,h)=>{let{key:g,params:_,retry:v}=b;return O.default.createElement(m.Box,{key:h,className:D.item},k(g,_),h===0&&l.length>1&&O.default.createElement(m.Box,{className:D.divider}),v&&O.default.createElement(m.Box,{onClick:a,className:D.retry},k("wallet_extension_private_key_btn_try_again")))}))};r();o();var L=x(P());j();r();o();var M={root:"_root_1ir3w_1",actions:"_actions_1ir3w_10",tip:"_tip_1ir3w_15"};var Nt=({status:e,onCancel:t,onComplete:s})=>{let i=e===1,u=e===0;return L.default.createElement(m.Box,{className:M.root},L.default.createElement(m.Box,{className:M.actions},i?L.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.primary,onClick:t,size:T.SIZE.xl,block:!0},k("wallet_extension_private_key_btn_stop_import")):!u&&L.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.xl,onClick:s,block:!0},k("wallet_extension_private_key_btn_ok"))),i&&L.default.createElement(m.Box,{className:M.tip},k("wallet_extension_private_key_text_dont_close_page")))};r();o();var n=x(P()),z=x(Gt()),Bt=x(Rt()),Et=x(Wt());Dt();r();o();var I={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},W=class{constructor(t){y(this,"status",I.uninitialized);y(this,"nextInfo",null);y(this,"cb",null);y(this,"args",[]);y(this,"next",(...t)=>{[I.waiting,I.canceled,I.paused].includes(this.status)||!this.cb||(t.length>0&&(this.args=t),this.nextInfo=this.generator(this.execute,...this.args),this.status=I.waiting,this.nextInfo.execute())});y(this,"execute",()=>{this.status=I.working,this.cb?.(this.next)});y(this,"cancel",()=>{this.status=I.canceled,this.nextInfo.cancel?.(),this.cb=void 0});y(this,"pause",()=>{this.status=I.paused,this.nextInfo.pause?.()});y(this,"start",(t,...s)=>{this.cb=t,s.length>0&&(this.args=s),this.next()});y(this,"continue",()=>{this.status=I.initialized,this.next()});this.generator=t,this.status=I.initialized,this.nextInfo=null,this.cb=null}};Ot();function qt(){let e=t=>({execute:t,cancel:()=>{},start:()=>{}});return new W(e)}var tt=e=>t=>t+e;function Zt(){let e=(0,z.useDispatch)(),{value:t}=Q(),{value:s}=X(),{value:i}=$(),u=t.filter(c=>c.value).map(c=>c.value),[a,l]=(0,n.useState)(0),b=(0,n.useRef)(u),h=(0,n.useRef)([]),g=(0,n.useRef)([]),_=(0,n.useRef)([]),v=(0,n.useRef)(!1),A=(0,n.useRef)(),[p]=(0,n.useState)(u.length),[w,C]=(0,n.useState)(0),[E,G]=(0,n.useState)(0),[N,R]=(0,n.useState)(0),d=(0,n.useRef)(0),U=p-w,et=c=>c>0,Lt=(0,z.useSelector)(ct),rt=(0,n.useRef)(Lt);(0,n.useEffect)(()=>{p<=0||(w===p&&l(2),(E===p||N===p||E+N===p)&&l(3))},[E,w,N,p]);let V=async()=>{if(_.current.length===0)return;let c=[..._.current];_.current=[];try{await ut().createWalletsToServer(c,at.PRIVATE_KEY)}catch{}},At=c=>{_.current.length>=10&&V(),c===d.current&&V()},ot=c=>{!et(c)||(l(1),A.current=qt(),A.current.start(async Ct=>{if(et(c)&&c>d.current){let K=b.current[d.current],Ft=lt({privateKey:K,baseChains:[s]},{noticeBackend:!1}),Y;try{if(v.current=!0,rt.current)Y=await e(Ft);else{let q=mt(i,{privateKey:K,baseChains:[s]},{noticeBackend:!1});Y=await e(q),await e(ft()),rt.current=!0}_.current.push(Y?.walletId),await J(200),C(tt(1)),h.current.push(K)}catch(q){q?.message===yt?R(tt(1)):g.current.push(K)}finally{v.current=!1,d.current=tt(1)(d.current),At(c),Ct()}}else l(2)}))};return{start:()=>{w>0||(d.current=0,ot(p))},cancel:async()=>{for(l(2),A.current?.cancel();v.current;)await J(100);V();let c=st(b.current,[...h.current,...g.current]);G(Z(c).length+g.current.length),b.current=Z(c),h.current=[],g.current=[]},retry:()=>{U>0&&(d.current=0,G(0),R(0),ot(U))},failed:E,success:w,total:p,duplicated:N,remain:U,status:a}}var Pt=()=>{let e=(0,Bt.useHistory)(),t=xt(),{value:s,setValue:i}=Q(),{value:u,setValue:a}=X(),{setValue:l}=$();(!s.filter(d=>d.value).map(d=>d.value).length||!u)&&e.replace(pt);let{remainAccountAmount:h}=_t(),g=(0,n.useRef)(!1),{start:_,cancel:v,retry:A,success:p,failed:w,total:C,duplicated:E,status:G}=Zt(),N=async()=>{i([{id:Date.now(),show:!1,value:"",error:!1}]),a(""),l(""),await dt()},R=async()=>{await N(),await t()};return(0,n.useEffect)(()=>{!g.current&&h>0&&p+w<C&&(_(),g.current=!0)},[w,h,_,p,C]),(0,Et.useUnmount)(async()=>{await N()}),{start:_,cancel:v,retry:A,complete:R,success:p,failed:w,total:C,duplicated:E,status:G}};r();o();var St={root:"_root_80chm_1"};var Fr=()=>{let{status:e,success:t,failed:s,total:i,duplicated:u,cancel:a,retry:l,complete:b}=Pt();return B.default.createElement(It,null,B.default.createElement(m.Box,{className:St.root},B.default.createElement(wt,{status:e}),B.default.createElement(bt,{status:e,success:t,failed:s,duplicated:u}),B.default.createElement(vt,{status:e,total:i,success:t,failed:s,duplicated:u,onRetry:l}),B.default.createElement(Nt,{status:e,onCancel:a,onComplete:b})))};export{Fr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Confirm-X4KEAQ72.js.map
