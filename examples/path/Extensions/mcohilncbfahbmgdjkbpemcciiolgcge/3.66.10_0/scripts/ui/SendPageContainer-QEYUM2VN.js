import{a as Od,b as Vt}from"./chunk-RG4D4JRN.js";import{a as Gs,b as Xd,c as Ia,d as zd}from"./chunk-UD6DWZAJ.js";import{a as Ht,b as Ud,c as Wd,d as vo}from"./chunk-43SPU3ZW.js";import{a as Kd}from"./chunk-YGWNRVRK.js";import{a as Rs,b as Ld,c as Dd,d as Ae,e as Md,f as Y,g as Us,h as Vd,l as Hd,m as qd,n as Eo}from"./chunk-OREEKEEP.js";import{a as Ws,b as Gd}from"./chunk-MXXOWCRN.js";import{a as Jd}from"./chunk-V4ELRF6L.js";import{a as ne}from"./chunk-7VC7N33E.js";import{a as Rd}from"./chunk-4OAB5M6C.js";import{a as Os}from"./chunk-YGTXYAOX.js";import"./chunk-WBTR3RX4.js";import{a as kd}from"./chunk-BAIZGGKY.js";import"./chunk-V7MVE7GF.js";import"./chunk-UYHZVWJV.js";import{a as ge,b as Nd}from"./chunk-HRUNWJWV.js";import{a as wd,b as Bd}from"./chunk-Q5M243XX.js";import{a as vd}from"./chunk-PETUQAWU.js";import"./chunk-JRNVHROF.js";import{b as yd,c as bd,d as Ds,f as Pd}from"./chunk-EUGYCX2N.js";import{a as gd,c as Nn,d as Ad,f as Cd}from"./chunk-TEVAE4SY.js";import"./chunk-NZOYKJV7.js";import"./chunk-L7GCKA7W.js";import"./chunk-V2QGBG3D.js";import"./chunk-IFQLVQH6.js";import"./chunk-5TLDWKXV.js";import{a as Fd}from"./chunk-7GRDW7ZD.js";import{a as sr,b as Ms}from"./chunk-OMNHCLSU.js";import{a as Ed}from"./chunk-VY37IS5A.js";import{a as Gu}from"./chunk-DGIWAYI5.js";import"./chunk-HY7LAUD2.js";import"./chunk-C6HPT3PU.js";import"./chunk-ZZH7FUZX.js";import{b as st,c as Bs,d as md,f as ud,h as dd,i as nr,j as Ns,k as rr,m as Bn,p as ld,q as vs,r as fd,s as pd}from"./chunk-CQWP5UAS.js";import"./chunk-7FBDFG5E.js";import"./chunk-IK5VIKIS.js";import{c as po}from"./chunk-Y6T5M4AD.js";import{e as _d}from"./chunk-J3K74NCM.js";import{a as ee}from"./chunk-UWCOP3B7.js";import"./chunk-6DUYAS7R.js";import"./chunk-7KQVTMRC.js";import{a as Aa}from"./chunk-UFD2MUZI.js";import"./chunk-CEM2RCMY.js";import"./chunk-SKXNZFRN.js";import{a as Go}from"./chunk-4CAGK53A.js";import{a as Id}from"./chunk-F2UY6S3K.js";import{a as it,d as hd}from"./chunk-7X4DXTSI.js";import{a as Ls}from"./chunk-LURPYTXM.js";import{c as yu,e as Fu}from"./chunk-OADPFYBO.js";import"./chunk-CIEH2J25.js";import{a as Me,b as Ca}from"./chunk-64LKONIY.js";import{A as bn,B as Gt,C as $u,D as ju,E as Es,F as Pn,G as Qu,H as oo,I as De,J as od,K as td,L as ed,M as eo,O as ks,P as En,R as sd,T as Ko,U as pe,V as kn,W as id,X as ao,Y as ws,Z as ad,_ as cd,a as Vu,c as Hu,d as No,e as C,f as Ot,g as k,h as Ut,i as qu,j as H,k as Wt,l as J,m as Ku,n as Ju,o as _s,p as Wo,q as le,r as ys,s as Fn,t as Xu,u as _,v as zu,w as Yu,x as Fs,y as Tt,z as bs}from"./chunk-VVJ6BK3Q.js";import"./chunk-FUVVPSUI.js";import{A as ho,B as _o,C as Uu,D as Wu,a as So,k as Lu,l as hs,t as Du,u as Mu,v as Ru,w as Ou,x as Po}from"./chunk-NKIUEXOA.js";import"./chunk-EP23RRSK.js";import{c as fe,g as Ps,h as Zu,l as nd,m as rd}from"./chunk-4YDY4B6P.js";import{c as vu}from"./chunk-CGFS6AE4.js";import{a as Nu}from"./chunk-DDT324RS.js";import"./chunk-2TQXMDYZ.js";import"./chunk-RNMISV22.js";import"./chunk-A267SEFJ.js";import{a as et}from"./chunk-VR7OPIR6.js";import"./chunk-PTDCFHZ4.js";import"./chunk-CXSOAP4V.js";import{b as Td,d as Sd,e as xd}from"./chunk-RT3YHZTS.js";import{a as wn}from"./chunk-4ZGOJDNI.js";import"./chunk-ZPQXBUKT.js";import"./chunk-35Y7QMWN.js";import"./chunk-VIT5MDY4.js";import"./chunk-RH6WPBEZ.js";import{b as bu,k as Pu,l as Eu,n as ku,o as wu,u as Bu}from"./chunk-CDNJY7Z3.js";import{a as Ts}from"./chunk-DBWXHHZT.js";import"./chunk-VVKAQ7K5.js";import{d as tt,f as Uo,g as hu,j as _u}from"./chunk-7JSJY3SQ.js";import{a as Ss,c as xs}from"./chunk-NWY3GPDX.js";import{a as xu}from"./chunk-6JEFG7DQ.js";import"./chunk-B6YXJZUF.js";import"./chunk-4I2JSOYJ.js";import"./chunk-GTN3RCGH.js";import"./chunk-3VKPY2QL.js";import"./chunk-AOSRFQ4E.js";import"./chunk-ULL77AIR.js";import"./chunk-PJYSMRRW.js";import"./chunk-GKQQDLVP.js";import"./chunk-7YKP5374.js";import"./chunk-KGG7DXMS.js";import"./chunk-FGIHS4ZF.js";import"./chunk-U65R4NF3.js";import"./chunk-OTUJWRS5.js";import"./chunk-WIW5JVRP.js";import"./chunk-7CXUJS4C.js";import"./chunk-ULXZERAJ.js";import"./chunk-PJ5X5CUU.js";import"./chunk-TSVRDRPO.js";import"./chunk-PPTAKQQT.js";import"./chunk-IFQDHP3Z.js";import"./chunk-DA5RJYYW.js";import"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import"./chunk-ZTIVM5ML.js";import"./chunk-2E2OBQTS.js";import"./chunk-VICEBZ4G.js";import"./chunk-WO6OHGU2.js";import"./chunk-3S4BGA37.js";import"./chunk-POP3LIKS.js";import"./chunk-PMRTKWFS.js";import"./chunk-G44PPNNQ.js";import"./chunk-K2BSCLBF.js";import"./chunk-PZY7HRHV.js";import"./chunk-Z2L2F5M5.js";import"./chunk-IPLOJJIA.js";import"./chunk-RLPRDJ34.js";import"./chunk-2ASICJQL.js";import"./chunk-TQWSBAXG.js";import"./chunk-6JVCYB7O.js";import"./chunk-GR42TVIZ.js";import{a as iS}from"./chunk-MLMB77AI.js";import"./chunk-QMSSDBOR.js";import"./chunk-5RCFYEZ6.js";import{$ as ou,B as Tn,C as Sn,D as cs,E as xn,F as de,G as gt,H as Wm,I as hn,J as Gm,K as ms,L as Vm,M as Hm,N as qm,O as Km,P as Jm,Q as At,R as Xm,S as zm,T as us,U as ma,V as Ym,W as Zm,X as $m,Y as ds,Z as jm,_ as Qm,aa as _n,b as Bm,ba as ls,c as gn,ca as er,d as Nm,da as fs,e as vm,ea as ua,f as Lm,fa as tu,g as An,ga as eu,h as ts,ha as bt,i as Cn,j as In,ja as ps,k as Dm,ka as da,l as ft,la as gs,m as Mm,ma as nu,n as es,na as As,o as ns,oa as oe,p as rs,pa as la,q as ue,qa as fa,r as ss,ra as ru,s as Mt,sa as su,t as tr,ta as iu,u as Rm,ua as au,v as is,va as pa,w as Om,wa as cu,x as pt,y as Um,z as as}from"./chunk-XIHJL4UW.js";import"./chunk-5QHVWW7O.js";import"./chunk-5PDHABUQ.js";import"./chunk-NPQMAAOH.js";import"./chunk-B3SXRDEQ.js";import"./chunk-7HRNNJBX.js";import"./chunk-F6UVHIJV.js";import{A as ca,B as Qr,C as or,D as Pm,E as Em,H as me,I as K,J as D,K as mo,L as km,N as wm,P as Co,Q as ot,R as os,b as ln,c as Tm,f as io,g as $r,h as jr,k as Sm,l as xm,m as Qo,n as hm,o as fn,p as Dt,q as _m,s as ym,w as Fm,x as pn,z as bm}from"./chunk-ZLJJZYPU.js";import"./chunk-5TNLDTW5.js";import{a as Le}from"./chunk-36PYO4PJ.js";import"./chunk-34JXWTF5.js";import{d as fu}from"./chunk-JSOLAK4X.js";import"./chunk-R7LZSAVU.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-YGIVEMKT.js";import"./chunk-T4RFDN7D.js";import{G as aa,oa as um}from"./chunk-NQAVUB4Q.js";import{a as It,b as Iu,j as Tu}from"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import{e as ga}from"./chunk-5A3RJQCM.js";import"./chunk-LQBCLW7R.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-MKDQBVRZ.js";import{a as pu}from"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-7C7MBE2C.js";import"./chunk-KJWX5V23.js";import"./chunk-KDVER5QK.js";import{e as te}from"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import{c as Cu}from"./chunk-67F2WFQO.js";import"./chunk-QYDRYMWS.js";import{a as gu,e as Au,g as to,h as yn,l as Is}from"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3C5KK.js";import{c as du,f as lu}from"./chunk-XZE3L7K7.js";import{m as so}from"./chunk-BO5YOOQA.js";import{a as Su}from"./chunk-Y5K5NJ6U.js";import"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import{a as Cs}from"./chunk-Q7FGM7BT.js";import{b as Ct}from"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{a as Yr,g as Oo,hb as Zr,ta as mn,ua as un,va as dn}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import{a as To,r as j}from"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as W}from"./chunk-XP3TNE3R.js";import{C as ia,Ca as am,F as Jr,H as lt,Ja as cm,T as rn,U as sn,V as Xr,Va as an,gb as mm,ha as om,ia as tm,ja as em,jc as P,ka as nm,ma as rm,p as Hr,ra as sm,sa as im,w as Qc,zb as vt}from"./chunk-QRHYK2TW.js";import"./chunk-PODZSVO7.js";import"./chunk-QO4JMOUQ.js";import{a as mu}from"./chunk-7N263AYH.js";import{a as Bo}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import{c as bo,e as Qt}from"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import{a as cn,b as Lt}from"./chunk-2FDQIA7D.js";import{a as Qn,c as Ft}from"./chunk-L524QXHA.js";import{b as dm,d as lm,f as fm,g as pm,h as gm,i as Am,j as Cm,n as Im}from"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import{e as zr}from"./chunk-YCFHPQAJ.js";import{_ as jo,ba as $c,c as wo,da as $t,e as Xc,ea as jc,ha as jt,ia as no,l as zc,n as Yc,o as sa,q as Zc,s as qr,t as ae,u as ce,v as en,w as nn,x as Kr}from"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import{d as uu}from"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as V}from"./chunk-62ZAND24.js";import{a as Rt}from"./chunk-SIITVWZR.js";import{$c as Rc,Ab as bc,Dc as wc,Eb as Bt,Ec as Rr,Ic as Or,Id as qc,J as Ho,Jb as tn,K as $o,L as lo,M as qo,Ma as dt,Md as Wr,N as Ye,Na as on,O as Mo,P as Ne,Pd as ve,Q as ko,S as Br,Td as Gr,Uc as Bc,Vc as Nc,Wa as rS,Xa as _c,Xc as vc,Xd as Kc,Ya as Zn,Yc as Lc,Zc as Dc,Zd as Jc,_c as Mc,_d as Nt,a as ac,ad as Oc,b as eS,bd as Uc,ca as Ac,cb as yc,cd as Ur,dd as Wc,ed as Gc,ee as U,fd as Vc,ge as jn,ia as fo,ib as Lr,ic as Dr,ke as Vr,lb as Fc,ma as Cc,mc as Mr,oa as Ic,ob as aS,oc as Pc,od as Ao,oe as Ro,ra as nS,rd as Hc,sd as ra,uc as Ec,vc as kc,wc as na,zd as $n}from"./chunk-QHXUL3YM.js";import{H as q,n as v,x as ze,y as b}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{E as vr,G as hc,H as je,O as Qe,e as Tc,g as Nr,o as mt,q as ut,r as Sc,s as xc}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import{a as sS}from"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-NNUMMJQC.js";import"./chunk-Z3JMRMVO.js";import{A as fc,H as Xe,L as wr,d as cc,e as ea,ea as pc,f as mc,ga as Yn,j as uc,la as gc,ra as rt,s as dc,x as lc}from"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as Ze,fa as $e,ka as go}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as h}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-D2YP6KBJ.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-S5ACFHVS.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as m,o as r,p as l,q as s}from"./chunk-SHG7TIBL.js";r();s();var Zo=m(h()),Ee=m(Bo());rt();r();s();var vn=m(h()),Vs=m(P()),Yd=m(Bo());var cS=()=>{let o=(0,Yd.useHistory)(),t=(0,Vs.useDispatch)(),e=(0,Vs.useSelector)(Tm),n=(0,vn.useRef)(e);return n.current=e,(0,vn.useEffect)(()=>{let{fromPage:i}=o.location?.state||{};return i&&t(Fm(i)),t(pn(!0)),()=>{n.current&&(t(os()),t(As()))}},[]),null},Zd=(0,vn.memo)(cS);r();s();r();s();r();s();var sl=m(h());r();s();var Oe=m(h());q();r();s();var $d=m(h()),jd=m(W());q();var mS=()=>{let o=It(),[t,e]=(0,$d.useState)(!1);return[(0,jd.useMemoizedFn)(async i=>{try{e(!0);let{data:a}=await cm(i,{txSource:1},{walletSignParams:{needWalletSign:!0,walletId:o}}),c="";if(a?.canRecharge||(c=a.rechargeMsg),a?.canWithdraw||(c=a.withdrawMsg),c){let u=mt.warn({text:c,confirmText:b("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{u.destroy()}});return!1}return!0}catch{return je.error(b("wallet_home_toast_network_error")),!1}finally{e(!1)}}),t]},Qd=mS;r();s();r();s();var Ce=m(h());q();function uS({loading:o,tag:t,customRender:e,focus:n,noMargin:i,noPadding:a,onChange:c,onRef:u,...d}){let p=(0,Ce.useRef)(null);(0,Ce.useLayoutEffect)(()=>{n&&p.current?.focus()},[]);let g=b("wallet_extension_transaction_placeholder_input_address");return Ce.default.createElement(ne.Row,{noMargin:i,noPadding:a},Ce.default.createElement(ut.TextArea,{placeholder:g,errorType:ut.TIP_TYPE.always,size:ut.SIZE.xl,autoResize:!0,...d,onRef:f=>{p.current=f,u&&u(f)},onChange:f=>{c&&c(f.target.value)},customRender:({inputComponent:f})=>{let A=Ce.default.createElement(ne.InputCustomRender,{inputComponent:f,loading:o,tag:t});return e?e({inputComponent:f,customInputComponent:A}):A}}))}var Ta=uS;r();s();var yo=m(h()),Re=m(P()),Hs=m(W()),nl=m(Rt());rt();q();r();s();r();s();var dS=()=>84,ol=dS;var tl=ol;r();s();var el={selected:"_selected_lvccx_1"};function lS({value:o,network:t}){let e=(0,Re.useDispatch)(),n=(0,Re.useSelector)(ln),[i,a]=(0,yo.useState)(!1),[c,u]=(0,yo.useState)({}),[d,p]=(0,yo.useState)(""),g=xd(()=>{p(Os.TYPE.ADD),u({address:o,network:t}),a(!0)}),f=(T={})=>{a(!1),u({}),p(""),T.name&&e(or({name:T.name,type:sa.ADDRESS_BOOK}))},A=T=>{a(!1),setTimeout(()=>{p(Os.TYPE.EDIT),u({...T,network:t}),a(!0)})};return yo.default.createElement(yo.default.Fragment,null,yo.default.createElement(ne.InputBottomBar,{title:b("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:b("wallet_extension_send_anchor_add_now"),buttonClick:g}),yo.default.createElement(Os,{visible:i,type:d,data:c,onClose:f,onChangeToEdit:A,onBackToHome:()=>n}))}function fS({visible:o,options:t,onSelect:e,onChange:n}){let i=(0,Re.useDispatch)();if(!o)return null;let a=({walletId:c,address:u,name:d,type:p,group:g,addressType:f})=>{if(e(),n(u),d){let A=g?`${g} - ${d}`:d;i(or({name:A,type:p,extra:{walletId:c,group:g,name:d,addressType:f}}))}};return yo.default.createElement(ne.SelectAddress,{options:t,onSelect:a})}function pS(o,t,e){let n=e?.matchAddress||((i,a)=>Yn(a.address).includes(Yn(i))||a.name&&Yn(a.name).includes(Yn(i)));return(0,yo.useMemo)(()=>{if(!o?.length)return[];if(!t)return o;let i=[];return o.forEach(({group:a,list:c})=>{let u=[];c.forEach(d=>{n(t,d)&&u.push(d)}),u.length&&i.push({group:a,list:u})}),i},[o,t])}function gS({value:o,error:t,onChange:e,isCheckingError:n,extraProps:i,onBlur:a,onFocus:c,...u}){let d=(0,Re.useDispatch)(),p=No(),{coin:g}=C(),{localType:f}=g,A=(0,Re.useSelector)(jr),T=_(),{filterAddress:I,disableRequestDomain:S}=i||{},x=!o,y=!!o&&!t&&!A?.name&&!n,F=Sd(f,T),E=(0,yo.useMemo)(()=>I?I(F):F,[F,I]),[L,w]=(0,yo.useState)((!o||!!t)&&!y&&E?.length>0),B=pS(E,o,i),M=Td(f),R=N=>{e(N);let Q=M(N),co=Boolean(N&&Q);d(or(co?Q:null))},{loading:X,abort:G}=Vu({domainInputValue:o,coinId:p},({address:N,domain:Q})=>{d(Qr({key:"",args:{}})),e(N),d(or({name:Q,type:sa.ENS}))},S),O=(0,Hs.useDebounce)(!!X||!!u.loading||!!n,{wait:200});(0,Hs.useThrottleEffect)(()=>{n||(!!o&&!t&&B.length===0?w(!1):!!t&&B?.length>0&&w(!0))},[o,t,n,B?.length],{wait:100});let z=tl();return yo.default.createElement("div",{className:(0,nl.default)({[el.selected]:L}),style:{bottom:z}},yo.default.createElement(ne.Row,{noMargin:L},yo.default.createElement(Ta,{...u,noMargin:!0,noPadding:!0,loading:O,tag:A?.name,focus:x,value:o,error:!O&&t,onChange:R,onBlur:N=>{o&&!t&&setTimeout(()=>{w(!1)},100),a&&a(N)},onFocus:N=>{B?.length>0&&w(!0),c&&c(N)}}),y&&yo.default.createElement(lS,{network:f,value:o})),yo.default.createElement(fS,{visible:L,extraProps:i,value:o,options:B,onSelect:()=>{G(),w(!1)},onChange:e}))}var Sa=gS;r();s();var ir=m(h()),ar=m(P());q();function AS({Component:o=Sa,loading:t=!1,extraProps:e,errorFns:n={fns:[],override:!1}}){let i=(0,ar.useDispatch)(),c=et().get("address"),u=(0,ar.useSelector)(io),d=(0,ar.useSelector)($r),p=ju(),{isCheckingError:g,runErrorFns:f}=bn(p,n),A=I=>{f(I,S=>{i(Qr(S))})},T=I=>{A(I),i(ca(I))};return(0,ir.useEffect)(()=>{c&&i(ca(c))},[]),(0,ir.useEffect)(()=>{i(bm(g))},[g]),ir.default.createElement(o,{value:u,onChange:T,loading:t,isCheckingError:g,error:d?.key?b(d?.key,d?.args):null,extraProps:e||{}})}var xa=AS;r();s();var rl={content:"_content_12kl2_1"};function CS({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let n=No(),i=Fs(),a=Yu(),c=Tt(),[u,d]=Qd(),p=(0,Oe.useMemo)(()=>{let{disabled:g,loading:f,onClick:A,...T}=e||{},I=g||i,S=async()=>{let x=A||c;await u(n)&&await x()};return[{disabled:I,size:go.SIZE.lg,type:go.TYPE.highlight,category:go.CATEGORY.fill,btnText:b("wallet_extension_send_btn_next_step"),loading:!I&&(f||a||d),onClick:S,...T}]},[e,i,a,c,u,d,n]);return Oe.default.createElement(Rs,{footerActions:p,slot:{header:Oe.default.createElement(Ld,{...o,title:b("wallet_extension_send_title_recipient_address"),pageIndex:1})}},Oe.default.createElement("div",{className:rl.content},Oe.default.createElement(xa,{...t})))}var Z=CS;var IS=()=>sl.default.createElement(Z,null),il=IS;r();s();var gl=m(h());r();s();var dl=m(h()),ll=m(P()),fl=m(W());r();s();var ml=m(h());Qt();r();s();var al=m(h()),cl=m(P());Ro();function TS({transferType:o,fungibleAssetTransferType:t,tokenTransferType:e}){let{coin:n}=C(),i=(0,cl.useSelector)(io),a=ao(),{baseCoinId:c,protocolType:u,address:d}=n||{};return(0,al.useCallback)(p=>{let{sequenceNumber:g,chainId:f,expirationTimestampSecs:A,tyArg:T,maxGasAmount:I,gasUnitPrice:S}=p||{},x={recipientAddress:i,amount:a},y={base:{sequenceNumber:g,chainId:f,maxGasAmount:I,gasUnitPrice:S,expirationTimestampSecs:A}};return c===0&&(y.type=o,y.data={...x}),c!==0&&u===jn.APTOS_FUNGIBLE_TOKEN&&(y.type=t,y.data={...x,fungibleAssetMetadataAddress:d}),c!==0&&u===jn.APTOS_TOKEN&&(y.type=e,y.data={...x,tyArg:T}),y},[i,a,c,u,d])}var qs=TS;Lr();ve();function SS(){let o=qs({transferType:ce.SIMULATE_TRANSFER,fungibleAssetTransferType:ce.SIMULATE_FUNGIBLE_ASSET_TRANSFER,tokenTransferType:ce.SIMULATE_TOKEN_TRANSFER_V2}),t=to(),e=_();return(0,ml.useCallback)(async n=>{let{info:i={}}=n||{},a=o(i),{AptosWallet:c}=await yc(),u=new c,d=await bo().getPublicKey(e,$n,t);return u.buildSimulateTx({publicKey:d,data:a})},[o,e,t])}var ul=SS;var xS=()=>{let[o,{setFalse:t}]=(0,fl.useBoolean)(!0),{coin:e}=C(),n=_(),i=(0,ll.useDispatch)(),a=ul(),{chainId:c,coinId:u}=e;return(0,dl.useEffect)(()=>{c&&n&&(async()=>{try{let p={coinId:u,chainId:c,address:n},g={fromAddr:n},{maxGasAmount:f,gasUnitPrice:A,fee:T}=await rm(p,g,a);i(K(T)),i(Km({maxGasAmount:f,gasUnitPrice:A})),i(D(!1))}catch{i(D(!0))}finally{t()}})()},[c,n,a]),o},pl=xS;function hS(){let o=pl();return oo(),gl.default.createElement(Y,{confirmButtonProps:{loading:o},totalAmountProps:{type:"amount"}})}var Al=hS;r();s();var wl=m(h());r();s();var Jo=m(h()),cr=m(P());rt();q();r();s();var Cl=m(h()),Il=m(P());fo();function Tl(){let o=(0,Il.useDispatch)(),t=Wt(),e=Ko();(0,Cl.useEffect)(()=>{if(t){let n=e;Mo(n,0)&&(n="0"),o(Pm(n))}},[t,e])}r();s();r();s();var ha=m(h()),Sl=m(Bo());var xl=m(W()),_S=({disabled:o,onSubmit:t,feeLoading:e,loading:n,onClick:i,networkFee:a,renderActions:c,...u},d)=>{let p=(0,Sl.useHistory)(),g=Ot(),{coin:f}=C(),A=_(),{loading:T,onClick:I}=cd(t),S=ad(),x=(0,xl.useCreation)(()=>{if(c&&typeof c=="function"){let y=c(d);if(y)return y}return[{actionType:hs.ACTION_TYPE.CANCEL,onClick:()=>{p.goBack()}},{loading:n||T,disabled:o||S||e,actionType:hs.ACTION_TYPE.CONFIRM,onClick:i||I,"data-testid":"send-confirm-page-confirm-button",...u}]},[e,n,f?.coinId,S,I,o,d,g?.coinId,A,T,i,u]);return ha.default.createElement(Cs,{usePortal:!0,offsetBottom:0,placeholder:!0},ha.default.createElement(hs,{buttonGroup:x}))},hl=_S;var _l=hl;r();s();var yl=m(h());var yS=({loading:o,chainName:t,feeLevel:e,onClick:n,...i},a)=>{let c=J(),u=le(),d=Wo(),p=Ju(),g=_s(),f=ge(),A=n?()=>{n(),a({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,T=(0,yl.useMemo)(()=>e!==void 0?e:jo?.STANDARD,[e]);return{gasReturn:f,currencyId:d,networkFee:p&&c==="0"?void 0:c,loading:o||p,level:T,coinId:u,estimateFailed:!!g,onClick:A,...i}},Fl=yS;r();s();var _a=m(P()),bl=m(W());q();var FS=()=>{let o=Wt(),t=C(),e=(0,_a.useSelector)(_m),n=Wo(),i=t?.coin?.coinId,a=H(),c=_u(i,a,{currencyId:n}),u=(0,_a.useSelector)(Sm);return(0,bl.useCreation)(()=>{let d=0,p=0;return e===vu?o?(p=v.mul(c,-1),d=v.mul(a,-1)):(d=void 0,p=v.mul(u,-1)):(d=v.mul(a,-1),p=void 0),{currencyId:n,coinId:i,assetChange:d,useMinPrecision:!0,currencyAssetChange:p}},[e,n,i,o,c,u,a])},Pl=FS;r();s();var El={coinSummaryItem:"_coinSummaryItem_12y02_1",coinSummaryItemTitle:"_coinSummaryItemTitle_12y02_1"};function bS({loading:o,networkFeeProps:t={},confirmButtonProps:e={},containerProps:n={},tipMessageProps:i={},slot:a={},checkEmpty:c=!0,addressType:u,renderMessage:d,renderTipActions:p,defaultMessage:g,canTransferAmount:f,tipActions:A=[]}){let T=(0,cr.useSelector)(io),I=(0,cr.useSelector)(jr),S=It(),x=Fd(S),y=(0,cr.useSelector)(ym),F=(0,cr.useSelector)(Nm),E=_(),L=Pl(),{coin:w,baseCoin:B}=C(),M=Fl({...t,chainName:w?.chainName},x),{loading:R,estimateFailed:X}=M,O=M?.gasReturn?.activity?.errorCode,{bottom:z,networkFee:N,footer:Q}=a,co=Jo.default.createElement(it,{bordered:!1,verticalPadding:!1},Jo.default.createElement(Ls,{...M}));N&&ea(N)&&(co=N(M)),N&&!ea(N)&&(co=N),Dd(c),Tl(),(0,Jo.useEffect)(()=>{O===0&&um({wallet_address:E,chain_id:B.chainId,transaction_type:"transfer"})},[O]);let ro=_l({...e,feeLoading:R},y?.type||F);return Jo.default.createElement(Rs,{...n,loading:o,className:El.root,slot:{header:Jo.default.createElement(Ad,{...i,address:E,coinId:w?.coinId,actions:A,renderActions:p,renderMessage:d,type:y?.type||F||X&&hd.TIP_TYPE.FEE_ERROR,message:y?.text||!!y?.key&&b(y.key,y?.args)||!X&&g}),footer:Q||ro}},Jo.default.createElement(V.Space,{space:24,direction:V.DIRECTION.vertical},Jo.default.createElement(Cd,{txType:wo.TRANS_OUT},Jo.default.createElement(V.FlexBox,{justify:"center"},Jo.default.createElement(gd,{...L}))),co,Jo.default.createElement(it,{bordered:!1,verticalPadding:!1},Jo.default.createElement(Ca,{address:E,addressType:u,title:b("extension_send_mid_text_from"),walletId:S,onCopyCallback:()=>{x({trade:"send",network:w?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&Jo.default.createElement(wd,{coinBalance:f,coinId:B.coinId})),Jo.default.createElement(Ca,{tags:I?.name?[I?.name]:null,address:T,title:b("extension_send_mid_text_to"),onCopyCallback:()=>{x({trade:"send",all_confirmation:"to_address",network:w?.chainName})}})),z))}var $=bS;r();s();var ya=m(P());ve();fo();var kl=()=>{let{coin:o}=C(),t=_(),e=ao(),n=(0,ya.useSelector)(io),i=(0,ya.useSelector)(Bm),a=to(),{gasUnitPrice:c,maxGasAmount:u}=i,d=qs({transferType:ce.TRANSFER,fungibleAssetTransferType:ce.FUNGIBLE_ASSET_TRANSFER,tokenTransferType:ce.TOKEN_TRANSFER_V2}),p=Po(),g=ho({fromAddr:t,walletId:a,localType:$n}),f=_o({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:n,networkFee:Ho(c,u),localType:$n});return po(async()=>await p({coinId:o.coinId,address:t,fromAddr:t,toAddr:n}),async(y={})=>{let F=d({...y,gasUnitPrice:c,maxGasAmount:u}),E=await g({params:F});return{signInfo:y,signedTx:E}},async({signInfo:y,signedTx:F})=>{let{sequenceNumber:E}=y,L={nonce:E},w={extJson:JSON.stringify(L)};return await f(F,w)},y=>(so({tx_id:y}),y))};function PS(){let o=kl(),t=async()=>{await o()};return eo(),wl.default.createElement($,{confirmButtonProps:{onSubmit:t}})}var Bl=PS;r();s();r();s();var Nl=m(h()),vl=m(P());fo();var ES=()=>{let o=(0,vl.useDispatch)(),{coin:t,baseCoin:e}=C(),{baseCoinId:n}=t,i=J(),a=to(),c=Rd({accountId:a,chainIndex:e?.chainId}),u=Uo(t.coinId,a),d=c?.coinAmountInt,p=u?.coinAmountInt;(0,Nl.useEffect)(()=>{if(!!d){if(n===0){let g=Ye([0,qo(d,i)]);o(Co(g))}else o(Co(p));o(ot(d))}},[o,n,d,p,i])},Ll=ES;var kS=({children:o})=>(Ll(),o),Dl=kS;var wS={match:o=>gm(o),Container:Dl,pages:{AddressPage:il,AmountPage:Al,ConfirmPage:Bl}},Ml=wS;r();s();Ro();r();s();var Gl=m(h());r();s();var mr=m(h()),Rl=m(Bo());Ro();Ao();var BS=()=>{let{coinId:o}=(0,Rl.useParams)(),e=tt(o)?.protocolId,n=Object.values(U),i=Au(),a=i.filter(({keyringIdentityType:f})=>lu(f)),c=i.filter(({keyringIdentityType:f})=>f===Jc.MPC),u=(f,A)=>!f.some(({walletIdentities:T})=>T.some(({addressType:I={}})=>{let S=I[Dr];return S?S.some(({address:x})=>A.address===x):!1})),d=(0,mr.useCallback)(f=>n.includes(e)?u(a,f):!0,[a,e,n]),p=(0,mr.useCallback)(f=>[U.BRC_20,U.FRACTAL_BRC20].includes(e)?!0:n.includes(e)?u(c,f):!0,[c,e,n]),g=(0,mr.useCallback)((f=[])=>f.filter(A=>d(A)&&p(A)),[d,p]);return(0,mr.useCallback)(f=>f.map(A=>({...A,list:g(A?.list)})).filter(A=>A?.list?.length),[g])},Ln=BS;r();s();function NS(){let o=Gt(),t=$u();return[o,t]}var Ol=NS;r();s();var Ks=m(Bo()),Ul=m(W());r();s();function qt(){return et().get("type")||Ht.SEND}var vS=()=>{let[o,{setTrue:t,setFalse:e}]=(0,Ul.useBoolean)(!1),n=_(),i=k(),{coin:a,baseCoin:c}=C(),u=Vt(),{coinId:d}=(0,Ks.useParams)(),p=(0,Ks.useHistory)(),g=qt();return{onClick:async()=>{try{t(),await u({from:n,to:i,method:"wallet_inner_transfer",chainIndex:c?.chainId??a.chainId}),p.push(`${Oo}/${d}${dn}?type=${g}&from=${n}`)}catch{}finally{e()}},loading:o}},Wl=vS;function LS(){let o=Ol(),t=Ln(),{onClick:e,loading:n}=Wl();return Gl.default.createElement(Z,{confirmButtonProps:{onClick:e,loading:n},addressProps:{errorFns:{fns:o,override:!0},extraProps:{filterAddress:t}}})}var Vl=LS;r();s();var xf=m(h());r();s();var at=m(h()),zs=m(P()),Af=m(Bo()),Cf=m(Rt());q();fo();r();s();var uo=m(h()),Ue=m(Rt());q();r();s();var St={container:"_container_c35iq_1",link:"_link_c35iq_6","pending-assets":"_pending-assets_c35iq_11",pendingAssets:"_pending-assets_c35iq_11",amount:"_amount_c35iq_14"};var DS=({lockedAmount:o,lockedAmountDisplay:t,catTotalAmount:e,catTotalAmountDisplay:n,pendingXrc:i,pendingXrcDisplay:a,availableWithoutSpending:c,availableWithoutSpendingDisplay:u,availableReceiving:d,availableReceivingDisplay:p,goToInscribe:g,addressType:f,coinId:A})=>{let{handleClick:T}=Ud(f,A);return uo.default.createElement(uo.default.Fragment,null,uo.default.createElement(V.Box,{className:(0,Ue.default)(St.container)},Number(o)>0&&uo.default.createElement(V.FlexBox,{justify:"space-between"},uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{type:j.TYPE.secondary,size:j.SIZE.xs},b("extension_wallet_btc_in_use"))),uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{className:St.amount},t),uo.default.createElement(j.Text,{size:j.SIZE.xs,className:(0,Ue.default)(St.link),onClick:T},b("extension_wallet_btc_btn_unlock_use")))),Number(i)>0&&uo.default.createElement(V.FlexBox,{justify:"space-between",className:(0,Ue.default)(St.pendingAssets)},uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{type:j.TYPE.secondary,size:j.SIZE.xs},b("extension_wallet_btc_select_receiving"))),uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{className:St.amount},a))),Number(c)>0&&uo.default.createElement(V.FlexBox,{justify:"space-between"},uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{className:St.amount},b("extension_wallet_btc_to_be_inscribed"))),uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{type:j.TYPE.secondary,size:j.SIZE.xs},u),uo.default.createElement(j.Text,{size:j.SIZE.xs,className:(0,Ue.default)(St.link),onClick:g},b("extension_wallet_btc_btn_inscribe")))),Number(d)>0&&uo.default.createElement(V.FlexBox,{justify:"space-between",className:(0,Ue.default)(St.pendingAssets)},uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{type:j.TYPE.secondary,size:j.SIZE.xs},b("extension_wallet_btc_select_receiving"))),uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{className:St.amount},p))),Number(e)>0&&uo.default.createElement(V.FlexBox,{justify:"space-between",className:(0,Ue.default)(St.pendingAssets)},uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{type:j.TYPE.secondary,size:j.SIZE.xs},b("wallet_extension_cat_desc_total_amount"))),uo.default.createElement(V.Box,null,uo.default.createElement(j.Text,{className:St.amount},n)))))},Dn=DS;r();s();function MS(){let o=_(),{coin:t}=C();return Wd(t,o)}var Ie=MS;r();s();var xo=m(h()),Jl=m(P()),Xl=m(Rt());q();r();s();var Pt=m(h()),Fa=m(Rt());q();r();s();var RS="md",OS="lg",Hl=o=>{let{className:t,size:e,disabled:n,checked:i,coinImage:a,coinAmountText:c,inscriptionId:u,onChange:d}=o,p=`inscription-select-container-${e}`,g=n?"inscription-select-disabled":null;return Pt.default.createElement("div",{className:(0,Fa.default)("inscription-select-container",p),onClick:d},n?Pt.default.createElement("div",{className:"inscription-select-confirm"},b("extension_wallet_send_tag_confirming")):null,Pt.default.createElement("div",{className:(0,Fa.default)("inscription-select",g,t)},n?null:Pt.default.createElement("div",{className:"inscription-select-radio-container"},Pt.default.createElement(Sc.Circle,{checked:i})),Pt.default.createElement("div",{className:"inscription-select-coin"},Pt.default.createElement(vr,{className:"inscription-select-coin-image",src:a,errorImg:zr,width:14,height:14}),Pt.default.createElement(Aa,{text:c,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),Pt.default.createElement("div",{className:"inscription-select-id"},Pt.default.createElement(Aa,{text:u,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};Hl.size={md:RS,lg:OS};var Mn=Hl;r();s();var Lo=m(h()),ql=m(W());q();r();s();var Te={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function US(){let{coin:o}=C(),t=Ie();return Lo.default.createElement("div",{className:Te.header},Lo.default.createElement("div",{className:Te.amount},Lo.default.createElement(vr,{className:Te.logo,src:o.image,errorImg:zr,width:20,height:20}),t?.transferableWithoutSpendingDisplay))}function WS({loading:o,list:t,visible:e,onClose:n,value:i,onSelected:a,request:c}){let{coin:u}=C(),[d,p]=(0,Lo.useState)({}),{run:g}=(0,ql.useThrottleFn)(f=>{o||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&c&&c()},{wait:300});return(0,Lo.useEffect)(()=>{e&&p(i)},[e]),Lo.default.createElement(mt,{isFull:!0,topContent:Lo.default.createElement(US,{list:t,value:d,onMax:f=>{p(t.reduce((A,T)=>({...A,[T.inscriptionId]:!f}),{}))}}),footer:Lo.default.createElement(ne.ConfirmButton,{onClick:()=>{a(d)}},b("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:n,renderContent:()=>Lo.default.createElement("div",{className:Te.scrollContent,onScroll:g},Lo.default.createElement("div",{className:Te.content},t.map((f,A)=>Lo.default.createElement("div",{className:Te.cell},Lo.default.createElement(Mn,{key:A,size:Mn.size.lg,coinImage:u.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{p(T=>({...T,[f.inscriptionId]:!T[f.inscriptionId]}))}})))),o&&Lo.default.createElement("div",{className:Te.loading},Lo.default.createElement($e.Circle,{size:$e.SIZE.sm})))})}var Kl=WS;r();s();var Rn={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function GS({loading:o,list:t,request:e,onSelected:n},i){let{coin:a}=C(),[c,u]=(0,xo.useState)(!1),d=(0,Jl.useSelector)(pt),[p,g]=(0,xo.useState)(d.reduce((T,I)=>({...T,[I.inscriptionId]:!0}),{})),{selected:f,showed:A}=(0,xo.useMemo)(()=>{let T=t.filter(S=>!!p[S.inscriptionId]),I=t.filter(S=>!p[S.inscriptionId]);return{selected:T,unselected:I,showed:t.map(S=>T.includes(S)?{...S,checked:!0}:S)}},[t,p]);return(0,xo.useEffect)(()=>{n(f)},[f]),(0,xo.useImperativeHandle)(i,()=>({onMax:()=>{g(t.reduce((T,I)=>({...T,[I.inscriptionId]:!0}),{}))}})),xo.default.createElement(xo.default.Fragment,null,xo.default.createElement("div",{className:Rn.root},xo.default.createElement("div",{className:Rn.title,onClick:()=>{u(!0)}},b("extension_wallet_send_text_select_transferable"),xo.default.createElement(Ze,{className:(0,Xl.default)(Rn.arrow,"okds-arrow-chevron-right-centered-md")})),xo.default.createElement("div",{className:Rn.content},A.map((T,I)=>xo.default.createElement("div",{className:Rn.cell},xo.default.createElement(Mn,{key:I,coinImage:a.image,size:Mn.size.md,coinAmountText:`${T.tokenAmount} ${T.tick}`,inscriptionId:T.inscriptionId,checked:T.checked,onChange:S=>{S.stopPropagation(),g(x=>({...x,[T.inscriptionId]:!x[T.inscriptionId]}))}}))))),xo.default.createElement(Kl,{visible:c,value:p,loading:o,list:t,request:e,onSelected:T=>{g(T),u(!1)},onClose:()=>{u(!1)}}))}var zl=(0,xo.forwardRef)(GS);r();s();var Se=m(h()),Yl=m(P());q();function VS(o){let{coin:t}=C();return(0,Se.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function Zl(){let o=Ot();return t=>{let e="";return t.key&&(e=b(t?.key,t?.args)),t?.type===no.FEE_BALANCE_INSUFFICIENT?Se.default.createElement(Se.default.Fragment,null,e," ",Se.default.createElement(Ae,{coin:o})):t?.type==="inscribe"?Se.default.createElement(Se.default.Fragment,null,e):e}}function HS(o,t){let e=(0,Yl.useDispatch)(),n=Es(),i=VS(t),a=[n,i],{runErrorFns:c}=bn(a);bs(c,u=>{e(Em(u))},o)}var $l=HS;r();s();var jl=m(Bo());var Ql=m(P());function qS(){let o=(0,Ql.useDispatch)(),t=(0,jl.useHistory)(),{coin:e}=C(),n=_();return()=>{o(As()),o(os()),t.push(`${Oo}/${e.coinId}${mn}?type=${Ht.INSCRIBE}&from=${n}`)}}var of=qS;r();s();var nf=m(h()),rf=m(P());r();s();var ur=m(h()),tf=m(P());fo();function ba(){let{baseCoin:o}=C(),t=_(),[,e]=ee({coinId:o.coinId,address:t,chainId:o.chainId},{pollingInterval:20*1e3});return e||{}}function KS(o,t){let i=(()=>255)(),a=o||t?.normal||"0",[c,u]=(0,ur.useState)("0");return(0,ur.useEffect)(()=>{if(i&&a){let d=Ho(i,a);u(d)}},[i,a]),{fee:c,satBytes:a,bytes:i}}function JS(o){let t=(0,tf.useDispatch)(),e=ba(),n=KS(o,e);return(0,ur.useEffect)(()=>{t(bt({name:"signInfo",value:e}))},[e]),{...n,signInfo:e}}var ef=JS;function XS(){let o=(0,rf.useDispatch)(),{fee:t}=ef();(0,nf.useEffect)(()=>{o(K(t))},[t])}var sf=XS;r();s();var uf=m(h()),df=m(P());r();s();var Js=m(h()),cf=m(P());r();s();var af=m(P());function zS(){let{selectedSat:o,signInfo:t}=(0,af.useSelector)(as),e;return o.type===jo.CUSTOM?e=o.satBytes:e=t?.[$c[o.type]],e||0}var Kt=zS;function YS({coinId:o}){let[t,e]=(0,Js.useState)(!0),n=(0,cf.useDispatch)(),i=_(),a=Us({coinId:o}),c=Kt();return(0,Js.useEffect)(()=>{(async()=>{let d;try{d=(await a({from:i,coinAmount:0,serviceCharge:0,feeRate:c})).canTransferAmount||"0"}catch{d="0"}e(!1),n(ot(d))})()},[i,c]),t}var mf=YS;function ZS({coinId:o}={}){let t=(0,df.useDispatch)(),e=Ie(),n=mf({coinId:o});return(0,uf.useEffect)(()=>{t(Co(e?.transferableWithoutSpending))},[e?.transferableWithoutSpending]),n}var lf=ZS;r();s();var On=m(h()),ff=m(P()),pf=m(W());Ro();on();tn();fo();function $S(){let{coin:o,baseCoin:t}=C(),e=_(),n=(0,ff.useSelector)(vt),[i,a]=(0,On.useState)({from:1,size:10});return async()=>{let c={utxoType:st.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:Vr(o.chainId)},u={coinId:t.coinId,utxoRequests:[{...c,...i}]},{data:d}=await Bt(dt.getBTCUTXO,u,{walletSignParams:{needWalletSign:!0,walletId:n}}),p=(d?.[0]?.utxoList||[]).map(f=>({...f,tokenAmountInt:f.tokenAmount,tokenAmount:$o(f.tokenAmount,10**o.decimals)})),g=p.length===i.size;return g&&a(f=>({...f,from:f.from+1})),{list:p,more:g}}}function jS(){let o=(0,On.useRef)(!0),[t,e]=(0,On.useState)(!0),[n,i]=(0,On.useState)([]),a=$S(),c=async()=>{if(!!o.current){e(!0);try{let{more:u,list:d}=await a();i(p=>[...p,...d]),o.current=u}finally{e(!1)}}};return(0,pf.useMount)(()=>{c()}),{list:n,loading:t,request:c}}var gf=jS;r();s();var Xs={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function QS(){let o=(0,Af.useHistory)(),t=(0,zs.useDispatch)(),{coin:e,baseCoin:n}=C(),i=(0,zs.useSelector)(pt),a=of(),c=Zl(),u=qt(),d=_(),p=(0,at.useMemo)(()=>i.reduce((w,{tokenAmount:B})=>lo(w,B),0),[i]),{loading:g,list:f,request:A}=gf(),T=lf({coinId:n.coinId}),I=f.length>0,S=g||T;sf(),$l(S,f);let{availableWithoutSpending:x,availableWithoutSpendingDisplay:y,availableReceiving:F,availableReceivingDisplay:E}=Ie();if(f.length===0&&S)return at.default.createElement("div",{className:Xs.loading},at.default.createElement($e.Circle,{size:$e.SIZE.xl}));let L=at.default.createElement(Cs.FooterActions,{usePortal:!0,className:(0,Cf.default)(Xs.inscribeFooter)},at.default.createElement(go,{block:!0,type:go.TYPE.highlight,size:go.SIZE.lg,onClick:a},b("extension_wallet_btc_btn_inscribe")),at.default.createElement(go,{block:!0,type:go.TYPE.highlight,size:go.SIZE.lg,disabled:!0},b("wallet_extension_send_btn_continue")));return at.default.createElement(Y,{checkEmpty:!1,inputAmount:p,renderError:c,classes:{content:I?Xs.content:""},slot:{bottom:I?at.default.createElement(zl,{loading:S,list:f,request:A,onSelected:w=>{t(bt({name:"brc20UtxoList",value:w}))}}):null,footer:f.length===0&&Number(x)>0?L:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:i.length===0,onClick:()=>{o.push(`${Oo}/${e.coinId}${un}?type=${u}&from=${d}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:b("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:at.default.createElement(at.default.Fragment,null,(Number(x)>0||Number(F)>0)&&at.default.createElement(Dn,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:x,availableWithoutSpendingDisplay:y,availableReceiving:F,availableReceivingDisplay:E,goToInscribe:a}))}}})}var If=QS;r();s();var Tf=m(h()),Ys=m(Bo());function ox(){let{coinId:o}=(0,Ys.useParams)(),t=(0,Ys.useHistory)(),e=qt(),n=_();return Tf.default.createElement(Hd,{onConfirm:()=>{t.push(`${Oo}/${o}${dn}?type=${e}&from=${n}`)}})}var Sf=ox;var tx={[Ht.SEND]:If,[Ht.INSCRIBE]:Sf};function ex(){let o=qt(),t=tx[o];return t?xf.default.createElement(t,null):null}var hf=ex;r();s();var Uf=m(h());r();s();var Vo=m(h()),Ge=m(P()),Df=m(Bo());q();r();s();var dr=m(h());r();s();var Jt=m(h()),_f=m(Rt());q();r();s();var We={"retina-border-basic":"_retina-border-basic_15g95_1",retinaBorderBasic:"_retina-border-basic_15g95_1",utxoTextWrap:"_utxoTextWrap_15g95_29",utxoText:"_utxoText_15g95_29",utxoTextSymbol:"_utxoTextSymbol_15g95_72",utxoTextAmount:"_utxoTextAmount_15g95_75",badge:"_badge_15g95_79"};var nx=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:n,symbol:i}=o;return Jt.default.createElement(V.FlexBox,{justify:"space-between",align:V.ALIGN.center,className:We.utxoTextWrap},Jt.default.createElement(V.FlexBox,{align:V.ALIGN.center},Jt.default.createElement(j.Text,{className:We.utxoText,ellipsis:{tooltip:!0}},t),e&&Jt.default.createElement(Nr,{className:We.badge,color:Nr.COLOR.green,type:Nr.TYPE.rect},b("extension_wallet_transaction_label_signature"))),Jt.default.createElement(V.FlexBox,{align:V.ALIGN.center,className:(0,_f.default)(We.utxoText,We.utxoTextAmount)},Jt.default.createElement(j.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},n),Jt.default.createElement(j.Text,{inherit:!0,strong:!0,className:We.utxoTextSymbol},i)))},yf=(0,Jt.memo)(nx);r();s();var Ff={"retina-border-basic":"_retina-border-basic_7g9ny_1",retinaBorderBasic:"_retina-border-basic_7g9ny_1",utxosBlock:"_utxosBlock_7g9ny_29",utxoBorder:"_utxoBorder_7g9ny_34"};var rx=({utxos:o})=>dr.default.createElement(V.Box,{className:Ff.utxosBlock},o.map((t={},e)=>{let{address:n,coinAmount:i,isNeedToSign:a,symbol:c}=t;return dr.default.createElement(yf,{key:e,address:n,coinAmount:i,isNeedToSign:a,symbol:c})})),Pa=(0,dr.memo)(rx);fo();r();s();var lr=m(P());rt();Ro();r();s();var bf=m(h()),Ea=m(P());Ao();function sx(o){let t=(0,Ea.useSelector)(vt),e=_(),n=(0,Ea.useSelector)(pt),i=Kt(),a=k(),c=Is(t);return(0,bf.useCallback)(async u=>{if(!u.length)return null;let d={address:e,feePerB:i,inputs:[...n.map(({txHash:g,vout:f,coinAmount:A})=>({vOut:f,txId:g,amount:A})),...u.map(({txHash:g,vout:f,coinAmount:A})=>({vOut:f,txId:g,amount:A}))],outputs:[...n.map(({coinAmount:g})=>({amount:g,address:a}))]};return await fu(d,e,Dr,t,{fake:o===Bs.CAL_FEE&&c})},[n,i])}var Pf=sx;function ix(){let o=(0,lr.useDispatch)(),{coin:t,baseCoin:e}=C(),n=(0,lr.useSelector)(pt),i=_(),a=k(),c=J(),u=H(),d=(0,lr.useSelector)(vt),p=Tu(d),g=Wo(),A=Qc(t)?wo.BRC20_SEND:wo.BRC30_SEND,T=Pf(Bs.CONFIRM),I=Us({coinId:e?.coinId}),S=Kt(),x=Bn({address:i,coinId:t.coinId,currencyId:g,txType:A,protocolId:Vr(t.chainId)}),y=_o({}),F=Wu(d),E=async w=>{try{await F();let B=await T(w.utxoList||[]),M=await So(t.localType,B),R=p?.serverWalletType,X={txSource:Nt.NORMAL,toAdr:a,coinId:t.coinId,txHash:M,signedTx:B,walletId:d,serviceCharge:c,fromAdr:i,coinAmount:u,walletType:R,txType:A,extJson:JSON.stringify({nftIds:n.reduce((O,z)=>[...O,...(z.nftLocaltionVOs||[]).map(({nftId:N})=>N)],[])})},G=await y(B,X);so({tx_id:G})}catch(B){B?.error_message&&je.error(B?.error_message)}};return async()=>{let w=await I({from:i,coinAmount:0,serviceCharge:c,feeRate:S}),B=w.utxoList||[];return o(bt({name:"feeUtxoList",value:B||[]})),await x([...n||[],...B||[]],mc),await E(w)}}var Ef=ix;r();s();var kf=m(P());function ax(){let o=(0,kf.useDispatch)(),e=[od()],{runErrorFns:n}=bn(e);bs(n,i=>{o(wm(i))})}var wf=ax;r();s();var Bf=m(h()),fr=m(P());function Nf(){let o=(0,fr.useDispatch)(),t=ba();(0,Bf.useEffect)(()=>{o(bt({name:"signInfo",value:t}))},[t])}function vf(){let o=No(),t=(0,fr.useDispatch)(),e=_(),n=k(),i=to(),a=Kt(),c=(0,fr.useSelector)(pt),[u,d,p]=vs({coinId:o,toAddr:n,walletId:i,fromAddr:e,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:c},{onSuccess:(g,f)=>{t(K(g)),t(bt({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:u,fee:d,feeError:p}}r();s();var Lf={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function cx(){let o=_(),t=k(),e=J(),n=(0,Ge.useSelector)(pt),i=(0,Ge.useSelector)(Om),{baseCoin:a}=C(),c=(p,g)=>p.map(({coinAmount:f})=>({address:ia(g),coinAmount:To(f,{useContractPrecision:!0,contractPrecision:{decimals:a.decimals},precision:a.decimals}).value,symbol:a.symbol})),u=(0,Vo.useMemo)(()=>c([...n,...i],o),[n,i]),d=(0,Vo.useMemo)(()=>{let p=c(n,t),g=i.reduce((f,{coinAmount:A})=>lo(f,A),"0");return ko(g,e)&&p.push({address:ia(o),coinAmount:To(qo(g,e),{useContractPrecision:!0,contractPrecision:{decimals:a.decimals},precision:a.decimals}).value,symbol:a.symbol}),p},[n,i,e]);return Vo.default.createElement(it,{space:32},Vo.default.createElement(Me,{title:b("extension_wallet_transaction_text_input")},Vo.default.createElement(Pa,{utxos:u})),Vo.default.createElement(Me,{title:b("extension_wallet_transaction_text_output")},Vo.default.createElement(Pa,{utxos:d})))}function mx(){let o=(0,Ge.useDispatch)(),[t,e]=(0,Vo.useState)(!1),{coinId:n}=(0,Df.useParams)(),i=Wo(),a=(0,Ge.useSelector)(Um),c=Ef(),{signInfo:u}=(0,Ge.useSelector)(as),d=Fn(),p=Kt(),{feeLoading:g,fee:f,feeError:A}=vf(),T=$o(f,p),I=x=>{o(bt({name:"selectedSat",value:x}))};Nf(),wf();let S=u?.transferReminder;return Vo.default.createElement(Vo.default.Fragment,null,Vo.default.createElement($,{classes:{network:Lf.network},slot:{bottom:Vo.default.createElement(cx,null)},defaultMessage:S,networkFeeProps:{loading:g,estimateFailed:A,feeLevel:a.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:c},canTransferAmount:d}),Vo.default.createElement(Vd,{currencyId:i,bytes:T,value:a,coinId:n,signInfo:u,onChange:I,visible:t,onClose:()=>{e(!1)},supportDecimal:!0}))}var Mf=mx;r();s();var Zs=m(h()),Rf=m(Bo());fo();function ux(){let o=(0,Rf.useHistory)(),t=Ut();return(0,Zs.useEffect)(()=>{Br(t,"0")&&o.go(-1)},[t]),Zs.default.createElement(qd,{onConfirm:()=>{o.replace(Yr)}})}var Of=ux;var dx={[Ht.SEND]:Mf,[Ht.INSCRIBE]:Of};function lx(){let o=qt(),t=dx[o];return t?Uf.default.createElement(t,null):null}var Wf=lx;r();s();var Gf=m(h());function fx({children:o}){let e=et().get("from");return Gf.default.createElement(Eo,{fromAddress:e},o)}var Vf=fx;var px={match:(o,t,e)=>lt({coinId:o})&&[U.BRC_20,U.FRACTAL_BRC20].includes(e),Container:Vf,pages:{AddressPage:hf,AmountPage:Vl,ConfirmPage:Wf}},Hf=px;r();s();r();s();var Jf=m(h());r();s();var gx=()=>{let{initialType:o}=Iu();return async t=>{let{isValid:e}=await Ps(t);return e&&du(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},Ax=()=>[gx()],$s=Ax;r();s();var qf=m(W());var Cx=()=>{let[o,{setTrue:t,setFalse:e}]=(0,qf.useBoolean)(!1),n=_(),i=k(),{coin:a,baseCoin:c}=C(),u=Tt(),d=Vt();return{onClick:async()=>{try{t(),await d({from:n,to:i,method:"wallet_inner_transfer",chainIndex:c?.chainId??a.chainId}),u()}catch{}finally{e()}},loading:o}},Kf=Cx;var Ix=()=>{let o=$s(),t=Ln(),{onClick:e,loading:n}=Kf();return Jf.default.createElement(Z,{confirmButtonProps:{onClick:e,loading:n},addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},Xf=Ix;r();s();var he=m(h());q();Ro();r();s();var Xo=m(h()),xe=m(P());rt();q();Ro();Ao();r();s();r();s();fo();var zf=(o,t)=>!o||!o.length?"0":o.reduce((n,i)=>{let c=(i.nftLocaltionVOs||[]).reduce((u,d)=>d.nftId===t?lo(u,d.value):u,"0");return lo(n,c)},"0"),ka=({address:o,amount:t="0",satAmount:e="0",tokenType:n="FT",atomicalId:i},a=546)=>(e=ko(e,0)?e:t,{address:o,amount:Ne(e,a)?a:Number(e),data:[{atomicalId:i,type:n,amount:Number(t)}]}),Yf=(o,t=546)=>!o||o.length===0?!1:o.some(e=>{let n=e?.data?.[0]?.amount;return n===void 0?!1:Mo(n,t)}),Zf=(o,t=546)=>!o||o.length===0?!1:o.every(e=>{let n=e?.data?.[0]?.amount;return n===void 0?!1:Mo(n,t)});var Sx=()=>{let o=(0,xe.useDispatch)(),t=(0,xe.useSelector)(An),e=(0,Xo.useCallback)(n=>{o(us({selectedNetworkFeeLevel:n}))},[]);return[t?.selectedNetworkFeeLevel,e]},xx=({fromAddr:o,toAddr:t,protocolId:e,minOutput:n,sendAmountInt:i,transferInputs:a})=>{let c=(0,xe.useDispatch)();return(0,Xo.useMemo)(()=>{if(U.ARC_20!==e)return null;if(!a||a.length===0||v.eq(i,0))return c(ma([])),null;let u=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,p=ka({address:t,amount:i,tokenType:u,atomicalId:d},n),g=zf(a,d),f=v.sub(g,i),A=ka({address:o,amount:f,tokenType:u,atomicalId:d},n),T=[];return v.lte(f,0)?T.push(p):v.lt(f,n)?T.push(p,A):v.gte(f,n)&&T.push(A,p),c(ma(T)),T},[e,a,i,t,n,o,c])},hx=({fromAddr:o,toAddr:t,coinTick:e,transferInputs:n,minOutput:i,isXrc20Token:a,protocolId:c,sendAmountInt:u})=>{let d=xx({fromAddr:o,minOutput:i,protocolId:c,sendAmountInt:u,toAddr:t,transferInputs:n});return(0,Xo.useMemo)(()=>!a||U.SRC_20===c||!n?.length?null:U.ARC_20===c&&d?d:U.RUNES===c?[{address:t,amount:i,data:{id:e,amount:u}}]:U.RUNEMAIN===c||U.FRACTAL_RUNES?[{address:t,amount:i,data:{id:e,amount:u}}]:[{address:t,amount:Number(u),...ud(n[0],c)}],[e,a,i,c,u,t,n,d])},_x=({coin:o,coinId:t,walletId:e,protocolId:n,tick:i,address:a,coinAmount:c,isXrc20Token:u})=>{let[,d]=Ns({coinId:t,walletId:e,protocolId:n,tick:i,address:a,coinAmount:c,utxoType:st.BRC20_CONVERTIBLE},{ready:o&&u&&n!==U.SRC_20});return[null,d]},yx=({coinId:o,isXrc20Token:t,sendAmountInt:e,protocolId:n,inscriptionOutput:i})=>(0,Xo.useMemo)(()=>o===22?546:t?n===U.SRC_20?i||790:"0":e,[o,t,e,n,i]),Fx=({coin:o,isXrc20Token:t,protocolId:e,satBytes:n,transferInputs:i})=>(0,Xo.useMemo)(()=>!o||!n?!1:!(e&&t&&e!==U.SRC_20&&!i?.length),[o,t,e,n,i?.length]),bx=({coin:o,protocolId:t})=>(0,Xo.useMemo)(()=>{if(o?.address&&[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(t))return dc(o?.address?.split("-"))},[o?.address,t]),Px=({coin:o,isXrc20Token:t,protocolId:e,sendAmount:n})=>(0,Xo.useMemo)(()=>{if(t&&e===U.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:o?.name,amt:n})}},[o?.name,t,e,n]),Ex=({coinId:o,walletId:t,satBytes:e,address:n,isXrc20Token:i,coinBalance:a})=>{let c=(0,xe.useDispatch)(),[u,d]=rr({coinId:o,walletId:t,satBytes:e,address:n},{onSuccess:p=>{c(o!==22&&!i?Co(p):Co(a?.coinAmountInt)),c(ot(p))}});return[u,d]},kx=({coinId:o,walletId:t,protocolId:e,tick:n,address:i})=>{let a=(0,xe.useDispatch)(),[c,u]=rr({coinId:o,walletId:t,protocolId:e,tick:n,address:i,coinAmount:"0",utxoType:st.BRC20_CONVERTIBLE},{ready:[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(e),onSuccess:d=>{a(Co(d))}});return[c,u]},wx=({coinId:o,toAddr:t,walletId:e,fromAddr:n,satBytes:i,inputs:a,outputs:c,networkFee:u,revealOutValue:d,coinAmount:p,utxoParams:g,inscriptionData:f,isXrc20Token:A,availableFeeCoinAmountInt:T,availableSendCoinAmountInt:I,sendAmountInt:S},{ready:x,networkFeeInt:y})=>{let F=(0,xe.useDispatch)(),[E,L,w]=vs({coinId:o,toAddr:t,walletId:e,fromAddr:n,satBytes:i,inputs:a,outputs:c,networkFee:u,revealOutValue:d,coinAmount:p,utxoParams:g,inscriptionData:f,canTransferAmount:o===22||A?T:I,...o===22?{omni:{coinType:31,amount:S}}:{}},{ready:x,onSuccess:B=>{Math.abs(Number(v.sub(B,y)))!==parseInt(i,10)&&(F(K(B)),F(D(!1)))},onError:B=>{F(D(B))}});return[E,L,w]},Bx=()=>{let o=No(),t=_(),e=k(),n=to(),i=tt(o),a=i?.protocolId,c=dd(a),u=i?.baseCoinId||o,d=te(t,n,i?.localType),p=Ut(),g=J(),f=H(),A=Fn(),T=Ko(),I=ys(),[,S]=ee({protocolId:a,coinId:o,address:t,chainId:i?.chainId}),{inscriptionOutput:x,minOutput:y}=S||{},[F,E]=Sx(),L=F?.satBytes;(0,Xo.useEffect)(()=>{if(!L&&S?.normal&&E({level:jo.STANDARD,satBytes:S?.normal}),L&&F?.level!==jo.CUSTOM){let Be=S[sr[F?.level]?.satBytes];E({...F,satBytes:Be})}},[S]);let w=Uo(o,void 0,{addressType:d}),B=yx({coinId:o,isXrc20Token:c,sendAmountInt:f,protocolId:a,inscriptionOutput:x}),M=bx({coin:i,protocolId:a}),[,R]=_x({coin:i,coinId:o,walletId:n,protocolId:a,tick:M,address:t,coinAmount:f,isXrc20Token:c}),X=hx({fromAddr:t,toAddr:e,coinTick:M,transferInputs:R,minOutput:y,isXrc20Token:c,protocolId:a,sendAmountInt:f}),G=(0,Xo.useMemo)(()=>{if(R?.length)return R.map(({txHash:Be,vout:zn})=>`${Be}-${zn}`)},[R]),O=Fx({coin:i,isXrc20Token:c,protocolId:a,satBytes:L,transferInputs:R}),z=Px({coin:i,isXrc20Token:c,protocolId:a,sendAmount:p}),N=(0,Xo.useMemo)(()=>a===U.SRC_20?{protocolId:a,utxoType:st.BRC20_CONVERTIBLE}:{utxoType:st.TRANSFER,needFilteredUtxo:[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(a)?G:void 0},[G,a]),[Q,co]=Ex({coinId:o,walletId:n,satBytes:L,address:t,isXrc20Token:c,coinBalance:w}),[ro,Do]=kx({coinId:o,walletId:n,protocolId:a,tick:M,address:t}),[_t,,yt]=wx({coinId:o,toAddr:e,walletId:n,fromAddr:t,satBytes:L,inputs:R,outputs:X,networkFee:g,revealOutValue:x,coinAmount:B,utxoParams:N,inscriptionData:z,isXrc20Token:c,availableFeeCoinAmountInt:A,availableSendCoinAmountInt:I,sendAmountInt:f},{ready:O,networkFeeInt:g}),ke=(0,Xo.useMemo)(()=>[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(a)?co===void 0||Do===void 0:co===void 0,[co,a,Do]),we=(0,Xo.useMemo)(()=>i?.chainId!==Gc&&i?.chainId!==Vc||o===22?!1:i&&!a?!0:U.RUNEMAIN===a,[i,o,a]);return{coin:i,toAddr:e,coinId:o,walletId:n,signInfo:S,feeError:yt,fromAddr:t,protocolId:a,baseCoinId:u,feeLoading:_t,addressType:d,sendAmountInt:f,networkFeeInt:g,transferInputs:R,transferOutputs:X,isXrc20Token:c,utxoParams:N,initLoading:ke,mergedCoinAmount:B,src20InscriptionData:z,sendCoinAvailableAmount:T,availableSendCoinAmountInt:I,availableFeeCoinAmountInt:A,selectedNetworkFeeLevel:F,setSelectedNetworkFeeLevel:E,loading:Q||_t||ro,supportDecimal:we}},js=Bx;r();s();var tp=m(h());q();Ro();r();s();var Qf=m(h());q();r();s();r();s();var $f=m(P());var jf=()=>(0,$f.useSelector)(An).transferOutputs;var op=({isArc20Token:o,sendCoinBalance:t,doubleMinOutput:e,minOutput:n,coin:i})=>{let a=jf();return(0,Qf.useCallback)(c=>o?v.lte(t,e)&&c!==t?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:t,token:i?.symbol},type:no.COMMON_ERROR}:Zf(a,n)?{key:"wallet_extension_error_dust_limit_transaction",type:no.COMMON_ERROR}:Yf(a,n)?{key:"wallet_extension_error_dust_asset_continue",type:no.COMMON_TIP}:null:null,[o,t,e,n,i,a])};var ep=o=>{let t=No(),e=tt(t),n=e?.baseCoinId===0,a=e?.protocolId===U.ARC_20,c=v.div(o,10**e?.decimals),u=Ko(),d=v.mul(c,2),p=op({isArc20Token:a,sendCoinBalance:u,doubleMinOutput:d,minOutputFloat:c,minOutput:o,coin:e});return(0,tp.useCallback)(g=>{if(!o)return null;let f=p(g);return f||(n&&v.lt(g,c)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${c} ${e?.symbol}`},type:no.COMMON_ERROR}:null)},[o,p,n,c,e?.symbol])},np=o=>{let t=ep(o);oo([t])},rp=o=>{let t=ep(o);eo([t])};r();s();var ct=m(h());q();var Nx=()=>{let o=Ot(),{coin:t}=C();return(0,ct.useCallback)(n=>{let i="";return n.key&&(i=b(n?.key,n?.args)),n?.type===no.BALANCE_INSUFFICIENT?ct.default.createElement(ct.default.Fragment,null,ct.default.createElement(V.Box,{className:vo.wrap},i),ct.default.createElement(V.Box,{className:vo.wrap},ct.default.createElement(Ae,{coin:t,receiveOnly:!0}))):n?.type===no.FEE_BALANCE_INSUFFICIENT?ct.default.createElement(ct.default.Fragment,null,ct.default.createElement(V.Box,{className:vo.wrap},i),ct.default.createElement(V.Box,{className:vo.wrap},ct.default.createElement(Ae,{coin:o}))):i},[t,o])},sp=Nx;r();s();var ip={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function vx(){let{coin:o,coinId:t,signInfo:e,initLoading:n,addressType:i,fromAddr:a}=js(),{receivedPendingBalance:c,receivedPendingBalanceDisplay:u}=Ie(),{lockedAmount:d}=Gd(a,o),p=To(d,{useContractPrecision:!0,contractPrecision:{decimals:o.decimals},precision:o.decimals,isStableCoin:o.stableCoin}).value;np(e?.minOutput);let g=sp(),f=(0,he.useMemo)(()=>lt({coinId:t})?b("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:o?.symbol}):o?.protocolId===U.SRC_20?b("extension_defi_tooltip_text_balance_udpate"):o?.protocolId===U.ARC_20?b("extension_defi_tooltip_text_utxo_exclude"):o?.protocolId===U.RUNEMAIN||o?.protocolId===U.FRACTAL_RUNES?b("extension_defi_hover_text_avail_balance"):null,[o?.protocolId,o?.symbol,t]);return he.default.createElement(Y,{isGlobalLoading:n,renderError:g,totalAmountProps:{type:"amount",title:he.default.createElement(he.default.Fragment,null,b("extension_defi_text_available_balance"),!!f&&he.default.createElement(Ct,{size:Ct.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:ip["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(c)>0?he.default.createElement(Dn,{lockedAmount:d,lockedAmountDisplay:p,pendingXrc:c,pendingXrcDisplay:u,addressType:i,coinId:t}):void 0}}})}var ap=vx;r();s();var xt=m(h()),Qs=m(P()),cp=m(Bo()),oi=m(W()),mp=m(gu());q();Ro();Kc();var Lx=546;function Dx(){let o=(0,cp.useHistory)(),t=(0,Qs.useDispatch)(),[e,{toggle:n}]=(0,oi.useBoolean)(!1),{coin:i,coinId:a,toAddr:c,loading:u,walletId:d,fromAddr:p,signInfo:g,utxoParams:f,protocolId:A,baseCoinId:T,feeLoading:I,addressType:S,isXrc20Token:x,networkFeeInt:y,sendAmountInt:F,transferInputs:E,transferOutputs:L,mergedCoinAmount:w,availableFeeCoinAmountInt:B,selectedNetworkFeeLevel:M,setSelectedNetworkFeeLevel:R,src20InscriptionData:X,supportDecimal:G}=js(),O=Wo(),z=(0,Qs.useSelector)(ln),N=Gr[i?.localType]?.[S],{showManageUTXO:Q}=Ws(i,N,!0);rp(g?.minOutput,a);let co=Is(d),[ro,Do]=(0,xt.useState)(!1),_t=(0,oi.useMemoizedFn)(kr=>Q&&[Nn.BALANCE_INSUFFICIENT,Nn.FEE_BALANCE_INSUFFICIENT].includes(kr)?[{onClick:async()=>{await t(pn(!1));let Zt=mp.default.stringify({addressType:S,coinId:T},{skipEmptyString:!0,skipNull:!0}),Je=Zt?`?${Zt}`:"";o.push(Zr+Je)},btnText:b("wallet_extension_mid_textbtn_manage_utxo")}]:[]),yt=nr({coinId:a,walletId:d,address:p,utxoType:st.TRANSFER,satBytes:M?.satBytes,...f}),ke=pd({coinId:a,toAddr:c,walletId:d,fromAddr:p,protocolId:A,networkFee:y,localType:i?.localType,outputs:L,inscriptionData:X,dustSize:x?void 0:g?.minOutput,satBytes:M?.satBytes,coinAmount:a===22?Lx:F,...a===22?{omni:{coinType:31,amount:F}}:{},extraPublishParams:{coinAmount:F,txType:x?wo.BRC20_SEND:wo.TRANS_OUT}}),we=Bn({coinId:a,currencyId:O,txType:x?wo.BRC20_SEND:wo.TRANS_OUT,protocolId:A,address:p}),Be=(0,xt.useCallback)(async()=>{if(await wn()){let Zt=[];Zt=await yt(w,y),Zt=[...E||[],...Zt],await we(Zt,()=>{o.goBack()}),Do(!0);let Je=await ke({utxoList:Zt});return so({tx_id:Je}),Je}return Do(!1),Promise.reject()},[yt,w,y,E,we,ke,o,z]),zn=(0,xt.useMemo)(()=>[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(A)&&!E?.length?!0:u,[u,A,E?.length]);return xt.default.createElement(xt.default.Fragment,null,xt.default.createElement($,{addressType:S,confirmButtonProps:{disabled:zn,onSubmit:Be},networkFeeProps:{onClick:n,loading:I,feeLevel:M?.level},renderTipActions:_t,defaultMessage:lt({coinId:T})&&g?.transferReminder,canTransferAmount:lt({coinId:T})&&B}),xt.default.createElement(Ms,{visible:e,coinId:T,signInfo:g,currencyId:O,estimatedFee:y,value:M,onChange:R,onToggleVisible:n,supportDecimal:G}),xt.default.createElement(Bd,{visible:co&&ro}))}var up=Dx;r();s();var dp=m(h());function Mx({children:o}){let e=et().get("from");return dp.default.createElement(Eo,{fromAddress:e},o)}var lp=Mx;var Rx={match:o=>fm(o),Container:lp,pages:{AddressPage:Xf,AmountPage:ap,ConfirmPage:up}},fp=Rx;r();s();Ro();r();s();var Ip=m(h());r();s();var pp=m(h());var Ox=()=>{let o=Ln(),t=e=>e.filter(i=>/^(bc1p)/.test(i.address));return(0,pp.useCallback)(e=>o(e).map(a=>({...a,list:t(a?.list)})).filter(a=>a?.list?.length),[o])},gp=Ox;r();s();var ti=m(Bo()),Ap=m(W());q();var Ux=()=>{let[o,{setTrue:t,setFalse:e}]=(0,Ap.useBoolean)(!1),n=_(),i=k(),{coin:a,baseCoin:c}=C(),u=Vt(),{coinId:d}=(0,ti.useParams)(),p=(0,ti.useHistory)();return{onClick:async()=>{try{t(),await u({from:n,to:i,method:"wallet_inner_transfer",chainIndex:c?.chainId??a.chainId});let{isValid:f}=await Ps(i);if(f)p.push(`${Oo}/${d}${un}?from=${n}`);else{let A=mt.warn({alignBottom:!1,title:b("wallet_extension_cat_dialog_title_risk_non_taproot"),text:b("wallet_extension_cat_dialog_subtitle_risk_non_taproot",{contractType:b("wallet_extension_cat_icu_taproot")}),confirmText:b("wallet_extension_cat_dialog_btn_cancal_transaction"),onConfirm:()=>{A.destroy()}})}}catch{}finally{e()}},loading:o}},Cp=Ux;var Wx=()=>{let{onClick:o,loading:t}=Cp(),e=gp(),n=$s();return Ip.default.createElement(Z,{addressProps:{errorFns:n,extraProps:{filterAddress:e}},confirmButtonProps:{onClick:o,loading:t}})},Tp=Wx;r();s();var Et=m(h()),vp=m(P()),Ba=m(Rt());q();r();s();var Sp=m(h());q();var Gx=o=>{let t=No(),e=tt(t),n=Ut();return(0,Sp.useCallback)(()=>v.gt(n,o)?{key:"wallet_extension_cat_max_send_utxo",args:{num:o,token:e?.symbol},type:no.COMMON_ERROR}:null,[e?.symbol,o,n])},xp=o=>{let t=Gx(o);oo([t])},hp=()=>{eo()};r();s();var nt=m(h()),_e=m(P()),wa=m(W());q();Ro();on();tn();var _p=()=>{let o=(0,_e.useDispatch)(),t=(0,_e.useSelector)(An),e=(0,nt.useCallback)(n=>{o(us({selectedNetworkFeeLevel:n}))},[]);return[t?.selectedNetworkFeeLevel,e]},yp=({coin:o,coinId:t,walletId:e,protocolId:n,tick:i,address:a})=>{let[,c]=Ns({coinId:t,walletId:e,protocolId:n,tick:i,address:a,coinAmount:"0",utxoType:st.BRC20_CONVERTIBLE},{ready:o?.coinId});return[null,c]},Fp=({coin:o})=>(0,nt.useMemo)(()=>{if(!o?.address)return;let t=o.address.indexOf("_"),e=o.address.indexOf("_",t+1);return o.address.slice(e+1)},[o?.address]),bp=({coinId:o,walletId:t,satBytes:e,address:n,coinBalance:i})=>{let a=(0,_e.useDispatch)(),[c,u]=rr({coinId:o,walletId:t,satBytes:e,address:n},{onSuccess:d=>{a(Co(i?.coinAmountInt)),a(ot(d))}});return[c,u]},Pp=({UTXOList:o,coin:t})=>{if(!o||o.length===0)return"0";let e=o.slice(0,4).reduce((n,i)=>{let a=i?.tokenAmount;return v.add(n,a)},"0");return v.div(e,10**t?.decimals)},Vx=({sendAmountInt:o,UTXOList:t})=>(0,nt.useMemo)(()=>{if(!t||!Number(o))return[];let e=[],n="0";for(let i=0;i<t.length;i++){let a=t[i],c=a?.tokenAmount;if(n=v.add(n,c),e.push(a),v.gte(n,o))break}return e},[t,o]),Hx=({selectedUtxo:o,signInfo:t,chainIndex:e,walletId:n})=>{let i=t?.extInfo?.tokenAddr,a=t?.extInfo?.minterAddr,c=(0,_e.useDispatch)(),{error:u,loading:d,data:p}=(0,wa.useRequest)(async()=>{if(!o||o.length===0)return[];if(!i||!a)return[];let g=o.map(T=>({txHash:T.txHash,tokenAddress:i,minterAddress:a,chainIndex:e})),A=(await Bt(dt.getCat20GrandFatherRawTx,{rawTxRequestList:g},{walletSignParams:{needWalletSign:!0,walletId:n}}))?.data;if(A&&!A.find(T=>T.txStatus!==0))return A;throw c(D(!0)),hc.error({title:b("wallet_extension_cat_toast_error_service")}),new Error},{debounceWait:500,refreshDeps:[o]});return[u,d,p]},qx=({signInfo:o,selectedUtxo:t,grandFatherRawTxs:e,address:n})=>(0,nt.useMemo)(()=>{if(!o||!e||!e.length)return null;let i=o?.extInfo,a={minterAddr:i?.minterAddr,tokenAddr:i?.tokenAddr,info:{max:i?.max,name:i?.name,limit:i?.limit,symbol:i?.symbol,premine:"0",decimals:i?.decimals,minterMd5:i?.minterMd5},tokenId:i?.tokenId,revealTxid:i?.revealTxid,revealHeight:i?.revealHeight,genesisTxid:i?.genesisTxid,name:i?.name,symbol:i?.symbol,decimals:i?.decimals,minterPubKey:i?.minterPubKey,tokenPubKey:i?.tokenPubKey},c=t.map(d=>({utxo:{txId:d.txHash,outputIndex:d.vout,script:i?.script,satoshis:String(d.coinAmount)},txoStateHashes:d.stateHashArray,state:{address:n,amount:d.tokenAmount}})),u=e.map(d=>({prevTx:d?.rawTx,prevPrevTx:d?.parentRawTx}));return{tokenMetadata:a,tokens:c,tokenPrevTxs:u}},[o,e,t,n]),Kx=({coinId:o,fromAddr:t,toAddr:e,satBytes:n,coinAmount:i,protocolId:a,CAT20TxParam:c,networkFeeInt:u,walletId:d,...p})=>{let g=(0,_e.useDispatch)(),f=ld({coinId:o,fromAddr:t,toAddr:e,satBytes:n,coinAmount:i,protocolId:a,...p}),A=nr({coinId:o,address:t,walletId:d,utxoType:st.TRANSFER}),T=async()=>{g(mo(!0));let x=[{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:0,amount:10*10**8},{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:1,amount:3e5}],y=JSON.stringify(c?.tokenMetadata),F=JSON.stringify(c?.tokens),E=c?.tokenPrevTxs,{commitTx:L,revealTx:w}=await f({feeInputs:x,tokenMetadata:y,tokens:F,tokenPrevTxs:E}),B=v.add(L,w);if(x=await A(B),x=x.map(O=>({txId:O.txHash,vOut:O.vout,amount:O.coinAmount})),x.length===1)return g(mo(!1)),{mergeTx:"0",commitTx:L,revealTx:w};let M=await f({feeInputs:x,tokenMetadata:y,tokens:F,tokenPrevTxs:E}),R=M.mergeTx,X=v.add(R,B),G=x.reduce((O,z)=>{let N=z?.amount;return v.add(O,N)},"0");for(;v.lt(G,X);)x=await A(X),x=x.map(O=>({txId:O.txHash,vOut:O.vout,amount:O.coinAmount})),G=x.reduce((O,z)=>{let N=z?.amount;return v.add(O,N)},"0"),M=await f({feeInputs:x,tokenMetadata:y,tokens:F,tokenPrevTxs:E}),R=M.mergeTx,X=v.add(R,B);return g(mo(!1)),{mergeTx:R,commitTx:L,revealTx:w}},{error:I,data:S}=(0,wa.useRequest)(async()=>await T(),{debounceWait:500,ready:!!n&&!!c,refreshDeps:[n],onSuccess:x=>{let y=v.add(v.add(x.mergeTx,x.commitTx),x.revealTx);Math.abs(Number(v.sub(y,u)))!==parseInt(n,10)&&(g(K(y)),g(D(!1)))},onError:x=>{g(D(x))}});return[I,S]},Ep=()=>{let o=No(),t=_(),e=to(),n=tt(o),i=n?.protocolId,a=te(t,e,n?.localType),c=H(),u=Ko(),d=(0,nt.useMemo)(()=>To(u,{precision:n?.decimals}).value,[u,n?.decimals]),[,p]=ee({protocolId:i,coinId:o,address:t,chainId:n?.chainId}),[g,f]=_p(),A=g?.satBytes;(0,nt.useEffect)(()=>{if(!A&&p?.normal&&f({level:jo.STANDARD,satBytes:p?.normal}),A&&g?.level!==jo.CUSTOM){let L=p[sr[g?.level]?.satBytes];f({...g,satBytes:L})}},[p]);let T=Uo(o,void 0,{addressType:a}),I=Fp({coin:n}),[,S]=yp({coin:n,coinId:o,walletId:e,protocolId:i,tick:I,address:t,coinAmount:c}),x=Pp({coin:n,UTXOList:S}),[y,F]=bp({coinId:o,walletId:e,satBytes:A,address:t,coinBalance:T}),E=(0,nt.useMemo)(()=>F===void 0,[F]);return{initLoading:E,loading:y||E,sendCoinAvailableAmount:u,CAT20CanTransferAmount:x,displaySendCoinAvailableAmount:d}},kp=()=>{let o=No(),t=_(),e=k(),n=to(),i=tt(o),a=i?.protocolId,c=i?.baseCoinId||o,u=te(t,n,i?.localType),d=Ut(),p=J(),g=H(),f=Fn(),A=Ko(),T=ys(),[,I]=ee({protocolId:a,coinId:o,address:t,chainId:i?.chainId}),[S,x]=_p(),y=S?.satBytes,F=(0,_e.useDispatch)();(0,nt.useEffect)(()=>{F(mo(!0))},[F]),(0,nt.useEffect)(()=>{if(!y&&I?.normal&&x({level:jo.STANDARD,satBytes:I?.normal}),y&&S?.level!==jo.CUSTOM){let ro=I[sr[S?.level]?.satBytes];x({...S,satBytes:ro})}},[I]);let E=Uo(o,void 0,{addressType:u}),L=Fp({coin:i}),[,w]=yp({coin:i,coinId:o,walletId:n,protocolId:a,tick:L,address:t,coinAmount:g}),B=Pp({coin:i,UTXOList:w}),M=Vx({sendAmountInt:g,UTXOList:w}),[R,X,G]=Hx({selectedUtxo:M,signInfo:I,chainIndex:i?.chainId,walletId:n}),O=qx({signInfo:I,selectedUtxo:M,grandFatherRawTxs:G,address:t}),[,z]=Kx({coinId:o,fromAddr:t,toAddr:e,satBytes:y,coinAmount:g,protocolId:a,CAT20TxParam:O,networkFeeInt:p,walletId:n}),[N,Q]=bp({coinId:o,walletId:n,satBytes:y,address:t,coinBalance:E}),co=(0,nt.useMemo)(()=>Q===void 0,[Q]);return{coin:i,toAddr:e,coinId:o,walletId:n,signInfo:I,satBytes:y,fromAddr:t,protocolId:a,baseCoinId:c,addressType:u,sendAmount:d,sendAmountInt:g,networkFeeInt:p,feeData:z,selectedUtxo:M,initLoading:co,rawTxError:R,sendCoinAvailableAmount:A,availableSendCoinAmountInt:T,availableFeeCoinAmountInt:f,selectedNetworkFeeLevel:S,setSelectedNetworkFeeLevel:x,CAT20CanTransferAmount:B,CAT20GrandFatherRawTxs:G,CAT20TxParam:O,loading:N||X}},wp=({coinId:o,toAddr:t,fromAddr:e,satBytes:n,walletId:i,localType:a,networkFee:c,coinAmount:u,coinAmountInt:d,protocolId:p,dustSize:g=md,feeData:f,CAT20TxParam:A,history:T,...I})=>{let S=tt(o),x=Wo(),y=to(),F=i||y,E=dm(a),L=nr({coinId:o,address:e,utxoType:st.TRANSFER,walletId:F}),w=Bn({coinId:o,currencyId:x,txType:wo.BRC20_SEND,protocolId:p,address:e}),B=fd({coinId:o,toAddr:t,walletId:i,fromAddr:e,satBytes:n,localType:E,coinAmount:d,networkFee:c,dustSize:g,protocolId:p,...I}),M=Uu({walletId:F});return(0,nt.useCallback)(async()=>{let R=await L(c),X=R.map(ta=>({txId:ta.txHash,vOut:ta.vout,amount:ta.coinAmount}));await w(R,()=>{T.goBack()});let G=JSON.stringify(A?.tokenMetadata),O=JSON.stringify(A?.tokens),z=A?.tokenPrevTxs,N=await B({feeInputs:X,tokenMetadata:G,tokens:O,tokenPrevTxs:z}),{mergeTx:Q,commitTx:co,revealTx:ro}=N,Do=[],_t=JSON.stringify({protocolId:U.CAT20,broadcastType:1,nftIds:[]}),yt,ke=await So(a,co),we=await So(a,ro);Q&&(yt=await So(a,Q));let Be={signedTx:Q,fromAdr:e,toAdr:e,serviceCharge:f.mergeTx,coinAmount:"0",coinId:S?.baseCoinId,txHash:yt,txType:wo.CAT20_NOT_SHOWN,dependTx:[],itemId:"mergeTx",extJson:_t},zn={signedTx:co,fromAdr:e,toAdr:"bc1p2t67cfrgz5fg38mktge38d6x5r5jkqwl8a8ysszzx6gx58l5vtlqj3zpvh",serviceCharge:f.commitTx,coinAmount:"332",coinId:S?.baseCoinId,txHash:ke,txType:wo.CAT20_NOT_SHOWN,dependTx:yt?[yt]:[],itemId:"commitTx",extJson:_t},kr={signedTx:ro,fromAdr:e,toAdr:t,serviceCharge:f.revealTx,coinAmount:d,coinId:o,txHash:we,txType:wo.BRC20_SEND,dependTx:[ke],itemId:"revealTx0",extJson:_t};Q&&Do.push(Be),Do.push(zn,kr);let Je=(await M(Do))[we];so({tx_id:Je})},[L,c,w,A?.tokenMetadata,A?.tokens,A?.tokenPrevTxs,B,a,e,f,S?.baseCoinId,t,d,o,M,T])};r();s();var Io=m(h());q();var Bp=m(Rt()),Jx=()=>{let o=Ot(),{coin:t}=C();return(0,Io.useCallback)(n=>{let i="";if(n.key&&(i=b(n?.key,n?.args)),n?.type===no.BALANCE_INSUFFICIENT)return Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(V.Box,{className:vo.wrap},i),Io.default.createElement(V.Box,{className:vo.wrap},Io.default.createElement(Ae,{coin:t,receiveOnly:!0})));if(n?.type===no.FEE_BALANCE_INSUFFICIENT)return Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(V.Box,{className:vo.wrap},i),Io.default.createElement(V.Box,{className:vo.wrap},Io.default.createElement(Ae,{coin:o})));let a=()=>{mt.action({title:" ",children:Io.default.createElement("div",{className:vo.dlgContainer},Io.default.createElement("div",{className:vo.dlgTitle},b("wallet_extension_cat_drawer_title_utxo_meaning")),Io.default.createElement("div",{className:vo.dlgContent},b("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Io.default.createElement("div",{className:(0,Bp.default)(vo.dlgTitle,vo.dlgGap)},b("wallet_extension_cat_drawer_title_cat_contract")),Io.default.createElement("div",{className:vo.dlgContent},b("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:b("commonall_button_text_next"),onConfirm:c=>{c.destroy()}})};return n?.key==="wallet_extension_cat_max_send_utxo"?Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(V.Box,{className:vo.wrap},i,Io.default.createElement(Ze,{className:"okx-wallet-plugin-information-circle",onClick:a}))):i},[t,o])},Np=Jx;r();s();var Xt={"can-transfer-container":"_can-transfer-container_1cknb_1",canTransferContainer:"_can-transfer-container_1cknb_1","can-transfer-icon":"_can-transfer-icon_1cknb_5",canTransferIcon:"_can-transfer-icon_1cknb_5","dlg-container":"_dlg-container_1cknb_10",dlgContainer:"_dlg-container_1cknb_10","dlg-title":"_dlg-title_1cknb_13",dlgTitle:"_dlg-title_1cknb_13","dlg-content":"_dlg-content_1cknb_20",dlgContent:"_dlg-content_1cknb_20","dlg-gap":"_dlg-gap_1cknb_26",dlgGap:"_dlg-gap_1cknb_26"};function Xx(){let{initLoading:o,loading:t,sendCoinAvailableAmount:e,CAT20CanTransferAmount:n,displaySendCoinAvailableAmount:i}=Ep();xp(n);let a=Np(),c=(0,vp.useDispatch)(),u=ks(),d=()=>{c(km(!1)),u()},p=()=>{mt.action({title:" ",children:Et.default.createElement("div",{className:Xt.dlgContainer},Et.default.createElement("div",{className:Xt.dlgTitle},b("wallet_extension_cat_drawer_title_utxo_meaning")),Et.default.createElement("div",{className:Xt.dlgContent},b("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Et.default.createElement("div",{className:(0,Ba.default)(Xt.dlgTitle,Xt.dlgGap)},b("wallet_extension_cat_drawer_title_cat_contract")),Et.default.createElement("div",{className:Xt.dlgContent},b("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:b("commonall_button_text_next"),onConfirm:g=>{g.destroy()}})};return Et.default.createElement(Y,{isGlobalLoading:o,renderError:a,customMaxAmount:n,confirmButtonProps:{loading:t,onClick:d},totalAmountProps:{maxAmount:n,type:"amount",title:Et.default.createElement("div",{className:Xt.canTransferContainer},Et.default.createElement("div",{className:Xt.canTransferText},b("wallet_extension_cat_desc_available_utxo")),Et.default.createElement(Ze,{className:(0,Ba.default)(Xt.canTransferIcon,"okx-wallet-plugin-information-circle"),onClick:p})),slot:{bottom:Et.default.createElement(Dn,{catTotalAmount:e,catTotalAmountDisplay:i})}}})}var Lp=Xx;r();s();var re=m(h()),Dp=m(P()),Mp=m(Bo()),ei=m(W()),Rp=m(gu());q();Kc();function zx(){let o=(0,Mp.useHistory)(),t=(0,Dp.useDispatch)(),[e,{toggle:n}]=(0,ei.useBoolean)(!1),{coin:i,coinId:a,toAddr:c,loading:u,walletId:d,fromAddr:p,signInfo:g,satBytes:f,sendAmount:A,sendAmountInt:T,protocolId:I,baseCoinId:S,addressType:x,networkFeeInt:y,feeData:F,selectedUtxo:E,availableFeeCoinAmountInt:L,selectedNetworkFeeLevel:w,setSelectedNetworkFeeLevel:B,CAT20TxParam:M}=kp(),R=wp({coinId:a,toAddr:c,fromAddr:p,satBytes:f,walletId:d,feeData:F,localType:i?.localType,networkFee:y,coinAmount:A,coinAmountInt:T,protocolId:I,CAT20TxParam:M,history:o}),X=Wo(),G=Gr[i?.localType]?.[x],{showManageUTXO:O}=Ws(i,G,!0);hp();let z=(0,ei.useMemoizedFn)(co=>O&&[Nn.BALANCE_INSUFFICIENT,Nn.FEE_BALANCE_INSUFFICIENT].includes(co)?[{onClick:async()=>{await t(pn(!1));let ro=Rp.default.stringify({addressType:x,coinId:S},{skipEmptyString:!0,skipNull:!0}),Do=ro?`?${ro}`:"";o.push(Zr+Do)},btnText:b("wallet_extension_mid_textbtn_manage_utxo")}]:[]),N=(0,re.useCallback)(async()=>{await R()},[R]),Q=(0,re.useMemo)(()=>!E?.length||u,[u,E?.length]);return re.default.createElement(re.default.Fragment,null,re.default.createElement($,{addressType:x,confirmButtonProps:{disabled:Q,onSubmit:N},networkFeeProps:{onClick:n,feeLevel:w?.level},renderTipActions:z,defaultMessage:lt({coinId:S})&&g?.transferReminder,canTransferAmount:lt({coinId:S})&&L}),re.default.createElement(Ms,{visible:e,coinId:S,signInfo:g,currencyId:X,estimatedFee:y,value:w,onChange:B,onToggleVisible:n}))}var Op=zx;r();s();var Up=m(h());function Yx({children:o}){let e=et().get("from");return Up.default.createElement(Eo,{fromAddress:e},o)}var Wp=Yx;var Zx={match:(o,t,e)=>lt({coinId:o})&&[U.CAT_20].includes(e),Container:Wp,pages:{AddressPage:Tp,AmountPage:Lp,ConfirmPage:Op}},Gp=Zx;r();s();Ao();r();s();var og=m(h());var si=m(P());var va=m(W());q();r();s();var Kp=m(h()),Jp=m(W());r();s();q();Lr();rt();var Vp=(o,t)=>{let[e,n]=o?.split("-");return[{policyId:e,assets:[{amount:t,assetName:n}]}]},$x=(o,t)=>gc(fc([...o,...t],"assetName")).map(n=>{let i=o.find(c=>c?.assetName===n),a=t.find(c=>c?.assetName===n);return{assetName:n,amount:v.add(i?.amount||0,a?.amount||0)}}),jx=o=>{let t=o.reduce((n,i)=>{let{multiAsset:a}=i;return a?.length?[...n,...a]:n},[]),e=[];return t.forEach(n=>{let{policyId:i,assets:a}=n,c=lc(e,{policyId:i});if(c!==-1){let{assets:u}=e[c];e[c]={policyId:i,assets:$x(a,u)}}else e=[...e,n]}),e},Hp=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:n,contractAddress:i})=>{let{AdaWallet:a}=await Zn(),c;return e===0&&t?.some(({multiAsset:u})=>!!u?.length)?c=jx(t):e!==0&&(c=Vp(i,n)),a.minAda(o,c)},qp=async o=>{let{AdaWallet:t}=await Zn();return t.minFee(o)},Qx="999999999",oh="transfer",ni=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:n,baseCoinId:i,contractAddress:a,minTransferAmountInt:c})=>{let u={address:o,inputs:t,ttl:Qx,type:oh,changeAddress:e};return i===0?u={...u,amount:n}:u={...u,amount:c,multiAsset:Vp(a,n)},u};var th=({utxoList:o,toAddr:t,fromAddr:e,coinId:n,sendAmount:i,minTransferAmountInt:a},c)=>{let u=tt(n),[d,p]=(0,Kp.useState)("0");return(0,Jp.useDeepCompareEffect)(()=>{(async()=>{if(!o?.length)return;let g=ni({toAddr:t,fromAddr:e,utxoList:o,contractAddress:u?.address,baseCoinId:u?.baseCoinId,sendAmount:i,minTransferAmountInt:a});try{let f=await qp({data:g});c?.(f),p(f)}catch(f){console.log(f)}})()},[u,t,e,i,a,o]),d},Xp=th;r();s();var Zp=m(h()),$p=m(W());r();s();var Yp=m(W());q();on();tn();r();s();var zp=m(Bo());var eh=()=>{let{coinId:o}=(0,zp.useParams)(),t=_(),e=to(),[n,i]=hu(o);return{address:t,walletId:e,coin:n||{},coinId:Number(o),baseCoin:i||{},baseCoinId:n?.baseCoinId}},Un=eh;var nh=()=>{let o=pe(),{coin:t,coinId:e,walletId:n,address:i}=Un(),a=t?.baseCoinId;return(0,Yp.useMemoizedFn)(async(c,u,d)=>{let p=u,g=c,f=v.add(v.add(a===0?c:d,u),d);a===0&&v.gte(f,o)&&(g=o,p="0"),a!==0&&(p=v.add(u,v.add(d,d)));let A={coinId:e,address:i,fee:p,amount:g},{data:T}=await Bt(dt.getSpecialUtxoList,A,{walletSignParams:{needWalletSign:!0,walletId:n}});return T},[e,n,i,a,o])},ri=nh;var rh=(o,t,e)=>{let[n,i]=(0,Zp.useState)([]),a=ri();return(0,$p.useDeepCompareEffect)(()=>{(async()=>{let c=await a(o,t,e);i(c)})()},[o,t,e,a]),n},jp=rh;r();s();var Na=m(W());q();var sh=o=>{let t=C(),{coin:{symbol:e,baseCoinId:n,decimals:i}}=t,a=v.div(o,10**i);return(0,Na.useMemoizedFn)(c=>n===0&&v.gt(a,0)&&v.lt(c,a)?{key:"wallet_extension_send_transfer_at_least",args:{amount:To(a,{precision:i,symbol:e}).value},type:no.COMMON_ERROR}:null,[a,e,n])},ih=o=>{let t=Ot(),{coin:e}=C(),n=J(),i=pe(),{baseCoinId:a}=e;return(0,Na.useMemoizedFn)(c=>{let u=v.mul(c,10**e?.decimals),d,p;a===0?(p=v.add(v.add(u,n),o),d=v.add(u,n)):(p=v.add(v.add(n,o),o),d=v.add(n,o));let g=v.sub(i,d);return Number(g)!==0&&v.lt(g,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:To(p,{useContractPrecision:!0,contractPrecision:{decimals:t?.decimals},precision:t?.decimals}).value},type:no.COMMON_ERROR}:null},[a,n,i,t?.decimals,e?.decimals])},ah=o=>{let t=sh(o),e=ih(o);oo([t,e])},Qp=ah;function ch(){let o=(0,si.useDispatch)(),t=J(),n=(0,si.useSelector)(ts)?.minTransferInt,i=H(),a=k(),c=pe(),{coin:u,coinId:d,baseCoinId:p,address:g}=Un(),f=jp(i,t,n);return(0,va.useDeepCompareEffect)(()=>{(async()=>{let A=await Hp({contractAddress:u?.address,baseCoinId:p,utxoList:f,toAddr:a,sendAmountInt:i});o(Ym({minTransferInt:A}))})()},[f,p,a,i,u?.address]),(0,va.useDeepCompareEffect)(()=>{p===0&&f?.some(({multiAsset:A})=>!!A?.length)&&o(Co(v.sub(c,n)))},[f,c,n]),Qp(n),Xp({coinId:d,toAddr:a,utxoList:f,fromAddr:g,minTransferAmountInt:n,sendAmount:i},A=>{o(K(A))}),og.default.createElement(Y,null)}var tg=ch;r();s();var sg=m(h());r();s();var eg=m(P()),ng=m(W());q();var mh=()=>{let t=(0,eg.useSelector)(ts)?.minTransferInt,{coin:e,coinId:n,address:i,walletId:a}=Un(),c=yn(a),u=H(),d=k(),p=J(),g=_o({}),f=ri(),A=ho({fromAddr:i,walletId:a,localType:e?.localType});return(0,ng.useMemoizedFn)(async()=>{try{let I=await f(u,p,t),S=ni({toAddr:d,fromAddr:i,utxoList:I,minTransferAmountInt:t,sendAmount:u,baseCoinId:e?.baseCoinId,contractAddress:e?.address}),x=await A({params:S}),y=await So(e?.localType,x),F={coinId:n,txHash:y,signedTx:x,walletId:a,toAdr:d,serviceCharge:p,fromAdr:i,coinAmount:u,walletType:c?.serverWalletType},E=await g(x,F);so({tx_id:E})}catch(I){je.error(I?.error_message||b("wallet_home_toast_network_error"))}},[e,u,d,t,p,c?.serverWalletType,f])},rg=mh;function uh(){let o=rg();return eo(),sg.default.createElement($,{confirmButtonProps:{onSubmit:o}})}var ig=uh;var dh={match:o=>o===Mc,pages:{AmountPage:tg,ConfirmPage:ig,AddressPage:Z}},ag=dh;r();s();r();s();var mg=m(h());r();s();rt();Ao();var lh=()=>{let o=Gt(),t=Am(),e=Ss({factionType:Or});return[o,async n=>(await Promise.all(t.map(c=>{let u=Hr(e,c);return fe(n,c,u)}))).some(cc)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},cg=lh;var fh=()=>{let o=cg();return mg.default.createElement(Z,{addressProps:{errorFns:{fns:o,override:!0}}})},ug=fh;r();s();var pg=m(h());r();s();var lg=m(P()),ai=m(W());fo();r();s();Qt();fo();var ph=async({memo:o,fromAddress:t,toAddress:e,amountInt:n,isIBCTransfer:i,chain:a,signInfo:c,walletId:u})=>{let{chainId:d,sequence:p,accountNumber:g,feeDemon:f,demon:A,sourceChannel:T,normal:I,gasLimit:S}=c,x={chainId:d,sequence:p,accountNumber:g,feeDemon:f,feeAmount:Ho(I,S),gasLimit:S,memo:o,fake:!0},y={fromAddress:t,toAddress:e,demon:A,amount:n},F={};if(i){let L=lo(Math.round(Date.now()/1e3),300);F={...x,type:en.IBC_TRANSFER,data:{...y,sourcePort:"transfer",sourceChannel:T,ibcTimeoutTimestamp:L}}}else F={...x,type:en.TRANSFER,data:{...y}};return await bo().signTransaction(F,t,a?.baseChain,u,{chain:a.localType})},dg=ph;r();s();var ii=m(h());Ao();function La(){let{baseCoin:o}=C(),t=k(),[e,n]=(0,ii.useState)(!1),i=Ss({factionType:Or});return(0,ii.useEffect)(()=>{(async()=>{let c=Hr(i,o.coinId),u=await fe(t,o?.coinId,c);n(!u)})()},[o,t]),e}var gh=()=>{let o=(0,lg.useDispatch)(),[t,{setFalse:e}]=(0,ai.useBoolean)(!0),{coin:n}=C(),{coinId:i}=n,a=_(),c=k(),u=ao(),d=La(),p=xs({localType:n?.localType}),g=to(),f=Wt();return(0,ai.useDebounceEffect)(()=>{i&&c&&u!=="0"&&p?.localType&&(async()=>{try{let T=await sm({coinId:i,from:a,to:c}),I=await dg({memo:"",fromAddress:a,toAddress:c,amountInt:f?"0":u,isIBCTransfer:d,chain:p,signInfo:T,walletId:g}),S=await im({coinId:i,from:a,inputData:I}),x=Math.ceil(Ho(T.normal,S));o(K(x)),o(gs({inputData:I,signInfo:T,gasLimit:S,isIBCTransfer:d})),o(D(!1))}catch{o(D(!0))}finally{e()}})()},[i,a,c,u,d,p?.localType,f]),t},fg=gh;function Ah(){let o=fg();return oo(),pg.default.createElement(Y,{confirmButtonProps:{loading:o}})}var gg=Ah;r();s();var kt=m(h()),mi=m(P()),Ig=m(W());r();s();var ye=m(h()),Ag=m(Rt());q();r();s();var Wn={"retina-border-basic":"_retina-border-basic_13q86_1",retinaBorderBasic:"_retina-border-basic_13q86_1","memo-input":"_memo-input_13q86_29",memoInput:"_memo-input_13q86_29","memo-input-box":"_memo-input-box_13q86_29",memoInputBox:"_memo-input-box_13q86_29","memo-input-core":"_memo-input-core_13q86_32",memoInputCore:"_memo-input-core_13q86_32","memo-title__link":"_memo-title__link_13q86_35",memoTitleLink:"_memo-title__link_13q86_35","memo-title__link__dashed":"_memo-title__link__dashed_13q86_39",memoTitleLinkDashed:"_memo-title__link__dashed_13q86_39"};var Ch=({value:o,onChange:t,placeholder:e,title:n=b("wallet_extension_title_memo_optional"),dashed:i=!0,error:a,errorType:c,maxLength:u=256})=>{let d=pu();return ye.default.createElement(it,{bordered:!1},ye.default.createElement(Me,{title:ye.default.createElement(mu,{href:d?.sendMemoInput,className:(0,Ag.default)(Wn["memo-title__link"],{[Wn["memo-title__link__dashed"]]:i})},ye.default.createElement(j.Text,{inherit:!0},n))},ye.default.createElement(ut.TextArea,{placeholder:e||b("wallet_extension_input_memoinfro"),size:ut.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:u,error:a,errorType:c,className:Wn["memo-input"],inputClassName:Wn["memo-input-core"],innerClassName:Wn["memo-input-box"]})))},zt=(0,ye.memo)(Ch);r();s();var ci=m(P());fo();Qt();var Ih=o=>{let{coin:t}=C(),e=_(),n=ao(),i=(0,ci.useSelector)(io),a=(0,ci.useSelector)(Qo),{gasLimit:c,signInfo:u,isIBCTransfer:d,gasPrice:p}=(0,ci.useSelector)(cs),g=xs({localType:t.localType}),f=Go(),A=to();return po(async()=>{if(!await wn())throw new Error("mpc error")},async()=>{let{chainId:y,sequence:F,accountNumber:E,feeDemon:L,demon:w,sourceChannel:B}=u,M={chainId:y,sequence:F,accountNumber:E,feeDemon:L,feeAmount:a,gasLimit:c,memo:o},R={fromAddress:e,toAddress:i,demon:w,amount:n},X={};if(d){let O=lo(Math.round(Date.now()/1e3),300);X={...M,type:en.IBC_TRANSFER,data:{...R,sourcePort:"transfer",sourceChannel:B,ibcTimeoutTimestamp:O}}}else X={...M,type:en.TRANSFER,data:{...R}};return await bo().signTransaction(X,e,g?.baseChain,A,{chain:g.localType})},async y=>{let F={memo:o,gasPrice:p,gasLimit:c},E=await So(t.localType,y),L={signedTx:y,coinAmount:n,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:a,extJson:JSON.stringify(F),txHash:E};return await f(L)},y=>(so({tx_id:y}),y))},Cg=Ih;r();s();function Da({feeInfo:o,callback:t}){let e=_s();return{level:o.gasType,loading:!e&&o.initLoading,networkFee:!e&&o.initLoading?void 0:o.gasFee,estimateFailed:e||o.error,onClick:()=>{t()}}}function Th(){let o=(0,mi.useDispatch)(),[t,e]=(0,kt.useState)({}),[n,{toggle:i}]=(0,Ig.useToggle)(!1),{coin:a}=C(),{coinId:c}=a,u=_(),d=k(),p=ao(),g=(0,mi.useSelector)(cs),f=Da({feeInfo:t,callback:i}),[A,T]=(0,kt.useState)(""),I=Cg(A),S=async()=>{await I()},x=F=>{T(F.target.value)},y=F=>{e(F),o(K(F.gasFee)),o(D(f.estimateFailed)),o(gs({...g,gasLimit:F.gasAmount,gasPrice:F.gasPriceStep}))};return eo(),kt.default.createElement(kt.default.Fragment,null,kt.default.createElement($,{confirmButtonProps:{onSubmit:S},slot:{bottom:kt.default.createElement(kt.default.Fragment,null,kt.default.createElement(zt,{value:A,onChange:x}),kt.default.createElement(Kd,{visible:n,coinId:String(c),address:u,inputData:g.inputData,to:d,value:p,onBack:i,onClose:i,onChange:y}))},networkFeeProps:f}))}var Tg=Th;var Sh={match:o=>pm(o),pages:{AddressPage:ug,AmountPage:gg,ConfirmPage:Tg}},Sg=Sh;r();s();r();s();var _g=m(h());r();s();var xg=m(W()),xh=()=>{let{baseCoin:o}=C();return(0,xg.useMemoizedFn)(async t=>{let e=Ft(t,o.localType);return await fe(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},hh=()=>{let o=Gt(),t=xh();return[o,t]},hg=hh;var _h=()=>{let o=hg();return _g.default.createElement(Z,{addressProps:{errorFns:{fns:o,override:!0}}})},yg=_h;r();s();var Bg=m(h());rt();r();s();var Fg=m(P()),bg=m(W());rt();var yh=10;function Fh(){let o=(0,Fg.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,bg.useBoolean)(!1),{coin:i,baseCoin:a}=C(),c=_(),u=k(),d=H(),p=Vt(),g=ks();return{onClick:async()=>{try{e();let A=await p({amount:i.address?"0":d,from:c,to:u,method:Od,chainIndex:a?.chainId??i.chainId}),T=uc(A,"0.templeteId");o(Qm(T===yh)),g()}finally{n()}},loading:t}}var Pg=Fh;r();s();var Eg=m(h()),kg=m(P());function bh(){let o=(0,kg.useDispatch)(),{coin:t}=C();(0,Eg.useEffect)(()=>{t.systemToken&&o(me(t.coinId))},[t.coinId])}var wg=bh;var Ph=()=>{let o=Ut(),e=!!qu().key||wr(o)||o==="",{onClick:n,loading:i}=Pg(),a=Md({disabled:e,loading:i,onClick:n});return oo(),wg(),Bg.default.createElement(Y,{footerActions:a})},Ng=Ph;r();s();var Yt=m(h()),Hn=m(P());r();s();var vg=m(h()),Lg=m(P()),Dg=m(Bo());function Eh(){let o=(0,Dg.useHistory)(),{baseCoin:t}=C(),e=It(),n=_(),i=k(),a=H(),c=(0,Lg.useSelector)(ft),u=zu(),d=Jr({from:n,to:i,value:Lt(a),data:c}),p=()=>{o.go(-3)};return vg.default.createElement(Pd,{needMev:!0,chainId:t.chainId,walletId:e,txParams:d,showDappInfo:!1,coinId:t.coinId,onConfirm:u,onCancel:p})}var Mg=Eh;r();s();var se=m(h());q();r();s();var Gn={content:"_content_19dst_1",img:"_img_19dst_6",title:"_title_19dst_11",tip:"_tip_19dst_19",btns:"_btns_19dst_26"};function kh({visible:o,onClose:t,onConfirm:e}){let n=uu({light:"/cdn/assets/imgs/2412/59283F63358F1706.png",dark:"/cdn/assets/imgs/2412/E8B18B49F2D1B597.png"});return se.default.createElement(mt.Confirmation,{visible:o,noMargin:!0,hideCloseBtn:!1,maskClosable:!1,onClose:t},se.default.createElement("div",{className:Gn.content},se.default.createElement(Tc,{src:n,className:Gn.img}),se.default.createElement("div",{className:Gn.title},b("wallet_extension_transaction_dialog_title_change_type")),se.default.createElement("div",{className:Gn.tip},b("wallet_extension_transaction_dialog_desc_change_type")),se.default.createElement("div",{className:Gn.btns},se.default.createElement(go,{category:go.CATEGORY.fill,type:go.TYPE.highlight,size:go.SIZE.lg,onClick:t},b("commonall_text_btn_cancel")),se.default.createElement(go,{category:go.CATEGORY.outline,type:go.TYPE.primary,size:go.SIZE.lg,onClick:e},b("commonall_modal_btn_continue")))))}var Rg=kh;r();s();var Ma=m(h()),ui=m(P());r();s();var pr={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function wh({errorMsg:o}){let t=(0,ui.useDispatch)(),{coin:e}=C(),n=(0,ui.useSelector)(ft),i=a=>{t(jm(a))};return e.baseCoinId!==0?null:Ma.default.createElement(it,{verticalPadding:!1},Ma.default.createElement(bd,{className:pr.root,titleClass:pr.titleClass,headerClassName:pr.headerClassName,contentClassName:pr.contentClassName,value:n,onChange:i,error:o,autoResize:!0}))}var Og=wh;r();s();var Ra=m(P());function Bh(){let{coin:o}=C(),t=(0,Ra.useSelector)(Mm),e=(0,Ra.useSelector)(ft);return o.baseCoinId===0&&t&&e}var Ug=Bh;r();s();var Wg=m(P());var Nh=()=>{let o=(0,Wg.useSelector)(In),{coin:t}=C(),e=ao(),n=_(),i=k();return{fetchParams:{coinId:t.coinId,from:n,to:i,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},Gg=Nh;r();s();var Oa=m(P());nS();Ro();ve();fo();r();s();var Vg=m(h());var vh=()=>(0,Vg.useCallback)(o=>{try{typeof o=="string"&&!!o&&so({tx_id:o})}catch(t){console.log(t)}},[]),Vn=vh;r();s();var qg=m(h()),Kg=m(P());r();s();var Hg=({contractAddress:o,toAddress:t,amount:e})=>{try{let n=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return l.Buffer.from(n).toString("hex")}catch{return""}};var Lh=()=>{let{coin:o}=C(),t=Ft(k(),o.localType),e=ao(),n=(0,Kg.useSelector)(Cn),{isFacet:i,facetContractAddress:a}=n||{};return(0,qg.useMemo)(()=>!o.address||!Zu(t)?"":i?Hg({contractAddress:a,toAddress:t,amount:e}):Le(t,e),[o,t,e,i,a])},di=Lh;var Dh=()=>{let{coin:o}=C(),t=sd(),e=kn(),n=H(),i=Wt(),a=_(),c=k(),u=Ft(a,o.localType),d=Ft(c,o.localType),p=It(),{activityId:g,activity:f,status:A,tip:T}=ge(),I=di(),S=(0,Oa.useSelector)(ft),x=(0,Oa.useSelector)(Cn),y=Vn(),F=_d({walletId:p,fromAddr:u,coinId:o.coinId}),E=_o({coinId:o.coinId,fromAddr:u,toAddr:d,localType:o.localType}),L=(G,O)=>{let{userGasInfo:z}=O,{updateGasInfo:N}=G;return N?{...N,gasLimit:z.gasLimit,supportEip1559:z.supportEip1559,networkFee:z.networkFee}:{...z}},w=G=>{let O=G.supportEip1559?G.maxFeePerGas:G.gasPrice,z=G?.networkFee||Ho(O,G.gasLimit),N=qo(e,z);if(Mo(N,0))return[!1,n];if(o.baseCoinId===0)return i?[ko(N,0),N]:[Ne(n,N),n];let Q=t;o.systemToken&&(Q=qo(Q,z));let co=i?Q:n;return[Ne(co,Q),co]},B=({updateData:G,finallyGasInfo:O,publishAmountInt:z})=>{let{nonce:N}=G,Q=z,co=qc(o.localType)?.realChainIdHex,ro={from:u,gasLimit:Lt(O.gasLimit),nonce:Lt(N),chainId:co};return O.supportEip1559?(ro.maxFeePerGas=Lt(O.maxFeePerGas),ro.maxPriorityFeePerGas=Lt(O.maxPriorityFeePerGas),ro.type=Yc.FEE_MARKET):ro.gasPrice=Lt(O.gasPrice),x?.isFacet?(ro.value="0",ro.to=x?.facetBlackHoleAddress,ro.data=I):o.address?(ro.value="0",ro.to=Ft(o.address,o.localType),ro.data=I):(ro.value=Lt(Q),ro.to=d,S&&(ro.data=S)),Jr(ro)},M=({txParams:G,publishAmountInt:O,finallyGasInfo:z})=>{let N={...G};return o.systemToken&&(N.value=Cc(Lt(O))),N.walletId=p,N.supportEip1559=z.supportEip1559,N},R=({txParams:G,publishAmountInt:O,dataForCheck:z={}})=>{let{userGasInfo:N={}}=z,Q=cn(G.value),co=cn(G.gasLimit),ro=cn(N.supportEip1559?G.maxFeePerGas:G.gasPrice),Do={...G,value:Q,from:a,to:c,gas:co,gasPrice:ro,priorityFee:cn(N.supportEip1559?G.maxPriorityFeePerGas:0),nonce:cn(G.nonce),repeatTxType:Xc.CONFIRMING,oldTxHash:"",gasType:N?.gasType};return{coinId:o.coinId,coinAmount:O,fromAdr:a,toAdr:c,serviceCharge:Ho(co,ro),extJson:JSON.stringify(Do),txSource:Nt.NORMAL,inputData:G.data?G.data:"",activityId:g}};return async(G,O={})=>{let z=L(G,O),[N,Q]=w(z);if(!N)throw new Error("balance check error");let co=B({updateData:G,finallyGasInfo:z,publishAmountInt:Q}),ro=M({txParams:co,publishAmountInt:Q,finallyGasInfo:z}),Do=R({txParams:co,publishAmountInt:Q,dataForCheck:O});Ic({activityId:g,activity:f,status:A,tip:T,walletId:p,address:u});let _t=await F(ro),yt=await E(_t,Do);y(yt)}},Jg=Dh;r();s();var li=m(P());var Mh=()=>{let o=(0,li.useDispatch)(),t=J(),e=(0,li.useSelector)(In),{gasLimit:n,gasPrice:i,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:u,extFee:d,gasPriceInfo:p,gasLimitInfo:g,gasType:f}=e,{minGasFee:A}=Eu({gasLimit:n,gasPrice:i,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:u,extFee:d,gasPriceInfo:p,gasLimitInfo:g,gasType:f});return{feeLevel:f,networkFee:A,maxNetworkFee:t,onClick:()=>{o(ds(!0))}}},Xg=Mh;var Rh=()=>{let o=(0,Hn.useDispatch)(),t=Xg(),e=Gg(),n=Xu(),i=yd(),a=Jg(),{clear:c}=ge(),u=(0,Hn.useSelector)(ft),d=Ds(u),p=Ug(),[g,f]=(0,Yt.useState)(!1),A=async()=>{if(p)return f(!0),{pause:!0};try{let I=await i({...e.fetchParams,userGasInfo:e.userGasInfo,baseCoinAmountUse:e.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:n});return await a(I,e),null}catch(I){if(I?.message===Bu)throw new Error(ws);{let S=I?.data?.originalError;throw vd(S?.code)&&c?(c(),S):I}}},T=(0,Hn.useSelector)(de);return eo(),Yt.default.createElement(Yt.default.Fragment,null,Yt.default.createElement($,{slot:{bottom:Yt.default.createElement(Og,{errorMsg:d})},networkFeeProps:t,confirmButtonProps:{disabled:!!d,onSubmit:A},tipMessageProps:{blockAddressInfo:T}}),Yt.default.createElement(Rg,{visible:g,onClose:()=>{f(!1),aa({action_after_pop_up:"cancel"})},onConfirm:()=>{o(ou(!0)),f(!1),aa({action_after_pop_up:"confirm"})}}))};function Oh(o){return(0,Hn.useSelector)(es)?Yt.default.createElement(Mg,null):Yt.default.createElement(Rh,{...o||{}})}var zg=Oh;r();s();var ht=m(h()),Fe=m(P()),Ua=m(W());r();s();var Yg=m(P());function Uh(){let{coin:o}=C(),t=_(),e=Ku(),n=(0,Yg.useSelector)(In);return Fu({txType:yu.transfer,coinId:o.coinId,fromAddress:t,unavailable:n.gasType===jo.CUSTOM,fee:e})}var Zg=Uh;var Wh=(0,ht.memo)(()=>{let o=(0,Fe.useDispatch)(),t=(0,ht.useRef)(!1),e=(0,ht.useRef)(!1),n=(0,Fe.useSelector)(Dt),i=(0,Fe.useSelector)(Dm),{coin:a}=C(),c=_(),u=k(),d=Ft(c,a.localType),p=Ft(u,a.localType),g=di(),f=(0,Fe.useSelector)(ft),A=a.baseCoinId===0?f:g,T=H(),I=Wo(),S=Fs(),x=(0,Fe.useSelector)(Cn),{isFacet:y,facetBlackHoleAddress:F}=x||{},{disabled:E,fetchOnce:L}=(0,ht.useMemo)(()=>{let N=null,Q=a.baseCoinId===0&&Ds(f);return n&&(a.baseCoinId!==0||!Q)&&(N=+new Date),{disabled:Q||S,fetchOnce:N}},[a.baseCoinId,f,S,n]),w=ge(),B=(0,ht.useMemo)(()=>y?F:a.baseCoinId===0?p:a.address,[a.baseCoinId,a.address,p,y,F]),M=()=>{t.current||e.current?o(D(!0)):o(D(!1))},R=(0,Ua.useMemoizedFn)(N=>{o(Zm(N?.signInfo||{}))}),X=(0,Ua.useMemoizedFn)(N=>{o($m(N)),o(mo(N?.isNetworkFeeLoading));let Q=N.supportEip1559?N.maxFeePerGas:N.gasPrice,co=N.networkFee;Q==="0"?e.current=!0:e.current=!1,N?.gasLimitInfo?.queryGasLimitErrorUseDefault?t.current=!0:t.current=!1,o(K(co)),M()}),G=()=>{o(ds(!1))},O=()=>{t.current=!1},z=()=>{t.current=!0};return ht.default.createElement(Gu,{currencyId:I,visible:i,coinId:a.coinId,address:d,inputData:A,tokenAddress:B,value:a.address?"0":T,gasLimitOptions:{fetchOnce:L,disabled:E,onFetchSuccess:O,onFetchError:z},estimatedL1FeeOptions:{fetchOnce:L,disabled:E},onBack:G,onServerDataChange:R,onGasChange:X,gasReturn:w})}),Gh=({children:o})=>{let t=Zg(),e=(0,Fe.useSelector)(es);return ht.default.createElement(Nd,{gasReturn:t},o,!e&&ht.default.createElement(Wh,null))},$g=Gh;var Vh={match:o=>lm(o),Container:$g,pages:{AddressPage:yg,AmountPage:Ng,ConfirmPage:zg}},jg=Vh;r();s();Ao();r();s();r();s();var fi=m(h()),Qg=m(P()),oA=m(W());var Hh=()=>{let o=(0,Qg.useDispatch)(),{coin:t}=C(),e=_(),n=(0,fi.useCallback)(async()=>{try{let{data:a={}}=await rn({coinId:t.coinId,address:e});a?.info?.normal?o(K(a.info.normal)):o(D(!0))}catch{o(D(!0))}finally{o(mo(!1))}},[o,e,t.coinId]),{run:i}=(0,oA.useDebounceFn)(n,{wait:500});(0,fi.useEffect)(()=>{o(mo(!0)),i()},[e,t.coinId,i,o])},tA=Hh;var qh=({children:o})=>(tA(),o),eA=qh;r();s();var nA=m(h());var Kh=()=>(oo(),nA.default.createElement(Y,null)),rA=Kh;r();s();var iA=m(h());r();s();on();tn();var Jh=()=>{let{coin:o}=C(),t=_(),e=ao(),n=J(),i=to(),a=k(),c=ho({fromAddr:t,localType:o.localType,walletId:i}),u=_o({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:a,networkFee:n,localType:o.localType});return po(async()=>{let I={coinId:o.coinId,address:t,amount:e,fee:n,accountId:i},{data:S}=await Bt(dt.getSpecialUtxoList,I,{walletSignParams:{needWalletSign:!0,walletId:i}});return S},I=>({inputs:I.map(F=>({txId:F.txId,vOut:F.index,address:F.address,amount:F.amount})),outputs:[{address:a,amount:e}],address:t,fee:n}),async I=>await c({params:I}),async I=>await u(I),I=>(so({tx_id:I}),I))},sA=Jh;var Xh=()=>{let o=sA();return eo(),iA.default.createElement($,{confirmButtonProps:{onSubmit:o}})},aA=Xh;var zh={match:o=>o===Rc,Container:eA,pages:{AddressPage:Z,AmountPage:rA,ConfirmPage:aA}},cA=zh;r();s();Ao();r();s();var mA=m(h());var Yh=({children:o})=>{let e=et().get("from");return mA.default.createElement(Eo,{fromAddress:e},o)},uA=Yh;r();s();var IA=m(h());r();s();var dA=m(W());on();tn();var Zh=()=>{let{baseCoin:o}=C();return(0,dA.useMemoizedFn)(async t=>{let e={address:t,coinId:o.coinId};try{let{data:i}=await Bt(dt.postCheckAddress,e);if(i?.res)return null}catch(i){console.log(i)}return await fe(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},lA=()=>{let o=Gt(),t=Zh();return[o,t]};r();s();var pi=m(h()),fA=m(P()),pA=m(W());fo();var $h=()=>{let o=(0,fA.useDispatch)(),{coin:t}=C(),e=_(),n=k(),i=Po(),a=(0,pi.useCallback)(async()=>{try{let u=await i({coinId:t.coinId,address:e,fromAddr:e,toAddr:n});o(nu({name:"signInfo",value:u}));let d=[],{fee:p,depositMinAmount:g,minTransferTokenValue:f,depositGasFee:A,toAddressCheck:T}=u;t.baseCoinId===0?d.push(p):T===0?d.push(p,f,g,A):d.push(p,f);let I=d.reduce((S,x)=>lo(S,x),0);o(K(I))}catch{o(D(!0))}finally{o(mo(!1))}},[o,i,t.coinId,t.baseCoinId,e,n]),{run:c}=(0,pA.useDebounceFn)(a,{wait:500});(0,pi.useEffect)(()=>{o(mo(!0)),o(D(!1)),c()},[o,a,c])},gA=$h;r();s();var AA=m(h()),gi=m(P());fo();Ao();var jh=()=>{let o=(0,gi.useDispatch)(),{coin:t,baseCoin:e}=C(),{baseCoinId:n}=t,i=_(),a=to(),c=te(i,a,wc),d=Uo(e.coinId,a,{addressType:c})?.coinAmountInt,f=(0,gi.useSelector)(xn)?.signInfo?.storageUsedAmount;(0,AA.useEffect)(()=>{if(!d||!f)return;let A=qo(d,f);o(n===0?Co(A):ot(A))},[o,n,f,d])},CA=jh;var Qh=()=>{gA(),CA();let o=lA();return IA.default.createElement(Z,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},TA=Qh;r();s();var yA=m(h());r();s();var SA=m(P()),Wa=m(W());fo();var xA=()=>{let o=Ko(),t=id(),e=(0,SA.useSelector)(xn),{coin:n,baseCoin:i}=C(),a=J();return(0,Wa.useMemoizedFn)(c=>{let u=lo(e?.signInfo?.storageUsedAmount,a);return(n.baseCoinId===0?Mo(o,c):Mo(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:To(u,{useContractPrecision:!0,contractPrecision:{decimals:i.decimals},precision:i.decimals}).value},type:no.FEE_BALANCE_INSUFFICIENT}:null})},hA=()=>{let o=Pn(),t=xA();oo({fns:[o,t],override:!0})},o_=()=>{let o=xA();return(0,Wa.useMemoizedFn)(t=>{let e=o(t);return e?{...e,highlight:De.AMOUNT}:null})},_A=()=>{let o=td(),t=o_();eo({fns:[o,t],override:!0})};var t_=()=>(hA(),yA.default.createElement(Y,{totalAmountProps:{type:"amount"}})),FA=t_;r();s();var EA=m(h());r();s();var bA=m(P()),Ga=m(iS());var e_=()=>{let{coin:o}=C(),t=_(),e=k(),n=ao(),i=J(),a=to(),c=(0,bA.useSelector)(xn),u=Po(),d=Vn(),p=ho({fromAddr:t,localType:o.localType,walletId:a}),g=_o({coinId:o.coinId,coinAmount:n,fromAddr:t,toAddr:e,localType:o.localType,networkFee:i,walletId:a}),f=async()=>await u({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),A=x=>{let{blockHash:y,nonce:F}=x;return{from:t,blockHash:y,type:Ga.NearTypes.TransferNear,nonce:F,receiverId:e,amount:n}},T=x=>{let{blockHash:y,nonce:F}=x,{signInfo:E}=c,{toAddressCheck:L,minTransferTokenValue:w,depositGasFee:B,fee:M,depositMinAmount:R}=E;return{from:t,blockHash:y,type:Ga.NearTypes.TransferToken,nonce:F,receiverId:e,amount:n,contract:o.address,depositGas:B,transferGas:M,depositValue:R,minTransferTokenValue:w,shouldDeposit:Boolean(L===0)}};return po(f,x=>o.baseCoinId===0?{params:A(x)}:{params:T(x)},p,g,d)},PA=e_;var n_=()=>{let o=PA();return _A(),EA.default.createElement($,{confirmButtonProps:{onSubmit:o}})},kA=n_;var r_={match:o=>o===Oc,Container:uA,pages:{AddressPage:TA,AmountPage:FA,ConfirmPage:kA}},wA=r_;r();s();Ao();r();s();var vA=m(h());r();s();var BA=m(W());var s_=()=>{let{coin:o}=C();return(0,BA.useMemoizedFn)(async t=>{let e={address:t,chainId:o?.chainId},n=!1;try{let{status:i}=await Nu(e);n=i===Zc.COMPLETED}catch{n=!1}return n?null:{key:"wallet_extension_transfer_input_error_add_unregistered",args:{}}})};function i_(){return[s_()]}var NA=i_;var a_=()=>{let o=NA();return vA.default.createElement(Z,{addressProps:{errorFns:{override:!1,fns:o},extraProps:{disableRequestDomain:!0}}})},LA=a_;r();s();var gr=m(h());q();r();s();var Ai=m(h()),Va=m(P()),DA=m(Bo()),MA=m(W());aS();function c_(o){return e=>{let n=(0,DA.useHistory)(),i=(0,Va.useSelector)(ln),a=No(),{coin:c}=C(),u=(0,Va.useSelector)(io),d=Hu(),[p,g]=(0,Ai.useState)(!1);return(0,MA.useMount)(()=>{if(Fc(c))n.replace(i||Yr),g(!1);else if(u)g(!0);else{let f={pathname:`${Oo}/${a}${mn}`};d&&(f.search=`?from=${d}`),n.replace(f),g(!1)}}),p?Ai.default.createElement(o,{...e}):null}}var Ci=c_;r();s();var RA=m(h()),OA=m(P());Ao();var m_=({coinId:o,address:t})=>{let e=(0,OA.useDispatch)(),[n,i]=ee({coinId:o,address:t});return(0,RA.useEffect)(()=>{i.normal&&e(K(i.normal)),i.maxTransferAmount&&e(o===Ur?Co(i.maxTransferAmount):ot(i.maxTransferAmount))},[o,e,i.maxTransferAmount,i.normal]),[n,i]},Ii=m_;r();s();var UA=m(h());fo();var u_=o=>{let{coin:t}=C(),e=pe(),n=nd(e,t?.decimals),i=Ko();return(0,UA.useCallback)(a=>t?.baseCoinId===0&&ko(a,i)&&Ne(a,n)?{key:"wallet_extension_transfer_input_error_pi_minimum",args:{amount:To(o,{useContractPrecision:!0,contractPrecision:{decimals:t.decimals},precision:t.decimals}).value},type:no.BALANCE_INSUFFICIENT}:null,[n,o,i,t])},d_=o=>{let t=Es(),e=Pn(),n=Qu(),i=u_(o);oo({fns:[t,i,e,n],override:!0})},WA=d_;function l_(){let{coin:o}=C(),t=_(),[e,n]=Ii({coinId:o?.coinId,address:t});return WA(n?.maxTransferAmount),gr.default.createElement(Y,{isGlobalLoading:e,totalAmountProps:{type:"amount",title:gr.default.createElement(gr.default.Fragment,null,b("extension_wallet_send_text_transfer_available"),gr.default.createElement(Ct,{size:Ct.SIZE.xxs,style:{marginLeft:"4px"},tooltip:b("wallet_extension_transfer_input_error_pi_available_balance"),icon:"okx-wallet-plugin-information-circle"}))}})}var GA=Ci(l_);r();s();var Ar=m(h());q();r();s();var VA=m(h());var f_="transfer",p_=(o,t)=>{let{coin:e}=C(),n=_(),i=to(),a=ao(),c=J(),u=k(),d=ho({walletId:i,fromAddr:n,localType:e.localType}),p=_o({walletId:i,coinId:e.coinId,coinAmount:a,fromAddr:n,toAddr:u,networkFee:c,localType:e.localType});return(0,VA.useCallback)(async()=>{let g={memo:o,amount:a,source:n,fee:t?.normal,sequence:t?.nonce,type:f_,decimals:e?.decimals,toAddress:u,networkPassphrase:t?.networkPassphrase},f=await d({params:g}),A=await So(e?.localType,{tx:f,networkPassphrase:t?.networkPassphrase}),T=await p(f,{txHash:A});so({tx_id:T})},[o,a,n,t?.normal,t?.nonce,t?.networkPassphrase,e?.decimals,e?.localType,u,d,p])},HA=p_;var qA=28;function g_(){let{coin:o}=C(),t=_(),[e,n]=(0,Ar.useState)(""),[i,a]=Ii({coinId:o?.coinId,address:t}),c=HA(e,a),u=d=>{let p=d.target.value;new TextEncoder().encode(p).length<=qA&&n(d.target.value)};return eo(),Ar.default.createElement($,{slot:{bottom:Ar.default.createElement(zt,{value:e,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:qA}),onChange:u})},confirmButtonProps:{loading:i,onSubmit:c}})}var KA=g_;var A_={match:o=>o===Ur,pages:{AddressPage:LA,AmountPage:GA,ConfirmPage:KA}},JA=A_;r();s();r();s();var YA=m(h());r();s();var XA=m(W());var C_=()=>{let[o,{setTrue:t,setFalse:e}]=(0,XA.useBoolean)(!1),{coin:n,baseCoin:i}=C(),a=_(),c=k(),u=Tt(),d=Vt();return{onClick:async()=>{try{t(),await d({from:a,to:c,method:"wallet_inner_transfer",chainIndex:i?.chainId??n.chainId}),u()}catch{}finally{e()}},loading:o}},zA=C_;var I_=()=>{let{onClick:o,loading:t}=zA();return YA.default.createElement(Z,{confirmButtonProps:{onClick:o,loading:t}})},ZA=I_;r();s();var tC=m(h()),eC=m(P());q();r();s();var Cr=m(h()),Ti=m(P());fo();var $A=()=>{let{toRent:o}=(0,Ti.useSelector)(tr),{coin:t,baseCoin:e}=C(),n=Ko();return(0,Cr.useCallback)(i=>{if(t.baseCoinId!==0)return null;let a=$o(o,10**t.decimals);return Mo(i,a)?{key:"wallet_extension_toast_minimum_rent_fee",args:{num:a,token:e.symbol},type:no.COMMON_ERROR}:null},[n,o,e.symbol])},jA=()=>{let{selfRent:o,toRent:t}=(0,Ti.useSelector)(tr),{coin:e,baseCoin:n}=C(),i=(0,Ti.useSelector)(Qo),a=kn();return(0,Cr.useCallback)(()=>{if(e.baseCoinId===0)return null;let c=lo(i,o);return Mo(a,c)?{key:"wallet_extension_toast_insufficient_balance_initiate_txn",args:{token:n.symbol,num:$o(c,10**n.decimals)},type:no.FEE_BALANCE_INSUFFICIENT}:Mo(a,lo(c,t))?{key:"wallet_extension_loading_text_minimum_reserve_rent",args:{num:$o(lo(c,t),10**n.decimals),token:n.symbol},type:no.FEE_BALANCE_INSUFFICIENT}:null},[a,i,o])},QA=()=>{let o=$A(),t=jA();oo([o,t])},T_=()=>{let o=$A();return(0,Cr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:De.AMOUNT}:null},[o])},S_=()=>{let o=jA();return(0,Cr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:De.AMOUNT}:null},[o])},oC=()=>{let o=T_(),t=S_();eo([o,t])};function x_(){let o=(0,eC.useSelector)(ns);return QA(),tC.default.createElement(Y,{totalAmountProps:{title:b("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:o}})}var nC=x_;r();s();var be=m(h()),Ka=m(P()),dC=m(W());r();s();q();ve();var zo={JITO:"jito",PRIORITY_FEE:"priorityFee"},Ha="speedUpMode";function rC(o){let t=ze.get(Ha);return t?typeof t=="string"&&(t={[Hc]:t}):t={},t[o]||zo.PRIORITY_FEE}function sC(o,t){let e=ze.get(Ha);ze.set(Ha,{...e||{},[o]:t})}var iC="jitoGuide";function aC(){return!!ze.get(iC)}function cC(){ze.set(iC,"1")}r();s();var Fo=m(h()),wt=m(P());q();r();s();var Ir={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var h_=Fo.default.memo(({jitoGuide:o})=>{let t=(0,wt.useDispatch)(),e=(0,wt.useSelector)(ue),n=i=>{t(er(i))};return Fo.default.createElement(xc,{mask:!0,show:!o,title:b("wallet_extension_transfer_tooltips_title_express_mode"),description:b("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},Fo.default.createElement(Qe.Segmented,{className:Ir.modeSwitch,color:Qe.COLOR.grey,size:Qe.SIZE.xs,average:!0,hideContent:!0,activeId:e,onChange:n},Fo.default.createElement(Qe.TabPane,{tab:b("wallet_extension_transfer_tab_standard"),id:zo.PRIORITY_FEE}),Fo.default.createElement(Qe.TabPane,{tab:b("wallet_extension_transfer_tab_express"),id:zo.JITO})))}),__=()=>{let{baseCoin:o}=C(),t=(0,wt.useSelector)(Mt),e=(0,wt.useSelector)(rs),{fee:n="0"}=t||{},{priorityFee:i}=e,a=To(n,{useContractPrecision:!0,contractPrecision:{decimals:o.decimals},precision:o.displayPrecision,isStableCoin:o.stableCoin}).value,c=To(i||"0",{useContractPrecision:!0,contractPrecision:{decimals:o.decimals},precision:o.displayPrecision,isStableCoin:o.stableCoin}).value;return Fo.default.createElement(Fo.default.Fragment,null,b("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:c}))},y_=()=>{let{baseCoin:o}=C(),t=(0,wt.useSelector)(Mt),e=(0,wt.useSelector)(ss),{fee:n}=t||{},{totalJitoFee:i}=e||{},a=To(n||"0",{useContractPrecision:!0,contractPrecision:{decimals:o.decimals},precision:o.displayPrecision,isStableCoin:o.stableCoin}).value,c=To(i||"0",{useContractPrecision:!0,contractPrecision:{decimals:o.decimals},precision:o.displayPrecision,isStableCoin:o.stableCoin}).value;return Fo.default.createElement(Fo.default.Fragment,null,b("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:c}),Fo.default.createElement("div",{className:Ir.tipDetail},b("wallet_extension_transfer_tooltips_desc_express_mode")))},F_=Fo.default.memo(()=>{let o=(0,wt.useSelector)(ue);return Fo.default.createElement("div",{className:Ir.tip},o===zo.JITO?Fo.default.createElement(y_,null):Fo.default.createElement(__,null))});function b_({jitoGuide:o,...t}){let e=(0,wt.useSelector)(ue),n=(0,wt.useSelector)(Mt),i=e===zo.JITO?b("wallet_extension_transfer_express_mode"):b("wallet_extension_transfer_standard_mode");return Fo.default.createElement(it,{bordered:!1,verticalPadding:!1},Fo.default.createElement(Ls,{...t,titleClassName:Ir.title,titleAction:n?.supportJito&&Fo.default.createElement(h_,{jitoGuide:o}),level:i},Fo.default.createElement(F_,null)))}var mC=b_;r();s();var Ve=m(P());Ro();Ao();var P_=()=>{let o=Go(),{coin:t}=C(),e=_(),n=(0,Ve.useSelector)(vt),i=(0,Ve.useSelector)(io),a=ao(),c=(0,Ve.useSelector)(Qo),{computeUnitPrice:u,computeUnitLimit:d}=(0,Ve.useSelector)(rs),p=(0,Ve.useSelector)(ue),g=(0,Ve.useSelector)(ss),f=ho({fromAddr:e,localType:Mr,walletId:n}),A=Po(),{coinId:T}=t,I=async()=>{let w=await A({coinId:T,toAddr:i,address:e,fromAddr:e,scenario:zc.SCENARIO_SEND_COIN}),{recentBlockhash:B,toAddressLegal:M,tokenAccountToAddress:R}=w||{};return{recentBlockHash:B,haveTokenAccountAddress:M===!0,tokenAccountAddress:R||""}},S=async w=>{let{recentBlockHash:B,haveTokenAccountAddress:M}=w,R={from:e,to:i,amount:a,blockHash:B,payer:e};p===zo.PRIORITY_FEE&&(R={...R,computeUnitPrice:u,computeUnitLimit:d});let X;return t.baseCoinId===0?X={...R,type:qr.TRANSFER}:X={...R,type:qr.TOKEN_TRANSFER,createAssociatedAddress:!M,mint:t.address},t.protocolType===jn.SPL_TOKEN_2022&&(X.token2022=!0,X.decimal=t.decimals),await f({params:X})},x=async w=>{if(p!==zo.JITO||!g)return null;let{recentBlockHash:B}=w,{tipAccountAddress:M,clientGasPrice:R}=g,X={from:e,to:M,amount:R,blockHash:B,payer:e,type:qr.TRANSFER};return await f({params:X})};return po(I,async(w={})=>{let B=await S(w),M=await x(w);return{rawSignedTx:B,jitoSignedTx:M}},async({rawSignedTx:w,jitoSignedTx:B})=>{let M=await So(Mr,w),R=w,X;p===zo.JITO&&B&&(R=JSON.stringify([w,B]),X=JSON.stringify({mev:"Jito",jitoHash:await So(Mr,B)}));let G={signedTx:R,coinAmount:a,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:c,txHash:M,extJson:X},O=await o(G);return sC(t.localType,p),O},w=>(so({tx_id:w}),w))},uC=P_;r();s();var qa={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function E_(){let o=(0,Ka.useSelector)(ns),t=(0,dC.useDebounce)(o,{wait:200}),e=(0,Ka.useSelector)(Mt),[n,i]=(0,be.useState)(!0),a=uC(),c=async()=>{o||await a()};return oC(),(0,be.useEffect)(()=>{if(e?.supportJito){let u=aC();i(u),u||cC()}},[e?.supportJito]),be.default.createElement("div",{className:qa.root,onClick:()=>{i(!0)}},be.default.createElement($,{tipMessageProps:{hidden:o},containerProps:{contentClassName:n?"":qa.contentJitoGuide},slot:{networkFee:u=>be.default.createElement(mC,{...u,jitoGuide:n})},confirmButtonProps:{disabled:t,onSubmit:c}}))}var lC=E_;r();s();r();s();var fC=m(h()),Si=m(P());function k_(){let o=(0,Si.useDispatch)(),{coin:t}=C(),e=(0,Si.useSelector)(Mt);(0,fC.useEffect)(()=>{!e||(e.supportJito?o(er(rC(t.localType))):o(er(zo.PRIORITY_FEE)))},[e,t.localType])}var pC=k_;r();s();var TC=m(h()),SC=m(P());fo();r();s();var Tr=m(h()),gC=m(P());function w_(){let o=(0,gC.useDispatch)(),[t,e]=(0,Tr.useState)(null),[n,i]=(0,Tr.useState)(!1),{coin:a}=C(),c=_(),u=k(),{coinId:d}=a;return(0,Tr.useEffect)(()=>{d&&c&&u&&(async()=>{try{let{data:g}=await rn({coinId:d,address:c},{fromAddr:c,toAddr:u}),{info:f}=g||{},{fee:A}=f||{};o(D(!A)),o(ua(f)),e(f),i(!1)}catch{o(D(!0)),o(ua(null)),e(null),i(!0)}})()},[d,c,u]),{baseFee:t?.fee||"0",signInfoError:n}}var AC=w_;r();s();var ie=m(h()),Pe=m(P()),CC=m(W());rt();fo();function B_(){let o=(0,Pe.useDispatch)(),t=_(),{baseCoin:e}=C(),n=(0,ie.useRef)(null),i=(0,ie.useRef)(!1),[a,c]=(0,ie.useState)("0"),u=async g=>{if(!i.current){try{let f=await om({from:t,chainId:e.chainId}),{clientGasPrice:A}=f||{},T=lo(A||"0",g?.fee||"0");c(T),o(fs({...f,totalJitoFee:T})),o(D(!1))}catch{c("0"),o(fs(null)),o(D(!0))}finally{o(_n(!1))}n.current=setTimeout(()=>{u(g)},7e3)}};return[a,g=>{i.current=!1,u(g)},()=>{clearTimeout(n.current),i.current=!0,n.current=null,c("0"),o(fs(null))}]}function N_(){let o=(0,Pe.useDispatch)(),t=Ed(),e=_(),{coin:n,baseCoin:i}=C(),{coinId:a}=n,[c,u]=(0,ie.useState)("0"),d=()=>{u("0"),o(ls({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),o(D(!0))};return[c,async f=>{try{let{firstUnitLimit:A}=await t({coinId:a,from:e,chainId:i.chainId});if(wr(A)){d();return}let{computeUnitPrice:T,feelimit:I}=f,{priorityFee:S,priorityGasPrice:x,priorityGasLimit:y}=mm(I,T,A);u(S),o(ls({priorityFee:S,computeUnitPrice:x||"",computeUnitLimit:y||""})),o(D(!1))}catch{d()}finally{o(_n(!1))}},()=>{u("0"),o(ls({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function v_({signInfoError:o}){let t=(0,Pe.useDispatch)(),e=(0,Pe.useSelector)(ue),n=(0,Pe.useSelector)(Mt),i=(0,Pe.useSelector)(hm),a=(0,CC.useLatest)(i),[c,u,d]=B_(),[p,g,f]=N_();return(0,ie.useEffect)(()=>{a.current?t(_n(!1)):t(_n(!0))},[e]),(0,ie.useEffect)(()=>((()=>{if(o){t(_n(!1));return}!n||!e||(e===zo.PRIORITY_FEE?g(n):u(n))})(),()=>{d(),f()}),[o,n,e]),{speedUpFee:e===zo.PRIORITY_FEE?p:c}}var IC=v_;function L_(){let o=(0,SC.useDispatch)(),{baseFee:t,signInfoError:e}=AC(),{speedUpFee:n}=IC({signInfoError:e});(0,TC.useEffect)(()=>{o(K(lo(t,n)))},[t,n])}var xC=L_;r();s();var xi=m(P());var hC=m(h());fo();function D_(){let o=(0,xi.useDispatch)(),{coin:t}=C(),{selfRent:e}=(0,xi.useSelector)(tr),n=En();(0,hC.useEffect)(()=>{(()=>{if(!!t)if(t.baseCoinId===0){let i=qo(n||"0",e||"0");o(Co(ko(i,"0")?i:"0"))}else o(Co(null))})()},[t,e,n])}var _C=D_;function M_({children:o}){return pC(),xC(),_C(),o}var yC=M_;var R_={match:o=>Im(o),SubContainer:yC,pages:{AddressPage:ZA,AmountPage:nC,ConfirmPage:lC}},FC=R_;r();s();Ao();r();s();r();s();var Ja=m(h()),Sr=m(P());rt();var hi=m(W());r();s();Lr();sS();var O_=async({coin:o,fromAddress:t,toAddress:e,value:n,memo:i="",signInfo:a={}})=>{let{getRawTransaction:c}=await _c(),u={};if(o.baseCoinId===0)u={data:{type:nn.TRANSFER,data:{to:e,amount:n,memo:i}}};else{let{info:p={}}=a,{contractAddress:g,contractName:f,tokenName:A}=p;u={data:{type:nn.TOKEN_TRANSFER,data:{from:t,to:e,memo:i,contract:g,contractName:f,functionName:Kr.TRANSFER,tokenName:A,amount:n}}}}return await c(5757,u)},bC=async({coin:o,fromAddress:t,toAddress:e,value:n,memo:i="",signInfo:a={}})=>{let c=await O_({coin:o,fromAddress:t,toAddress:e,value:n,memo:i,signInfo:a});return(await ku({coinId:o.coinId,fromAddress:t,value:n,inputData:c}))?.gasLimit||"0"};var U_=()=>{let o=(0,Sr.useDispatch)(),t=_(),e=k(),n=(0,Sr.useSelector)(Dt),i=H(),a=(0,hi.usePrevious)(i),{coin:c,baseCoin:u}=C(),{signInfo:d,memo:p}=(0,Sr.useSelector)(Tn),g=async()=>{try{o(D(!1));let A;c.baseCoinId!==0&&Xe(d)?(A=await wu({coinId:c.coinId,fromAddress:t,toAddress:e,value:i}),o(ps({name:"signInfo",value:A}))):A=d;let T=await bC({coin:c,baseCoin:u,fromAddress:t,toAddress:e,value:i,signInfo:A,memo:p});o(K(T))}catch{o(D(!0))}finally{o(mo(!1))}},{run:f}=(0,hi.useDebounceFn)(g,{wait:500});(0,Ja.useEffect)(()=>{n&&(o(mo(!0)),f())},[n]),(0,Ja.useEffect)(()=>{n&&i!==a||(o(mo(!0)),f())},[i,e,n,p])},PC=U_;var W_=({children:o})=>(PC(),o),EC=W_;r();s();var kC=m(h());var G_=()=>(oo(),kC.default.createElement(Y,null)),wC=G_;r();s();var Xa=m(h()),yi=m(P());q();r();s();var _i=m(P());var V_=()=>{let{coin:o,baseCoin:t}=C(),e=_(),n=(0,_i.useSelector)(io),i=H(),a=(0,_i.useSelector)(Qo),{memo:c}=(0,_i.useSelector)(Tn),u=Po(),d=ho({fromAddr:e,localType:t.localType}),p=_o({coinAmount:i,coinId:o.coinId,fromAddr:e,toAddr:n,networkFee:a}),g=async()=>await u({coinId:o.coinId,address:e,fromAddr:e,toAddr:n,value:i}),f=F=>{let{nonce:E}=F;return{type:nn.TRANSFER,data:{to:n,amount:i,nonce:E,fee:a,memo:c}}},A=F=>{let{nonce:E,contractAddress:L,contractName:w,tokenName:B}=F;return{type:nn.TOKEN_TRANSFER,data:{from:e,to:n,amount:i,nonce:E,fee:a,memo:c,contract:L,contractName:w,functionName:Kr.TRANSFER,tokenName:B}}};return po(g,F=>o.baseCoinId===0?f(F):A(F),async F=>{let{data:E}=F,{nonce:L}=E,{txId:w,txSerializedHexString:B}=await d({params:F,needCapture:!0});return{txId:w,txSerializedHexString:B,nonce:L}},async({txId:F,txSerializedHexString:E,nonce:L})=>{let w={nonce:L},B=JSON.stringify(w);return await p(E,{txHash:F,memo:c,extJson:B})},F=>(so({tx_id:F}),F))},BC=V_;var NC=34,H_=()=>{let o=(0,yi.useDispatch)(),{memo:t}=(0,yi.useSelector)(Tn),e=BC(),n=i=>{let a=i.target.value;new TextEncoder().encode(a).length<=NC&&o(ps({name:"memo",value:i.target.value}))};return eo(),Xa.default.createElement($,{confirmButtonProps:{onSubmit:e},slot:{bottom:Xa.default.createElement(zt,{value:t,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:NC}),onChange:n})}})},vC=H_;var q_={match:o=>o===vc,Container:EC,pages:{AddressPage:Z,AmountPage:wC,ConfirmPage:vC}},LC=q_;r();s();Ao();r();s();r();s();var za=m(h()),Fi=m(P()),bi=m(W());rt();Qt();var K_=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:n,coin:i,isMax:a})=>{let c=(0,Fi.useDispatch)(),{signInfo:u}=(0,Fi.useSelector)(Sn),d=(0,bi.usePrevious)(e),p=async()=>{let I=await sn({coinId:i.coinId,address:o},{fromAddr:o,toAddr:t});return c(da({name:"signInfo",value:I})),I},g=async I=>{let S={type:"transfer",nonce:I?.info?.nonce,transferData:{contractAddress:I?.info?.contractAddress,from:o,to:t,amount:e}};return(await bo().signTransaction(S,o,i.localType))?.signature},f=async I=>{let{data:S}=await Xr({coinId:i.coinId,address:o,inputData:I});if(S?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return S},A=async()=>{try{let I;Xe(u)?I=await p():I=u;let S=await g(I),x=await f(S);c(K(x?.overallFee)),c(da({name:"gasFee",value:{...x,resourceBounds:Id(x)}})),c(D(!1))}catch{c(D(!0))}finally{c(mo(!1))}},{run:T}=(0,bi.useDebounceFn)(A,{wait:500});(0,za.useEffect)(()=>{a&&(c(mo(!0)),T())},[a,n]),(0,za.useEffect)(()=>{!t||a&&e!==d||(c(mo(!0)),T())},[t,e,a])},DC=K_;var J_=({children:o})=>{let t=_(),e=k(),n=H(),i=En(),a=J(),{coin:c}=C(),u=Wt();return DC({fromAddress:t,toAddress:e,amountInputValueInt:n,sendCoinBalanceInt:i,feeInt:a,coin:c,isMax:u}),o},MC=J_;r();s();var RC=m(h());var X_=()=>(oo(),RC.default.createElement(Y,null)),OC=X_;r();s();var GC=m(h()),VC=m(P());r();s();var UC=m(P());Qt();var z_=({coin:o,baseCoin:t,fromAddress:e,toAddress:n,amountInt:i,nonce:a,contractAddress:c})=>{let u=Go(),{gasFee:d}=(0,UC.useSelector)(Sn);return po(async()=>{let T={type:"transfer",nonce:a,transferData:{contractAddress:c,from:e,to:n,amount:i},resourceBounds:d?.resourceBounds},{txId:I,signature:S}=await bo().signTransaction(T,e,t.localType);return{txId:I,signature:S}},async({txId:T,signature:I})=>{let S={serviceChargeCoinId:t.coinId,nonce:a},x=JSON.stringify(S),y={signedTx:I,coinAmount:i,coinId:o.coinId,fromAdr:e,toAdr:n,serviceCharge:d?.overallFee,txType:wo.TRANS_OUT,txHash:T,extJson:x};return await u(y)},T=>(so({tx_id:T}),T))},WC=z_;var Y_=()=>{let o=_(),t=k(),e=ao(),{coin:n,baseCoin:i}=C(),{signInfo:a}=(0,VC.useSelector)(Sn),c=WC({coin:n,baseCoin:i,fromAddress:o,toAddress:t,amountInt:e,nonce:a?.info?.nonce,contractAddress:a?.info?.contractAddress});return eo(),GC.default.createElement($,{confirmButtonProps:{onSubmit:c}})},HC=Y_;var Z_={match:o=>o===Dc,Container:MC,pages:{AddressPage:Z,AmountPage:OC,ConfirmPage:HC}},qC=Z_;r();s();Ao();r();s();var zC=m(h());r();s();var KC=m(P()),JC=m(W());r();s();Ao();var $_=()=>{let o=Du(),t=Ru(),e=Mu(),n=Ou();return async({coinId:a,from:c,to:u,amount:d,inputData:p,localType:g,chainId:f})=>{let A=[$t.SAFE_ADDRESS,$t.CONTRACT_ADDRESS];g===Pc&&(A.push($t.TRON_PERMISSTION),A.push($t.KYS));let T=await o({checkTypes:A,coinId:a,from:c,to:u,amount:d,txType:jc.TRANSFER,inputData:p||"0x",chainId:f}),{result:I,msg:S}=T[$t.TRON_PERMISSTION]||{},x=T[$t.SAFE_ADDRESS],y=T[$t.KYS]?.causeRiskItem||[],F={...x,...T[$t.CONTRACT_ADDRESS],causeRiskItem:y,tronPermission:{msg:S,wrongPermission:!I},address:u};return await n(F),await e({...x,...x?.blackAddressWarning}),await t(F),F}},qn=$_;var j_=()=>{let o=(0,KC.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,JC.useBoolean)(!1),{coin:i}=C(),a=_(),c=k(),u=H(),{coinId:d,localType:p,chainId:g}=i,f=Tt(),A=qn();return{onClick:async()=>{try{e();let I=await A({coinId:d,from:a,to:c,amount:u,inputData:"",localType:p,chainId:g}),{isDefraud:S,isSimilar:x,blackAddressWarning:y}=I;S?(o(At(jt.DEFRAUD)),o(oe(y))):x?(o(At(jt.SIMILAR)),o(oe(y))):o(At("")),f()}catch(I){console.log(I)}finally{n()}},loading:t}},XC=j_;var Q_=()=>{let{onClick:o,loading:t}=XC();return zC.default.createElement(Z,{confirmButtonProps:{onClick:o,loading:t}})},YC=Q_;r();s();var jC=m(h());r();s();var He=m(h()),Ei=m(P()),ki=m(W());r();s();eS();function oy({from:o,to:t,coin:e,error:n}){ac.captureEvent({tags:{address:o},message:"API_ERROR_build_sui_tx",contexts:{report:{info:JSON.stringify({from:o,coinId:e?.coinId,to:t})}},exception:{values:[{type:"API_ERROR_build_sui_tx",value:n?.message}]},level:"info"})}function ty(){let{coin:o}=C(),t=_();return async({value:e,to:n,signInfo:i})=>{try{let{gasPrice:a,inputCoins:c=[],tokenInputCoins:u=[],budget:d}=i||{},p=c.map(A=>{let{digest:T,version:I,objectId:S}=A;return{digest:T,version:I,objectId:S}}),g=new Pu;if(a&&g.setGasPrice(BigInt(a)),g.setGasPayment(p||[]),g.setSender(t),d&&g.setGasBudget(BigInt(d)),o.baseCoinId===0){let A=g.splitCoins(g.gas,[e]);g.transferObjects([A],g.pure.address(n))}else if(u.length>1){let A=u.slice(1).map(S=>g.object(S.objectId)),T=g.object(u[0].objectId);g.mergeCoins(T,A);let I=g.splitCoins(T,[e]);g.transferObjects([I],g.pure.address(n))}else{let A=g.splitCoins(g.object(u[0].objectId),[e]);g.transferObjects([A],g.pure.address(n))}let f=bu(await g.build({client:Jd}));return{tx:g,txBytes:f}}catch(a){throw oy({from:t,to:n,coin:o,error:a}),a}}}var Pi=ty;r();s();function ey(){let{coin:o}=C(),t=_(),e=o.coinId;return async({to:n,value:i})=>(await sn({address:t,coinId:e},{fromAddr:t,toAddr:n,value:i})).info||{}}var ZC=ey;function $C(){let o=(0,Ei.useDispatch)(),t=(0,Ei.useSelector)(Dt),{coin:e}=C(),n=_(),i=H(),a=k(),{coinId:c}=e,[u,d]=(0,He.useState)(!1),p=(0,He.useRef)(0),g=ZC(),f=Pi(),A=(0,ki.usePrevious)(i),{run:T}=(0,ki.useDebounceFn)(async()=>{p.current++;try{o(D(!1));let I={value:String(i),to:a},S=await g(I),y=(await f({...I,signInfo:S}))?.tx?.blockData?.gasConfig?.budget||"0";o(eu(S)),o(K(y))}catch{o(D(!0))}finally{p.current--,p.current===0&&d(!1)}},{wait:300});return(0,He.useEffect)(()=>{t&&(d(!0),T())},[t]),(0,He.useEffect)(()=>{t&&i!==A||(d(!0),T())},[c,n,a,i,t]),u}function ny(){let o=$C();return oo(),jC.default.createElement(Y,{confirmButtonProps:{loading:o}})}var QC=Ci(ny);r();s();var rI=m(h()),Za=m(P());r();s();var Ya=m(P());Ao();var oI=()=>{let{coin:o}=C(),t=_(),e=ao(),n=(0,Ya.useSelector)(io),i=(0,Ya.useSelector)(is),a=J(),c=ho({fromAddr:t,localType:na}),u=_o({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:n,localType:na}),d=Pi();return po(async()=>await d({value:e,to:n,signInfo:{...i||{},budget:a}}),async({txBytes:I})=>{let x=await c({params:{type:"raw",data:I}});return{txBytes:I,signedTx:x}},async({txBytes:I,signedTx:S})=>{let{signature:x,hash:y}=S||{};return await u({request_type:"WaitForEffectsCert",tx_bytes:I,signatures:[x]},{txHash:y,serviceCharge:String(a||"0")})},I=>(so({tx_id:I}),I))};r();s();var tI=m(h()),eI=m(P());fo();var ry=()=>{let o=(0,eI.useSelector)(is),{maxObjectLimit:t=250,inputCoins:e,tokenInputCoins:n}=o||{};return(0,tI.useCallback)(()=>ko(e?.length||0,t)||ko(n?.length||0,t)?{key:"wallet_extension_transfer_error_sui_excess_object"}:null,[t,e,n])},nI=()=>{let t=[ry()];eo(t)};function sy(){let o=oI(),t=async()=>{await o()};nI();let e=(0,Za.useSelector)(de),n=(0,Za.useSelector)(fn);return rI.default.createElement($,{tipMessageProps:{hidden:n,blockAddressInfo:e},confirmButtonProps:{onSubmit:t}})}var sI=sy;var iy={match:o=>o===Nc,pages:{AddressPage:YC,AmountPage:QC,ConfirmPage:sI}},iI=iy;r();s();Ao();r();s();var uI=m(h());r();s();var aI=m(P()),cI=m(W());r();s();var vi=m(h()),Li=m(P());r();s();var Bi=m(h()),wi=m(P());Ao();function ay({messageAttachedTons:o,invokeNotificationFee:t}){let{coin:e}=C(),n=k(),i=En(),a=H(),c=(0,wi.useSelector)(gt),u=_(),d=(0,wi.useSelector)(hn),p=(0,wi.useSelector)(Dt),A=(yn()?.addressType?.[Rr]||[]).find(y=>y.address===u),T=!!c,{fromJettonAccount:I,nonce:S}=c||{},x=(0,Bi.useCallback)((y,F)=>{if(!T)return null;let E={to:n,seqno:S,decimal:e.decimals,amount:y,memo:d,walletVersion:A?.addressType};return e.baseCoinId===0?E={...E,type:Ia.TRANSFER,sendMode:F}:(E={...E,type:Ia.JETTON_TRANSFER,fromJettonAccount:I,messageAttachedTons:o,invokeNotificationFee:t,sendMode:an.PAY_GAS_SEPARATELY+an.IGNORE_ERRORS},c.customPayload&&(E={...E,customPayload:c.customPayload,stateInit:c.stateInit})),E},[n,T,I,d,o,t]);return(0,Bi.useMemo)(()=>p?x(i,an.CARRY_ALL_REMAINING_BALANCE):x(a,an.PAY_GAS_SEPARATELY+an.IGNORE_ERRORS),[p,i,a,x])}var Ni=ay;function cy({messageAttachedTons:o,invokeNotificationFee:t}={}){let e=(0,Li.useDispatch)(),n=It(),i=_(),a=(0,Li.useSelector)(gt),{ttl:c}=a||{},u=Ni({messageAttachedTons:o,invokeNotificationFee:t}),[d,p]=(0,vi.useState)(null);return(0,vi.useEffect)(()=>{(async()=>{if(!!u)try{u.expireAt=Gs(c);let g=await Xd({fromAddress:i,body:u,walletId:n});p(JSON.stringify(g))}catch{p(null),e(D(!0)),e(mo(!1))}})()},[u,c]),d}var Di=cy;var my=()=>{let o=(0,aI.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,cI.useBoolean)(!1),{coin:i}=C(),a=_(),c=k(),u=H(),d=Di(),{coinId:p,localType:g,chainId:f}=i,A=Tt(),T=qn();return{onClick:async()=>{try{e();let S=await T({coinId:p,from:a,to:c,amount:u,inputData:d,localType:g,chainId:f}),{isDefraud:x,isSimilar:y,blackAddressWarning:F}=S;x?(o(At(jt.DEFRAUD)),o(oe(F))):y?(o(At(jt.SIMILAR)),o(oe(F))):o(At("")),A()}catch(S){console.log(S)}finally{n()}},loading:t}},mI=my;var uy=()=>{let{onClick:o,loading:t}=mI();return uI.default.createElement(Z,{confirmButtonProps:{onClick:o,loading:t}})},dI=uy;r();s();var gI=m(h());r();s();var lI=m(h()),fI=m(P());fo();function $a(){let{coin:o,baseCoin:t}=C(),e=(0,fI.useSelector)(gt),n=J(),i=e?.minTonLimit,a=lo(i||"0",n||"0"),c=kn();return(0,lI.useCallback)(()=>o.baseCoinId!==0&&ko(a,c)?{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:$o(a,10**t.decimals)}}:null,[a,c,o.baseCoinId,t.decimals])}function dy(){let o=$a();oo([o])}var pI=dy;function ly(){return pI(),gI.default.createElement(Y,{totalAmountProps:{type:"amount"}})}var AI=ly;r();s();var _r=m(h()),hr=m(P());r();s();var II=m(h());var xr=m(P());q();var CI=250;function fy({error:o,onChange:t}){let e=(0,xr.useDispatch)(),n=(0,xr.useSelector)(gt),i=(0,xr.useSelector)(hn),c=n?.checkMemo?b("wallet_extension_import_desc_comment_required"):b("wallet_extension_import_desc_comment_optional");return II.default.createElement(zt,{value:i,placeholder:b("wallet_extension_ton_placeholder_comment_max_character2",{amount:CI}),dashed:!1,title:c,error:o,errorType:ut.TIP_TYPE.always,maxLength:CI,onChange:u=>{let d=u.target.value;e(ru(d)),t()}})}var TI=fy;r();s();var Mi=m(P());Qt();Ro();function py(){let o=to(),t=yn(o),e=Po(),{coin:n,baseCoin:i}=C(),a=_(),c=k(),u=(0,Mi.useSelector)(Qo),d=(0,Mi.useSelector)(gt),p=(0,Mi.useSelector)(Wm),g=H(),f=Ni({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:p?.invokeNotificationFee}),A=Go();return po(async()=>(await e({coinId:n.coinId,address:a,fromAddr:a,toAddr:c,value:"0"}))?.nonce,async F=>(f.seqno=F,f.expireAt=Gs(d?.ttl),(await bo().signTransaction(f,a,i.localType))?.boc),async F=>{let E=await So(i.localType,F),L={signedTx:F,coinId:n.coinId,coinAmount:g,fromAdr:a,toAdr:f.to,serviceCharge:u,txHash:E,extJson:JSON.stringify({nonce:f.seqno,isClaim:!!f.customPayload}),txSource:Nt.NORMAL,accountId:o,walletType:t?.serverWalletType,memo:f.memo};return await A(L)},F=>(so({tx_id:F}),F))}var SI=py;r();s();var Ri=m(h());function gy(o){return(0,Ri.useCallback)(()=>o?{key:"wallet_extension_import_alert_fillin_comment",type:no.COMMON_ERROR}:null,[o])}function Ay(o){return(0,Ri.useCallback)(()=>o?{key:"wallet_extension_multisender_notice_failed_try_again",type:no.COMMON_ERROR}:null,[o])}function Cy(){let o=$a();return(0,Ri.useCallback)(()=>{let t=o();return t?{...t,highlight:no.FEE_BALANCE_INSUFFICIENT}:null},[o])}function Iy(o,t){let e=gy(o),n=Ay(t),i=Cy();eo([n,e,i])}var xI=Iy;function Ty(){let o=(0,hr.useSelector)(gt),t=o?.checkMemo,e=o?.getCustomPayloadInfoRpcError,n=(0,hr.useSelector)(hn),i=(0,hr.useSelector)(fn),[a,c]=(0,_r.useState)(!1),u=SI(),d=async()=>t&&(!n||n.trim()==="")?(c(!0),{pause:!0}):(await u(),null);xI(a,e);let p=(0,hr.useSelector)(de);return _r.default.createElement($,{tipMessageProps:{hidden:i,blockAddressInfo:p},slot:{bottom:_r.default.createElement(TI,{error:a,onChange:()=>{c(!1)}})},confirmButtonProps:{onSubmit:d}})}var hI=Ty;r();s();var ja=m(h());r();s();var _I=m(h()),yI=m(P());Ao();fo();var Sy=()=>{let o=(0,yI.useDispatch)(),{coin:t,baseCoin:e}=C(),{baseCoinId:n}=t,i=_(),a=J(),c=to(),u=te(i,c,Rr),d=Uo(e.coinId,c,{addressType:u}),p=Uo(t.coinId,c,{addressType:u}),g=d?.coinAmountInt,f=p?.coinAmountInt;(0,_I.useEffect)(()=>{if(!!g){if(n===0){let A=Ye([0,qo(g,a)]);o(Co(A))}else o(Co(f));o(ot(g))}},[o,n,g,f,a])},FI=Sy;r();s();var Oi=m(h());var bI=m(P());var Ui=m(W());fo();function xy(){let o=(0,bI.useDispatch)(),t=_(),{coin:e,baseCoin:n}=C(),i=(0,Oi.useRef)(null),a=(0,Ui.useDebounce)(Di(),{wait:500});(0,Ui.useMount)(()=>{o(mo(!0))}),(0,Oi.useEffect)(()=>{let c=()=>{o(D(!0)),o(fa(null)),o(K("0"))},u=async()=>{try{let{code:p,data:g}=await Xr({address:t,tokenAddress:e.address,chainId:n.chainId,coinId:n.coinId,value:"0",inputData:a});if(p!==0||!g||g?.queryGasLimitErrorUseDefault)c();else{o(D(!1)),o(fa(g));let{invokeNotificationFee:f="0",gasLimit:A="0"}=g;o(K(e.baseCoinId===0?A:lo(A,f)))}}catch{c()}finally{o(mo(!1))}};return(()=>{!a||(i.current=setInterval(u,7e3),u())})(),()=>{clearInterval(i.current)}},[a])}var PI=xy;r();s();var EI=m(h()),kI=m(P()),wI=m(W());function hy(){let o=(0,kI.useDispatch)(),t=Po(),e=zd(),{coin:n}=C(),i=_(),a=(0,wI.useDebounce)(k(),{wait:500}),{coinId:c,baseCoinId:u}=n;(0,EI.useEffect)(()=>{c&&i&&a&&(async()=>{try{let p=await t({coinId:c,address:i,fromAddr:i,toAddr:a,value:"0"}),g=await e(p,u);o(D(!g)),o(la(g))}catch{o(D(!0)),o(la(null)),o(mo(!1))}})()},[a])}var BI=hy;var _y=({children:o})=>(BI(),PI(),FI(),o);function yy({children:o}){let e=et().get("from");return ja.default.createElement(Eo,{fromAddress:e},ja.default.createElement(_y,null,o))}var NI=yy;var Fy={match:o=>o===Uc,Container:NI,pages:{AddressPage:dI,AmountPage:AI,ConfirmPage:hI}},vI=Fy;r();s();ve();r();s();var HI=m(h());r();s();var LI=m(P()),DI=m(W());r();s();var Gi=m(h()),Wi=m(P());var by=()=>{let o=(0,Wi.useSelector)(gn),t=(0,Wi.useSelector)(io),e=H(),n=(0,Wi.useSelector)($r),i=!t||!!n.key,[a,c]=(0,Gi.useState)("");return(0,Gi.useEffect)(()=>{(async()=>{if(!i)try{let d=await Qn(t);c(o?Le(d,e):"")}catch(d){console.log(d)}})()},[o,i,t,e]),a},Vi=by;var Py=()=>{let o=(0,LI.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,DI.useBoolean)(!1),{coin:i}=C(),a=_(),c=k(),u=H(),d=Vi(),{coinId:p,localType:g,chainId:f}=i,A=Tt(),T=qn();return{onClick:async()=>{try{e();let S=await T({coinId:p,from:a,to:c,amount:u,inputData:d,localType:g,chainId:f}),{isDefraud:x,isSimilar:y,tronPermission:F,blackAddressWarning:E}=S;F&&F.wrongPermission?o(zm({wrongPermission:F.wrongPermission,msg:F.msg})):x?(o(At(jt.DEFRAUD)),o(oe(E))):y?(o(At(jt.SIMILAR)),o(oe(E))):o(At("")),A()}catch(S){console.log(S)}finally{n()}},loading:t}},MI=Py;r();s();var RI=m(h()),OI=m(P());var UI=m(W());ve();var Ey=()=>{let[o,{setFalse:t}]=(0,UI.useBoolean)(!0),{coin:e}=C(),n=_(),i=(0,OI.useDispatch)(),{coinId:a}=e;return(0,RI.useEffect)(()=>{(async()=>{if(Number(a)!==Wr){let d=await tm({coinId:a,address:n});i(Jm(d))}t()})()},[a,n]),o},WI=Ey;r();s();var GI=m(h());function ky(){let o=_();return(0,GI.useCallback)(t=>t===o?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[o])}function wy(){return[ky()]}var VI=wy;var By=()=>{let o=WI(),{onClick:t,loading:e}=MI(),n=VI();return HI.default.createElement(Z,{addressProps:{errorFns:n},confirmButtonProps:{onClick:t,loading:e||o}})},qI=By;r();s();var JI=m(h());r();s();var Qa=m(h()),yr=m(P());var Kn=m(W());var Ny=()=>{let[o,{setTrue:t,setFalse:e}]=(0,Kn.useBoolean)(!1),n=(0,yr.useDispatch)(),i=k(),a=(0,yr.useSelector)(gn),c=(0,yr.useSelector)(Dt),u=H(),d=(0,Kn.usePrevious)(u),p=Cu(),{coin:g}=C(),f=Vi(),{coinId:A}=g,T=async()=>{let S=a?"0":u,x={coinId:A,address:p},y={fromAddr:p,value:S,toAddr:i,inputData:f};try{let F=await nm(x,y);n(K(F)),n(D(!1))}catch{n(D(!0))}finally{e()}},{run:I}=(0,Kn.useDebounceFn)(T,{wait:500});return(0,Qa.useEffect)(()=>{c&&(t(),I())},[c]),(0,Qa.useEffect)(()=>{c&&u!==d||(t(),I())},[u,f,c]),o},KI=Ny;var vy=()=>{let o=KI();return oo(),JI.default.createElement(Y,{confirmButtonProps:{loading:o}})},XI=vy;r();s();var jI=m(h()),QI=m(P());r();s();var Fr=m(P()),zI=m(rS());ve();var Ly=()=>{let o=Go(),{coin:t}=C(),e=_(),n=(0,Fr.useSelector)(io),i=(0,Fr.useSelector)(Qo),a=(0,Fr.useSelector)(gn),c=H(),u=(0,Fr.useSelector)(vt),d=ho({fromAddr:e,localType:ra,walletId:u});return po(async()=>{if(!await wn())throw new Error("mpc error")},async()=>{let I=a?"0":c,S=await Qn(n),x=a?Le(S,c):"",y={coinId:t.coinId,address:e};return await em(y,{fromAddr:e,toAddr:n,value:I,inputData:x})},async(I={})=>{let{info:S={}}=I,{timestamp:x,expiration:y,ref_block_bytes:F,ref_block_hash:E,feelimit:L,contractAddress:w,asset:B}=S,M={fromAddress:e,toAddress:n,amount:c,timestamp:x,expiration:y,refBlockBytes:F,refBlockHash:E},R={};return t.baseCoinId===0?R={type:ae.TRANSFER,data:M}:a?R={type:ae.TOKEN_TRANSFER,data:{...M,feeLimit:L,contractAddress:w}}:R={type:ae.ASSET_TRANSFER,data:{...M,assetName:(0,zI.bufferToHex)(l.Buffer.from(B))}},await d({params:R})},async I=>{let S=await So(ra,I),x=await Qn(n),y=a?Le(x,c):"",F={signedTx:I,coinAmount:c,coinId:t.coinId,fromAdr:e,toAdr:n,serviceCharge:i,txHash:S,inputData:y};return await o(F)},I=>(so({tx_id:I}),I))},YI=Ly;r();s();var ZI=m(h()),$I=m(P());function Dy(o,t){return(0,ZI.useCallback)(()=>o?{text:t,type:no.COMMON_ERROR}:null,[o,t])}function oc(){let o=ed(),t=(0,$I.useSelector)(vm),e=Dy(t.wrongPermission,t.msg);eo({fns:[e,...o],override:!0})}function My(){let o=YI(),t=async()=>{await o()},e=(0,QI.useSelector)(de);return oc(),jI.default.createElement($,{confirmButtonProps:{onSubmit:t},tipMessageProps:{blockAddressInfo:e}})}var oT=My;var Ry={match:o=>o===Wr,pages:{AddressPage:qI,AmountPage:XI,ConfirmPage:oT}},tT=Ry;r();s();Ao();r();s();var rT=m(h());r();s();var eT=m(W());tn();on();var Oy=()=>{let{baseCoin:o}=C();return(0,eT.useMemoizedFn)(async t=>{let e={account:t,coinId:o.coinId},n;try{n=await bc(dt.queryAccountExist,e)}catch(i){console.log(i)}return n?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function Uy(){let o=Gt(),t=Oy();return[o,t]}var nT=Uy;var Wy=()=>{let o=nT();return rT.default.createElement(Z,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},sT=Wy;r();s();var iT=m(h());function Gy(){return oo(),iT.default.createElement(Y,null)}var aT=Gy;r();s();var br=m(h());q();r();s();var cT=m(P());Qt();var Vy=o=>{let{coin:t,baseCoin:e}=C(),n=_(),i=(0,cT.useSelector)(io),a=ao(),c=Go();return po(async()=>await sn({coinId:t.coinId,address:n},{fromAddr:n,toAddr:i}),async A=>{let{info:T}=A,{chainid:I,compression:S,refBlockNumber:x,refBlockId:y,refBlockTimestamp:F,expireSeconds:E,precision:L,symbol:w,contract:B}=T,M={type:0,from:n,to:i,amount:a,memo:o,precision:L,symbol:w,contract:B,common:{chainId:I,compression:S,refBlockNumber:x,refBlockId:y,refBlockTimestamp:F,expireSeconds:E}};return await bo().signTransaction(M,n,e.localType)},async A=>{let T={memo:o},I=await So(t.localType,A),S={signedTx:A,coinAmount:a,coinId:t.coinId,fromAdr:n,toAdr:i,serviceCharge:"0",extJson:JSON.stringify(T),txHash:I};return await c(S)},A=>(so({tx_id:A}),A))},mT=Vy;var uT=256;function Hy(){let[o,t]=(0,br.useState)(""),e=mT(o),n=async()=>{await e()},i=a=>{let c=a.target.value;new TextEncoder().encode(c).length<=uT&&t(a.target.value)};return eo(),br.default.createElement($,{slot:{bottom:br.default.createElement(zt,{value:o,placeholder:b("extension_wallet_transaction_input_entermemo_max",{num:uT}),onChange:i})},confirmButtonProps:{onSubmit:n}})}var dT=Hy;var qy={match:o=>o===Lc,pages:{AddressPage:sT,AmountPage:aT,ConfirmPage:dT}},lT=qy;r();s();Ao();r();s();var Pr=m(h()),nc=m(P());q();r();s();var tc=m(P()),ec=m(W());fo();var Ky=1,Jy=()=>{let o=(0,tc.useSelector)(qm);return(0,ec.useMemoizedFn)(()=>o?{key:o}:null)},Xy=()=>{let o=(0,tc.useSelector)(Vm),{coin:t}=C();return(0,ec.useMemoizedFn)(e=>t.baseCoinId!==0||o?null:Mo(e,Ky)?{key:"wallet_extension_transfer_alert_unregistered_ripple_send"}:null)},fT=()=>{let o=Jy(),t=Pn(),e=Xy();oo({fns:[o,t,e],override:!0})};r();s();var Hi={title:"_title_12117_1",text:"_text_12117_5",icon:"_icon_12117_9"};var zy=()=>{fT();let o=(0,nc.useSelector)(Hm),t=(0,nc.useSelector)(fn);return Pr.default.createElement(Y,{totalAmountProps:{loading:t||o,title:Pr.default.createElement(V.Box,{className:Hi.title},Pr.default.createElement("div",{className:Hi.text},b("extension_wallet_send_text_transfer_available")),Pr.default.createElement(Ct,{size:Ct.SIZE.xxs,tooltip:b("wallet_extension_transfer_tooltips_ripple_balance"),icon:"okx-wallet-plugin-information-circle",className:Hi.icon})),type:"amount"},confirmButtonProps:{loading:t||o}})},pT=zy;r();s();var rc=m(h());r();s();var qe=m(h()),qi=m(P());q();r();s();var Jn={root:"_root_1cdky_1",input:"_input_1cdky_1",wrapper:"_wrapper_1cdky_1",inner:"_inner_1cdky_4",extra:"_extra_1cdky_7"};var Yy=4294967295,Zy=()=>{let o=(0,qi.useDispatch)(),t=(0,qi.useSelector)(ms),e=b("wallet_extension_transfer_input_placeholder_optional");return qe.default.createElement(it,{className:Jn.root,bordered:!1},qe.default.createElement(Me,{title:b("wallet_extension_transfer_input_label_tag")},qe.default.createElement(ut.Number,{max:Yy,min:0,precision:0,placeholder:e,size:ut.SIZE.xl,autoResize:!0,value:t,onChange:n=>{o(su(n))},className:Jn.input,inputClassName:Jn.wrapper,innerClassName:Jn.inner}),qe.default.createElement(j.Text,{className:Jn.extra},b("wallet_extension_transfer_input_tips_ripple_exchange"))))},gT=(0,qe.memo)(Zy);r();s();var AT=m(P());var $y=()=>{let{coin:o}=C(),t=_(),e=k(),n=ao(),i=J(),a=to(),c=Po(),u=(0,AT.useSelector)(ms),d=Vn(),p=ho({fromAddr:t,localType:o.localType,walletId:a}),g=_o({coinId:o.coinId,coinAmount:n,fromAddr:t,toAddr:e,localType:o.localType,networkFee:i,walletId:a}),f=async()=>await c({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),A=y=>{let{sequence:F,lastLedgerSequence:E}=y;return{type:"transfer",base:{account:t,flags:0,fee:i,sequence:F,lastLedgerSequence:E},data:{transactionType:"Payment",amount:n,destination:e,...u?{destinationTag:Number(u)}:{}}}};return po(f,y=>({params:A(y)}),async y=>{let{hash:F,tx_blob:E}=await p(y);return{signedTx:E,txHash:F,extJson:JSON.stringify(y.params)}},async({signedTx:y,txHash:F,extJson:E})=>{await g(y,{extJson:E,txHash:F})},d)},CT=$y;var jy=()=>{let o=CT();return rc.default.createElement($,{confirmButtonProps:{onSubmit:o},slot:{bottom:rc.default.createElement(gT,null)}})},IT=jy;r();s();r();s();var TT=m(h()),ST=m(P()),xT=m(W());var Qy=()=>{let{baseCoin:o}=C(),t=k(),e=(0,ST.useDispatch)(),n=(0,xT.useMemoizedFn)(async i=>{if(!!i)try{e(pa(!0));let{register:a}=await am({chainId:o?.chainId,address:i});e(au(a))}catch{e(cu("wallet_extension_transfer_error_address_info_unknown"))}finally{e(pa(!1))}});(0,TT.useEffect)(()=>{n(t)},[t,n])},hT=Qy;r();s();var Ki=m(h()),_T=m(P()),yT=m(W());var oF=()=>{let o=(0,_T.useDispatch)(),{coin:t}=C(),e=_(),n=k(),i=Po(),a=(0,Ki.useCallback)(async()=>{try{let u=await i({coinId:t.coinId,address:e,fromAddr:e,toAddr:n});o(iu(u));let{fee:d}=u;o(K(d))}catch{o(D(!0))}finally{o(mo(!1))}},[i,t.coinId,e,n,o]),{run:c}=(0,yT.useDebounceFn)(a,{wait:500});(0,Ki.useEffect)(()=>{o(mo(!0)),o(D(!1)),c()},[o,a,c])},FT=oF;r();s();var bT=m(h()),Er=m(P());fo();var tF=()=>{let o=(0,Er.useDispatch)(),{coin:t,baseCoin:e}=C(),{baseCoinId:n}=t,i=to(),c=Uo(e.coinId,i)?.coinAmountInt,d=(0,Er.useSelector)(Gm)?.needRemainedAmount,p=(0,Er.useSelector)(Qo);(0,bT.useEffect)(()=>{if(!c||!d||!p)return;let g=Ye([qo(c,lo(d,p)),0]);o(Co(g))},[o,n,d,c,p])},PT=tF;var eF=({children:o})=>(FT(),hT(),PT(),o),ET=eF;var nF={match:o=>o===Wc,SubContainer:ET,pages:{AddressPage:Z,AmountPage:pT,ConfirmPage:IT}},kT=nF;r();s();r();s();var Yi=m(h());r();s();var vT=m(h()),LT=m(W());var zi=m(P());rt();r();s();var wT=m(Bo());var BT=m(P());var NT=m(W());function rF(){let{coinId:o}=(0,wT.useParams)(),t=_(),e=(0,BT.useSelector)(io);return(0,NT.useMemoizedFn)(async()=>(await rn({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"}))?.data)}var Ji=rF;r();s();fo();function sF(){let o=xu();return(t,e,n)=>{let i=e||0,a=ko(n,0)?$o(i,n):"0",c=o[t];return Ac(Ho(a,10**(c.decimals||0)),0)}}var Xi=sF;function iF(){let o=(0,zi.useDispatch)(),[t,e]=(0,vT.useState)(!1),n=(0,zi.useSelector)(xm),i=Ji(),a=rd(),c=Xi();return(0,LT.useMount)(()=>{e(!0),(async()=>{try{let p=(await i())?.info||{},g={};if(n!==-1)g=(p?.coinFeeList||[]).find(({coinId:A})=>A===n);else{let A=pc(p?.coinFeeList||[],T=>a(T.coinId).currencyAmount||0);A&&(g=A.pop())}let f=c(g?.coinId,p?.methodFeeList?.transfer,g?.rate);o(me(g?.coinId)),o(K(f)),o(Xm(p))}finally{e(!1)}})()}),t}var DT=iF;function aF(){let o=DT();return oo(),Yi.default.createElement(Y,{confirmButtonProps:{loading:o}})}function cF(){let{coin:o}=C();return Yi.default.createElement(Eo,{fixed:!!o.vdecimalNum},Yi.default.createElement(aF,null))}var MT=cF;r();s();var Ke=m(h());var GT=m(W());r();s();var RT=m(P());Qt();Ro();Ao();function mF(){let o=Go(),{coin:t}=C(),e=_(),n=(0,RT.useSelector)(io),i=J(),a=le(),c=ao(),u=Ji(),{coin:d}=Ts(a,!1);return po(u,async(f={})=>{let{info:A={}}=f,{chainId:T,accountId:I,nonce:S,tokenId:x,coinFeeList:y=[]}=A,F=y.find(({coinId:w})=>w===a)||{},E={type:ae.TRANSFER,accountId:parseInt(I,10),nonce:S,from:e,chainId:T,to:n,tokenId:parseInt(x,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(F.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:i,amounts:c};return await bo().signTransaction(E,e,Ec)},async f=>{let{signature:A,tx:T}=f||{},{txHash:I,...S}=T||{},x={txSource:Nt.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:A,tx:S}),fromAdr:e,coinAmount:c,coinId:t.coinId,toAdr:n,serviceCharge:f?.tx?.fee,txHash:I,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(x)})}var OT=mF;r();s();var Yo=m(h()),Zi=m(P()),$i=m(W()),UT=m(Rt());q();r();s();var Xn={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var uF=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:n,setSupplyGas:i,...a})=>{let c=Uo(o),u=c?.coinAmountInt,d=v.gte(u,t);return Yo.default.createElement(ga.Card,{hovered:d,onClick:()=>{d&&n?.({coinId:o,feeCoinAmountInt:t})},selected:o===e},Yo.default.createElement(V.Space,{space:12,className:(0,UT.default)(Xn["select-networkFee-card-content"],{[Xn["select-networkFee-card-content-disable"]]:!d})},Yo.default.createElement(Ct,{size:Ct.SIZE.lg,src:c?.image,text:c?.text}),Yo.default.createElement(V.Space,{space:2,direction:V.DIRECTION.vertical,...a},Yo.default.createElement(j.Text,{strong:!0},c?.symbol),Yo.default.createElement(j.Text,{size:j.SIZE.xs,type:j.TYPE.secondary},d?b("developer_mode_send_text_balanceprice",{balance:To(u,{useContractPrecision:!0,contractPrecision:{decimals:c?.decimals},precision:c?.decimals}).value}):b("wallet_extension_placeorder_tooltips_insufficient",{token:c?.symbol})))),!d&&Yo.default.createElement(go,{category:go.CATEGORY.fill,type:go.TYPE.gray,size:go.SIZE.xxs,onClick:p=>{p?.stopPropagation(),i({supplyGasVisible:!0,supplyGasCoinId:o})}},b("extension_send_btn_fill_up_token",{token:c?.symbol})))},dF=({visible:o,onToggle:t})=>{let e=le(),n=(0,Zi.useDispatch)(),i=_(),a=It(),c=Xi(),[{supplyGasVisible:u,supplyGasCoinId:d},p]=(0,$i.useSetState)({supplyGasVisible:!1,supplyGasCoinId:null}),g=(0,Zi.useSelector)(Lm),f=g?.coinFeeList||[],A=g?.methodFeeList?.transfer,T=(0,$i.useCreation)(()=>f.map(({rate:x,coinId:y})=>{let F=c(y,A,x);return{coinId:y,feeCoinAmountInt:F}}),[f,A]),I=({coinId:x,feeCoinAmountInt:y})=>{t?.(),n(me(x)),n(K(y))},S=({coinId:x,feeCoinAmountInt:y})=>Yo.default.createElement(uF,{coinId:x,selectedCoinId:e,feeCoinAmountInt:y,onSelect:I,setSupplyGas:p});return o?Yo.default.createElement(V.Portal,{component:V.Container,className:Xn["select-networkFee"]},Yo.default.createElement(Su,{onBack:t,onClose:t,title:b("wallet_transfer_subtitle_network_fee")}),Yo.default.createElement(V.Box,{className:Xn["select-networkFee-content"]},Yo.default.createElement(j.Text,{className:Xn["select-networkFee-title"]},b("wallet_extension_send_alert_choose_token")),Yo.default.createElement(ga,{space:16,dataSource:T,renderItem:S})),Yo.default.createElement(Lu,{walletId:a,address:i,visible:u,closeCallback:()=>{p({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},WT=dF;function lF(){let[o,{toggle:t}]=(0,GT.useBoolean)(!1),e=OT(),n=async()=>{await e()};return eo(),Ke.default.createElement(Ke.default.Fragment,null,Ke.default.createElement($,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:n}}),Ke.default.createElement(WT,{visible:o,onToggle:t}))}function fF(){let{coin:o}=C();return Ke.default.createElement(Eo,{fixed:!!o.vdecimalNum},Ke.default.createElement(lF,null))}var VT=fF;var pF={match:o=>Cm(o),pages:{AddressPage:Z,AmountPage:MT,ConfirmPage:VT}},HT=pF;r();s();Ao();r();s();var Qi=m(h());r();s();var qT=m(h()),KT=m(W());var ji=m(P());function gF(){let o=(0,ji.useDispatch)(),{coin:t}=C(),e=_(),n=(0,ji.useSelector)(io),i=kd(),[a,c]=(0,qT.useState)(!1);return(0,KT.useMount)(()=>{c(!0),(async()=>{let d={coinId:t.coinId,address:e},p={fromAddr:e,toAddr:n,value:"0"};try{let g=await i("Transfer",d,p);if(g){let{info:f,feeCoin:A,fee:T}=g;o(tu({info:f,feeCoin:A})),o(me(A.coinId)),o(K(T)),o(D(!1))}}catch{o(D(!0))}finally{c(!1)}})()}),a}var JT=gF;r();s();var XT=m(h());q();fo();Lr();function sc(){let{coin:o}=C();return(0,XT.useCallback)(async t=>{let{ZksyncWallet:e}=await Zn(),n=Ho(t,10**o.decimals),i=await e.getCloseAmounts(n);return Br(i,n)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:v.showFloorTruncation($o(i,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:no.COMMON_ERROR}},[])}function AF(){let t=[sc()];oo(t)}var zT=AF;function CF(){let o=JT();return zT(),Qi.default.createElement(Y,{confirmButtonProps:{loading:o}})}function IF(){let{coin:o}=C();return Qi.default.createElement(Eo,{fixed:!!o.vdecimalNum},Qi.default.createElement(CF,null))}var YT=IF;r();s();var oa=m(h());r();s();var ic=m(P());Qt();Ao();Ro();function TF(){let o=Go(),{coin:t}=C(),e=_(),n=(0,ic.useSelector)(io),i=J(),a=le(),c=H(),u=(0,ic.useSelector)(Rm),d=async()=>{let{info:g,feeCoin:f}=u||{},{accountId:A,nonce:T}=g||{},I={type:ae.TRANSFER,from:e,to:n,accountId:parseInt(A,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:c,fees:i,decimals:t.decimals,nonce:parseInt(T,10)};return await bo().signTransaction(I,e,kc)},p=async g=>{if(g?.code)throw new Error(ws);let{signature:f,tx:A}=g||{},{txHash:T,...I}=A||{},S={txSource:Nt.NORMAL,signedTx:JSON.stringify({signature:f,tx:I}),fromAdr:e,serviceCharge:A?.fee,toAdr:A?.to,coinAmount:c,coinId:t.coinId,txHash:T,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(S)};return async()=>{let g=await d();return p(g)}}var ZT=TF;r();s();var $T=m(h());function SF(){let o=sc();return(0,$T.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:De.AMOUNT}:null},[o])}function xF(){let t=[SF()];eo(t)}var jT=xF;function hF(){let o=ZT(),t=async()=>o();return jT(),oa.default.createElement($,{confirmButtonProps:{onSubmit:t}})}function _F(){let{coin:o}=C();return oa.default.createElement(Eo,{fixed:!!o.vdecimalNum},oa.default.createElement(hF,null))}var QT=_F;var yF={match:o=>o===Bc,pages:{AddressPage:Z,AmountPage:YT,ConfirmPage:QT}},oS=yF;var FF=[Gp,Hf,Ml,fp,Sg,jg,FC,tT,HT,oS,iI,LC,lT,qC,ag,cA,wA,vI,JA,kT],tS=FF;var bF=({coinId:o,protocolId:t,baseCoinId:e})=>{let n=tS.find(({match:p})=>p(e,o,t))||{},{Container:i=({children:p})=>Zo.default.createElement(Zo.default.Fragment,null,p),SubContainer:a=({children:p})=>Zo.default.createElement(Zo.default.Fragment,null,p)}=n,{AddressPage:c,AmountPage:u,ConfirmPage:d}=n.pages||{};return Xe(n)?null:Zo.default.createElement(i,null,Zo.default.createElement(Ee.Switch,null,Zo.default.createElement(Ee.Route,{exact:!0,path:`${Oo}/:coinId?${mn}`,component:c}),Zo.default.createElement(a,null,Zo.default.createElement(Ee.Route,{exact:!0,path:`${Oo}/:coinId?${un}`,component:u}),Zo.default.createElement(Ee.Route,{exact:!0,path:`${Oo}/:coinId?${dn}`,component:d}))),Zo.default.createElement(Zd,null))},PF=(0,Zo.memo)(bF),EF=()=>{let{coinId:o}=(0,Ee.useParams)(),{coin:t,baseCoin:e}=Ts(o,!0);return Zo.default.createElement(PF,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t?.protocolId})},Ooo=EF;export{Ooo as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendPageContainer-QEYUM2VN.js.map
