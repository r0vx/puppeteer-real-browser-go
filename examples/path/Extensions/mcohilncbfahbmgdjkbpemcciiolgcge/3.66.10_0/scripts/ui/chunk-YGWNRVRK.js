import{a as le}from"./chunk-C6HPT3PU.js";import{a as ge}from"./chunk-UFD2MUZI.js";import{a as _}from"./chunk-DBWXHHZT.js";import{k as ue}from"./chunk-7JSJY3SQ.js";import{a as k}from"./chunk-WGVA2GGS.js";import{o as ce}from"./chunk-XP3TNE3R.js";import{Kb as pe,jc as ke,ra as ie,sa as me}from"./chunk-QRHYK2TW.js";import{_ as l}from"./chunk-4EIUGT5A.js";import{J as se,O as oe,P as re,R as ae,ia as ne}from"./chunk-QHXUL3YM.js";import{H as te,n as ee,y as G}from"./chunk-MOTAOJVG.js";import{q as P}from"./chunk-XR4SQWL7.js";import{L as H,P as Q,f as q,ra as R}from"./chunk-CYTB2B6Q.js";import{b as I}from"./chunk-OL67KS7C.js";import{f as F,o as m,q as p}from"./chunk-SHG7TIBL.js";m();p();var c=F(I()),h=F(ce());R();te();ne();m();p();var v=F(I());m();p();R();te();ne();var M=e=>H(e)||Q(e,0),C=(e,t)=>String(Math.ceil(se(e,t))),d=(e,t)=>ae(e,1)?`${ee.ceilShort(e||0,0,!1,0,!1)} ${t}`:k(e||0,{symbol:t}).value;function U({feeInfo:e,feeDisplay:t,customGasPriceStep:o,customGasAmount:a,customGasFee:n,canConfirm:u,onClick:r,onConfirm:i}){return(0,v.useMemo)(()=>({unitPrice:d(o,e.denom),totalPrice:v.default.createElement(ge,{text:t.custom,maxWidth:"160px",className:void 0,style:void 0}),estimatedTime:"",onClick:r,canConfirm:u,onConfirm:()=>{i({gasType:l.CUSTOM,gasPriceStep:o,gasAmount:a,gasFee:n})}}),[o,a])}m();p();var fe=F(I());function O({feeInfo:e,feeDisplay:t,onClick:o}){return(0,fe.useMemo)(()=>[{typeKey:l.SLOW,gasFee:e.gasFee.slow,unitPrice:d(e.gasPriceStep.slow,e.denom),totalPrice:t.slow,estimatedTime:"",onClick:()=>{o({gasType:l.SLOW,gasPriceStep:e.gasPriceStep.slow,gasAmount:e.gasAmount,gasFee:e.gasFee.slow})}},{typeKey:l.STANDARD,gasFee:e.gasFee.standard,unitPrice:d(e.gasPriceStep.standard,e.denom),totalPrice:t.standard,estimatedTime:"",onClick:()=>{o({gasType:l.STANDARD,gasPriceStep:e.gasPriceStep.standard,gasAmount:e.gasAmount,gasFee:e.gasFee.standard})}},{typeKey:l.FAST,gasFee:e.gasFee.fast,unitPrice:d(e.gasPriceStep.fast,e.denom),totalPrice:t.fast,estimatedTime:"",onClick:()=>{o({gasType:l.FAST,gasPriceStep:e.gasPriceStep.fast,gasAmount:e.gasAmount,gasFee:e.gasFee.fast})}}],[e])}m();p();var de=F(ke());function L({coinId:e,symbol:t,decimals:o,currencyId:a,fee:n,displayPrecision:u}){let r=k(n,{symbol:t,useContractPrecision:!0,contractPrecision:{decimals:o},precision:u}).value,i=ue(e,n,{currencyId:a,useApproximate:!0,useMinPrecision:!0,formatted:!0});return`${r} ${i}`}function V({coinId:e,fee:t}){let{baseCoin:o}=_(Number(e),!0),a=(0,de.useSelector)(pe),{currencyId:n}=a,{symbol:u,decimals:r,displayPrecision:i}=o,f=L({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.slow,displayPrecision:i}),g=L({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.fast,displayPrecision:i}),T=L({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.standard,displayPrecision:i}),y=L({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.custom,displayPrecision:i});return{slow:f,fast:g,standard:T,custom:y}}m();p();var ye=F(I()),Fe=F(ce());var _e={initLoading:!0,loading:!1,error:!1,denom:"",gasAmount:"0",gasPriceStep:{slow:"0",fast:"0",standard:"0"},gasFee:{slow:"0",fast:"0",standard:"0"}},$=0,ve=7e3;function z({coinId:e,address:t,value:o="0",inputData:a="",to:n=""}){let[u,r]=(0,ye.useState)(_e);async function i(){try{if(!e||!t||!a)return;r(x=>({...x,loading:!0,error:!1}));let[f,g]=await Promise.all([ie({coinId:e,from:t,value:o??"0",to:n??""}),me({coinId:e,from:t,value:o??"0",inputData:a})]),{min:T,normal:y,max:A,feeDemon:s}=f,N={denom:s,gasAmount:g,gasPriceStep:{slow:T,fast:A,standard:y},gasFee:{slow:C(T,g),fast:C(A,g),standard:C(y,g)},error:!1,initLoading:!1,loading:!1};r(N)}catch{r(g=>({...g,error:!0,initLoading:!1,loading:!1}))}}return(0,Fe.useDeepCompareEffect)(()=>(clearInterval($),i(),$=setInterval(i,ve),()=>{clearInterval($)}),[n,o,a]),u}m();p();var B={customGasPriceStep:"_customGasPriceStep_1drur_1",customGasPriceStepDenom:"_customGasPriceStepDenom_1drur_4"};function Le({coinId:e,address:t,to:o,inputData:a,visible:n,gasType:u=l.STANDARD,gasPriceStep:r,gasAmount:i,onConfirm:f,onBack:g,onClose:T,onChange:y}){let{baseCoin:A}=_(Number(e),!0),s=z({coinId:e,address:t,to:o,inputData:a}),[N,x]=(0,c.useState)(u),[D,Pe]=(0,c.useState)(u),[K,Te]=(0,c.useState)(),Se=(M(r)?void 0:r)||s.gasPriceStep.standard,w=typeof K=="string"?K:Se,[W,Ce]=(0,c.useState)(),De=(M(i)?void 0:i)||s.gasAmount,b=typeof W=="string"?W:De,J=oe(w,s.gasPriceStep.slow)?G("wallet_extension_cosmos_alert_morethan",{num:d(s.gasPriceStep.slow,s.denom)}):"",X=re(b,0)?G("wallet_extension_cosmos_alert_limitmorethan"):"",Ge=!J&&!X,Y=C(w,b),Z=V({coinId:e,fee:{...s.gasFee,custom:Y}}),j=(0,h.useMemoizedFn)(({gasType:E,gasAmount:we,gasPriceStep:be,gasFee:Ie})=>{x(E),Pe(E),y({gasType:E,gasPriceStep:be,gasAmount:we,gasFee:Ie,denom:s.denom,loading:!1,error:!1,initLoading:!1}),f&&f()}),Ae=O({feeInfo:s,feeDisplay:Z,onClick:j}),xe=U({feeInfo:s,feeDisplay:Z,customGasPriceStep:w,customGasAmount:b,customGasFee:Y,canConfirm:Ge,onClick:()=>{x(l.CUSTOM)},onConfirm:j});return(0,h.useDeepCompareEffect)(()=>{D!==l.CUSTOM&&y({gasType:D,gasAmount:s.gasAmount,gasPriceStep:s.gasPriceStep[D],gasFee:s.gasFee[D],denom:s.denom,loading:s.loading,error:s.error,initLoading:s.initLoading})},[D,s,o,a]),c.default.createElement(le,{feeType:N,feeDataList:Ae,onBack:g,onClose:T,onChange:q,visible:n,custom:{...xe,components:()=>c.default.createElement(c.default.Fragment,null,c.default.createElement(P.Number,{className:B.customGasPriceStep,size:P.SIZE.sm,title:c.default.createElement(c.default.Fragment,null,G("wallet_extension_cosmos_title_gasfee")),value:w,onChange:Te,errorType:P.TIP_TYPE.always,error:J,enableMinus:!1,min:0,precision:A?.decimals??6,suffix:c.default.createElement("span",{className:B.customGasPriceStepDenom},s.denom)}),c.default.createElement(P.Number,{size:P.SIZE.sm,title:G("wallet_extension_cosmos_title_gasamount",{},{useBr:!1}),value:b,onChange:Ce,errorType:P.TIP_TYPE.always,error:X,enableMinus:!1,min:0,precision:0}))}})}export{Le as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-YGWNRVRK.js.map
