import{a as Et,b as kt}from"./chunk-YRSPTNVO.js";import{b as me,d as Tt,e as It}from"./chunk-TZ7T5CIH.js";import{a as xt,b as wt}from"./chunk-U6NBHUF6.js";import{a as Nt}from"./chunk-2SBM2GLU.js";import{a as At}from"./chunk-32XJE5HT.js";import{H as yt}from"./chunk-CDNJY7Z3.js";import{a as ht}from"./chunk-NWY3GPDX.js";import{a as St}from"./chunk-ACLCW4PT.js";import{b as bt}from"./chunk-6SNKRANG.js";import{a as le}from"./chunk-WPAZ67JY.js";import{b as nt}from"./chunk-IP56UC5N.js";import{g as ae,h as Ct}from"./chunk-OK4242CI.js";import{a as dt,b as ft,c as _t,d as gt}from"./chunk-6MVL4I6V.js";import{la as Je}from"./chunk-NQAVUB4Q.js";import{a as pt}from"./chunk-IEGAVAV7.js";import{e as Ie}from"./chunk-5A3RJQCM.js";import{m as ne,o as st}from"./chunk-MWPAA6TC.js";import{g as Ne}from"./chunk-MN3UHDTX.js";import{b as se}from"./chunk-7C7MBE2C.js";import{a as ut}from"./chunk-5CHE7P4E.js";import{d as re}from"./chunk-QYDRYMWS.js";import{g as ct}from"./chunk-AZNX5TUC.js";import{b as ie}from"./chunk-UR7XESQE.js";import{b as mt,c as lt}from"./chunk-MONRGJFN.js";import{h as at}from"./chunk-IK72BO4I.js";import{I as oe,e as te}from"./chunk-QMENNGDH.js";import{a as b}from"./chunk-KANXVZ35.js";import{g as it}from"./chunk-WGVA2GGS.js";import{o as et}from"./chunk-XP3TNE3R.js";import{Eb as Qe,Fb as Xe,I as Ye,J as qe,K as Ke,c as po,ic as Ze,jc as P,oa as Ve}from"./chunk-QRHYK2TW.js";import{a as Ae}from"./chunk-532YJKK4.js";import{e as tt,l as ot,m as rt}from"./chunk-YCFHPQAJ.js";import{c as C}from"./chunk-62ZAND24.js";import{a as Te}from"./chunk-SIITVWZR.js";import{B as V,Dc as Re,Eb as je,Ec as ze,I as He,J as We,Jb as uo,L as Q,Ma as $e,Na as co,R as X,gc as he,ia as Ce,ic as ye,ja as Z,ka as Ge,od as Ue}from"./chunk-QHXUL3YM.js";import{G as Fe,H as D,k as Pe,n as De,y}from"./chunk-MOTAOJVG.js";import{M as F,O as Y,d as ee,y as j}from"./chunk-XR4SQWL7.js";import{aa as J,ka as U}from"./chunk-6M3PZK2X.js";import{b as S}from"./chunk-OL67KS7C.js";import{f as p,o,q as r}from"./chunk-SHG7TIBL.js";o();r();var Oo="home-page-root-element-id";o();r();var _=p(S()),ao=p(P());o();r();var Ee=p(S());D();o();r();var be={content:"_content_1mi10_1",wrapper:"_wrapper_1mi10_5"};var Lt=({tryAgain:e})=>Ee.default.createElement(C.FlexBox,{align:C.ALIGN.center,justify:C.ALIGN.center,direction:C.DIRECTION.vertical,className:be.content},Ee.default.createElement(j.State,{title:y("wallet_extension_home_title_network_unavailable"),type:j.State.TYPE.noNetwork,description:y("wallet_extension_home_text_check_network_error"),buttonText:y("wallet_extension_home_btn_try_again"),onButtonClick:()=>{e&&e()},className:be.wrapper}));o();r();var k=p(S());o();r();var E={skeletonWrapper:"_skeletonWrapper_k76ne_1",tab:"_tab_k76ne_5",tokenList:"_tokenList_k76ne_10",token:"_token_k76ne_10",logo:"_logo_k76ne_18",symbol:"_symbol_k76ne_23",chain:"_chain_k76ne_28",middle:"_middle_k76ne_32",number:"_number_k76ne_35",currency:"_currency_k76ne_40"};var fo=()=>k.default.createElement(C.FlexBox,{direction:C.DIRECTION.vertical,align:C.ALIGN.unset,className:E.skeletonWrapper},k.default.createElement(F.Input,{active:!0,className:E.tab}),k.default.createElement(C.FlexBox,{direction:C.DIRECTION.vertical,justify:"space-around",className:E.tokenList},Array(5).fill("").map((e,t)=>k.default.createElement(C.FlexBox,{className:E.token,align:C.ALIGN.center,key:t},k.default.createElement(F.Avatar,{active:!0,className:E.logo}),k.default.createElement(C.FlexBox,{direction:C.DIRECTION.vertical,className:E.middle},k.default.createElement(F.Input,{active:!0,className:E.symbol}),k.default.createElement(F.Input,{active:!0,className:E.chain})),k.default.createElement(C.FlexBox,{direction:C.DIRECTION.vertical,align:C.ALIGN.end,className:E.right},k.default.createElement(F.Input,{active:!0,className:E.number}),k.default.createElement(F.Input,{active:!0,className:E.currency})))))),Ot=fo;o();r();var ce=p(S());var Mt=p(P());var vt=()=>{let[e,t]=(0,ce.useState)([]),n=se("nft-operate"),d=(0,Mt.useSelector)(Xe)?.account?.aptos||"",a=Tt();return It(),(0,ce.useEffect)(()=>{(!n||n.data.status===2)&&d&&Ve(d).then(m=>{t(m.list)}),n?.data?.status===2&&setTimeout(()=>{a()},3e3)},[n,a]),{aptosNftOffers:e,aptosAddress:d,fetchNftListData:a}};o();r();o();r();var u=p(S()),ro=p(P()),no=p(Ae());o();r();var Ft=p(po());o();r();var go=e=>{let t=e;return typeof t!="string"?"":(t?.[0]==="$"&&(t=e?.slice(1)),t?.toLowerCase()||"")},Bt=e=>e.isHighQuality!==rt.NORMAL&&e.riskType===ot.NORMAL;function Pt(e){let t=new Map;return e.forEach(n=>{let i=n,a=`${go(i.symbol)}-${i.chainId}`;if(t.has(a)){let m=t.get(a);Bt(m)&&!m.sameNameCoin&&(m.sameNameCoin=!0),Bt(i)&&(i.sameNameCoin=!0)}else t.set(a,i)}),e}o();r();Ce();var Dt=({addedCoinIdsSet:e,defaultBaseCoinsCoinIdsSet:t,balanceCoin:n,isDefault:i})=>{let d=e.has(n.coinId),a=t.has(n.coinId)||i||n.isDefault,m=d||a,T=X(n.currencyAmountUSD,"1");return m||T};var Co={showCoins:[],hiddenCoins:[]},Ht=(0,Ft.createSelector)(ft,dt,gt,_t,(e,t,n,i)=>{if(!e.length)return Co;let d=Ne(e,h=>!n.has(h.coinId),{sort:!1}).results,a=Pt(d),{results:m,uselessResults:T}=Ne(a,(h,s)=>Dt({defaultBaseCoinsCoinIdsSet:i,addedCoinIdsSet:t,balanceCoin:h,isDefault:s}));return{showCoins:m,hiddenCoins:T}});o();r();var Wt=p(P());function ho(){let e=(0,Wt.useDispatch)(),[t]=lt(mt.hiddenSmallAssets),n=m=>{e(at(m))};return[t,{toggle:()=>{n(!t)},hide:()=>{n(!0)},show:()=>{n(!1)},setValue:n}]}var Gt=ho;D();o();r();var jt=p(S()),ke=p(P());D();Ce();var yo=e=>e.map(t=>({...t,coinAmount:null})),$t=e=>e.map(t=>{try{let n=new Fe(t.image),{query:i}=n;if(!i.get("x-oss-process"))return i.set("x-oss-process","image/resize,m_lfit,w_100,h_100/ignore-error,1"),{...t,image:n.get()}}catch{}return t}),Se=e=>{let t=pt(),{currentNetworkUniqueId:n}=le(),i=(0,ke.useSelector)(Qe),d=(0,ke.useSelector)(Ze),a=Boolean(i[t]),m=Boolean(d[t]);return(!a||m)&&(e=yo(e)),(0,jt.useMemo)(()=>{if(n==="")return $t(e);let h=e.filter(l=>(l?.childrenCoin||[]).find(c=>c.chainId===Number(n))||l.chainId===Number(n)),s=[];return h.forEach(l=>{if(l?.aggregation){let c=(l?.childrenCoin||[]).filter(I=>I.chainId===Number(n)),g=c.reduce((I,N)=>Q(I,N.coinAmount),"0"),A=c.reduce((I,N)=>Q(I,N.currencyAmount),"0"),L=c.reduce((I,N)=>Q(I,N.currencyAmountUSD),"0");s.push({...l,childrenCoin:c,coinAmount:g,currencyAmount:A,currencyAmountUSD:L})}else s.push(l)}),s=s.map(l=>({...l,coinAmount:l?.coinAmount===null?"--":De.truncate(l?.coinAmount,6,!1)})).sort((l,c)=>X(c.currencyAmount,l.currencyAmount)?1:-1),$t(s)},[e,n])};o();r();o();r();var pe=p(S()),Rt=p(Ae());var zt=p(Te());D();o();r();var ue={button:"_button_6jkwx_1","button--has-dapp-state":"_button--has-dapp-state_6jkwx_13",buttonHasDappState:"_button--has-dapp-state_6jkwx_13",icon:"_icon_6jkwx_16",empty:"_empty_6jkwx_20"};function Ao({hasDappState:e}){let t=(0,Rt.useHistory)();return pe.default.createElement("div",{className:(0,zt.default)(ue.button,{[ue["button--has-dapp-state"]]:e}),"data-testid":b.HOME_PAGE.COIN_MANAGE_BUTTON_BOTTOM},pe.default.createElement(U,{circle:!0,category:U.CATEGORY.outline,type:U.TYPE.secondary,size:U.SIZE.md,onClick:()=>{t.push(oe)}},pe.default.createElement(J,{className:`okx-wallet-plugin-edit-wallet ${ue.icon}`}),y("wallet_home_btn_manage_crypto")))}var Ut=Ao;var Yt=Ut;o();r();var R=p(S()),Zt=p(P()),Jt=p(et());o();r();var qt=p(et());var Kt=()=>{let e=ae();return(0,qt.useCreation)(()=>Object.keys(e).reduce((t,n)=>{let i=e?.[n]?.priceCoinId;return t[n]=i,t},{}),[e])};Ce();o();r();var xe=p(P()),Qt=p(Ae());Ue();var Vt={[ye]:"btcAggregation",[Re]:"nearAggregation",[ze]:"tonAggregation"},Xt=()=>{let{currentNetworkUniqueId:e}=(0,xe.useSelector)(re),t=Ct(),n=(0,Qt.useHistory)(),i=(0,xe.useSelector)(nt),d=ct(),a=i?.[d],m=s=>{if(a?.[`${s.symbol}-${s.coinId}`])return a[`${s.symbol}-${s.coinId}`];let l=Vt[s.localType]||Vt[ye],c=ie({[l]:!0,coinSymbol:s.symbol,coinId:s.coinId,addressType:"",sameNameCoin:Boolean(s.sameNameCoin)});return`${te}${c}`},T=async s=>{if(e===""&&a?.[s.symbol])return a[s.symbol];let c=(e!==""?s.childrenCoin.find(A=>A.chainId===Number(e)):null)?.coinId||"",g=ie({aggregation:!0,coinSymbol:s.symbol,coinId:c,sameNameCoin:Boolean(s.sameNameCoin)});return`${te}${g}`};return{jumpCoinDetailPage:async s=>{let l="";if(s.aggregation)l=await T(s);else if(Ye(s)||qe(s)||Ke(s))l=m(s);else{let c=ie({coinId:s.coinId,sameNameCoin:Boolean(s.sameNameCoin)});l=`${te}${c}`}l&&n.push(l)},coinToCurrencyRate:t}};function To({dataSource:e,hiddenAssets:t,onMount:n}){let{jumpCoinDetailPage:i,coinToCurrencyRate:d}=Xt(),a=Kt(),m=wt(),T=ae(),{currentNetworkUniqueId:h}=(0,Zt.useSelector)(re),s=(0,Jt.useMemoizedFn)(()=>{n?.()});(0,R.useLayoutEffect)(()=>{s()},[s]);let l=c=>{let{aggregation:g,coinId:A,coinAmount:L,currencyAmount:I}=c,N=A;g&&!h&&(N=a?.[A]||A);let H=d?.[N]||"0",z=g&&!h?We(L,H):I,B=T?.[N],O=B?.coinPriceChangePercent24h??void 0,W=B?.anchorStatus===1;return{price:H,currencyAmount:z,pricePercent:O,isAnchorOff:W}};return R.default.createElement(Ie,{"data-testid":b.HOME_PAGE.COMMON_COIN_LIST,renderEmpty:!1,dataSource:e,renderItem:c=>{let{image:g,symbol:A,coinAmount:L,riskType:I,chainName:N,sameNameCoin:H,voucherToken:z,stableCoin:B,displayPrecision:O,childrenCoin:W=[]}=c,G=m(c),{price:Me,currencyAmount:M,pricePercent:$,isAnchorOff:ge}=l(c);return R.default.createElement(Ie.Coin,{icon:{lazyload:!0,src:g,type:it.image,defaultIcon:tt},price:Me,pricePercent:$,symbol:A,hidden:t,balance:G?L:void 0,market:G?M:void 0,onClick:async()=>{G&&await i(c)},riskType:I,chainName:N,isAnchorOff:ge,isVoucherToken:z,sameNameCoin:H,stableCoin:B??W[0]?.stableCoin,displayPrecision:O??W[0]?.displayPrecision},!G&&R.default.createElement(xt,{coinId:c?.coinId}))}})}var we=To;o();r();var w=p(S());D();Ue();co();uo();o();r();var eo={root:"_root_qmbez_1",alert:"_alert_qmbez_4"};function Io(){let[e,t]=(0,w.useState)(!1),[n,i]=(0,w.useState)({}),d=ut(he),a=se("dex-across-order-info"),{currentNetworkUniqueId:m}=le(),T=ht({localType:he})||[],h=Number(m)===T?.[0]?.realChainId||m==="";(0,w.useEffect)(()=>{(()=>{je($e.postPendingFacetOrder,{userWalletAddresses:d,chainId:T?.[0]?.realChainId||1}).then(c=>{if(c.data?.length>0){if(h)t(!0);else{t(!1);return}let g=c.data.filter(A=>Number(A.status)===11&&Number(A.specialOrderType)===3);g?.length>0?(i({orderId:g[0].orderId,toAmount:g[0].toAmount,toTokenSymbol:g[0].toTokenSymbol}),t(!0)):(i(""),t(!1))}else i({}),t(!1)}).catch(()=>{i({}),t(!1)})})()},[a,m,h]);let{openDexTxDetailDialog:s}=yt();return e?w.default.createElement(C.Box,{className:eo.root},w.default.createElement(ee,{desc:w.default.createElement("div",null,y("swaptrade_extension_reminder_desc_pending_withdrawal",{token:n?.toTokenSymbol,amount:n?.toAmount}),w.default.createElement(ee.Link,{onClick:l=>{l.preventDefault(),s(n?.orderId)}},y("wallet_extension_details_textbtn_check_details"))),type:ee.TYPE.info,onClose:()=>{t(!1)}})):null}var to=Io;o();r();var fe=p(S()),Le=p(Te());D();Ge();He();o();r();var de={root:"_root_15d68_1","root--sticky":"_root--sticky_15d68_12",rootSticky:"_root--sticky_15d68_12",icon:"_icon_15d68_19"};function No({length:e,toggle:t,value:n}){let i=n?"okds-arrow-chevron-down-md":"okds-arrow-chevron-up-md",d=y("wallet_extension_main_toggle_hide",{num:Pe.formatNumber(e)});return fe.default.createElement("div",{onClick:t,className:(0,Le.default)(de.root,{[de.rootSticky]:Z()!==V}),"data-testid":b.HOME_PAGE.HIDDEN_COIN_LIST},fe.default.createElement("div",null,d),fe.default.createElement(J,{className:(0,Le.default)(i,de.icon)}))}var oo=No;o();r();var q={button:"_button_1e59f_1",coinListInnerContainer:"_coinListInnerContainer_1e59f_5",showButton:"_showButton_1e59f_10",coinList:"_coinList_1e59f_5",icon:"_icon_1e59f_22",hiddenCoinList:"_hiddenCoinList_1e59f_26",empty:"_empty_1e59f_30",emptyImg:"_emptyImg_1e59f_33"};var bo=(0,u.lazy)(()=>import("./LimitOrder-SE3XPYG4.js")),Eo=190,ko=({scrollTop:e,hiddenAssets:t,backupHeight:n,changeScrollTop:i,showDappConnectAffix:d})=>{let[a,m]=(0,u.useState)(!1),T=(0,u.useRef)(null),{showCoins:h,hiddenCoins:s}=(0,ro.useSelector)(Ht),l=Se(h),c=Se(s),[g,{toggle:A}]=Gt(),L=(0,u.useRef)(e),I=()=>{L.current=e,A()},N=()=>{requestAnimationFrame(()=>{i(L.current)})},{fetch:H}=kt();Nt(H,{cacheKey:Et,staleTime:1e3*60*10}),(0,u.useLayoutEffect)(()=>{let M=document.getElementById("home-page-root-element-id");if(!M)return;let $=()=>{m((()=>{let mo=M.scrollHeight>window.innerHeight,lo=M.scrollTop>0;return!mo||lo})())};$();let ge=setTimeout($,100),ve=new ResizeObserver(()=>{$()});ve.observe(M);let Be=()=>{$()};return M.addEventListener("scroll",Be),()=>{clearTimeout(ge),ve.disconnect(),M.removeEventListener("scroll",Be)}},[l,c,g]);let z=(0,no.useHistory)(),B=l.length,O=c.length,W=(0,u.useMemo)(()=>e<=Eo?!1:B+(g?0:O)>8,[g,O,B,e]),{paddingBottom:G}=bt({isButtonAbsolute:W,backupHeight:n});return B===0&&O===0?u.default.createElement("div",{style:{paddingBottom:G+n}},u.default.createElement(j.State,{imgClassName:q.emptyImg,className:q.empty,type:j.State.TYPE.noRecord,title:y("extension_wallet_home_text_no_added_currencies"),buttonText:y("extension_wallet_home_btn_add_now"),onButtonClick:()=>{z.push(oe)}})):u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:q.coinList},u.default.createElement(St,{assetType:"coin",buttonRef:T}),u.default.createElement(u.Suspense,{fallback:null},u.default.createElement(bo,null)),u.default.createElement(to,null),u.default.createElement(we,{dataSource:l,hiddenAssets:t})),u.default.createElement("div",{className:q.hiddenCoinList},O>0&&u.default.createElement(u.default.Fragment,null,u.default.createElement(oo,{length:O,toggle:I,value:g}),!g&&u.default.createElement(we,{onMount:N,dataSource:c,hiddenAssets:t}))),a&&u.default.createElement(Yt,{hasDappState:d}))},Oe=ko;o();r();var x=p(S()),_e=p(P()),so=p(Te());D();Ge();He();o();r();var K={homeTabs:"_homeTabs_16jop_1","homeTabs--sticky":"_homeTabs--sticky_16jop_4",homeTabsSticky:"_homeTabs--sticky_16jop_4",homeTab:"_homeTab_16jop_1",active:"_active_16jop_19"};var io=({aptosNftOffers:e})=>{let t=(0,_e.useSelector)(ne),n=(0,_e.useDispatch)(),i=At(Je),d=(0,x.useMemo)(()=>[x.default.createElement("div",{key:"coins","data-testid":`${b.HOME_PAGE.MAIN_TABS}-wallet_extension_nft_tab_coins`},y("wallet_extension_nft_tab_coins")),x.default.createElement("div",{key:"defi","data-testid":`${b.HOME_PAGE.MAIN_TABS}-wallet_extension_tab_defi`},y("wallet_extension_tab_defi")),x.default.createElement("div",{key:"nfts","data-testid":`${b.HOME_PAGE.MAIN_TABS}-wallet_extension_nft_tab_nfts`},y("wallet_extension_nft_tab_nfts"),e.length>0&&x.default.createElement("span",{className:"new-home-nft-aptos-notify"})),x.default.createElement("div",{key:"approve","data-testid":`${b.HOME_PAGE.MAIN_TABS}-wallet_extension_home_tab_approvals`},y("wallet_extension_home_tab_approvals"))],[e]);return x.default.createElement("div",{className:(0,so.default)(K.homeTabs,{[K.homeTabsSticky]:Z()!==V}),"data-testid":b.HOME_PAGE.MAIN_TABS},x.default.createElement(Y,{noLine:!0,activeId:t,size:Y.SIZE.lg,color:Y.COLOR.grey,paneSpacing:0,noPadding:!0,onChange:a=>{let m;switch(a){case v.CRYPTO:m="crypto";break;case v.DEFI:m="defi";break;case v.NFT:m="nfts";break;case v.APPROVE:m="approve";break;default:break}i({homepage:m}),n(st.setActiveId({id:a}))}},d.map((a,m)=>x.default.createElement(Y.TabPane,{className:`${K.homeTab} ${+t===m+1?K.active:""}`,tab:a,key:a.key,id:m+1}))))};var So=(0,_.lazy)(()=>import("./Nft-KLBD7AE2.js")),xo=(0,_.lazy)(()=>import("./DefiList-O3MJFGNS.js")),wo=(0,_.lazy)(()=>import("./Approve-VH6W6FXT.js")),v={CRYPTO:1,DEFI:2,NFT:3,APPROVE:4},ki=({scrollTop:e,hiddenAssets:t,backupHeight:n,isWalletCreated:i,changeScrollTop:d,errorType:a,tryAgain:m,showDappConnectAffix:T})=>{let h=(0,ao.useSelector)(ne),{aptosNftOffers:s,aptosAddress:l}=vt(),c=(0,_.useMemo)(()=>{switch(h){case v.NFT:return _.default.createElement(_.Suspense,{fallback:null},_.default.createElement(So,{scrollTop:e,aptosNftOffers:s,aptosAddress:l,backupHeight:n}));case v.DEFI:return _.default.createElement(_.Suspense,{fallback:null},_.default.createElement(xo,{scrollTop:e,hiddenAssets:t,backupHeight:n,isWalletCreated:i}));case v.APPROVE:return _.default.createElement(_.Suspense,{fallback:null},_.default.createElement(wo,null));default:return _.default.createElement(Oe,{scrollTop:e,hiddenAssets:t,backupHeight:n,changeScrollTop:d,showDappConnectAffix:T})}},[h,e,t,n,d,s,l,i]),g=(0,_.useMemo)(()=>a===me.PENDING,[a]),A=(0,_.useMemo)(()=>[me.CREATE_FAIL_FROM_NETWORK_ERROR,me.CREATE_FAIL_FROM_SERVER_ERROR].includes(a),[a]);return _.default.createElement(_.default.Fragment,null,_.default.createElement(io,{aptosNftOffers:s}),(()=>A?_.default.createElement(Lt,{tryAgain:m}):g&&(h===v.CRYPTO||!h)?_.default.createElement(Ot,null):c)())};export{Oo as a,v as b,ki as c};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-BRQ6KAFA.js.map
