import{a as yo,b as xr,c as wr}from"./chunk-4T2OTP66.js";import"./chunk-3P56MQRB.js";import{b as $t,f as zt}from"./chunk-Z475AMKL.js";import"./chunk-PZSN2XKL.js";import"./chunk-6Q4OK5GJ.js";import"./chunk-OAW4CIA6.js";import{a as hr}from"./chunk-UFD2MUZI.js";import"./chunk-CEM2RCMY.js";import"./chunk-SKXNZFRN.js";import"./chunk-A267SEFJ.js";import{a as M}from"./chunk-VR7OPIR6.js";import"./chunk-32XJE5HT.js";import{a as fr}from"./chunk-DBWXHHZT.js";import"./chunk-7JSJY3SQ.js";import{a as yr}from"./chunk-NWY3GPDX.js";import{a as ur}from"./chunk-6JEFG7DQ.js";import{a as gr}from"./chunk-WPAZ67JY.js";import{b as nr,c as Gt,d as ir,e as lr,f as mr,g as cr,h as uo}from"./chunk-5D5WAQN4.js";import{c as qt}from"./chunk-BUFBDWTM.js";import"./chunk-POY76BOX.js";import"./chunk-FOTDJN5Q.js";import{b as pr}from"./chunk-CAW5K4G3.js";import"./chunk-ISXIP6MC.js";import"./chunk-NDFYN4CL.js";import"./chunk-G7NNFMT4.js";import"./chunk-JRQMCDSC.js";import"./chunk-5SVZVIW6.js";import{j as Wt}from"./chunk-MRHV2NKN.js";import"./chunk-ONWPWBS4.js";import"./chunk-UM2UK5YS.js";import"./chunk-U7FUSLT6.js";import{a as dr}from"./chunk-AADHEW4J.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import{g as it}from"./chunk-E7MGN3V4.js";import{g as Qo,na as Zo,t as kt}from"./chunk-NQAVUB4Q.js";import"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-KJWX5V23.js";import"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import{b as Pt,d as Ft}from"./chunk-QYDRYMWS.js";import{a as fo,b as _r,e as Ve,f as jt}from"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import{d as Ht}from"./chunk-XZE3L7K7.js";import"./chunk-NS7RQN2C.js";import"./chunk-7IRBVBKW.js";import"./chunk-OS3ZP336.js";import"./chunk-WJ3PVDDF.js";import"./chunk-SRDHWFY4.js";import"./chunk-OVC6PVQJ.js";import"./chunk-7IJVOYMR.js";import"./chunk-BO5YOOQA.js";import"./chunk-QTKQMZ5K.js";import{a as Y}from"./chunk-Y5K5NJ6U.js";import"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import"./chunk-Q7FGM7BT.js";import{b as Se}from"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{a as ee,ia as Ro,ob as vt,q as Mt,r as Ye,s as de,t as Ot,u as Dt}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import{r as b}from"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as ze}from"./chunk-XP3TNE3R.js";import{Ab as St,C as co,Cb as bt,Db as Vo,Xb as nt,ac as Xo,jc as ie,yb as At}from"./chunk-QRHYK2TW.js";import"./chunk-PODZSVO7.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as te}from"./chunk-532YJKK4.js";import{j as $e,p as _o}from"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import{m as Ct,n as Nt,r as Yo}from"./chunk-ZDOH3CEJ.js";import{c as po,e as As}from"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import{b as Ne}from"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import{c as Jo}from"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import{c as Ut,d as Kt,f as ar,g as mt}from"./chunk-COS5CL3D.js";import{c as w,d as oe,e as R,g as er,h as tr,j as or,k as rr,n as sr}from"./chunk-VL2YBSHB.js";import{d as lt}from"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as t}from"./chunk-62ZAND24.js";import{a as Ae}from"./chunk-SIITVWZR.js";import{I as Cs,Pd as jo,Q as wt,Rd as $o,Vd as at,Xd as zo,gc as Q,ia as Fo,ic as je,kb as Ie,la as Uo,mb as Et,mc as Lt,ob as Bt,oc as It,od as Ce,pd as st,ra as Ns,rd as qo,t as Po}from"./chunk-QHXUL3YM.js";import{H as S,n as Wo,y as l}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{A as Ho,E as Go,H as D,M as ne,e as rt,g as Le,o as qe,r as Ko,x as Tt}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import{H as mo,X as vo,Z as xt,f as gt,o as Do,ra as Be}from"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as ae,fa as Ge,ka as I}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as E}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-2MNWRWA5.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as p,o as a,q as n}from"./chunk-SHG7TIBL.js";a();n();var pe=p(E());var se=p(te());a();n();S();var Er=p(ie());var Br=p(te());var x=p(E());a();n();var be=p(E()),ho=p(Ae());S();a();n();var ye={root:"_root_14nif_1",closeWrap:"_closeWrap_14nif_5",closeIcon:"_closeIcon_14nif_13",closeText:"_closeText_14nif_17",stepWrap:"_stepWrap_14nif_23",stepItem:"_stepItem_14nif_30",active:"_active_14nif_37"};var Ss=e=>{let{currentStep:o,handleClose:r}=e;return be.default.createElement(t.Box,{className:ye.root},be.default.createElement(t.Box,{className:ye.closeWrap},be.default.createElement(ae,{onClick:r,className:(0,ho.default)("okx-wallet-plugin-close",ye.closeIcon)}),o!==3?be.default.createElement(t.Box,{onClick:r,className:ye.closeText},l("wallet_extension_top_textbtn_skip")):null),be.default.createElement(t.Box,{className:ye.stepWrap},Array(4).fill(" ").map((s,i)=>be.default.createElement(t.Box,{key:i,className:(0,ho.default)(ye.stepItem,{[ye.active]:o===i})}))))},ct=Ss;a();n();var go=p(E());a();n();var Tr={root:"_root_1wb1e_1"};var bs=({handleNext:e})=>go.default.createElement(t.FlexBox,{className:Tr.root,align:t.ALIGN.center,justify:t.ALIGN.center,onClick:e},go.default.createElement(ae,{className:"okds-arrow-pointer-right-sm"})),Yt=bs;a();n();var W={root:"_root_15mve_1",wrap:"_wrap_15mve_9",title:"_title_15mve_13",titleColorfulGreen:"_titleColorfulGreen_15mve_22",titleColorfulYellow:"_titleColorfulYellow_15mve_25",desc:"_desc_15mve_28",firstScreenImg:"_firstScreenImg_15mve_36",secondAndFourthScreenImg:"_secondAndFourthScreenImg_15mve_42",thirdScreenImg:"_thirdScreenImg_15mve_45",footerWrap:"_footerWrap_15mve_48"};var ks=e=>{let{handleNext:o,handleClose:r}=e,s=lt({light:"/cdn/assets/imgs/245/AB118B1F7E00FCCF.png",dark:"/cdn/assets/imgs/245/46D15BEDF89AD94E.png"});return x.default.createElement(x.default.Fragment,null,x.default.createElement(ct,{currentStep:0,handleClose:r}),x.default.createElement(t.Box,{className:W.wrap},x.default.createElement(t.Box,{className:W.title},x.default.createElement("span",null,l("wallet_extension_top_title_added_seed_phrase1",{seedPhrase:l("wallet_extension_top_title_added_seed_phrase2")}))),x.default.createElement(b.Text,{className:W.desc},l("wallet_extension_top_maintitle_added_seed_phrase")),x.default.createElement(rt,{className:W.firstScreenImg,src:s})),x.default.createElement(Yt,{handleNext:o}))},Ms=e=>{let{handleNext:o,handleClose:r}=e,s=lt({light:"/cdn/assets/imgs/245/4A7B68AABB586801.png",dark:"/cdn/assets/imgs/245/46C68B7C7B93F25B.png"});return x.default.createElement(x.default.Fragment,null,x.default.createElement(ct,{currentStep:1,handleClose:r}),x.default.createElement(t.Box,{className:W.wrap},x.default.createElement(t.Box,{className:W.title},l("wallet_extension_top_title_unlock_hardware")),x.default.createElement(b.Text,{className:W.desc},l("wallet_extension_top_subtitle_confirm_unlock")),x.default.createElement(rt,{src:s,className:W.secondAndFourthScreenImg})),x.default.createElement(Yt,{handleNext:o}))},Os=e=>{let{handleNext:o,handleClose:r}=e,s=lt({light:"/cdn/assets/imgs/245/21F0D08062856488.png",dark:"/cdn/assets/imgs/245/D8A2A5141B0A6F22.png"});return x.default.createElement(x.default.Fragment,null,x.default.createElement(ct,{currentStep:2,handleClose:r}),x.default.createElement(t.Box,{className:W.wrap},x.default.createElement(t.Box,{className:W.title},l("wallet_extension_top_title_usb_connected")),x.default.createElement(b.Text,{className:W.desc},l("wallet_extension_top_subtitle_after_connected")),x.default.createElement(rt,{src:s,className:W.thirdScreenImg})),x.default.createElement(Yt,{handleNext:o}))},Ds=e=>{let{handleClose:o}=e,r=lt({light:"/cdn/assets/imgs/245/21F0D08062856488.png",dark:"/cdn/assets/imgs/245/D8A2A5141B0A6F22.png"});return x.default.createElement(x.default.Fragment,null,x.default.createElement(ct,{currentStep:3,handleClose:o}),x.default.createElement(t.Box,{className:W.wrap},x.default.createElement(t.Box,{className:W.title},l("wallet_extension_top_title_asset_allocation1",{app:l("wallet_extension_top_title_asset_allocation2")})),x.default.createElement(b.Text,{className:W.desc},l("wallet_extension_top_subtitle_turnon_ledger")),x.default.createElement(rt,{src:r,className:W.secondAndFourthScreenImg})),x.default.createElement(t.Box,{className:W.footerWrap},x.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,className:"wallet-management__button",onClick:o},l("wallet_extension_footer_btn_connect1"))))},vs=[ks,Ms,Os,Ds],Ws=()=>{let e=(0,Er.useDispatch)(),o=(0,Br.useHistory)(),[r,s]=(0,x.useState)(0),i=vs[r],m=(0,x.useCallback)(()=>{s(d=>++d)},[]),c=(0,x.useCallback)(()=>{o.replace(Ye)},[o]);return(0,x.useEffect)(()=>{e(Pt("isLedgerImported",!0))},[e]),x.default.createElement(t.Container,{className:W.root},x.default.createElement(i,{handleNext:m,handleClose:c}))},Lr=Ws;a();n();var re=p(E());S();jo();a();n();var pt=p(E()),Vt=p(ie()),wo=p(te()),xo=p(fo());S();Ce();var Ir=(e=!1)=>{let o=M(),r=(0,wo.useHistory)(),s=o.get("type"),i=o.get("walletId"),m=(0,Vt.useSelector)(Vo),c=[];if(s==="addChain")if(m[i]){let{account:d}=m[i];c=Object.keys(d)}else e&&(D.error(l("wallet_extension_top_error_parameters")),r.replace(ee));return c},Cr=()=>{let e=Ir(!0),o=(0,Vt.useSelector)(nt);return(0,pt.useMemo)(()=>wr.map(({chain:r,...s})=>({chain:r,config:s,allChains:o.filter(i=>i.baseChain===r),imported:e.includes(r)})),[e,o])},Nr=()=>{let e=Ir(),o=(0,Vt.useSelector)(nt);return(0,pt.useMemo)(()=>[je,It].map(s=>{let i=o.find(m=>m.baseChain===s);return{imported:e.includes(s),...i}}),[e,o])},Ar=e=>{let o=(0,wo.useHistory)(),r=M(),s=r.get("type"),i=r.get("walletId");return(0,pt.useCallback)(async()=>{let m=await mt.hasConnectedLedger(),c=!1;if(m||(c=(await mt.requestLedgerDevice()).length===0),c){[R.addAccount,R.addChain].includes(s)&&o.goBack();return}let d=`${de}/${w.ledger}?${xo.default.stringify({baseChain:e})}`;s&&i&&(d+=`&${xo.default.stringify({type:s,walletId:i})}`),o.push(d)},[o,s,i,e])};a();n();var dt={root:"_root_f8vjo_1",chainList:"_chainList_f8vjo_6",footerWrap:"_footerWrap_f8vjo_10"};var Ps=[st,qo],Fs=()=>{let e=M(),o=e.get("type"),r=e.get("hideBack"),[s,i]=(0,re.useState)(""),m=Cr(),c=Nr(),d=Ar(s),y=m?.filter(({chain:_})=>Ps.includes(_))||[];return re.default.createElement(t.FlexBox,{className:dt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},re.default.createElement(Y,{closeable:!1,backable:!r,className:dt.navigator,title:l("wallet_extension_top_maintitle_select_network")}),re.default.createElement(t.Box,{className:dt.chainList},y.map(({chain:_,config:h,allChains:f,imported:g})=>{let{titleKey:T,networkCountKey:B,importLedgerConfig:{supportNetworksKey:C}}=h;return re.default.createElement(yo,{imported:g,selected:_===s,handleClick:()=>{g||i(_)}},re.default.createElement(xr,{titleKey:T,networkCountKey:B,descriptionKey:C,chainsList:f,imported:g,hideRightIcon:!0}))}),c.map(_=>re.default.createElement(yo,{imported:_.imported,key:_.chainName,selected:_.baseChain===s,handleClick:()=>{_.imported||i(_.baseChain)},..._}))),re.default.createElement(t.Box,{className:dt.footerWrap},re.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,onClick:d,className:"wallet-management__button",disabled:!s},o==="addChain"?l("wallet_extension_footer_btn_add_network"):l("wallet_addwallet_btn_conncet_hardware_wallet"))))},Sr=Fs;a();n();var X=p(E()),ft=p(te());S();a();n();var J=p(E());Be();a();n();var Z={"retina-border-basic":"_retina-border-basic_1f1rt_1",retinaBorderBasic:"_retina-border-basic_1f1rt_1",root:"_root_1f1rt_29",header:"_header_1f1rt_38",back:"_back_1f1rt_75",close:"_close_1f1rt_76",title:"_title_1f1rt_80",content:"_content_1f1rt_84",selectorTitle:"_selectorTitle_1f1rt_87",selector:"_selector_1f1rt_87",item:"_item_1f1rt_97",lock:"_lock_1f1rt_101",button:"_button_1f1rt_106"};var Us=({handleClick:e=gt,visible:o=!0})=>o?J.default.createElement(t.Box,{className:Z.root,onClick:e},J.default.createElement(t.FlexBox,{justify:"space-between",className:Z.header},J.default.createElement(ne.Input,{active:!0,className:Z.back}),J.default.createElement(ne.Input,{active:!0,className:Z.title}),J.default.createElement(ne.Input,{active:!0,className:Z.close})),J.default.createElement(t.Box,{className:Z.content},J.default.createElement(ne.Input,{active:!0,className:Z.selectorTitle}),J.default.createElement(ne.Input,{active:!0,className:Z.selector}),J.default.createElement(ne.Input,{active:!0,className:Z.selectorTitle}),J.default.createElement(ne.Input,{active:!0,className:Z.item}),J.default.createElement(ne.Input,{active:!0,className:Z.lock})),J.default.createElement(ne.Input,{active:!0,className:Z.button})):null,he=Us;a();n();var ce=p(E());var Kr=p(ze());S();Ce();a();n();var A=p(E()),br=p(ie()),To=p(Ae());Be();S();a();n();var _t=p(E());S();a();n();var Xt={root:"_root_v9tdu_1",importedRoot:"_importedRoot_v9tdu_9",tag:"_tag_v9tdu_13"};var j="SELECTED",P="IMPORTED",Ks=({selectType:e})=>e===P?_t.default.createElement(t.FlexBox,{className:Xt.importedRoot,align:t.ALIGN.center},_t.default.createElement(t.Box,{className:Xt.tag},l("wallet_extension_card_label_added"))):_t.default.createElement(t.FlexBox,{className:Xt.root,align:t.ALIGN.center},_t.default.createElement(Ko,{checked:e===j,circle:!0})),le=Ks;Ce();Bt();Fo();a();n();Bt();var Qt=({account:e,selected:o,selectedAddressesInTargetIdentity:r=[],baseChain:s})=>{let i=m=>m.some(c=>(Et(c)&&(c=c?.address),Ne(c,e.address,{localType:s})));return i(r)?P:i(o)?j:""};a();n();var H={"retina-border-basic":"_retina-border-basic_t9fhu_1",retinaBorderBasic:"_retina-border-basic_t9fhu_1",root:"_root_t9fhu_29",SELECTED:"_SELECTED_t9fhu_37",selected:"_SELECTED_t9fhu_37",IMPORTED:"_IMPORTED_t9fhu_40",imported:"_IMPORTED_t9fhu_40",main:"_main_t9fhu_43",address:"_address_t9fhu_46",asset:"_asset_t9fhu_52",dontHaveAsset:"_dontHaveAsset_t9fhu_53",assetArrow:"_assetArrow_t9fhu_64",assetModal:"_assetModal_t9fhu_72",assetList:"_assetList_t9fhu_72",chainImage:"_chainImage_t9fhu_116",chainName:"_chainName_t9fhu_121",coinAmountDisplay:"_coinAmountDisplay_t9fhu_126",coinAmountDisplayText:"_coinAmountDisplayText_t9fhu_131",commonFooter:"_commonFooter_t9fhu_137"};var Eo=({account:e,onSelect:o,selectType:r})=>{let[s,i]=(0,A.useState)(!1),m=(0,br.useSelector)(nt),c=ur(),d=m.filter(f=>f.baseChain===Q),{assetList:y=[]}=e,_=(0,A.useMemo)(()=>d.map(f=>{let{coinId:g}=f,T=Do(f),B=y.find(O=>O.coinId===g);T.coinAmount=B?.coinAmount||"0";let C=c[g];return C&&(T.decimals=C.decimals,T.symbol=C.symbol,T.displayPrecision=C.displayPrecision,T.stableCoin=C.stableCoin),T}).sort((f,g)=>g.coinAmount-f.coinAmount),[d,y,c]),{address:h}=e;return A.default.createElement(A.default.Fragment,null,A.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,To.default)(H.root,{[H.SELECTED]:r===j,[H.IMPORTED]:r===P}),key:h,onClick:()=>{r!==P&&o(e)}},A.default.createElement(t.Box,{className:H.main},A.default.createElement(t.Box,{className:H.address},e.address),e.hasAsset?A.default.createElement(t.Box,{className:H.asset,onClick:f=>{f.stopPropagation(),i(!0)}},A.default.createElement("span",null,l("wallet_extension_card_btn_view_assets")),A.default.createElement(ae,{className:(0,To.default)("okds-arrow-chevron-right-centered-md",H.assetArrow)})):A.default.createElement(t.Box,{className:H.dontHaveAsset},A.default.createElement("span",null,l("wallet_extension_card_btn_noearnings_yet")))),A.default.createElement(le,{selectType:r})),A.default.createElement(qe.Action,{onClose:()=>{i(!1)},className:H.assetModal,visible:s,hideCloseBtn:!0,alignBottom:!0,whiteboard:!0,title:null},A.default.createElement(t.Box,{className:H.assetList},_.map((f,g)=>{let T=g;return A.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:H.asset,key:T},A.default.createElement(Go,{className:H.chainImage,src:f.image||Jo}),A.default.createElement(t.Box,{className:H.chainName},A.default.createElement(hr,{maxWidth:"192px",text:f.chainName})),A.default.createElement(t.Box,{className:H.coinAmountDisplay},A.default.createElement(b.DisplayAmount,{className:H.coinAmountDisplayText,mode:b.CRYPTO,symbol:f.symbol,decimals:f.decimals,precision:f.displayPrecision,isStableCoin:f.stableCoin,ellipsis:{tooltip:!0}},f?.coinAmount)))})),A.default.createElement(t.Box,{className:H.commonFooter},A.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,onClick:()=>i(!1),block:!0},l("wallet_extension_footer_btn_same_device_ok")))))};Eo.pickAssetAccounts=e=>{let o=[];return Ie(e)&&e.forEach(r=>{let{assetList:s=[]}=r||{};Ie(s)&&s.some(i=>wt(i?.coinAmount,0))&&(r.hasAsset=!0,o.push(r))}),o};Eo.getSelectType=Qt;var kr=Eo;a();n();var ge=p(E()),Mr=p(Ae());S();zo();Bt();a();n();var _e={root:"_root_f2f0f_1",SELECTED:"_SELECTED_f2f0f_8",selected:"_SELECTED_f2f0f_8",IMPORTED:"_IMPORTED_f2f0f_11",imported:"_IMPORTED_f2f0f_11",addressBox:"_addressBox_f2f0f_14",block:"_block_f2f0f_18",tag:"_tag_f2f0f_29",assets:"_assets_f2f0f_40",address:"_address_f2f0f_14"};var Bo=({account:e,onSelect:o,selectType:r,baseCoin:s})=>ge.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,Mr.default)(_e.root,{[_e.SELECTED]:r===j,[_e.IMPORTED]:r===P}),onClick:()=>{r!==P&&o(e)}},ge.default.createElement(t.Box,{className:_e.addressBox},at.map((i,m)=>{let c=m;return ge.default.createElement(t.Box,{className:_e.block,key:c},ge.default.createElement(t.Box,{className:_e.tag},l($o[i])),ge.default.createElement(b.DisplayAmount,{className:_e.assets,mode:b.CRYPTO,symbol:s.symbol,decimals:s.decimals,ellipsis:{tooltip:!0},precision:s.displayPrecision,isStableCoin:s.stableCoin},e[i]?.coinAmount),ge.default.createElement(t.Box,{className:_e.address},e[i]?.address))})),ge.default.createElement(le,{selectType:r}));Bo.pickAssetAccounts=e=>{let o=[];return Ie(e)&&e.forEach(r=>{r?.hasAsset&&o.push(r)}),o};Bo.getSelectType=({account:e,selected:o,selectedAddressesInTargetIdentity:r,baseChain:s})=>{let i=m=>m.some(c=>{Et(c)&&(c=c?.address);let d=!1;return at.forEach(y=>{Ne(e?.[y]?.address,c,{localType:s})&&(d=!0)}),d});return i(r)?P:i(o)?j:""};var Or=Bo;a();n();var Xe=p(E()),Dr=p(Ae());Bt();Fo();a();n();var ke={root:"_root_h2by8_1",SELECTED:"_SELECTED_h2by8_9",selected:"_SELECTED_h2by8_9",IMPORTED:"_IMPORTED_h2by8_12",imported:"_IMPORTED_h2by8_12",main:"_main_h2by8_15",asset:"_asset_h2by8_19",address:"_address_h2by8_26"};var Lo=({account:e,onSelect:o,selectType:r,baseCoin:s})=>{let{symbol:i,decimals:m}=s,{address:c}=e,d=e?.coinAmount;return Xe.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,Dr.default)(ke.root,{[ke.SELECTED]:r===j,[ke.IMPORTED]:r===P}),key:c,onClick:()=>{r!==P&&o(e)}},Xe.default.createElement(t.Box,{className:ke.main},Xe.default.createElement(b.DisplayAmount,{className:ke.asset,mode:b.CRYPTO,symbol:i,decimals:m,ellipsis:{tooltip:!0},precision:s?.displayPrecision,isStableCoin:s?.stableCoin},d),Xe.default.createElement(t.Box,{className:ke.address},e.address)),Xe.default.createElement(le,{selectType:r}))};Lo.pickAssetAccounts=e=>{let o=[];return Ie(e)&&e.forEach(r=>{wt(r?.coinAmount,0)&&o.push(r)}),o};Lo.getSelectType=Qt;var Io=Lo;a();n();var Me=p(E()),vr=p(te());S();a();n();var Co={title:"_title_1nhzx_1",selector:"_selector_1nhzx_7"};var Hs=({basePath:e,setBasePath:o})=>{let{hardware:r}=(0,vr.useParams)(),i=M().get("baseChain"),m=(0,Me.useMemo)(()=>sr?.[r]?.[i],[i,r]);return m?Me.default.createElement(Me.default.Fragment,null,Me.default.createElement(b.Text,{className:Co.title},l("wallet_addwallet_subtitle_hardware_wallet_select_a_hd_path")),Me.default.createElement(Tt,{value:e,className:Co.selector,type:Tt.TYPE.input,options:m,onChange:({value:c})=>{o(c)},align:Tt.DIRECTION.right})):null},Wr=Hs;a();n();var Qe=p(E());S();a();n();var No={showAll:"_showAll_dqqdk_1",showAllText:"_showAllText_dqqdk_11"};var Gs=({hasAssetAccounts:e,renderList:o,handleUnFold:r})=>Qe.default.createElement(Qe.default.Fragment,null,o(e),Qe.default.createElement(t.Box,{className:No.showAll,onClick:r},Qe.default.createElement("span",{className:No.showAllText},l("wallet_extension_top_dropdown_show_assets")),Qe.default.createElement(ae,{className:"okds-arrow-chevron-down-md"}))),Pr=Gs;a();n();S();var me=p(E()),Zt=p(ze());a();n();var Ao={loadMore:"_loadMore_15zyi_1",loadMoreText:"_loadMoreText_15zyi_9"};var Fr=8,qs=({renderList:e,scrollWrapRef:o,fetchAddress:r,firstPageAccounts:s})=>{let i=(0,me.useRef)(),[m,c]=(0,me.useState)(Fr),d=()=>{clearInterval(i.current),c(Fr),i.current=setInterval(()=>{c(f=>Math.max(f-1,0))},1e3)};(0,Zt.useUnmount)(()=>{clearInterval(i.current)});let{data:y,noMore:_}=(0,Zt.useInfiniteScroll)(async f=>{d();let g=f?.pageNo||1,T=await r(g);return g===1&&(T=[...s,...T]),{list:T,pageNo:g+1}},{target:o,isNoMore:f=>f?.list?.length>=1e3}),h=y?.list||s;return me.default.createElement(me.default.Fragment,null,e(h),_?null:me.default.createElement(t.Box,{className:Ao.loadMore},me.default.createElement(Ge,null),me.default.createElement("span",{className:Ao.loadMoreText},m>0?l("wallet_extension_footer_loading_est_loading",{value:m}):l("wallet_extension_footer_loading_wait_amoment"))))},Ur=qs;a();n();var Jt={root:"_root_yoqwy_1",title:"_title_yoqwy_7",icon:"_icon_yoqwy_13"};var So={[Q]:kr,[je]:Or,[Lt]:Io,[It]:Io},js=({baseChain:e,fetchAddress:o,basePath:r,setBasePath:s,firstPageAccounts:i,coinId:m,selected:c,selectedAddressesInTargetIdentity:d,...y})=>{let _=(0,ce.useRef)(),h=So[e],f=h.pickAssetAccounts(i),g=f.length,[T,{setFalse:B}]=(0,Kr.useBoolean)(!!(g&&g!==i.length)),{baseCoin:C}=fr(m,!0),O=K=>K.map(L=>{let v=h.getSelectType({account:L,selected:c,selectedAddressesInTargetIdentity:d,baseChain:e});return ce.default.createElement(h,{account:L,baseCoin:C,selectType:v,...y})});return ce.default.createElement(t.FlexBox,{ref:_,className:Jt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},ce.default.createElement(Wr,{basePath:r,setBasePath:s}),ce.default.createElement(b.Text,{className:Jt.title},l("wallet_extension_top_title_select"),e===Q?ce.default.createElement(Se,{className:Jt.icon,icon:"okx-wallet-plugin-information-circle",tooltip:{title:l("wallet_extension_toast_tooltip_try_switch"),placement:Ho.DIRECTION.bottom},size:Se.SIZE.xs}):null),T?ce.default.createElement(Pr,{renderList:O,handleUnFold:B,hasAssetAccounts:f}):ce.default.createElement(Ur,{renderList:O,fetchAddress:o,scrollWrapRef:_,firstPageAccounts:i}))},Hr=js;a();n();var Je=p(E()),Ze=p(ie()),ut=p(te());S();_o();Ns();Cs();Yo();Ce();zo();var Gr=()=>{let e=M(),{hardware:o}=(0,ut.useParams)(),r=e.get("baseChain"),[s,i]=(0,Je.useState)(()=>o===w.ledger?r===Lt?rr:tr:or);return[s,i]},qr=()=>{let e=[],o=M(),r=o.get("walletId"),s=o.get("baseChain");return((0,Ze.useSelector)(St).find(d=>(d.walletIdentities||[]).some(_=>_.walletId===r))?.walletIdentities||[]).forEach(d=>{let y=d?.account?.[s];y&&e.push(y)}),e},jr=()=>{let e=M(),o=e.get("type"),r=e.get("baseChain"),s=jt()?.length,[i,m]=(0,Je.useState)([]);return[i,d=>{m(y=>o===R.addChain?[d]:y.some(_=>Ne(_.address,d.address,{localType:r}))?y.filter(_=>!Ne(_.address,d.address,{localType:r})):s+y.length>=1e3?(D.error({title:l("wallet_extension_hardware_wallet_notif_max_account",{num:1e3})}),y):[...y,d])}]},$r=e=>{let[o,r]=(0,Je.useState)(!1),{hardware:s}=(0,ut.useParams)(),i=M(),m=i.get("type"),c=i.get("baseChain"),d=i.get("walletId"),y=(0,ut.useHistory)(),_=(0,Ze.useDispatch)(),h=(0,Ze.useSelector)(bt),f=(0,Ze.useSelector)(At),g=(0,Je.useMemo)(()=>e.map(B=>{let C={};return C.path=B.path,C.address=B.address,c===je&&at.forEach(O=>{let{address:K,path:L,publicKey:v}=B[O];C[O]={address:K,path:L,publicKey:v}}),C}),[e,c]);return[o,async()=>{try{let B={accounts:g,hardware:s,baseChain:c,walletId:d,type:m},C=er[w.ledger],O=await ar()||{};if(O?.productName&&(C=`${oe[w.ledger]} ${O.productName}`),B.ledgerInfo={productName:C},!h){_(Wt(B)),y.push(`${vt}?from=${zt.HARDWARE}`);return}if(!f){D.error({title:l("wallet_extension_hardware_wallet_notif_please_unlock")});return}kt({hardwarewallet_brand:s,device_name:C}),r(!0),await _($t(B)),await $e(_);let K=ee;[R.addAccount,R.addChain].includes(m)&&(K=`${Ro}?from=seedVerify`);let L=Uo()===Po;if(m===R.addChain&&L){_(it()),y.go(-2);return}if(m===R.addAccount&&L){_(it()),y.go(-2);return}L?y.replace(K):globalThis.platform.openExtensionInPopup(K),r(!1)}catch(B){r(!1),B.message===Nt&&D.error(l("extension_wallet_addwallet_toast_wallets_added",{amount:1e3})),B.message===Ct&&D.error(l("wallet_home_toast_network_error"))}},_]};a();n();var Rt={wrap:"_wrap_jx54d_1",root:"_root_jx54d_6",footerWrap:"_footerWrap_jx54d_10",accountList:"_accountList_jx54d_15",account:"_account_jx54d_15",accountLeft:"_accountLeft_jx54d_28",address:"_address_jx54d_31",path:"_path_jx54d_38",assets:"_assets_jx54d_44",accountRight:"_accountRight_jx54d_49"};var $s=()=>{let{hardware:e}=(0,ft.useParams)(),o=M(),r=o.get("hideBack"),s=o.get("baseChain"),i=qr(),[m,c]=Gr(),[d,y]=jr(),_=yr({baseChain:s})||[],{coinId:h}=_?.[0]||{},f=(0,ft.useHistory)(),[g,T]=(0,X.useState)([]),B=async Te=>{if(!e)return[];try{return await dr({hardware:e,page:Te,basePath:m,baseChain:s,coinId:h})}catch(Ue){switch(Ue.name){case"LockedDeviceError":Kt.openModal(Ut.lockedDevice,{baseChain:s,onButtonClick:()=>{window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break;case"InvalidStateError":case"TransportStatusError":Kt.openModal(Ut.wrongAppToGetAddress,{baseChain:s,onButtonClick:()=>{window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break;case"TransportError":break;default:Kt.openModal(Ut.connectError,{onButtonClick:async()=>{if(Ue.name==="TransportOpenUserCancelled"&&(await mt.requestLedgerDevice()).length){K();return}window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break}throw Ue}},[C,O]=(0,X.useState)(!0),K=async()=>{O(!0);let Te=await B(0);T(Te),O(!1)};(0,X.useEffect)(()=>{h&&K()},[m,h]);let[L,v]=$r(d);return X.default.createElement(t.Box,{className:Rt.wrap},C?X.default.createElement(he,null):X.default.createElement(t.FlexBox,{className:Rt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},X.default.createElement(Y,{closeable:!1,backable:!r,title:l("wallet_extension_top_maintitle_select_address")}),X.default.createElement(Hr,{basePath:m,setBasePath:c,firstPageAccounts:g,selected:d,selectedAddressesInTargetIdentity:i,baseChain:s,onSelect:y,coinId:h,fetchAddress:B}),X.default.createElement(t.Box,{className:Rt.footerWrap},X.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,className:"wallet-management__button",disabled:!d.length,loading:L,onClick:v},d.length?l("wallet_extension_footer_btn_connecting",{value:d.length}):l("wallet_extension_footer_btn_connect")))))},zr=e=>{let o=(0,ft.useHistory)(),s=M().get("baseChain");return Object.keys(So).includes(s)?X.default.createElement($s,{...e}):(D.error(l("wallet_extension_top_error_parameters")),o.replace(ee),null)};a();n();var yt=p(E());S();a();n();var Yr=p(fo()),Vr=p(ie()),Xr=p(te()),eo=p(E());Ce();var Qr=()=>{let e=(0,Xr.useHistory)(),{isLedgerImported:o}=(0,Vr.useSelector)(Ft),r=(0,eo.useMemo)(()=>({[w.ledger](){o?e.push(Ye):e.push(Ot)},[w.trezor](){e.push(`${de}/${w.trezor}?${Yr.default.stringify({baseChain:Q})}`)},[w.onekey](){e.push(Dt)},[w.keystone](){e.push(`${de}/${w.keystone}`)}}),[o,e]);return(0,eo.useCallback)(({brand:i})=>{Qo({hardwarewallet_brand:i}),Zo(),r[i]()},[r])};a();n();var bo=p(Ae());S();var ue=p(E());a();n();var Oe={root:"_root_r4apb_1",recommend:"_recommend_r4apb_21",brandInfo:"_brandInfo_r4apb_24",icon:"_icon_r4apb_29",name:"_name_r4apb_34",arrow:"_arrow_r4apb_39"};var zs=e=>{let{icon:o,wallet:r,onClick:s}=e,i=(0,ue.useCallback)(()=>{s(r)},[r,s]);return ue.default.createElement(t.Box,{onClick:i,className:Oe.root},ue.default.createElement(t.Box,{className:Oe.brandInfo},ue.default.createElement(Se,{className:(0,bo.default)(o,Oe.icon)}),ue.default.createElement(t.Box,{className:Oe.name},r.name),r.recommend?ue.default.createElement(Le,{className:Oe.recommend,type:Le.TYPE.rect,color:Le.COLOR.green},l("wallet_onekey_tag_new")):null),ue.default.createElement(Se,{size:Se.SIZE.xs,className:(0,bo.default)("okds-arrow-chevron-right-centered-md",Oe.arrow)}))},to=zs;a();n();var oo={root:"_root_gtfj8_1",navigator:"_navigator_gtfj8_4",wrap:"_wrap_gtfj8_7"};var Ys=[{name:oe[w.keystone],icon:"okx-wallet-plugin-keystone",brand:w.keystone,recommend:!0},_r()?{name:oe[w.ledger],icon:"okx-wallet-plugin-ledger",brand:w.ledger,recommend:!1}:null,{name:oe[w.onekey],icon:"okx-wallet-plugin-onekey",brand:w.onekey,recommend:!1},{name:oe[w.trezor],icon:"okx-wallet-plugin-trezor",brand:w.trezor,recommend:!1}].filter(Boolean),Vs=()=>{let e=Qr();return yt.default.createElement(t.Container,{className:oo.root},yt.default.createElement(Y,{closeable:!1,backable:!1,bordered:!1,className:oo.navigator,title:l("wallet_addwallet_maintitle_connect_hareware_wallet")}),yt.default.createElement(t.Box,{className:oo.wrap},Ys.map(o=>yt.default.createElement(to,{wallet:o,icon:o.icon,onClick:e}))))},Zr=Vs;a();n();Be();var ns=p(ze());S();var is=p(te());var U=p(E()),so=p(ie());Ce();a();n();var xe=p(E()),Jr=p(Ae());Be();S();a();n();var De={root:"_root_gwbd5_1",SELECTED:"_SELECTED_gwbd5_10",selected:"_SELECTED_gwbd5_10",IMPORTED:"_IMPORTED_gwbd5_13",imported:"_IMPORTED_gwbd5_13",selector:"_selector_gwbd5_16",main:"_main_gwbd5_19",name:"_name_gwbd5_23",assets:"_assets_gwbd5_29"};var Xs=e=>{let{account:o,children:r,setSelected:s,selectType:i,badgeSlot:m=null}=e,c=jt()?.length;return xe.default.createElement(t.Box,{className:(0,Jr.default)(De.root,De[i]),onClick:()=>{i!==P&&s(d=>i===j?d.filter(y=>y.index!==o.index):c+d.length>=1e3?(D.error({title:l("wallet_extension_hardware_wallet_notif_max_account",{num:1e3})}),d):[...d,o])}},xe.default.createElement(t.FlexBox,{className:De.selector,align:t.ALIGN.center},xe.default.createElement(t.FlexBox,{justify:t.ALIGN.center,direction:t.DIRECTION.vertical,className:De.main},xe.default.createElement(t.FlexBox,{align:t.ALIGN.center},xe.default.createElement(t.Box,{className:De.name},l("wallet_extension_card_title_account",{value:`${vo(`${o.index+1}`,2,"0")}`})),m),!!o.balance&&xe.default.createElement(b.DisplayAmount,{ellipsis:!0,symbol:"$",mode:b.LEGAL,useApproximate:!1,className:De.assets},o.balance)),xe.default.createElement(le,{selectType:i})),r)},Re=Xs;As();_o();a();n();var Rr=p(E());jo();var Qs=(e,o)=>{let r=e.index;return r!==void 0&&r===o.index},Zs=(e,o)=>{let r=o?.[st]?.address;return!!r&&e?.account?.[st]===r},Js=(e,o)=>(0,Rr.useCallback)(r=>{let s=e.some(m=>m.index===r.index);return o.some(m=>Qs(m,r)||Zs(m,r))?P:s?j:""},[e,o]),et=Js;a();n();var ko=p(Ae());S();var k=p(E());Ce();a();n();var F={root:"_root_7hr89_1",tip:"_tip_7hr89_8",icon:"_icon_7hr89_13",info:"_info_7hr89_19",desc:"_desc_7hr89_23",entry:"_entry_7hr89_28",dialogRoot:"_dialogRoot_7hr89_34",title:"_title_7hr89_37",listWrap:"_listWrap_7hr89_42",pathItem:"_pathItem_7hr89_42",recommendItem:"_recommendItem_7hr89_51",SELECTED:"_SELECTED_7hr89_54",selected:"_SELECTED_7hr89_54",recommend:"_recommend_7hr89_51",detail:"_detail_7hr89_69",path:"_path_7hr89_42",address:"_address_7hr89_80",balance:"_balance_7hr89_88"};var es=(0,k.memo)(({account:e,selectType:o,updateAddressType:r})=>{let{mainnet:s,addressType:i,addressTypeUpdated:m}=e,c=i[Q],[d,y]=(0,k.useState)(!1),h=Object.values(s).filter(({balance:T})=>Wo.gt(T,0)),f=T=>{y(!1),r(e,T,Q)},g=(0,k.useMemo)(()=>o===P||m?l("wallet_extension_hardware_wallet_notif_current_address",{network:"EVM",address:co(s[c].address)}):l("wallet_extension_card_alert_default_option",{network:"EVM",address:co(s[c].address)}),[m,o,c,s]);return h.length<=1||h.length===2&&h[0].address===h[1].address?null:k.default.createElement(t.Box,{className:F.root,onClick:T=>{T.stopPropagation()}},k.default.createElement(t.FlexBox,{className:F.tip},k.default.createElement(ae,{className:(0,ko.default)("okx-wallet-plugin-information-circle",F.icon)}),k.default.createElement(t.Box,{className:F.info},k.default.createElement(t.Box,{className:F.desc},g),k.default.createElement(t.Box,{className:F.entry,onClick:()=>{y(!0)}},l("wallet_extension_card_textbtn_change_network",{network:"EVM"})))),k.default.createElement(qe.Action,{noContentPadding:!0,visible:d,alignBottom:!0,onClose:()=>{y(!1)}},k.default.createElement(t.Box,{className:F.dialogRoot},k.default.createElement(t.Box,{className:F.title},l("wallet_extension_top_title_change_evm",{network:"EVM"})),k.default.createElement(t.Box,{className:F.listWrap},Gt(e.index).map(T=>{let B=c===T.type;return k.default.createElement(t.FlexBox,{className:(0,ko.default)(F.pathItem,{[F.recommendItem]:T.recommend,[F.SELECTED]:B}),onClick:()=>{B||f(T.type)},align:t.ALIGN.center},!!T.recommend&&k.default.createElement(t.Box,{className:F.recommend},l("wallet_extension_top_tag_recommended")),k.default.createElement(t.Box,{className:F.detail},k.default.createElement(t.Box,{className:F.path},T.pathName),k.default.createElement(t.Box,{className:F.address},s[T.type].address),k.default.createElement(b.DisplayAmount,{ellipsis:!0,symbol:"$",mode:b.LEGAL,useApproximate:!1,className:F.balance},s[T.type].balance)),k.default.createElement(le,{selectType:B?j:""}))})))))});a();n();var ro=p(E()),ht=p(ie()),ts=p(te());S();_o();Yo();var Rs=(e,o)=>{let r={[w.onekey](){let{onekeyInfo:s}=o,i=s?.deviceType;return i?`${e}_${i}`:e},[w.keystone](){let{keystoneInfo:s}=o;return s?.device||e},[w.trezor](){return oe[w.trezor]}};return r[e]?r[e]():"unknown"},ea=({hardware:e,selected:o,walletId:r,walletInfo:s={}})=>{let[i,m]=(0,ro.useState)(!1),c=(0,ts.useHistory)(),d=(0,ht.useDispatch)(),y=M(),_=(0,ht.useSelector)(bt),h=(0,ht.useSelector)(At),f=(0,ro.useCallback)(async()=>{try{let g={hardware:e,walletId:r,accounts:o,...s};if(r&&(g.type=R.addAccount),!_){d(Wt(g)),c.push(`${vt}?from=${zt.HARDWARE}`);return}if(!h){D.error({title:l("wallet_extension_hardware_wallet_notif_please_unlock")});return}m(!0),kt({hardwarewallet_brand:e,device_name:Rs(e,s)}),await d($t(g)),await $e(d),m(!1),R.addAccount===y.get("type")?(D.success({title:l("wallet_addacount_toast_account_created")}),d(it()),e===w.trezor?globalThis.platform.openExtensionInPopup(ee):c.go(-1)):globalThis.platform.openExtensionInPopup(ee)}catch(g){m(!1),g.message===Nt&&D.error(l("extension_wallet_addwallet_toast_wallets_added",{amount:1e3})),g.message===Ct&&D.error(l("wallet_home_toast_network_error"))}},[y,c,o,e,r,d,s,h,_]);return[i,f]},tt=ea;a();n();Be();var os=p(ie()),we=p(E());var ta=e=>{let r=M().get("walletId"),s=(0,os.useSelector)(St),[i,m]=(0,we.useState)(()=>r?s.find(h=>(h.walletIdentities||[]).some(g=>g.walletId===r))||{}:{});(0,we.useEffect)(()=>{if(e&&mo(i)){let h=s.find(f=>f.masterFingerprint===e);h&&!mo(h)&&m(h)}},[s,e,i]);let[c,d]=(0,we.useState)([]);(0,we.useEffect)(()=>{let h=i?.walletIdentities||[];d(h)},[i]);let[y,_]=(0,we.useState)(r);return(0,we.useEffect)(()=>{let h=c?.[0];_(h?.walletId||"")},[c]),{targetKeyringIdentity:i,targetWalletIdentities:c,targetWalletId:y}},rs=ta;a();n();var ve=p(E());Be();S();var oa=e=>{let o=(0,ve.useRef)(),r=(0,ve.useRef)(),[s,i]=(0,ve.useState)("");return(0,ve.useEffect)(()=>{if(!(o.current&&r.current))return gt;let m=new IntersectionObserver(([c])=>{c.isIntersecting?i(""):i(l("wallet_extension_top_title_select_account"))},{root:o.current});return m.observe(r.current),()=>{m.disconnect()}},[e]),{title:s,wrapRef:o,titleRef:r}},ss=oa;a();n();var Mo=p(E());S();a();n();var as={root:"_root_14fge_1"};var ra=({selected:e,isSubmiting:o,handleSubmit:r})=>Mo.default.createElement(t.Box,{className:as.root},Mo.default.createElement(I,{block:!0,loading:o,category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,disabled:!e.length,onClick:r},e.length?l("wallet_extension_footer_btn_connecting",{value:e.length}):l("wallet_extension_footer_btn_connect"))),ot=ra;a();n();var We={wrap:"_wrap_i44ji_1",root:"_root_i44ji_6",navigator:"_navigator_i44ji_11",title:"_title_i44ji_20",desc:"_desc_i44ji_26"};var ls=()=>{let e=(0,is.useHistory)(),[o,r]=(0,U.useState)(""),s=(0,so.useSelector)(Xo),i=s[o]||{},{targetKeyringIdentity:m,targetWalletIdentities:c,targetWalletId:d}=rs(o),[y,_]=(0,U.useState)([]),h=(0,so.useDispatch)(),f=(0,U.useCallback)(async N=>{await po().setScanedKeyStone(N),await $e(h)},[h]),{hasDangerKeystoneScaned:g}=gr(),T=(0,U.useCallback)(async N=>{r(N.masterFingerprint);let $=await mr(N),z=await nr($);await f({...N,accountsWithBalance:z});let{device:Ee,deviceVersion:Ke}=N;Ee===ir&&(!Ke||lr(Ke,"1.0.4")===-1)&&(g||(h(Pt("hasDangerKeystoneScaned",!0)),uo.showUpdateModal()))},[f]),B=N=>{let $=s[N];T($)},C=async()=>{let N=await uo.openModal(cr.getAccounts,{onBackBtnClick(){e.goBack()}}),$=s[N.masterFingerprint];$&&(N.accountsWithBalance=$.accountsWithBalance),T(N)};(0,ns.useMount)(()=>{m?.masterFingerprint?B(m?.masterFingerprint):C()});let O=i?.accountsWithBalance,{title:K,wrapRef:L,titleRef:v}=ss(O),Te=et(y,c),[Ue,Oo]=tt({walletInfo:{keystoneInfo:xt(i,["device","deviceId","masterFingerprint"])},selected:y,walletId:d,hardware:w.keystone}),Es=async(N,$,z=Q)=>{let Ee=c.find(He=>He.index===N.index);Ee&&await po().updateWalletAddress(Ee.walletId,{[z]:$});let{accountsWithBalance:Ke}=i,Ls=Ke.map(He=>{if(N.index===He.index){let{addressType:Is}=He;return{...He,addressType:{...Is,[z]:$},addressTypeUpdated:!0}}return He});f({...i,accountsWithBalance:Ls})},Bs=((N={})=>$=>{let z=$?.addressType?.[Q];if(N[z])return N[z];let Ee=Gt(0).find(Ke=>Ke.type===z)?.pathName||"";return Ee?N[z]=Ee.split("|")?.[0]?.trim():N[z]="",N[z]})();return U.default.createElement(t.Box,{className:We.wrap},O?.length?U.default.createElement(t.FlexBox,{className:We.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},U.default.createElement(Y,{closeable:!1,bordered:!1,title:K,className:We.navigator}),U.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:We.wrap,ref:L},U.default.createElement(t.Box,{className:We.title,ref:v},l("wallet_extension_top_title_select_account")),U.default.createElement(t.Box,{className:We.desc},l("extension_wallet_hardware_wallet_text_multi_net")),O.map(N=>{let $=Te(N),z=Bs(N);return U.default.createElement(Re,{account:N,selectType:$,setSelected:_,badgeSlot:z?U.default.createElement(Le,{type:Le.TYPE.rect},z):null},U.default.createElement(es,{account:N,selectType:$,updateAddressType:Es}))})),U.default.createElement(ot,{selected:y,isSubmiting:Ue,handleSubmit:Oo})):U.default.createElement(he,null))};a();n();Be();S();var ps=p(ie());var ds=p(te());var _s=p(ze()),G=p(E());a();n();var ao=(e,o)=>`${e}${o}`,ms=(e,o)=>!!(e?.connectId&&e.connectId===o.connectId&&e.firstEvmAddress===o.firstEvmAddress);a();n();var no=p(E());var cs=e=>{let o=Ve(),r=(0,no.useMemo)(()=>o?.find(m=>{if(Ht(m.initialType)){let{firstEvmAddress:c,connectId:d}=m?.onekeyInfo||{};return ao(d,c)===e}return!1})||{},[o,e]),s=(0,no.useMemo)(()=>r.walletIdentities||[],[r]),i=(0,no.useMemo)(()=>s.length?s[0].walletId:"",[s]);return{targetKeyringIdentity:r,targetWalletIdentities:s,targetWalletId:i}};a();n();var Pe={wrap:"_wrap_19eua_1",root:"_root_19eua_6",list:"_list_19eua_10",desc:"_desc_19eua_16",loadMore:"_loadMore_19eua_22"};var sa=new qt,aa=()=>{let e=M(),o=e.get("connectId"),r=e.get("firstEvmAddress"),s=ao(o,r),{connectedOnekey:i}=(0,ps.useSelector)(Ft),m=i?.[s],c=(0,G.useRef)(),{data:d,noMore:y}=(0,_s.useInfiniteScroll)(async L=>{if(!m)return{list:[]};let v=L?.pageNo??0;return{list:await sa.getAccounts({page:v,onekeyInfo:m}),pageNo:v+1}},{target:c,isNoMore:L=>L?.list?.length>=1e3}),_=d?.list||m?.accountsWithBalance||[],[h,f]=(0,G.useState)([]),{targetWalletIdentities:g,targetWalletId:T}=cs(s),B=et(h,g),[C,O]=tt({walletInfo:{onekeyInfo:xt(m,["connectId","deviceId","deviceType","firstEvmAddress"])},selected:h,walletId:T,hardware:w.onekey}),K=(0,ds.useHistory)();return(0,G.useEffect)(()=>{m||(D.error(l("wallet_extension_top_error_parameters")),K.replace(ee))},[m,K,s]),G.default.createElement(t.Box,{className:Pe.wrap},G.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:Pe.root},G.default.createElement(Y,{bordered:!1,closeable:!1,className:Pe.navigator,title:l("wallet_extension_onekey_title_import_account")}),G.default.createElement(t.Box,{ref:c,className:Pe.list},G.default.createElement(t.Box,{className:Pe.desc},l("extension_wallet_hardware_wallet_text_multi_net")),_?.map(L=>{let v=B(L);return G.default.createElement(Re,{account:L,selectType:v,setSelected:f})}),y?null:G.default.createElement(t.Box,{className:Pe.loadMore},G.default.createElement(Ge,null))),G.default.createElement(ot,{selected:h,isSubmiting:C,handleSubmit:O})),G.default.createElement(he,{visible:!_?.length}))},us=aa;a();n();S();var fs=p(ze());var ys=p(te()),q=p(E());a();n();var Fe={wrap:"_wrap_174i9_1",root:"_root_174i9_6",list:"_list_174i9_10",desc:"_desc_174i9_16",loadMore:"_loadMore_174i9_22"};var na=new pr,ia=()=>{let o=M().get("walletId"),[r,s]=(0,q.useState)(!1),i=async L=>{let v=L?.nextPage||0;return{list:await na.getAccounts({page:v}),nextPage:v+1}},m=(0,q.useRef)(),{data:c,loading:d,noMore:y}=(0,fs.useInfiniteScroll)(i,{target:m,isNoMore:L=>L?.list?.length>=1e3,onError:()=>{s(!0)}}),_=Ve(),[h,f]=(0,q.useState)([]),g=_?.find(({walletIdentities:L})=>L.some(v=>v.walletId===o)),{walletIdentities:T=[]}=g||{},B=et(h,T),[C,O]=tt({selected:h,walletId:o,hardware:w.trezor}),K=(0,ys.useHistory)();return q.default.createElement(t.Box,{className:Fe.wrap},q.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:Fe.root},q.default.createElement(Y,{bordered:!1,closeable:!1,className:Fe.navigator,title:l("wallet_extension_onekey_title_import_account")}),q.default.createElement(t.Box,{ref:m,className:Fe.list},q.default.createElement(t.Box,{className:Fe.desc},l("extensions_hardware_support_text_evm_only",{brand:oe[w.trezor]})),c?.list?.map(L=>{let v=B(L);return q.default.createElement(Re,{account:L,selectType:v,setSelected:f})}),y?null:q.default.createElement(t.Box,{className:Fe.loadMore},q.default.createElement(Ge,null))),q.default.createElement(ot,{selected:h,isSubmiting:C,handleSubmit:O})),q.default.createElement(qe.Prompt,{btnFull:!0,visible:r,infoType:!1,alignBottom:!1,hideCloseBtn:!!o,title:l("wallet_add_wallet_maintitle_hardware_wallet_conncet_failed"),text:l("wallet_add_wallet_modal_hardware_wallet_conncet_failed_tip"),onConfirm:()=>{window.location.reload()},confirmBtnProps:{type:I.TYPE.highlight,size:I.SIZE.lg},confirmText:l("wallet_manage_wallet_btn_reconncet_hardware_wallet"),onClose:()=>{K.goBack()}}),q.default.createElement(he,{visible:d||r}))},hs=ia;a();n();var xs=p(fo());S();var ws=p(ie());var lo=p(ze()),fe=p(E());a();n();var io={root:"_root_pxrbs_1",navigator:"_navigator_pxrbs_4",list:"_list_pxrbs_7"};var gs=new qt,la=({history:e})=>{let[o,r]=(0,fe.useState)([]),s=(0,fe.useRef)(),i=async()=>{try{let _=await gs.searchDevices();_.length?(r(_),s.current=null):s.current=setTimeout(()=>{i()},3e3)}catch{e.goBack()}};(0,lo.useMount)(i),(0,lo.useUnmount)(()=>{s.current&&clearTimeout(s.current)});let m=Ve(),c=(_,h)=>m.some(f=>{if(Ht(f.initialType)){let{onekeyInfo:g}=f;return ms(g,{connectId:_,firstEvmAddress:h})}return!1}),d=(0,ws.useDispatch)(),y=async({connectId:_,deviceId:h,deviceType:f})=>{try{let g=await gs.getFirstEvmAddress({dispatch:d,connectId:_,deviceId:h,deviceType:f});if(c(_,g)){D.error({title:l("wallet_extension_hardware_wallet_notif_hardware_already")});return}e.push(`${de}/${w.onekey}?${xs.default.stringify({firstEvmAddress:g,connectId:_})}`)}catch(g){console.log(g)}};return fe.default.createElement(t.Container,{className:io.root,loading:o.length?!1:{loadingText:l("wallet_onekey_text_searching_for_equipment")}},fe.default.createElement(Y,{stickyStyle:{zIndex:3},className:io.navigator,closeable:!1,bordered:!1,title:l("wallet_onekey_title_connect_device")}),fe.default.createElement(t.Box,{className:io.list},o.map(_=>fe.default.createElement(to,{wallet:_,onClick:y,icon:"okx-wallet-plugin-equipment"}))))},Ts=la;var ma={[w.keystone]:ls,[w.ledger]:zr,[w.onekey]:us,[w.trezor]:hs},ca=()=>pe.default.createElement(se.Switch,null,pe.default.createElement(se.Route,{path:Mt,component:Zr,exact:!0}),pe.default.createElement(se.Route,{path:Ot,component:Lr,exact:!0}),pe.default.createElement(se.Route,{path:Ye,component:Sr,exact:!0}),pe.default.createElement(se.Route,{path:Dt,component:Ts,exact:!0}),pe.default.createElement(se.Route,{path:`${de}/:hardware`,render:e=>{let o=e?.match?.params?.hardware,r=ma[o];return r?pe.default.createElement(r,null):pe.default.createElement(se.Redirect,{to:Mt})},exact:!0}),pe.default.createElement(se.Redirect,{to:Mt})),Vu=ca;export{Vu as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ConnectHardware-S66XRLAY.js.map
