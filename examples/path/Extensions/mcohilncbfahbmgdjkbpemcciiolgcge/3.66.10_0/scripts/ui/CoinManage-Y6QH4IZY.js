import{a as Ee}from"./chunk-EIPKO6DU.js";import{a as H,c as q}from"./chunk-LXDEJX7F.js";import{a as Te}from"./chunk-4IS2JYPW.js";import{a as E}from"./chunk-7QDSLHV2.js";import{a as W}from"./chunk-7KQVTMRC.js";import{a as be,b as Ne}from"./chunk-U6NBHUF6.js";import"./chunk-FBGIZDXX.js";import{a as Ie}from"./chunk-O3U6IW2R.js";import"./chunk-2SBM2GLU.js";import"./chunk-DBWXHHZT.js";import"./chunk-7JSJY3SQ.js";import{c as xe}from"./chunk-NWY3GPDX.js";import"./chunk-6JEFG7DQ.js";import{c as he,d as D}from"./chunk-NPQMAAOH.js";import"./chunk-B3SXRDEQ.js";import"./chunk-7HRNNJBX.js";import"./chunk-F6UVHIJV.js";import"./chunk-JSOLAK4X.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import{e as A}from"./chunk-5A3RJQCM.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-MKDQBVRZ.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-KJWX5V23.js";import"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import{d as ge}from"./chunk-QYDRYMWS.js";import{g as Se}from"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3L7K7.js";import{a as we}from"./chunk-Y5K5NJ6U.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import{a as ve}from"./chunk-Q7FGM7BT.js";import{b as Le}from"./chunk-TKE74ERX.js";import{d as Ae}from"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{I as fe,J as R,a as pe}from"./chunk-QMENNGDH.js";import{a as Q}from"./chunk-KANXVZ35.js";import{r as I}from"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as N}from"./chunk-XP3TNE3R.js";import{C as me,H as le,Ha as ce,O as _e,jc as ao}from"./chunk-QRHYK2TW.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as Ce}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-L524QXHA.js";import{l as ue}from"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as x}from"./chunk-62ZAND24.js";import{a as ye}from"./chunk-SIITVWZR.js";import{Eb as se,Jb as no,Jd as de,Ma as ae,Na as ro,Pd as io}from"./chunk-QHXUL3YM.js";import{H as B,y as c}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{q as J,y as ie}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as ne,fa as P}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as v}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as a,o as t,q as r}from"./chunk-SHG7TIBL.js";t();r();var s=a(v()),Qe=a(Ce()),Ve=a(ye());B();t();r();var G=a(v());B();t();r();var L={"list-title":"_list-title_6m0y6_1",listTitle:"_list-title_6m0y6_1","empty-box":"_empty-box_6m0y6_6",emptyBox:"_empty-box_6m0y6_6","search-text":"_search-text_6m0y6_10",searchText:"_search-text_6m0y6_10","coin-box":"_coin-box_6m0y6_13",coinBox:"_coin-box_6m0y6_13","icon-add":"_icon-add_6m0y6_13",iconAdd:"_icon-add_6m0y6_13","icon-remove":"_icon-remove_6m0y6_16",iconRemove:"_icon-remove_6m0y6_16","icon-not-remove":"_icon-not-remove_6m0y6_20",iconNotRemove:"_icon-not-remove_6m0y6_20","clear-icon":"_clear-icon_6m0y6_24",clearIcon:"_clear-icon_6m0y6_24"};var ke=({renderCoin:e,list:n})=>n?.length?G.default.createElement(x.Box,null,G.default.createElement(I.Text,{className:L.listTitle,size:I.SIZE.xs,type:I.TYPE.secondary},c("wallet_manage_crypto_list_added_crypto")),G.default.createElement(A,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:n})):null;t();r();var Z=a(v()),Me=a(N());B();io();var V=({coin:e,deleteAddedCoinAbled:n,onAction:o,isSearchStatus:d})=>{let[i]=Ae(),m="",l="",u=Ne(),f=e?.aggregation;e?.added?n?(m="okx-wallet-plugin-take",l="icon-remove"):(m="okx-wallet-plugin-take",l="icon-not-remove"):(m="okx-wallet-plugin-add",l="icon-add");let S=le({coinId:e?.baseCoinId})&&!!e?.address,w=d&&!f&&!S&&!!e?.address,g=(0,Me.useCreation)(()=>u(e),[e?.coinId,u]);return Z.default.createElement(A.Coin,{className:L["coin-box"],hovered:!1,name:e?.coinId===de?e?.chainName:e?.name,icon:e.image,symbol:e.symbol,address:w&&`${c("wallet_manage_crypto_label_contract_address")}: ${me(e?.address)}`,tag:f?c("wallet_manage_crypto_labels_crypto_multichain"):e.tokenType,hidden:i,balance:g?e.coinAmount:void 0,market:g?e.currencyAmount:void 0,displayPrecision:e?.displayPrecision??e?.childrenCoin?.[0]?.displayPrecision,stableCoin:e?.stableCoin??e?.childrenCoin?.[0]?.stableCoin},!g&&e?.added?Z.default.createElement(be,{coinId:e?.coinId,from:fe}):Z.default.createElement(Le.IconButton,{className:L[l],disabled:e?.added&&!n,onClick:()=>{o(e)},icon:{icon:m}}))};t();r();var K=a(v()),Fe=a(ye());var Be=K.default.memo(({search:e,setSearch:n,spinLoading:o})=>!e||e.length===0?null:o?K.default.createElement(P.Circle,{size:P.SIZE.sm}):K.default.createElement(ne,{className:(0,Fe.default)("okds-clear-fill",L.clearIcon),onClick:()=>{n("")}}));t();r();var X=a(v());t();r();var Pe=a(v()),Oe=a(Ce());B();var Ue=()=>{let e=(0,Oe.useHistory)();return Pe.default.createElement(ie.State,{className:L["empty-box"],title:c("wallet_search_text_search_no_results"),buttonText:c("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{e.push(R)}})};var ze=({loadingMore:e,searchCoins:n,renderCoin:o,spinLoading:d})=>X.default.createElement(A,{itemKey:"coinId",dataSource:n,renderItem:o,loadingMore:e,renderEmpty:()=>d?null:X.default.createElement(Ue,null)});t();r();var T=a(v());B();var Re=(0,T.forwardRef)(({unAddedLoadingMore:e,renderCoin:n,unAddedList:o})=>o.length===0?null:T.default.createElement(x.Box,null,T.default.createElement(I.Text,{className:L.listTitle,size:I.SIZE.xs,type:I.TYPE.secondary},c("wallet_manage_crypto_subtitle_popular_crypto")),T.default.createElement(A,{itemKey:"coinId",renderEmpty:!1,renderItem:n,dataSource:o,loadingMore:e})));t();r();var We=a(N());t();r();var ee=a(v()),De=a(N());function Y(e,n){let o=(0,ee.useRef)(null),d=(0,ee.useRef)(Date.now());return(0,De.useMemoizedFn)((...m)=>{o.current||(e(...m),d.current=Date.now(),o.current=setTimeout(()=>{o.current=null},n))})}t();r();var $=(e,n)=>{if(e.aggregation){let o=n(e.childrenCoin);return{...e,childrenCoin:o}}return e};var He=()=>{let e=W(),n=E();return(0,We.useCreation)(()=>ue(e,n).map(i=>({...i,added:!0})),[e])},qe=()=>{let e=H();return Y(n=>{let o=$(n,e);D(o)},500)};t();r();var Ge=a(ao());var Ze=()=>{let{currentNetworkUniqueId:e}=(0,Ge.useSelector)(ge),n=xe({netWorkId:e?String(e):void 0}),{data:o,loading:d,run:i}=Te(),m=o?.supportNetworkList,l=d&&!o?.supportNetworkList?.length,u=!!m&&m.length>0,f="";if(e!==""){let w=n?.coinId;f=(m||[]).find(g=>g.coinId===w)?.name||""}let S=`${R}?network=${f}`;return{supportCustomCoin:u,customCryptoPath:S,customCoinLoading:l,reloadCustomNetworkData:i}};t();r();var b=a(v()),O=a(N());var Ke=()=>{let e=W(),n=E(),[o,d]=(0,b.useState)(""),i=(0,O.useDebounce)(o,{wait:500}),m=(0,b.useCallback)(C=>{d(C.target.value)},[]),[l,u]=(0,b.useState)(!0);(0,b.useEffect)(()=>{u(!!o)},[o]);let{data:f,loadingMore:S,listRef:w}=q({symbolLike:i,aggregation:!0,chainIds:n?[Number(n)]:void 0},{reloadDeps:[i],enableEmptyAccountCoins:!0,beforeRequest:()=>{if(!i)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){u(!1)}}),g=(0,O.useCreation)(()=>new Set(e.map(C=>C.aggregation?C.symbol:C.coinId)),[e]),p=(0,O.useCreation)(()=>(f?.list??[]).map(y=>(y.added=g.has(y.aggregation?y.symbol:y.coinId),y)).sort((y,M)=>M.added-y.added),[g,f?.list]);return{searchListRef:w,search:o,searchCoins:p,searchLoading:l,searchLoadingMore:S,onSearch:m,setSearch:d}};t();r();t();r();var Ye=a(N());no();ro();function $e(){let e=Se();return(0,Ye.useMemoizedFn)(async n=>{try{let{code:o}=await se(ae.registerCustomCoinAddr,{coinAddrRegisterList:[{accountId:e,coinId:n}]},{needSign:!0});return o===0}catch{return!1}})}var je=()=>{let e=H(),n=$e();return Y(async o=>{let d=_e(o),i;if(d){if(i=await ce(o),!i)return}else i=o;i=$(i,e),o.added?D(i):await n(i.coinId)&&he(i)},500)};t();r();var U=a(v()),k=a(N());var Je=(e=[],n)=>{let o=E(),d=Ie(),i=(0,k.useCreation)(()=>new Set(e.map(h=>h.aggregation?h.symbol:h.coinId)),[e]),m=(0,k.useCreation)(()=>Array.from(new Set(Ee(e).map(h=>h.coinId))),[e]),{data:l,loading:u,loadingMore:f,listRef:S,reload:w}=q({aggregation:!0,chainIds:o?[Number(o)]:void 0,excludeCoinIds:m},{enable:!d,reloadDeps:[o],enableEmptyAccountCoins:!0}),g=(0,k.usePrevious)(i.size),p=i.size<g;(0,U.useEffect)(()=>{!n&&p&&w()},[p,i.size,n]);let C=(0,k.useCreation)(()=>l?.list?.filter(F=>!i.has(F.aggregation?F.symbol:F.coinId))??[],[l?.list,e])??[],[y,M]=(0,U.useState)(!0);return(0,U.useEffect)(()=>{u||M(!1)},[u]),{unAddedList:C,unAddedListRef:S,unAddedLoading:y,unAddedLoadingMore:f}};t();r();var z={"wallet-coin__manage":"_wallet-coin__manage_1imve_1",walletCoinManage:"_wallet-coin__manage_1imve_1","wallet-coin__manage__search":"_wallet-coin__manage__search_1imve_4",walletCoinManageSearch:"_wallet-coin__manage__search_1imve_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_1imve_8",walletCoinManageSpin:"_wallet-coin__manage__spin_1imve_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_1imve_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_1imve_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_1imve_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_1imve_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_1imve_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_1imve_17","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_1imve_21",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_1imve_21","fade-enter":"_fade-enter_1imve_25",fadeEnter:"_fade-enter_1imve_25","fade-added-enter":"_fade-added-enter_1imve_26",fadeAddedEnter:"_fade-added-enter_1imve_26","fade-enter-active":"_fade-enter-active_1imve_30",fadeEnterActive:"_fade-enter-active_1imve_30","fade-added-enter-active":"_fade-added-enter-active_1imve_31",fadeAddedEnterActive:"_fade-added-enter-active_1imve_31",fade:"_fade_1imve_25","fade-added":"_fade-added_1imve_26",fadeAdded:"_fade-added_1imve_26","fade-leave-active":"_fade-leave-active_1imve_41",fadeLeaveActive:"_fade-leave-active_1imve_41","fade-added-leave-active":"_fade-added-leave-active_1imve_42",fadeAddedLeaveActive:"_fade-added-leave-active_1imve_42"};var so=()=>{let e=(0,Qe.useHistory)(),{customCryptoPath:n,supportCustomCoin:o,customCoinLoading:d,reloadCustomNetworkData:i}=Ze(),{searchListRef:m,search:l,searchCoins:u,onSearch:f,searchLoading:S,searchLoadingMore:w,setSearch:g}=Ke(),p=!!l,C=He(),{unAddedList:y,unAddedListRef:M,unAddedLoading:h,unAddedLoadingMore:F}=Je(C,p),Xe=qe(),oe=C?.length>1,eo=je();(0,s.useEffect)(()=>{i()},[]);let oo=j=>s.default.createElement(V,{isSearchStatus:p,coin:j,onAction:Xe,deleteAddedCoinAbled:oe}),te=j=>s.default.createElement(V,{isSearchStatus:p,coin:j,deleteAddedCoinAbled:oe,onAction:eo}),re=l?S:h,to=c("wallet_manage_crypto_placeholder_search_coin");return s.default.createElement(x.Container,{className:"wallet-coin__manage"},s.default.createElement(ve,{offsetTop:0,style:{zIndex:100}},s.default.createElement(we,{sticky:!1,closeable:!1,onBack:()=>{e.push(pe)},title:c("wallet_manage_crypto_maintitle_manage_crypto")}),s.default.createElement(x.Box,{className:z["wallet-coin__manage__search"]},s.default.createElement(J.Search,{value:l,size:J.SIZE.md,placeholder:to,onChange:f,cleanable:!1,suffix:s.default.createElement(Be,{search:l,setSearch:g,spinLoading:re}),"data-testid":Q.COIN_MANAGEMENT_PAGE.SEARCH_INPUT}))),s.default.createElement(x.Spin,{ref:p?m:M,className:(0,Ve.default)(z["wallet-coin__manage__spin"],z["wallet-coin__manage__spin__auto"]),loading:!1,size:P.SIZE.lg},!p&&!!o&&s.default.createElement(x.Spin,{loading:d&&!h},s.default.createElement(A.Cell,{"data-testid":Q.COIN_MANAGEMENT_PAGE.CUSTOM_COIN,className:z["wallet-coin__manage__spin__custom"],isLink:!0,to:n,title:c("wallet_manage_crypto_text_custom_crypto")})),p&&s.default.createElement(ze,{itemKey:"coinId",searchCoins:u,renderCoin:te,spinLoading:re,loadingMore:w}),!p&&s.default.createElement(ke,{list:C,renderCoin:oo}),!p&&s.default.createElement(Re,{unAddedList:y,unAddedLoading:h,unAddedLoadingMore:F,renderCoin:te})))},Er=s.default.memo(so);export{Er as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CoinManage-Y6QH4IZY.js.map
