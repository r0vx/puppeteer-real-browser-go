import{a as si}from"./chunk-HY7LAUD2.js";import{a as ii}from"./chunk-C6HPT3PU.js";import{a as ri}from"./chunk-7FBDFG5E.js";import{a as W}from"./chunk-IK5VIKIS.js";import{a as ti}from"./chunk-UWCOP3B7.js";import{a as ai}from"./chunk-UFD2MUZI.js";import{a as Jt,d as Xt}from"./chunk-OADPFYBO.js";import{j as $e}from"./chunk-NKIUEXOA.js";import{l as Qt,x as ei}from"./chunk-CDNJY7Z3.js";import{g as ut,k as lt}from"./chunk-7JSJY3SQ.js";import{c as ft}from"./chunk-NWY3GPDX.js";import{a as jt,b as qt}from"./chunk-5QHVWW7O.js";import{a as mt}from"./chunk-LQBCLW7R.js";import{a as ct}from"./chunk-WGVA2GGS.js";import{o as Yt}from"./chunk-XP3TNE3R.js";import{F as Kt,Z as Zt}from"./chunk-QRHYK2TW.js";import{b as Ge}from"./chunk-2FDQIA7D.js";import{_ as e,ba as ot,da as nt,fa as ue}from"./chunk-4EIUGT5A.js";import{J as x,L as _,M as re,N as Q,O as V,P as it,Q as M,R as zt,S as me,U as He,V as U,X as Me,Y as st,a as Bt,aa as Ue,b as Zi,ba as Rt,ia as rt}from"./chunk-QHXUL3YM.js";import{H as ji,n as q,y as g}from"./chunk-MOTAOJVG.js";import{d as at,q as B}from"./chunk-XR4SQWL7.js";import{H as Ut,L as $t,f as Ht,ra as Yi}from"./chunk-CYTB2B6Q.js";import{b as Vt}from"./chunk-OL67KS7C.js";import{f as Be,o as ie,q as se}from"./chunk-SHG7TIBL.js";ie();se();var t=Be(Vt()),fi=Be(Yt());Yi();ji();rt();ie();se();var z=Be(Vt()),ni=Be(Yt());Zi();rt();var ci=()=>s=>Rt(s,0),mi=({gasPrice:i,gasLimit:s,extFee:r,baseCoin:a={},currencyId:o})=>{let f=_(x(i,s),r),c=st(f),p=ct(c,{symbol:a?.symbol,precision:a?.displayPrecision}).value,n=lt(a?.coinId,f,{currencyId:o,useApproximate:!0});return{gasFeeDisplay:`${p}${n}`,gasFee:c}},Ve=({gasPrice:i,gasLimit:s,maxPriorityFeePerGas:r,maxFeePerGas:a,supportEip1559:o,extFee:f,gasPriceInfo:c,gasLimitInfo:p,gasType:n,baseCoin:u={},currencyId:C})=>{let{minGasFee:T,minGasPrice:y}=Qt({gasLimit:s,gasPrice:i,maxPriorityFeePerGas:r,maxFeePerGas:a,supportEip1559:o,extFee:f,gasPriceInfo:c,gasLimitInfo:p,gasType:n}),G=st(T),P=ct(G,{symbol:u?.symbol,precision:u?.displayPrecision,isStableCoin:u?.stableCoin}).value,l=lt(u?.coinId,T,{currencyId:C,useApproximate:!0});return{minGasPrice:y,minGasFee:G,minGasFeeDisplay:`${P}${l}`}},oi=(i={},s={wait:200,disabled:!1,fetchOnce:!1})=>{let{wait:r,disabled:a,fetchOnce:o,signInfo:f={}}=s,{coinId:c,supportEip1559:p,tx:n,needExtFee:u=!1}=i,[C,T]=(0,z.useState)(null),[y,G]=(0,z.useState)({data:"",loading:!1,error:""});(0,z.useEffect)(()=>{!u||a||G(l=>({...l,loading:!0,error:""}))},[n,u,a]);let P=()=>{try{if(!c){let l=f;Bt.captureEvent({message:`coinId is ${c}`,contexts:{report:{info:JSON.stringify({href:window&&window.location&&window.location.href,rawData:l})}},exception:{values:[{type:"EXTFEE_COINID_ERROR",value:`coinId is ${c}`}]},tags:{},level:"info"})}}catch{}};return(0,ni.useDebounceEffect)(()=>{if(!u||a){G(m=>({...m,loading:!1,error:""}));return}if(o===C&&o!==null){G(m=>({...m,loading:!1,error:""}));return}let l=M(n.gasPrice,"0")&&M(n.gasLimit,"0"),L=M(n.maxFeePerGas,"0")&&M(n.maxPriorityFeePerGas,"0")&&M(n.gasLimit,"0");if(!(p?L:l)){G(m=>({...m,loading:!1,error:""}));return}(async()=>{try{let m={...n,value:Ge(n.value),gasLimit:Ge(n.gasLimit)},w=p?{...m,maxFeePerGas:Ge(n.maxFeePerGas),maxPriorityFeePerGas:Ge(n.maxPriorityFeePerGas)}:{...m,gasPrice:Ge(n.gasPrice)},R=Kt(w),X=await ei(R);P();let N=await Zt({coinId:c},{inputData:X});G(k=>({...k,data:N,loading:!1,error:""}))}catch(m){G(w=>({...w,loading:!1,error:m.error_message||"Network error"}))}finally{o&&T(o)}})()},[c,n,o,u],{wait:r}),y},qi=({commonTx:i,gasPrice:s,priorityFee:r,supportEip1559:a})=>(0,z.useMemo)(()=>a?{...i,maxFeePerGas:s,maxPriorityFeePerGas:r}:{...i,gasPrice:s},[i,s,r,a]),ui=({coinId:i,from:s,to:r,value:a,inputData:o,gasLimit:f,supportEip1559:c,needExtFee:p,fastGasPrice:n,fastPriorityFee:u,customGasPrice:C,customMaxBaseFee:T,customMaxPriorityFee:y,customGasLimit:G,estimatedL1FeeOptions:P})=>{let l=(0,z.useMemo)(()=>({from:s,to:r,value:a,data:o}),[s,r,a,o]),L=(0,z.useMemo)(()=>({...l,gasLimit:f}),[l,f]),S=qi({commonTx:L,gasPrice:n,priorityFee:u,supportEip1559:c}),D=(0,z.useMemo)(()=>c?{...l,maxFeePerGas:U(_(T,y)),maxPriorityFeePerGas:U(y),gasLimit:G}:{...l,gasPrice:U(C),gasLimit:G},[l,c,C,T,y,G]),m=oi({coinId:i,tx:S,type:"fast",supportEip1559:c,needExtFee:p},P),w=oi({coinId:i,tx:D,type:"custom",supportEip1559:c,needExtFee:p},P);return(0,z.useMemo)(()=>{let R=m.loading||w.loading,X=m.error||w.error,N={[e.SLOW]:m.data,[e.STANDARD]:m.data,[e.FAST]:m.data,[e.CUSTOM]:w.data};return{loading:R,error:X,data:N}},[m,w])};ie();se();var J={customInput:"_customInput_y9e7y_1",maxBaseFeeWarning:"_maxBaseFeeWarning_y9e7y_4",customGWei:"_customGWei_y9e7y_10",customInputSubTitle:"_customInputSubTitle_y9e7y_17",customGasFeeWarning:"_customGasFeeWarning_y9e7y_21",customGasFeeWarningFold:"_customGasFeeWarningFold_y9e7y_24",gweiText:"_gweiText_y9e7y_27"};var le=i=>$t(i)||it(i,0);function li({className:i}){return t.default.createElement(at,{className:i,desc:g("wallet_extension_transfer_text_higher_than_necessary"),type:at.TYPE.warn,closable:!1})}var Ji=({visible:i=!1,address:s="",inputData:r="",tokenAddress:a="",coinId:o="",value:f="0",initialGasData:c={initialGasType:e.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},estimatedL1FeeOptions:p={},onBack:n=()=>{},onClose:u=()=>{},onGasChange:C=()=>{},onServerDataChange:T=()=>{},minimumGasLimit:y="0",isSignInfoLoading:G,signInfo:P,initialGasLimitInfo:l,isGasLimitLoading:L,currencyId:S,gasReturn:D,onGasTypeManualChange:m,isMev:w,mevInfo:R})=>{let X=(0,t.useRef)(!1),[,N]=ut(o,{withPrice:!0}),k=ft({coinId:N?.coinId}),[xe,De,ye]=qt(k?.realChainIdHex),ae=si(),fe=ci(),{initialGasType:de=e.STANDARD,initialCustomMaxBaseFee:Le,initialCustomMaxPriorityFee:oe,initialCustomGasPrice:Te,initialCustomGasLimit:Fe}=c||{},v=le(Le)?void 0:Me(Le),Se=le(oe)?void 0:Me(oe),Ie=le(Te)?void 0:Me(Te),ze=le(Fe)?void 0:Fe,[Ne,Re]=(0,t.useState)(),[ge,Ke]=(0,t.useState)(),[Pt,Fi]=(0,t.useState)(),[pt,Gt]=(0,t.useState)(),[Ee,xt]=(0,t.useState)(de),[E,he]=(0,t.useState)(de),Pi=F=>{let{priorityRate:d}=R||{},O=tt=>x(tt,d),A=(tt,Ri)=>{let Ki=Q([0,x(Ri,re(d,1))]);return _(tt,Ki)},{supportEip1559:$,max:te,min:et,normal:kt,fastPriorityFee:be,proposePriorityFee:vt,safePriorityFee:bt}=F,ce={};return $&&d&&(ce.fastPriorityFee=O(be),ce.safePriorityFee=O(bt),ce.proposePriorityFee=O(vt),ce.max=A(te,be),ce.normal=A(kt,vt),ce.min=A(et,bt)),{...F,...ce}},H=(0,t.useMemo)(()=>w?P?.gasPrice?Pi(P?.gasPrice):$e:P?.gasPrice||$e,[P?.gasPrice,w]),pi=P?.needExtFee,{min:Gi,normal:xi,max:yi,minGasPrice:di,supportEip1559:b,suggestBaseFee:Ti,safePriorityFee:_e,proposePriorityFee:Ce,fastPriorityFee:we}=H,K=fe(Gi),Z=fe(xi),Y=fe(yi),h=(0,t.useMemo)(()=>{let F=zt(l?.minGasLimit,y)?l?.minGasLimit:y,d={...l,minGasLimit:F};return V(d?.gasLimit,d?.minGasLimit)&&(d.gasLimit=d?.minGasLimit),d},[l,y]),yt=`${h?.gasLimit||0}`,j=ze||yt,Ze=`${h?.minGasLimit||yt}`,Ye=`${h?.maxGasLimit||1500*1e4}`,gi=W(K),dt=W(Z),_i=W(Y),Tt=Me(di),je=W(Ti),Ci=W(re(K,_e)),gt=W(re(Z,Ce)),wi=W(re(Y,we)),Mi=W(_e),_t=W(Ce),Di=W(we),Ae=(0,t.useRef)(),We=(0,t.useRef)(),Oe=(0,t.useRef)(),qe=(0,t.useRef)(),Ct={[e.SLOW]:gi,[e.STANDARD]:dt,[e.FAST]:_i,[e.CUSTOM]:le(Ae.current)?dt:Ae.current},wt={[e.SLOW]:Ci,[e.STANDARD]:gt,[e.FAST]:wi,[e.CUSTOM]:le(We.current)?gt:We.current},Mt={[e.SLOW]:Mi,[e.STANDARD]:_t,[e.FAST]:Di,[e.CUSTOM]:le(Oe.current)?_t:Oe.current},Pe=typeof Pt=="string"?Pt:Ie||Ct[E],ne=typeof Ne=="string"?Ne:v||wt[E],pe=typeof ge=="string"?ge:Se||Mt[E],ee=typeof pt=="string"?pt:j,I=ui({coinId:o,from:s,to:a,value:f,inputData:r,gasLimit:j,supportEip1559:b,needExtFee:pi,slowGasPrice:K,safePriorityFee:_e,standardGasPrice:Z,proposePriorityFee:Ce,fastGasPrice:Y,fastPriorityFee:we,customGasPrice:Pe,customMaxBaseFee:ne,customMaxPriorityFee:pe,customGasLimit:ee,estimatedL1FeeOptions:{wait:200,...p,signInfo:P}}),ke=G||L||I.loading,{minGasFeeDisplay:Li,minGasFee:Si,minGasPrice:Ii}=Ve({gasPrice:K,gasLimit:j,maxPriorityFeePerGas:_e,maxFeePerGas:K,supportEip1559:b,extFee:I?.data?.[e.SLOW],gasPriceInfo:H,gasLimitInfo:h,gasType:Ee,baseCoin:N,currencyId:S}),Ni=W(Ii),{minGasFeeDisplay:Ei,minGasFee:hi,minGasPrice:Ai}=Ve({gasPrice:Z,gasLimit:j,maxPriorityFeePerGas:Ce,maxFeePerGas:Z,supportEip1559:b,extFee:I?.data?.[e.STANDARD],gasPriceInfo:H,gasLimitInfo:h,gasType:Ee,baseCoin:N,currencyId:S}),Wi=W(Ai),{minGasFeeDisplay:Oi,minGasFee:ki,minGasPrice:vi}=Ve({gasPrice:Y,gasLimit:j,maxPriorityFeePerGas:we,maxFeePerGas:Y,supportEip1559:b,extFee:I?.data?.[e.FAST],gasPriceInfo:H,gasLimitInfo:h,gasType:Ee,baseCoin:N,currencyId:S}),bi=W(vi),Dt=V(ne,0)?g("extension_wallet_transaction_errortip_basefeelimit"):"",Lt=V(ne,je)&&M(ne,0)?g("extension_wallet_transaction_errortip_notsuccess",{baseFee:je}):"",St=it(pe,0)?g("extension_wallet_transaction_errortip_priorityfeelimit"):"",It=V(Pe,Tt)?g("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:Tt}):"",Nt=V(ee,Ze)||M(ee,Ye)?g("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:mt(Ze,0),maxGasLimit:mt(Ye)}):"",Et=!Nt&&(!b&&!It||b&&!Dt&&!St),ht=_(ne,pe),ve=U(He((b?ht:Pe)||0)),Bi=W(ve),{gasFeeDisplay:At}=mi({gasPrice:He(ve),gasLimit:He(ee),extFee:I?.data?.[e.CUSTOM],baseCoin:N,currencyId:S}),Hi=_(x(K,j),I?.data?.[e.SLOW]),Ui=_(x(Z,j),I?.data?.[e.STANDARD]),Wt=_(x(Y,j),I?.data?.[e.FAST]),Ot=_(x(ve,ee),I?.data?.[e.CUSTOM]),Je=M(Ot,x(Wt,2)),Xe=[{typeKey:e.SLOW,gasFee:Si,unitPrice:`${q.ceilShort(Ni,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Li,estimatedTime:ae(H,K),onClick:()=>(m?.(),he(e.SLOW))},{typeKey:e.STANDARD,gasFee:hi,unitPrice:`${q.ceilShort(Wi,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Ei,estimatedTime:ae(H,Z),onClick:()=>(m?.(),he(e.STANDARD))},{typeKey:e.FAST,gasFee:ki,unitPrice:`${q.ceilShort(bi,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Oi,estimatedTime:ae(H,Y),onClick:()=>(m?.(),he(e.FAST))}],$i=(0,t.useMemo)(()=>D&&D?.status!==Xt.empty&&(!D?.tip?.error||D?.tip?.key===Jt.exceedGasLimit)?Xe?.map(F=>F?.typeKey!==e.CUSTOM&&q.lte(q.mul(F?.gasFee,N?.usdPrice),D?.activity?.gas)?{supportGasReturn:!0,...F}:F):Xe,[D,Xe,N?.usdPrice]),Vi=ae(H,ve,!Et),zi={unitPricePrefix:q.ceilShort(Bi,2),unitPriceSuffix:g("extension_wallet_transaction_input_gwei"),totalPrice:At?t.default.createElement(ai,{style:{color:Je?"var(--okd-color-semantic-notice)":null},text:At,maxWidth:"120px"}):"",renderWarning:F=>!F&&Je?t.default.createElement(li,{className:J.customGasFeeWarningFold}):null,estimatedTime:Vi,onClick:()=>{xt(e.CUSTOM)},canConfirm:Et,onConfirm:F=>{he(e.CUSTOM),m?.();let d=U(Pe),O=U(ht),A=U(pe),$=ee,te=I?.data?.[e.CUSTOM];X.current=!0,C({gasType:e.CUSTOM,maxFeePerGas:O,maxPriorityFeePerGas:A,gasPrice:d,gasLimit:$,isGasLimitLoading:L,isNetworkFeeLoading:ke,networkFee:Ot,supportEip1559:b,gasLimitInfo:h,gasPriceInfo:H,extFee:te,customConfirmed:X.current}),Ae.current=Pe,We.current=ne,Oe.current=pe,qe.current=ee,F?De({gasPrice:d,isDefault:!0,maxFeePerGas:O,isSupportEip1559:b,maxPriorityFeePerGas:A,baseFeePerGas:q.sub(O,A)}):ye(k?.realChainIdHex)}};(0,t.useEffect)(()=>{xt(E)},[i]),(0,t.useEffect)(()=>{if(E===e.CUSTOM)return;let F,d,O,A,$,te=j;E===e.SLOW?(O=K,F=K,d=_e,$=Hi,A=I?.data?.[e.SLOW]):E===e.STANDARD?(O=Z,F=Z,d=Ce,$=Ui,A=I?.data?.[e.STANDARD]):E===e.FAST&&(O=Y,F=Y,d=we,$=Wt,A=I?.data?.[e.FAST]),C({gasType:E,maxFeePerGas:F,maxPriorityFeePerGas:d,gasPrice:O,gasLimit:te,isGasLimitLoading:L,isNetworkFeeLoading:ke,networkFee:$,supportEip1559:b,gasLimitInfo:h,gasPriceInfo:H,extFee:A})},[E,K,Z,Y,h,L,ke,C]),(0,t.useEffect)(()=>{if(E===e.CUSTOM&&!i){let F=qe.current;typeof F=="string"&&V(F,h?.minGasLimit)&&(F=h?.minGasLimit,Gt(h?.minGasLimit),qe.current=h?.minGasLimit);let d=U(Ae.current||Ie||Ct[E]),O=U(We.current||v||wt[E]),A=U(Oe.current||Se||Mt[E]),$=_(O,A),te=typeof F=="string"?F:j,et=I?.data?.[e.CUSTOM],be=_(x((b?$:d)||0,te),I?.data?.[e.CUSTOM]);C({gasType:E,maxFeePerGas:$,maxPriorityFeePerGas:A,gasPrice:d,gasLimit:te,isGasLimitLoading:L,isNetworkFeeLoading:ke,networkFee:be,supportEip1559:b,gasLimitInfo:h,gasPriceInfo:H,extFee:et,useDefaultGas:!!xe,customConfirmed:X.current})}},[xe,h,H,I]),(0,t.useEffect)(()=>{typeof T=="function"&&T({signInfo:P})},[P]);let Qe=()=>t.default.createElement("span",{className:J.customGWei},g("extension_wallet_transaction_input_gwei"));return t.default.createElement(ii,{feeType:Ee,baseCoinId:N?.coinId,feeDataList:$i,onBack:n,onClose:u,visible:i,supportDefaultGas:!0,custom:{useDefaultGas:!!xe,chainName:k?.chainName,...zi,components:()=>t.default.createElement(t.default.Fragment,null,b?t.default.createElement(t.default.Fragment,null,t.default.createElement(B.Number,{className:J.customInput,size:B.SIZE.sm,title:t.default.createElement("div",{className:"network-fee--refresh-animation"},g("extension_wallet_transaction_text_maxbase_fee"),t.default.createElement("span",{className:J.customInputSubTitle},g("extension_wallet_transaction_text_current",{number:q.ceilShort(je,2)}))),value:ne,error:Dt,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Re,max:1e7,tips:Lt&&t.default.createElement("div",{className:J.maxBaseFeeWarning},Lt),suffix:Qe()}),t.default.createElement(B.Number,{className:J.customInput,size:B.SIZE.sm,title:g("extension_wallet_transaction_text_priority_fee"),value:pe,error:St,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ke,max:1e7,suffix:Qe()})):t.default.createElement(B.Number,{className:J.customInput,size:B.SIZE.sm,title:t.default.createElement(t.default.Fragment,null,g("wallet_transfer_gasfee_subtitle_gas_price"),t.default.createElement("span",{className:J.customInputSubTitle},g("extension_wallet_transaction_input_gwei"))),value:Pe,error:It,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Fi,max:1e7,suffix:Qe()}),t.default.createElement(B.Number,{size:B.SIZE.sm,title:g("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:ee,error:Nt,errorType:B.TIP_TYPE.always,enableMinus:!1,onChange:Gt,max:Ye,min:Ze,precision:0}),Je&&t.default.createElement(li,{className:J.customGasFeeWarning}))}})};function Xi(i){let{coinId:s="",address:r="",inputData:a="",tokenAddress:o="",value:f="0",gasLimitOptions:c={},gasLimitParams:p={},initialGasData:n={initialGasType:e.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},onDappGasIllegal:u}=i,[C,T]=ut(s)||[{},{}],y=ft({coinId:T?.coinId}),G=jt(),[P,l]=(0,t.useState)(n),[L,S]=(0,t.useState)(!1),[D,m]=ti({coinId:s,address:r,chainId:C?.chainId}),[w,R,X]=ri({address:r,inputData:a,tokenAddress:o,coinId:s,value:f,...p},{wait:200,...c}),N=D||X;return(0,fi.useAsyncEffect)(async()=>{if(N)return;if(y?.realChainIdHex)try{let v=await G(y?.realChainIdHex);if(!Ut(v)){l({initialGasType:e.CUSTOM,initialCustomGasPrice:v?.gasPrice,initialCustomMaxPriorityFee:v?.maxPriorityFeePerGas,initialCustomMaxBaseFee:q.sub(v?.maxFeePerGas,v?.maxPriorityFeePerGas)}),S(!0);return}}catch(v){Ht(v)}let k={...n||{}},{initialGasType:xe,initialCustomMaxBaseFee:De,initialCustomMaxPriorityFee:ye,initialCustomGasPrice:ae,initialCustomGasLimit:fe}=k,{min:de,safePriorityFee:Le,supportEip1559:oe,max:Te}=m?.gasPrice||$e,{gasLimit:Fe}=w||{};if(xe===e.CUSTOM){let v=V(fe,Fe);v&&(k.initialCustomGasLimit=Fe);let Se=oe&&(V(ye,Le)||V(_(De,ye),de)),Ie=!oe&&V(ae,de),ze=M(fe,x(Fe,1.2)),Ne=!oe&&M(ae,x(Te,1.2)),Re=oe&&M(_(De,ye),x(Te,1.2)),ge=v||Se||Ie,Ke=ze||Ne||Re;ge&&(k.initialCustomMaxPriorityFee=null,k.initialCustomMaxBaseFee=null,k.initialCustomGasPrice=null,k.initialGasType=e.STANDARD,u?.(ot[e.SLOW])),!ge&&Ke&&u?.(ot[e.FAST]),l(k)}S(!0)},[N]),L?t.default.createElement(Ji,{...i,initialGasData:P,isSignInfoLoading:D,signInfo:m,initialGasLimitInfo:w,isGasLimitLoading:R,onGasTypeManualChange:()=>{u?.("")}}):null}var $s=(0,t.memo)(Xi);ie();se();rt();var Ys=(i,s)=>{let r=i.find(a=>a?.checkType===s);return r?!r?.result:!1},js=(i,s,r,a)=>{let o=i.find(f=>f?.checkType===nt.OVERWRITTEN)||{};return o.toastType===ue.FAILED?s():o.toastType===ue.PENDING?r():o.toastType===ue.PENDING_7702?a():i},qs=(i=[])=>{let s={hasFailedTx:!1,hasPendingTx:!1,nonce:0,newNonce:0,originGasPrice:"0",originPriorityFee:"0"},r=i.find(a=>a?.checkType===nt.OVERWRITTEN)||{};return s.nonce=r.nonce,s.newNonce=r.newNonce,s.originGasPrice=x(r?.gasPrice,1.1),s.originPriorityFee=x(r?.originPriorityFee,1.1),r.toastType===ue.FAILED?s.hasFailedTx=!0:r.toastType===ue.PENDING?s.hasPendingTx=!0:r.toastType===ue.PENDING_7702&&(s.hasPending7702Tx=!0),s},Js=(i,s,r)=>{let{userGasInfo:a,serverGasInfo:o,originTxGasInfo:f}=s,{originGasPrice:c,originPriorityFee:p}=f,{supportEip1559:n}=a;if(n){let y=!1,{maxFeePerGas:G,maxPriorityFeePerGas:P}=a,{normal:l,proposePriorityFee:L}=o,S=c,D=p,m=Q([G,l,S]);me(m,G)||(y=!0);let w=Q([P,L,D]),R="0";return me(w,P)||(R=re(w,P),y=!0),y?r({maxFeePerGas:_(m,R),maxPriorityFeePerGas:w}):i}let{gasPrice:u}=a,{normal:C}=o,T=Q([u,C,c]);return me(T,u)?i:r({gasPrice:T})},Xs=({userGasInfo:i,serverGasInfo:s,originTxGasInfo:r})=>{let{originGasPrice:a,originPriorityFee:o}=r,{supportEip1559:f}=i;if(f){let u=!1,{maxFeePerGas:C,maxPriorityFeePerGas:T}=i,{normal:y,proposePriorityFee:G}=s,P=a,l=o,L=Q([C,y,P]);me(L,C)||(u=!0);let S=Q([T,G,l]),D="0";if(me(S,T)||(D=re(S,T),u=!0),u)return{maxFeePerGas:Ue(_(L,D),0),maxPriorityFeePerGas:Ue(S,0)}}let{gasPrice:c}=i,{normal:p}=s,n=Q([c,p,a]);return me(n,c)?{}:{gasPrice:Ue(n,0)}},Qs=(i,s,r)=>{let{userGasInfo:a,updateGasInfo:o,baseCoinAmountAvailable:f}=s,{supportEip1559:c,gasLimit:p}=a;if(c){let{maxFeePerGas:u}=o;return M(x(u,p),f)?r():i}let{gasPrice:n}=o;return M(x(n,p),f)?r():i},er=({userGasInfo:i,updateGasInfo:s,baseCoinAmountAvailable:r,L1FEE:a})=>{let{supportEip1559:o,gasLimit:f}=i;if(o){let{maxFeePerGas:p}=s;return!!M(_(x(p,f),a),r)}let{gasPrice:c}=s;return!!M(_(x(c,f),a),r)};export{$s as a,Ys as b,js as c,qs as d,Js as e,Xs as f,Qs as g,er as h};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-DGIWAYI5.js.map
