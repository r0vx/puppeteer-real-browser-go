import{b as D,c as U}from"./chunk-OKXHAJNT.js";import{n as W}from"./chunk-AZNX5TUC.js";import{b as N,c as C}from"./chunk-MONRGJFN.js";import{a as g}from"./chunk-QMENNGDH.js";import{jc as J}from"./chunk-QRHYK2TW.js";import{a as V}from"./chunk-532YJKK4.js";import{h as R,k as x,l as Q}from"./chunk-ZDOH3CEJ.js";import{J as E,L as u,Ra as T,Sa as v,Yd as f,gc as _,ia as q,od as j,oe as z}from"./chunk-QHXUL3YM.js";import{H as O,y}from"./chunk-MOTAOJVG.js";import{H as I}from"./chunk-XR4SQWL7.js";import{b as H}from"./chunk-OL67KS7C.js";import{f as w,o as a,q as l}from"./chunk-SHG7TIBL.js";a();l();var Y=w(H()),k=w(V());O();a();l();var K=w(J());a();l();Q();v();var X=x({name:"assetsSlice",initialState:{assets:[]},reducers:{setAssets:(t,r)=>{t.assets=r.payload}}}),{actions:Z,reducer:$}=X,tt=[],b=R(t=>t.assetsSlice.assets??tt,t=>t.reduce((r,s)=>r.set(s.walletId,s),new Map)),at=()=>async t=>{(await T.assets).liveQuery().subscribe((s,c)=>{c||t(Z.setAssets(s))})},lt=$;function B(){return(0,K.useSelector)(b)}a();l();z();j();q();var P=({walletAccounts:t,rpcData:r,assetsMap:s,showNftAmount:c,selectedCurrency:A})=>{let m=t.map(e=>{if(!e)return{walletAsset:"0",platformAsset:"0"};let{walletId:o}=e;if(!!r){let{chainTokensAccountMap:S}=r,p=e?.account?.[_];if(!p||[f.HD_KEYRING,f.SIMPLE_KEYRING,f.MPC_KEYRING].indexOf(e?.initialType)<0)return{unsupported:!0,walletAsset:"0",platformAsset:"0",...e};let{balance:L="0"}=S[p]?.filter(({address:F})=>!F)[0]||{};return{walletAsset:L,platformAsset:"0",...e}}let n=s.get(o),G=(n?[n.tokenTotalAssetsUSD,n.defiTotalAssetsUSD,c?n.nftTotalAssetsUSD:"0"]:[]).reduce((S,p)=>u(S,p),"0");return{walletAsset:n?E(G,A.usdToThisRate):"--",platformAsset:n?n.platformTotalAssetsUSD:"--",...e}}),{walletAsset:i,platformAsset:d}=m.reduce((e,o)=>({walletAsset:u(e.walletAsset,o.walletAsset==="--"?"0":o.walletAsset),platformAsset:u(e.platformAsset,o.platformAsset==="--"?"0":o.platformAsset)}),{walletAsset:"0",platformAsset:"0"});return{walletAccountsWidthBalance:m,walletAsset:i,platformAsset:d}};var et=t=>{let r=(0,k.useHistory)(),s=W(t),[c]=C(N.showNftAmount),A=D(),m=U(A),i=B();return s||(I.error(y("wallet_extension_top_error_parameters")),r.push(g)),(0,Y.useMemo)(()=>{let{walletIdentities:d}=s,{walletAccountsWidthBalance:e,walletAsset:o,platformAsset:h}=P({walletAccounts:d,showNftAmount:c,rpcData:null,selectedCurrency:m,assetsMap:i});return{...s,walletAsset:o,platformAsset:h,walletIdentities:e}},[s,c,m,i])},Wt=et;export{at as a,lt as b,B as c,P as d,Wt as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-6K6UF6OE.js.map
