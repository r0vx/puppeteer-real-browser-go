import{a as Ze}from"./chunk-4IS2JYPW.js";import{a as Ye}from"./chunk-7KQVTMRC.js";import{a as ie}from"./chunk-VR7OPIR6.js";import"./chunk-2SBM2GLU.js";import{a as Re,b as je}from"./chunk-NPQMAAOH.js";import"./chunk-B3SXRDEQ.js";import"./chunk-7HRNNJBX.js";import"./chunk-F6UVHIJV.js";import"./chunk-JSOLAK4X.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import"./chunk-6MVL4I6V.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-MKDQBVRZ.js";import{a as ze}from"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import"./chunk-QYDRYMWS.js";import"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3L7K7.js";import{a as He}from"./chunk-Y5K5NJ6U.js";import{a as Ue}from"./chunk-Q7FGM7BT.js";import"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{I as Me,a as Ae,l as Le,m as Be}from"./chunk-QMENNGDH.js";import{a as Y}from"./chunk-KANXVZ35.js";import{r as W}from"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as Oe}from"./chunk-XP3TNE3R.js";import{H as P}from"./chunk-QRHYK2TW.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as _e}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import{l as Fe}from"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as v}from"./chunk-62ZAND24.js";import{a as Ct}from"./chunk-SIITVWZR.js";import{Kd as De,Mc as ve,Oc as Se,Pd as gt,Yc as L,_c as Ne,bd as Pe,cd as re,ic as oe,od as H}from"./chunk-QHXUL3YM.js";import{B as z,H as N,y as n}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{H as te,e as de,h as G,o as we,q as g,w as ue}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import{H as Te,ra as ft}from"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as be,fa as Ee,ka as T}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as w}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as _,o,q as r}from"./chunk-SHG7TIBL.js";o();r();var s=_(w()),nt=_(_e());N();o();r();var B=_(w()),ne=_(_e()),qe=_(Ct());N();var yt=(e,t)=>{let i=e==="protocol"?Be:Le;if(t){let a=new URLSearchParams(t).toString();return`${i}?${a}`}return i},It=({selectedInfo:e,category:t})=>{let i=(0,ne.useHistory)(),a=(0,ne.useLocation)(),l=new URLSearchParams(a.search);return B.default.createElement("div",{"data-testid":Y.CUSTOM_COIN_PAGE.NETWORK_SELECTOR,className:"chain-select",onClick:()=>{let c={...Object.fromEntries(l.entries()),pageType:"customCrypto"};i.push(yt(t,c))}},B.default.createElement("div",{className:"chain-select-title"},t==="protocol"?n("extension_defi_info_title_protocol"):n("wallet_custom_crypto_subtitle_select_network")),B.default.createElement("div",{className:"chain-select-box","aria-label":t==="protocol"?"protocol-select-box":"chain-select-box",role:"button"},t==="protocol"?null:B.default.createElement("img",{className:"chain-select-icon",src:e?.imageUrl||e?.logo,alt:""}),B.default.createElement("div",{className:"chain-select-name"},e?.name),B.default.createElement(be,{className:(0,qe.default)("okds-arrow-chevron-right-centered-md","chain-select-arrow")})))},se=It;o();r();var pe=_(w());var ht=({currentAddress:e,addressInputTitle:t,errorText:i,placeHolderText:a,addressIsInvalid:l,updateCustomCoin:c})=>pe.default.createElement("div",{className:"contract-address-box"},pe.default.createElement(g.TextArea,{"data-testid":Y.CUSTOM_COIN_PAGE.CONTRACT_ADDRESS_INPUT,autoResize:!0,value:e,title:t,size:g.SIZE.xl,error:l&&i,errorType:g.TIP_TYPE.always,placeholder:a,onChange:p=>{c(p.target.value)}})),Ge=ht;o();r();var y=_(w());N();o();r();var M={"risk-dialog-footer":"_risk-dialog-footer_1jyn7_1",riskDialogFooter:"_risk-dialog-footer_1jyn7_1","risk-dialog-content":"_risk-dialog-content_1jyn7_4",riskDialogContent:"_risk-dialog-content_1jyn7_4","risk-dialog-confirm-btn":"_risk-dialog-confirm-btn_1jyn7_7",riskDialogConfirmBtn:"_risk-dialog-confirm-btn_1jyn7_7","risk-dialog-title":"_risk-dialog-title_1jyn7_16",riskDialogTitle:"_risk-dialog-title_1jyn7_16","risk-dialog-desc":"_risk-dialog-desc_1jyn7_22",riskDialogDesc:"_risk-dialog-desc_1jyn7_22","risk-dialog-jump-link":"_risk-dialog-jump-link_1jyn7_25",riskDialogJumpLink:"_risk-dialog-jump-link_1jyn7_25"};var kt=({onCloseDialog:e,onNext:t,riskJumpUrl:i})=>{let a=ze(),l=(0,y.useCallback)(()=>{i&&setTimeout(()=>{globalThis.platform.openTab({url:`${a.origin}${i}`})},100)},[i]);return y.default.createElement(we,{visible:!0,title:!1,footer:y.default.createElement(v.FlexBox,{className:M.riskDialogFooter,direction:v.DIRECTION.vertical,align:v.ALIGN.center},y.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.primary,size:T.SIZE.lg,block:!0,onClick:e},z("commonall_text_btn_cancel")),y.default.createElement("span",{className:M.riskDialogConfirmBtn,onClick:t},z("wallet_extension_risk_alert_btn_continue_add"))),noMargin:!0,isFull:!0,hideCloseBtn:!0},y.default.createElement(v.FlexBox,{direction:v.DIRECTION.vertical,align:v.ALIGN.center,justify:"center",className:M.riskDialogContent},y.default.createElement(de,{width:100,height:100,src:"/static/images/risk-warning.png",layout:de.LAYOUT.contain}),y.default.createElement(W.Text,{strong:500,className:M.riskDialogTitle},z("wallet_extension_risk_alert_title_approve_eoa")),y.default.createElement(W.Text,{size:W.SIZE.sm,type:W.TYPE.secondary,strong:400,className:M.riskDialogDesc},z("wallet_extension_risk_alert_desc_approve_eoa",{detail:""})),i&&y.default.createElement(G,{type:G.TYPE.primary,underline:!0,weight:G.WEIGHT.muted,size:G.SIZE.md,onClick:l,className:M.riskDialogJumpLink},z("wallet_extension_risk_alert_icu_approve_eoa"))))},We=kt;o();r();gt();H();var fe={[L]:{title:"wallet_extension_create_input_title_contract_token_symbol",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[De]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[Se]:{title:"extension_wallet_customcoin_text_currency_symbol",titleId:"wallet_extension_cat_desc_token_id",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[Ne]:{title:"extension_wallet_cardano_text_fingerprint",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[Pe]:{title:"wallet_extension_import_title_jetton_master",error:"developer_mode_manage_errortip_request_failed",placeholder:"wallet_extension_import_input_jetton_master"},[re]:{title:"wallet_extension_selecttoken_input_label_asset_issuer",placeholder:"wallet_extension_selecttoken_input_placeholder_issuer_name",symbolTitle:"wallet_extension_selecttoken_input_label_asset_code",symbolPlaceholder:"wallet_extension_selecttoken_input_placeholder_asset_code",error:"developer_mode_manage_errortip_request_failed"},default:{title:"wallet_transaction_history_subtitle_contract_address",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"}};o();r();var j=_(w());N();H();o();r();var R=_(w());N();var xt=({isFacet:e,onToggle:t})=>{let i=[{value:"ERC20",label:"ERC20"},{value:"Facet",label:"Facet"}],[a,l]=(0,R.useState)(e?"Facet":"ERC20"),c=(0,R.useCallback)((p={value:"ERC20"})=>{l(p.value),t(p.value==="Facet")},[]);return R.default.createElement("div",{className:"chain-select-isfacet"},R.default.createElement(ue,{title:n("extension_defi_info_title_protocol"),value:a,options:i,onChange:c,size:ue.SIZE.xl,searchable:!1,dropMode:!0}))},Ve=xt;var Tt=({selectedNetwork:e,account:t,accountIsInvalid:i,accountErrorMessage:a,setAccount:l,updateCustomCoin:c,accountRef:p,setProtocol:I,protocol:k,protocolList:f,isFacet:x,setIsFacet:C})=>{let U=ie(),u=Number(U.get("protocolId"));return(0,j.useEffect)(()=>{let m=null;if(!P(e)){I("");return}if(u&&f?.length&&(m=f.find(E=>E.protocolId===u)),!m&&f.length>0&&(m=f[0]),m){let E={...m,name:m.protocolName};I(E)}},[f,e]),{renderCustomForm:()=>e?.coinId===L?j.default.createElement("div",{className:"contract-address-box"},j.default.createElement(g.TextArea,{autoResize:!0,value:t,title:n("wallet_extension_create_input_title_contract_account_name"),size:g.SIZE.xl,error:i&&a,errorType:g.TIP_TYPE.always,placeholder:n("wallet_extension_create_input_title_contract_token_symbol"),onChange:m=>{l(m.target.value),p.current=m.target.value,c()}})):e?.coinId===ve?j.default.createElement(Ve,{isFacet:x,onToggle:m=>{C(m),c()}}):P(e)&&k?j.default.createElement(se,{selectedInfo:k,category:"protocol"}):null}},$e=Tt;o();r();var D=_(w()),Ke=_(Oe());ft();o();r();H();function V(e){return e===re}H();var bt=({selectedNetwork:e,currentAddress:t,isFacet:i,currentAddressRef:a,currentSymbolRef:l,accountRef:c,protocol:p})=>{let[I,k]=(0,D.useState)({}),[f,x]=(0,D.useState)(!1),[C,U]=(0,D.useState)(""),[u,b]=(0,D.useState)(!0),[m,E]=(0,D.useState)(""),[O,F]=(0,D.useState)(!1),[ye,$]=(0,D.useState)(!1),Z=h=>`facet_${h}`,{run:K}=(0,Ke.useDebounceFn)(async({addr:h,accountName:Q,protocolId:J,symbol:X})=>{if($(!1),!h)return;let ee=V(e.coinId);if(ee&&Te(X))return;let S;try{S=await Re({contractAddress:i?Z(h):h,chainInfo:e,account:Q,isFacet:i,...P(e)?{protocolId:J}:{},...ee?{symbol:X}:{}})}catch(ce){S={},ce?.data?.originalError?.data?.code==="ERR_NETWORK"&&$(!0)}if(h===t){if(k(S),e.coinId===L&&!S?.accountValid){x(!0),U(S.msg),b(!0);return}else if(!m&&e?.coinId===L){F(!1),b(!0);return}x(!1),U(""),h&&S?.symbol?(F(!1),b(!1)):h?(F(!0),b(!0)):(F(!1),b(!0))}},{wait:500});return{customCoin:I,accountIsInvalid:f,accountErrorMessage:C,stateOnLock:u,account:m,addressIsInvalid:O,setAccount:E,updateCustomCoin:()=>{k({}),b(!0),K({addr:a.current,accountName:c.current,protocolId:p?.protocolId,symbol:l.current})},networkError:ye}},Qe=bt;o();r();var Je=_(_e()),ae=_(Oe());N();o();r();function Et(e,t){if(e.key&&t.key)return e.key===t.key;if(e.coinId&&t.coinId)return e.coinId===t.coinId;let i=e.address||e.contractAddress,a=t.address||t.contractAddress;return i&&a?i.toLowerCase()===a.toLowerCase()&&e.localType===t.localType:!1}function ge(e,t){for(let i=0;i<t.length;i++){let a=t[i];if(Et(a,e)||a.childrenCoin&&ge(e,a.childrenCoin))return!0}return!1}function Ce(e,t){let i=(0,Je.useHistory)(),[a,{setTrue:l,setFalse:c}]=(0,ae.useBoolean)(),p=Ye(),{run:I}=(0,ae.useDebounceFn)(async()=>{if(l(),ge(e,p)){te.error(n("wallet_manage_crypto_errortip_crypto_added")),c();return}try{await je({...e,protocolId:t}),te.success(n("wallet_manage_crypto_toast_custom_crypto_success")),i.push(Ae)}catch(f){let x=f?.data?.originalError?.msg||n("wallet_extenshion_toast_add_failed");te.error(x)}finally{c()}},{wait:100});return{isSubmitting:a,submitAction:I}}o();r();o();r();var et=_(w());N();H();o();r();var Xe={root:"_root_11n0d_1"};var wt=(e,t,i)=>V(t.coinId)?{show:!0,value:i,disabled:!1}:e?.localType===oe?{show:!1,value:e?.symbol,disabled:!0}:{show:e?.symbol!==void 0,value:e?.symbol,disabled:!0},vt=({customCoin:e={},selectedNetwork:t,onChange:i,value:a,title:l,placeholder:c})=>{let p=x=>{i?.(x.target.value)},{show:I,value:k,disabled:f}=wt(e,t,a);return I&&et.default.createElement(g,{className:Xe.root,label:l||n("wallet_manage_crypto_subtitle_custom_crpto_symbol"),placeholder:c,disabled:f,value:k,size:g.SIZE.xl,onChange:p})},tt=vt;o();r();var rt=_(w());N();H();o();r();var ot={root:"_root_11n0d_1"};var St=({customCoin:e}={})=>e?.decimals===void 0||e?.localType===oe?null:rt.default.createElement(g,{className:ot.root,label:n("wallet_manage_crypto_custom_coin_subtitle_decimals"),disabled:!0,value:e.decimals,size:g.SIZE.xl}),it=St;var Nt="Ethereum",Pt=()=>{let e=(0,nt.useHistory)(),t=s.default.useRef(""),i=s.default.useRef(""),a=s.default.useRef(""),l=s.default.useRef(""),[c,p]=(0,s.useState)(!1),[I,k]=(0,s.useState)(""),[f,x]=(0,s.useState)(""),[C,U]=(0,s.useState)(""),[u,b]=(0,s.useState)({imageUrl:"",name:"",coinId:-1}),[m,E]=(0,s.useState)(!1),{data:{supportNetworkList:O,protocolList:F}={}}=Ze(u.coinId),$=ie().get("network"),{title:Z,titleId:K,error:le,placeholder:h,placeholderName:Q,placeholderId:J,symbolTitle:X,symbolPlaceholder:ee}=fe[u?.coinId]||fe.default,S=(0,s.useMemo)(()=>P(u)&&C?.searchType?C.searchType===1?n(Z):n(K):n(Z),[C.searchType,u,Z,K]),ce=(0,s.useMemo)(()=>P(u)&&C?.searchType?C.searchType===1?n(Q):n(J):n(h),[h,J,Q,C.searchType,u?.coinId]),{customCoin:q,accountIsInvalid:Ie,accountErrorMessage:st,stateOnLock:at,account:lt,addressIsInvalid:he,setAccount:ct,updateCustomCoin:me,networkError:ke}=Qe({selectedNetwork:u,currentAddress:I,currentSymbol:f,isFacet:c,currentAddressRef:a,currentSymbolRef:l,accountRef:t,protocol:C}),mt=(0,s.useMemo)(()=>ke?n("developer_mode_manage_errortip_network_error"):n(le),[le,ke]),{renderCustomForm:dt}=$e({selectedNetwork:u,account:lt,accountIsInvalid:Ie,accountErrorMessage:st,setAccount:ct,updateCustomCoin:me,accountRef:t,protocolRef:i,setProtocol:U,protocol:C,protocolList:F,isFacet:c,setIsFacet:p}),{isSubmitting:ut,submitAction:xe}=Ce(q,C.protocolId);return(0,s.useEffect)(()=>{async function A(){if(O.length>0){let _t=$||Nt;b(O.filter(pt=>pt.name===_t)[0]||O[0])}}A()},[O]),s.default.createElement("div",{className:"custom-crypto-page main-container"},s.default.createElement(He,{title:n("wallet_manage_crypto_maintitle_custom_crypto"),onBack:()=>{e.push(Me)}}),s.default.createElement(v.Spin,{loading:!O?.length||!F?.length,size:Ee.SIZE.lg},s.default.createElement("div",{className:"custom-crypto--body"},s.default.createElement(se,{selectedInfo:u}),dt(),s.default.createElement(Ge,{updateCustomCoin:A=>{a.current=A,k(A),me()},currentAddress:I,addressInputTitle:S,errorText:mt,placeHolderText:ce,addressIsInvalid:he}),s.default.createElement(tt,{title:n(X),placeholder:n(ee),customCoin:q,value:f,selectedNetwork:u,onChange:A=>{l.current=A,x(A),me()}}),s.default.createElement(it,{customCoin:q})),s.default.createElement(Ue.FooterActions,{usePortal:!0},s.default.createElement(T,{"data-testid":Y.CUSTOM_COIN_PAGE.ADD_COIN_CONFIRM_BUTTON,onClick:()=>{q.riskType===Fe.NORMAL?xe():E(!0)},size:T.SIZE.lg,type:T.TYPE.highlight,category:T.CATEGORY.fill,loading:ut,disabled:he||at||Ie},n("wallet_set_password_btn_confirm")))),m&&s.default.createElement(We,{onCloseDialog:()=>{E(!1)},onNext:()=>{E(!1),xe()},riskJumpUrl:q.riskJumpUrl}))},Vr=Pt;export{Vr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CustomCrypto-E2I4X3G2.js.map
