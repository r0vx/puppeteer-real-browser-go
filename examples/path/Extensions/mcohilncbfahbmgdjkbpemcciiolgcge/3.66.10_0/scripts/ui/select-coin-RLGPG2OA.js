import{a as We}from"./chunk-FQ7EFSTD.js";import{a as He}from"./chunk-G26FB776.js";import{a as Je,b as K}from"./chunk-CBTVAJPO.js";import"./chunk-7SQRZDWM.js";import"./chunk-BAIZGGKY.js";import"./chunk-V7MVE7GF.js";import{a as Me}from"./chunk-UYHZVWJV.js";import{a as Ge}from"./chunk-EIPKO6DU.js";import{c as Ze}from"./chunk-LXDEJX7F.js";import{a as Ke}from"./chunk-7QDSLHV2.js";import{a as ee}from"./chunk-UDTGE34O.js";import{a as te,b as Fe}from"./chunk-7KQVTMRC.js";import{a as Ue}from"./chunk-FFLL5ZEI.js";import"./chunk-4CAGK53A.js";import"./chunk-F2UY6S3K.js";import"./chunk-DDT324RS.js";import"./chunk-VR7OPIR6.js";import{a as Ve}from"./chunk-O3U6IW2R.js";import"./chunk-DBWXHHZT.js";import"./chunk-7JSJY3SQ.js";import"./chunk-6JEFG7DQ.js";import{a as oe}from"./chunk-WPAZ67JY.js";import"./chunk-JSOLAK4X.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import{h as $e,i as Pe}from"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import"./chunk-5A3RJQCM.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-MKDQBVRZ.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-KJWX5V23.js";import"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import"./chunk-QYDRYMWS.js";import"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import{f as Be}from"./chunk-XZE3L7K7.js";import{a as X}from"./chunk-Y5K5NJ6U.js";import{a as Oe,b as Z}from"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import"./chunk-Q7FGM7BT.js";import"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{ea as Q,g as F,ta as V,x as G}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import{a as Ee,e as De}from"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as dt}from"./chunk-XP3TNE3R.js";import{C as Ie,Ha as Ae,I as q,Ib as be,J as z,K as R,Kb as xe,O as Ne,jc as ke}from"./chunk-QRHYK2TW.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as ge}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-L524QXHA.js";import{m as Le}from"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import{e as Y,k as fe}from"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as we}from"./chunk-62ZAND24.js";import{a as _t}from"./chunk-SIITVWZR.js";import{Nc as Ce,Q as _e,Rd as Te,Ud as Se,Xd as ct,hd as ve,ia as at,ic as W,od as ue}from"./chunk-QHXUL3YM.js";import{H as U,y as d}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{A as pe,E as j,o as J,y as H}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as ye,ka as he}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as $}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as E,o as r,q as s}from"./chunk-SHG7TIBL.js";r();s();var st=E($());r();s();var v=E($()),Ye=E(ge());U();at();r();s();function pt(){let o=He(),a=We(),e=Ue();return async i=>{let n=await o(i),c=await a({coinId:i.coinId}),h=await e({coinId:i.coinId});return!n||!c||!h?Promise.reject():Promise.resolve()}}var ie=pt;r();s();var C=E($());U();r();s();var je=E(ge());var ut=(o,a)=>{let e=(0,je.useHistory)(),{address:i}=Me();return n=>{let c={from:o[n.addressType]};i&&(c.address=i);let h=Z(c),I=Z({coinId:n.coinId,addressType:n.addressType}),u=a==="send"?`${F}/${n.coinId}${V}${h}`:`${G}${I}`;e.push(u)}},re=ut;r();s();var qe=E(ke());U();ct();var ft=(o,a,e)=>{let i=(0,qe.useSelector)(xe);return n=>{let c=Se?.[a]?.[n.addressType],h=Ie(o[c]),I=d(Te[c]),u=Ee(n.coinAmount,{precision:e?.displayPrecision,isStableCoin:e?.stableCoin}).value,f=De(n.currencyAmount,{currencySign:i.symbol}).value;return{addressDisplay:h,addressTypeDisplay:I,amountDisplay:u,currencyAmountDisplay:f}}},se=ft;r();s();var D={container:"_container_onsr7_1",body:"_body_onsr7_6",item:"_item_onsr7_9","item-left":"_item-left_onsr7_20",itemLeft:"_item-left_onsr7_20","item-right":"_item-right_onsr7_23",itemRight:"_item-right_onsr7_23","item-right-top":"_item-right-top_onsr7_26",itemRightTop:"_item-right-top_onsr7_26","item-right-bottom":"_item-right-bottom_onsr7_31",itemRightBottom:"_item-right-bottom_onsr7_31","item-icon":"_item-icon_onsr7_36",itemIcon:"_item-icon_onsr7_36","item-address":"_item-address_onsr7_40",itemAddress:"_item-address_onsr7_40","item-address-type":"_item-address-type_onsr7_47",itemAddressType:"_item-address-type_onsr7_47","item-currency-amount":"_item-currency-amount_onsr7_59",itemCurrencyAmount:"_item-currency-amount_onsr7_59","item-amount":"_item-amount_onsr7_70",itemAmount:"_item-amount_onsr7_70"};var gt=({visible:o,onClose:a,coin:e,type:i})=>{let n=Pe(e?.localType),c=ee(e),h=i==="send"?c.filter(f=>f.coinAmount>0):c,I=se(n,e?.localType,e),u=re(n,i);return C.default.createElement("div",null,C.default.createElement(J.Action,{isFull:!0,noTopRadius:!0,alignBottom:!0,hideCloseBtn:!0,animateDisable:!0,noContentPadding:!0,onClose:a,visible:o},C.default.createElement("div",{className:D.container},C.default.createElement(X,{className:"setting-nav",title:d("extension_defi_top_header_title_select_address_type"),onBack:a,closeable:!1}),C.default.createElement("div",{className:D.body},C.default.createElement("div",{className:D.list},h.map(f=>{let{addressDisplay:T,addressTypeDisplay:N,amountDisplay:A,currencyAmountDisplay:S}=I(f);return C.default.createElement("div",{className:D.item,onClick:()=>{u(f)}},C.default.createElement("div",{className:D.itemLeft},C.default.createElement(j,{width:32,height:32,alt:N,src:f.image,errorImg:Y,className:D.itemIcon})),C.default.createElement("div",{className:D.itemRight},C.default.createElement("div",{className:D.itemRightBottom},C.default.createElement("div",{className:D.itemAddressType},N),C.default.createElement("div",{className:D.itemAmount},A)),C.default.createElement("div",{className:D.itemRightTop},C.default.createElement("div",{className:D.itemAddress},T),C.default.createElement("div",{className:D.itemCurrencyAmount},S))))}))))))},ne=gt;r();s();var m=E($()),Re=E(_t());U();ue();r();s();var y={container:"_container_dxmc1_1","setting-nav":"_setting-nav_dxmc1_6",settingNav:"_setting-nav_dxmc1_6",body:"_body_dxmc1_9",item:"_item_dxmc1_12","item-left":"_item-left_dxmc1_23",itemLeft:"_item-left_dxmc1_23","item-right":"_item-right_dxmc1_26",itemRight:"_item-right_dxmc1_26","item-right-top":"_item-right-top_dxmc1_29",itemRightTop:"_item-right-top_dxmc1_29","item-right-bottom":"_item-right-bottom_dxmc1_34",itemRightBottom:"_item-right-bottom_dxmc1_34","item-icon":"_item-icon_dxmc1_39",itemIcon:"_item-icon_dxmc1_39","item-address":"_item-address_dxmc1_43",itemAddress:"_item-address_dxmc1_43","item-address-type":"_item-address-type_dxmc1_50",itemAddressType:"_item-address-type_dxmc1_50","item-currency-amount":"_item-currency-amount_dxmc1_62",itemCurrencyAmount:"_item-currency-amount_dxmc1_62","item-amount":"_item-amount_dxmc1_73",itemAmount:"_item-amount_dxmc1_73",infoIcon:"_infoIcon_dxmc1_84",title:"_title_dxmc1_89",tip:"_tip_dxmc1_97",subTitle:"_subTitle_dxmc1_98"};var ze="SelectBTCAddress_has_opened_tip_on_dlg",yt=({visible:o,onClose:a,coin:e,type:i})=>{let n=localStorage.getItem(ze),c=$e(W),[h,I]=(0,m.useState)(!n),u=ee(e),f=i==="send"?u.filter(_=>_.coinAmount>0):u,T=se(c,W,e),N=re(c,i),A=()=>{I(!1),localStorage.setItem(ze,!0)},S=()=>i==="send"?d("extension_defi_top_tooltips_only_usage_utxo_value_icu",{chainName:e?.chainName}):d("extension_defi_top_tooltips_only_usage_utxo_icu",{chainName:e?.chainName}),L=m.default.createElement(m.default.Fragment,null,d("extension_defi_top_header_title_select_address_type"),m.default.createElement(pe,{width:310,placement:pe.DIRECTION.bottomRight,title:S()},m.default.createElement(ye,{"data-testid":"top-header-info-icon",className:(0,Re.default)("okds-information-circle",y.infoIcon)})));return m.default.createElement(m.default.Fragment,null,m.default.createElement(J.Action,{isFull:!0,title:L,onClose:a,visible:o,noContentPadding:!0},m.default.createElement("div",{className:y.container},m.default.createElement("div",{className:y.body},m.default.createElement("div",{className:y.list},f.map(_=>{let{addressDisplay:t,addressTypeDisplay:g,amountDisplay:l,currencyAmountDisplay:b}=T(_);return m.default.createElement("div",{"data-testid":"select-btc-address-item",className:y.item,onClick:()=>{N(_)}},m.default.createElement("div",{className:y.itemLeft},m.default.createElement(j,{width:32,height:32,alt:g,src:_.image,errorImg:Y,className:y.itemIcon})),m.default.createElement("div",{className:y.itemRight},m.default.createElement("div",{className:y.itemRightBottom},m.default.createElement("div",{className:y.itemAddressType},g),m.default.createElement("div",{className:y.itemAmount},l)),m.default.createElement("div",{className:y.itemRightTop},m.default.createElement("div",{className:y.itemAddress},t),m.default.createElement("div",{className:y.itemCurrencyAmount},b))))}))))),m.default.createElement(J.Confirmation,{visible:o&&h,confirmText:d("wallet_extension_btn_general_gotit"),onConfirm:A,onClose:A,confirmBtnProps:{size:he.SIZE.lg}},m.default.createElement("div",{className:y.container},m.default.createElement("div",{className:y.title},d("extension_defi_popup_title_btc_address_type_icu",{chainName:e?.chainName})),m.default.createElement("div",{className:y.tip},d("extension_defi_popup_desc_btc_address_type_icu",{chainName:e?.chainName})))))},me=yt;r();s();var M=E($());U();function ht({list:o,pageType:a,isVirtualList:e,onSearch:i,renderEmpty:n,getItemProps:c,loading:h,loadingMore:I,...u},f){let{currentNetworkUniqueId:T}=oe(),N=(0,M.useMemo)(()=>{let S=o.map(_=>({..._,symbolName:_.symbol}));return Le(S,T,a==="send")},[T,o]),A=S=>{let L,{baseCoinId:_,childrenCoin:t,tokenType:g,aggregation:l}=S;if(a==="send"){let B=(t||[]).filter(x=>x.currencyAmount>0);l&&B.length>1?L=d("wallet_manage_crypto_labels_crypto_multichain"):L=_===0?"":g}else L=l?d("wallet_manage_crypto_labels_crypto_multichain"):g;let b=c?c(S):{};return{name:S.name,tag:L,...b}};return M.default.createElement(Je,{headerProps:{closeable:!1,title:d("wallet_transfer_send_select_coin_maintitle_select_coin")},...u,searchPlaceholder:d("wallet_transfer_send_select_coin_placeholder_input_name"),list:N,onSearch:i,getItemProps:A,renderEmpty:n,isVirtualList:e,loadingMore:I,loading:h,ref:f})}var le=(0,M.forwardRef)(ht);r();s();var ae={empty:"_empty_68vmq_1",emptyResult:"_emptyResult_68vmq_5"};function Ct(){let o=(0,Ye.useHistory)(),a=K(),{address:e,coinIds:i}=Oe(o&&o.location.search.slice(1)),n=te(),c=(0,v.useMemo)(()=>(n||[]).filter(t=>{let g=l=>{if(i){let b=i.split(",").map(B=>Number(B));return b.includes(l.coinId)||b.includes(l.baseCoinId)}return!0};return _e(t.coinAmount,0)&&g(t)}),[n,i]),h=ie(),[I,u]=(0,v.useState)(!1),[f,T]=(0,v.useState)(!1),[N,A]=(0,v.useState)(null),S=t=>{let g=t.childrenCoin.filter(l=>l.coinId===t.coinId&&_e(l.coinAmount,0));if(g.length===1){let l=g[0].userAddress;if(l){let b=`?from=${l}`;e&&(b+=`&address=${e}`),o.push({pathname:`${F}/${t.coinId}${V}`,search:b})}}return null},L=async t=>{if(q(t)){S(t),A(t),u(!0);return}if(z(t)||R(t)){S(t),A(t),T(!0);return}await h(t);let g,l,B=(t.childrenCoin||[]).filter(x=>x.currencyAmount>0);B.length>1&&t.aggregation?(g=Q,l=`coinKey=${encodeURIComponent(t.key)}&aggregationSymbol=${t.symbol}&type=${a}`):B.length===1&&t.aggregation?g=`${F}/${B[0].coinId}${V}`:g=`${F}/${t.coinId}${V}`,e&&(l?l+=`&address=${e}`:l=`address=${e}`),o.push({pathname:g,search:l})};return c.length===0?v.default.createElement(we.Container,null,v.default.createElement(X,{closeable:!1,title:d("wallet_transfer_send_select_coin_maintitle_select_coin")}),v.default.createElement(H.State,{className:ae.empty,title:d("wallet_transfer_maintitle_not_any_token")})):v.default.createElement(v.default.Fragment,null,v.default.createElement(le,{list:c,renderEmpty:t=>v.default.createElement(H.State,{className:ae.emptyResult,title:d("wallet_extension_send_toast_unfoundcrypto",{crypto:v.default.createElement("span",{className:ae.emptyText},t)})}),onClick:L,pageType:"send",isVirtualList:!1}),v.default.createElement(me,{visible:I,onClose:()=>{u(!1)},coin:N,type:"send"}),v.default.createElement(ne,{visible:f,onClose:()=>{T(!1)},coin:N,type:"send"}))}var Qe=Ct;r();s();var w=E($()),ot=E(ke()),it=E(ge());U();r();s();var Xe=E($()),P=E(dt());ue();function et(){let[o,a]=(0,Xe.useState)(""),e=!!o,i=te(),n=Fe(),c=(0,P.useCreation)(()=>Array.from(new Set(Ge(e?n:i).map(_=>_.coinId))),[i,n,e]),h=Ve(),I=(0,P.useMemoizedFn)(_=>{a(_)}),u=(0,P.useDebounce)(o,{wait:500}),f=Ke(),{data:T,loading:N,loadingMore:A,listRef:S}=Ze({aggregation:!0,symbolLike:u,chainIds:f!==""?[Number(f)]:void 0,excludeCoinIds:c},{reloadDeps:[u],enable:!h});return{list:(0,P.useCreation)(()=>{let _=T?.list??[];return[...o?n.filter(l=>l.symbol?.toLowerCase().includes(o.toLowerCase())):i,..._].filter(({coinId:l,baseCoinId:b})=>!ve(l,b))},[i,n,T?.list]),listRef:S,search:o,onSearch:I,loading:N,loadingMore:A,isSearching:N&&!!o}}ue();r();s();var tt={empty:"_empty_1umri_1"};function vt(){let o=(0,it.useHistory)(),{keyringIdentityType:a}=(0,ot.useSelector)(be),{currentNetworkUniqueId:e}=oe(),i=K(),n=ie(),{list:c,listRef:h,onSearch:I,loading:u,loadingMore:f,isSearching:T}=et(),[N,A]=(0,w.useState)(!1),[S,L]=(0,w.useState)(!1),[_,t]=(0,w.useState)(null),g=x=>{if(x?.childrenCoin?.length===1){let{addressType:O}=x.childrenCoin[0]||{},p=Z({coinId:x.coinId,addressType:O});o.push(`${G}${p}`)}},l=async x=>{let O=Ne(x),p;if(O){if(p=await Ae(x),e!==""&&p?.aggregation&&(p=p.childrenCoin?.find(lt=>lt.chainId===Number(e))??null),!p)return}else p=x;if(q(p)){t(p),A(!0);return}if(z(p)||R(p)){g(p),t(p),L(!0);return}await n(p);let ce,de,nt=p.aggregation,mt=p.childrenCoin??[];nt&&mt.length>0?(ce=Q,de=`coinKey=${encodeURIComponent(p.key)}&aggregationSymbol=${p.symbol}&type=${i}`):(ce=G,de=`coinId=${p.coinId}`),o.push({pathname:ce,search:de})},b=(0,w.useCallback)(x=>{let O={};return x.localType===W&&x.coinId===Ce&&Be(a)&&(O.tag=d("extension_wallet_footer_alert_asset_notsupported")),O},[a]);return w.default.createElement(w.default.Fragment,null,w.default.createElement(le,{list:T?[]:c,onClick:l,getItemProps:b,isVirtualList:!1,onSearch:I,ref:h,renderEmpty:()=>w.default.createElement(H.State,{className:tt.empty,title:d("commonall_emptystate_text_no_results")}),loadingMore:f||u&&!T,loading:T}),w.default.createElement(me,{visible:N,onClose:()=>{A(!1)},coin:_,type:"receive"}),w.default.createElement(ne,{visible:S,onClose:()=>{L(!1)},coin:_,type:"receive"}))}var rt=vt;var Tt={[fe.SEND]:Qe,[fe.RECEIVE]:rt};function St(){let o=K(),a=Tt[o];return a?st.default.createElement(a,null):null}var Hi=St;export{Hi as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=select-coin-RLGPG2OA.js.map
