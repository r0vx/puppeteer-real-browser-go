import{a as Oe}from"./chunk-L4LDHBFD.js";import{a as Ie}from"./chunk-OAPH7UTK.js";import{a as ze,b as ke}from"./chunk-2RVMKQ5T.js";import{a as q}from"./chunk-YLSPSQBP.js";import{a as we}from"./chunk-LJ45SM6Y.js";import{a as Ne,b as De,c as Ae,d as Le}from"./chunk-ISKH54SW.js";import"./chunk-SJNKDITR.js";import{a as he}from"./chunk-UQXHDDOL.js";import{a as be}from"./chunk-SANB6W4R.js";import{b as R}from"./chunk-2Q6HA5LZ.js";import{c as Ue,e as Ce}from"./chunk-MGI4EYIY.js";import"./chunk-UZCYU4C6.js";import"./chunk-HHY4FPQP.js";import{a as I,j as Ee,l as Pe}from"./chunk-4JPAA6SR.js";import{f as i,g as ae}from"./chunk-3VKPY2QL.js";import{b as ie}from"./chunk-ULL77AIR.js";import"./chunk-WIW5JVRP.js";import"./chunk-ULXZERAJ.js";import{l as ve,n as Fe}from"./chunk-IFQDHP3Z.js";import{l as xe}from"./chunk-DA5RJYYW.js";import"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import"./chunk-ZTIVM5ML.js";import"./chunk-2E2OBQTS.js";import"./chunk-WO6OHGU2.js";import{a as K}from"./chunk-3S4BGA37.js";import{md as w}from"./chunk-POP3LIKS.js";import{D as H,m as Te}from"./chunk-G44PPNNQ.js";import"./chunk-K2BSCLBF.js";import"./chunk-PZY7HRHV.js";import"./chunk-Z2L2F5M5.js";import"./chunk-IPLOJJIA.js";import"./chunk-RLPRDJ34.js";import"./chunk-2ASICJQL.js";import"./chunk-TQWSBAXG.js";import"./chunk-6JVCYB7O.js";import"./chunk-QO4JMOUQ.js";import{a as Uo}from"./chunk-532YJKK4.js";import{a as Co}from"./chunk-SIITVWZR.js";import"./chunk-FYTT4U7M.js";import"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import{I as u,K as ye,L as Me,R as G,T as _e,j as se,ra as ge}from"./chunk-CYTB2B6Q.js";import{ka as M}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as Se}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-D2YP6KBJ.js";import"./chunk-32ZJ4F2J.js";import{f as B,o as A,q as L}from"./chunk-SHG7TIBL.js";A();L();var e=B(Se()),je=B(Co());ge();A();L();var T=B(Se()),Ye=B(Uo());ge();function Ve({currentMode:t,computeBuyDefaultPresetList:r,computedSellDefaultPresetList:s}){return{defaultPresetList:(0,T.useMemo)(()=>t==="buy"?r:s,[t,r,s])}}function Be({tradeScene:t,computedQuoteSafemoon:r}){return{safeMoonToken:(0,T.useMemo)(()=>t===0?r:"",[t,r])}}function Ge(){let{getUsd:t}=q(R);return{formatUSD:s=>Me(s)||ye(s)?"--":t(s)}}function He({priorityFeeState:t,priorityFee:r,tradeScene:s,solSinglePrice:l}){let[n,f]=(0,T.useMemo)(()=>[t.baseFee||0,t.baseFeeUsd||0],[t]),m=(0,T.useMemo)(()=>parseFloat(r)||0,[r]),[v,F]=(0,T.useMemo)(()=>{let c=m;s===0&&(c=K.add(m,n));let x=K.mul(l||0,c);return[K.mul(l||0,m),x]},[m,n,l,s]);return{baseFeeValue:n,baseFeeUsd:f,priorityFeeForShow:m,priorityFeeUSD:v,totalFeeUSD:F}}function Ke({defaultPresetList:t,id:r,setPriorityFee:s,priorityFeeType:l,setPriorityFeeType:n,setPriorityFeeError:f,slippage:m,setSlippage:v,setSlippageError:F,slippageType:c,setSlippageType:x,feeMap:E,slippageMode:b,setSlippageMode:h,customMax:P,setCustomMax:o,setCustomMaxError:U,priorityMode:_,setPriorityMode:C,setManualType:N}){let a=(0,T.useMemo)(()=>t.find(S=>S.id===r)||null,[t,r]);return{resetDisabled:(0,T.useMemo)(()=>a?u(i(a.slippage.value),m)&&u(a.slippage.type,c)&&u(a.priorityFee.type,l)&&u(a.slippage.mode,b)&&u(i(a.slippage.customMax),P)&&u(a.priorityMode,_):!0,[a,m,c,l,b,P,_]),handleReset:()=>{n(a.priorityFee.type),v(i(a.slippage.value)),x(a.slippage.type),s(E[a.priorityFee.type].amount),h(a.slippage.mode),o(i(a.slippage.customMax)),C(a.priorityMode),N(a.manualType),F(!1),f(!1),U(!1)}}}var No=({priorityMode:t,manualType:r},s)=>s.priorityMode===t&&t==="auto"?!0:s.priorityMode===t&&t==="manual"&&s.manualType===r;function qe({slippageType:t,initState:r,slippage:s,priorityFee:l,priorityFeeType:n,slippageMode:f,customMax:m,currentPreset:v,slippageState:F,presetPriorityFee:c,currentPresetList:x,currentPresetId:E,setCurrentPresetList:b,currentMode:h,onClose:P,priorityMode:o,manualType:U}){let _=(0,Ye.useHistory)(),C=Oe(xe);return{handleConfirm:()=>{if(C({custom_or_auto:t}),!(u(r.mode,f)&&u(r.slippage,s)&&u(r.slippageType,t)&&u(r.priorityFee,l)&&u(r.priorityFeeType,n)&&u(r.customMax,m)&&No({priorityMode:o,manualType:U},r))){let g=G({},v,{slippage:G({},F,{value:s?ae(s):"",type:t,mode:f,customMax:m?ae(m):""}),priorityFee:G({},c,{value:n===I.CUSTOM?l:"",type:n}),priorityMode:o,manualType:U}),D=x.map(S=>S.id===E?g:S);b(D),Fe.info(ve.MEME_SWAP_CUSTOM_PRESET,{data:{customPreset:g,currentMode:h}})}P?P():_.goBack()}}}A();L();var d={root:"_root_y7yz0_1",name:"_name_y7yz0_8",mev:"_mev_y7yz0_9",slippage:"_slippage_y7yz0_10",priority:"_priority_y7yz0_11",btns:"_btns_y7yz0_14",notice:"_notice_y7yz0_23","notice-title":"_notice-title_y7yz0_29",noticeTitle:"_notice-title_y7yz0_29","notice-text":"_notice-text_y7yz0_32",noticeText:"_notice-text_y7yz0_32"};var Do=Te(({onClose:t})=>{let{quoteStore:r,configStore:s}=R(),{currentMode:l,tradeScene:n,computedConfig:f}=s,m=se(f,"mevPriceThreshold"),v=se(f,"nativeTokenInfo.chainName"),{computedQuoteSafemoon:F,jitoIsSuccess:c,computedAutoSlippage:x,mevUnstableShowLevel:E}=r,{chainSymbol:b}=he(),{currentPreset:h}=Ne(),P=_e(Pe,["name","amountList"]),{slippage:o,priorityFee:U,id:_,priorityMode:C,manualType:N}={...P,...h},a=(0,e.useMemo)(()=>_?.includes(Ee),[_]),[g,D]=(0,e.useState)("auto"),[S,j]=(0,e.useState)(0);(0,e.useEffect)(()=>{D(C),j(N)},[C,N]);let ne=we({priorityMode:g,manualType:S,jitoIsSuccess:c,mevUnstableShowLevel:E}),Qe=Ie(ne),{formatPriorityFee:p}=De({priorityFee:U,isEnableMev:Qe}),[O,Q]=(0,e.useState)(o.mode);(0,e.useEffect)(()=>{Q(o.mode)},[o.mode]);let[W,X]=(0,e.useState)(i(o.customMax));(0,e.useEffect)(()=>{X(i(o.customMax))},[o.customMax]);let[We,me]=(0,e.useState)(!1),[Z,J]=(0,e.useState)(i(o.value)),[Y,$]=(0,e.useState)(o.type),[Xe,pe]=(0,e.useState)(!1);(0,e.useEffect)(()=>{J(i(o.value)),$(o.type)},[o.value,o.type]);let[ee,oe]=(0,e.useState)(p.value),[z,le]=(0,e.useState)(p.type),[Ze,ue]=(0,e.useState)(!1),[Je,$e]=(0,e.useState)(p.type!==I.CUSTOM?p.type:I.MARKET);(0,e.useEffect)(()=>{z!==I.CUSTOM&&oe(p.value)},[p.value,z]);let eo=O==="fixed"&&Xe||O==="dynamic"&&We||Ze||ne===6,oo={mode:o.mode,customMax:i(o.customMax),slippage:i(o.value),slippageType:o.type,priorityFee:p.value,priorityFeeType:p.type,priorityMode:C,manualType:N},to={low:i(o.config.low),medium:i(o.config.medium),high:i(o.config.high)},ce=i(o.min),de=i(o.max),te=i(x),ro=i(o.dynamicMax),so=i(o.dynamicMin),io=i(o.recommendMax),ao=i(o.recommendMin),{computeBuyDefaultPresetList:no,computedSellDefaultPresetList:mo}=be(),{defaultPresetList:po}=Ve({currentMode:l,computeBuyDefaultPresetList:no,computedSellDefaultPresetList:mo}),{setCurrentPresetList:lo,currentPresetId:uo,currentPresetList:co}=Le(),{handleReset:fo,resetDisabled:yo}=Ke({defaultPresetList:po,id:_,setPriorityFee:oe,priorityFeeType:z,setPriorityFeeType:le,slippage:Z,setSlippage:J,slippageType:Y,setSlippageType:$,slippageMode:O,setSlippageMode:Q,customMax:W,setCustomMax:X,setPriorityFeeError:ue,setSlippageError:pe,setCustomMaxError:me,feeMap:p.config,priorityMode:g,setPriorityMode:D,setManualType:j}),{handleConfirm:Mo}=qe({slippageType:Y,initState:oo,slippage:Z,priorityFee:ee,priorityFeeType:z,slippageMode:O,customMax:W,currentPreset:h,slippageState:o,presetPriorityFee:U,currentPresetList:co,currentPresetId:uo,setCurrentPresetList:lo,currentMode:l,onClose:t,priorityMode:g,manualType:S}),{solSinglePrice:_o}=Ae(),{baseFeeValue:go,baseFeeUsd:So,totalFeeUSD:To,priorityFeeUSD:vo,priorityFeeForShow:Fo}=He({priorityFeeState:p,priorityFee:ee,tradeScene:n,solSinglePrice:_o}),{formatUSD:re}=Ge(),{safeMoonToken:fe}=Be({tradeScene:n,computedQuoteSafemoon:F}),xo=y=>ke({value:y,min:ce,max:de,level:Y,auto:te,safemoon:fe}),{getTokenAmount:Eo,getUsd:Po}=q(R);return e.default.createElement("div",{className:d.root},n===0&&e.default.createElement(ze,{className:d.mev,setMode:D,priorityMode:g,setManualType:j,manualType:S,mevUnstableShowLevel:E,jitoIsSuccess:c,mevPriceThreshold:m,chainName:v}),e.default.createElement(Ce,{className:d.slippage,mode:O,fixedData:{value:Z,level:Y,levelMap:to,min:ce,max:de,validator:xo,auto:te},dynamicData:{showDynamicSlippage:!0,dynamicSlippage:te,supportCustomMax:o.supportCustomMax,customMax:W,dynamicMax:ro,dynamicMin:so,recommendMax:io,recommendMin:ao,safemoon:fe},onChange:({mode:y,fixedData:k,dynamicData:V})=>{Q(y),y===ie.FIXED&&(J(k.value),$(k.level),pe(k.error)),y===ie.DYNAMIC&&(X(V.customMax),me(V.error))}}),e.default.createElement(Ue.DetailMode,{className:d.priority,fee:ee,type:z,latestSelectType:Je,feeMap:p.config,max:p.max,recommendMaxValue:p?.recommendMaxValue,recommendMinValue:p?.recommendMinValue,currency:b,onChange:(y,k,V)=>{oe(k),le(y),ue(V),y!=="custom"&&$e(y)},getTokenAmount:Eo,getUsd:Po,tradeScene:n}),n===0&&e.default.createElement("div",{className:d.notice},e.default.createElement("div",{className:d.noticeTitle},H(w("swaptrade_trade_label_total_fees",{price:re(To)}))),e.default.createElement("div",{className:d.noticeText},H(w("swaptrade_trade_label_base_fee_value",{value:go,price:re(So)}))),e.default.createElement("div",{className:d.noticeText},H(w("swaptrade_trade_label_priority_fee_value",{value:Fo,price:re(vo)})))),e.default.createElement("div",{className:(0,je.default)("flex justify-between",d.btns)},a&&e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.outline,type:M.TYPE.primary,size:M.SIZE.lg,block:!0,onClick:fo,disabled:yo},w("swaptrade_general_btn_reset")),e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.fill,type:M.TYPE.primary,disabled:eo,size:M.SIZE.lg,block:!0,onClick:Mo},w("swaptrade_dialog_btn_confirm"))))}),xt=Do;export{xt as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Configure-EP4W5YKR.js.map
