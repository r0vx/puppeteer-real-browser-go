import"./chunk-O2YW3UOK.js";import{a as Z,b as _,c as O,d as V,e as M}from"./chunk-6Q4OK5GJ.js";import{a as y,b as L}from"./chunk-U7FUSLT6.js";import"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-WJ3PVDDF.js";import{n as v}from"./chunk-QTKQMZ5K.js";import"./chunk-Y5K5NJ6U.js";import{a as A}from"./chunk-Q7FGM7BT.js";import"./chunk-TKE74ERX.js";import"./chunk-CZZFLX67.js";import{i as U}from"./chunk-IK72BO4I.js";import{a as z}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{o as R}from"./chunk-XP3TNE3R.js";import{jc as ss}from"./chunk-QRHYK2TW.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import{c as B,e as $}from"./chunk-AS4Z3FNS.js";import"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-62ZAND24.js";import"./chunk-SIITVWZR.js";import"./chunk-QHXUL3YM.js";import{D as S,H as X,y as r}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{D as d,H as N,q as n}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{ka as w}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as W}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-2EEW2VNF.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as g,o as t,q as a}from"./chunk-SHG7TIBL.js";t();a();var s=g(W()),j=g(ss()),i=g(R());X();$();t();a();var D={root:"_root_1r48s_1"};t();a();t();a();function es(){return{updatePasskey:async I=>{}}}var G=es;var Y=G;var Ns=({history:E})=>{let I=(0,j.useDispatch)(),m=d.useForm(),[e,q]=s.default.useState({}),[H,b]=s.default.useState(null),[k,{setTrue:J,setFalse:C}]=(0,i.useBoolean)(!1),c=(0,s.useRef)(),x=(0,i.useMemoizedFn)(()=>{c.current=v(e.oldPassword).then(()=>(b(null),m.cleanErrors("oldPassword"),!0)).catch(()=>{let o=r("wallet_set_password_errortip_password_wrong");return b(o),m.setErrors({oldPassword:o}),!1})}),{updatePasskey:K}=Y();(0,i.useThrottleEffect)(()=>{!e.oldPassword||x()},[e.oldPassword],{wait:500}),M(m,e);let P=!!H||!e.oldPassword||!e.password||!e.confirm||e.password?.length<y||e.confirm?.length<y||e.password!==e.confirm,T=(0,i.useMemoizedFn)(async()=>{let{password:o,confirm:p}=e;if(P||k)return;if(o!==p){Z(m);return}if(J(),c.current||x(),!await c.current){C();return}if(await B().modifyPassword(p)){let[l]=await S(K(p));l&&I(U(1)),N.success(r("wallet_edit_wallet_toast_renamed_success")),E.push(z)}C()},[P,e]),F=(0,s.useCallback)(async o=>{(o?.key==="Enter"||o?.keyCode===13)&&await T()},[]),Q=V();return(0,s.useEffect)(()=>(document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}),[]),s.default.createElement(O,{className:D.root,title:r("wallet_settings_reset_passord_maintitle_reset_password"),desc:r("wallet_extension_subtitle_password_unlock")},({formClass:o,formErrorClass:p,itemClass:f})=>s.default.createElement(d,{form:m,size:n.SIZE.lg,validateTrigger:["onChange","onBlur"],className:o,errorClassName:p,onValuesChange:(u,l)=>{q(l)}},s.default.createElement(d.Item,{name:"oldPassword",style:{marginBottom:0},label:r("wallet_settings_reset_passord_subtitle_old_password"),className:f},s.default.createElement(n.Password,{autoFocus:!0,autoComplete:"off",size:n.SIZE.xl,inputClassName:_.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_old_password",void 0,{useBr:!1})})),s.default.createElement(d.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:f,label:r("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(n.Password,{autoComplete:"off",size:n.SIZE.xl,inputClassName:_.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_desc",void 0,{useBr:!1})})),s.default.createElement(d.Item,{noStyle:!0,shouldUpdate:(u,l)=>u.password!==l.password},({getFieldValue:u})=>{let l=u("password");return s.default.createElement(L,{password:l})}),s.default.createElement(d.Item,{name:"confirm",className:f,label:r("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(n.Password,{autoComplete:"off",size:n.SIZE.xl,inputClassName:_.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_password_confirmation",void 0,{useBr:!1}),onChange:()=>{m.cleanErrors("confirm")}})),s.default.createElement(A.FooterActions,{usePortal:!0,renderNative:!0,affixStyle:Q,buttonGroup:[{loading:k,disabled:P,block:!0,type:w.TYPE.highlight,category:w.CATEGORY.fill,size:w.SIZE.lg,onClick:T,btnText:r("wallet_set_password_btn_confirm")}]})))};export{Ns as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ResetPassword-S3VAL7F7.js.map
