import{a as _o}from"./chunk-OFQ6Z6PM.js";import{a as po,b as lo}from"./chunk-R4EC6ZNT.js";import{a as io}from"./chunk-LWCVE2GP.js";import{a as so,b as no}from"./chunk-VBAUMIUV.js";import"./chunk-L37MOKNV.js";import{a as ao}from"./chunk-VR7OPIR6.js";import{d as ro}from"./chunk-7JSJY3SQ.js";import"./chunk-6JEFG7DQ.js";import"./chunk-WPAZ67JY.js";import{c as Q}from"./chunk-RQRUTXST.js";import{b as z,c as J}from"./chunk-RIGKKYH2.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-7C7MBE2C.js";import"./chunk-KJWX5V23.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-QYDRYMWS.js";import"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3L7K7.js";import{a as to}from"./chunk-Y5K5NJ6U.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import"./chunk-Q7FGM7BT.js";import"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{wb as Y}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import{a as X,r as c}from"./chunk-WGVA2GGS.js";import{a as vo}from"./chunk-APGT6UVG.js";import{f as Z}from"./chunk-V34MB2FG.js";import{o as No}from"./chunk-XP3TNE3R.js";import{jc as oo}from"./chunk-QRHYK2TW.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as eo}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import{n as q,o as P}from"./chunk-YCFHPQAJ.js";import"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as r}from"./chunk-62ZAND24.js";import{a as Io}from"./chunk-SIITVWZR.js";import"./chunk-QHXUL3YM.js";import{B as a,H as W,l as U,n as w}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{G as y,d as S,e as H}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-Z3JMRMVO.js";import"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as F}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as K}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import{a as $}from"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as i,o as T,q as x}from"./chunk-SHG7TIBL.js";T();x();var o=i(K()),M=i(oo()),ko=i(eo()),To=i(No()),O=i(Io()),xo=i(vo()),yo=i($());W();T();x();var b=i(K()),E=i(oo()),mo=i(eo()),uo=i($());W();var Ao=({approvalNum:p,symbol:m,decimalNum:d,coinId:l})=>{let u=ro(l),N=w.safeCeilDiv(p,10**Number(d));return p===q||Number(N)>P?a("wallet_extension_transfer_title_unlimited_amount",{token:m}):X(p,{symbol:m,useContractPrecision:!0,contractPrecision:{decimals:d},isStableCoin:u?.stableCoin,precision:u?.displayPrecision}).value},go={[2]:"wallet_extension_approval_btn_revoking",[3]:"wallet_extension_approval_btn_approving"},fo=({tokenList:p,chainId:m})=>{let d=(0,E.useSelector)(Z),l=(0,E.useDispatch)(),u=(0,mo.useHistory)();return b.default.createElement(b.default.Fragment,null,p.map(N=>{let{symbol:I,imageUrl:v,approvalNum:f,decimalNum:C,approvalTime:t,status:_,coinId:k,tokenAddress:A,approvalAddress:D,permit2Address:L,address:j}=N,h=U(new Date(t),{format:"yyyyMMdd",locale:d}),B=async()=>{let s=await _o({address:j,chainId:m,tokenAddress:A,approvalAddress:D,permit2Address:L,coinId:k,approvalNum:f});if((0,uo.isEmpty)(s)){y.error({title:a("wallet_extension_approval_toast_initiate_fail"),duration:3,showClose:!0,placement:y.DIRECTION.top});return}l(Q({type:"approve",data:[s]})),u.push(`${Y}?type=approve`)};return b.default.createElement(po,{icon:v,key:`${I}-${k}-${A}`,title:b.default.createElement(Ao,{approvalNum:f,symbol:I,decimalNum:C,coinId:k}),desc:h,btnText:a("wallet_extension_approval_btn_revoke"),btnLoadingText:a(go[_]),btnLoading:[3,2].includes(_),btnClick:B})}))};T();x();var e={"retina-border-basic":"_retina-border-basic_k43oq_1",retinaBorderBasic:"_retina-border-basic_k43oq_1",alert:"_alert_k43oq_29",logo:"_logo_k43oq_32",img:"_img_k43oq_37","text-info":"_text-info_k43oq_42",textInfo:"_text-info_k43oq_42",text:"_text_k43oq_42",project:"_project_k43oq_48","project-name":"_project-name_k43oq_51",projectName:"_project-name_k43oq_51",network:"_network_k43oq_59","address-wrapper":"_address-wrapper_k43oq_67",addressWrapper:"_address-wrapper_k43oq_67",title:"_title_k43oq_131","address-info":"_address-info_k43oq_137",addressInfo:"_address-info_k43oq_137",address:"_address_k43oq_67",icon:"_icon_k43oq_149","copy-icon":"_copy-icon_k43oq_149",copyIcon:"_copy-icon_k43oq_149","add-weight":"_add-weight_k43oq_154",addWeight:"_add-weight_k43oq_154","link-icon":"_link-icon_k43oq_154",linkIcon:"_link-icon_k43oq_154","list-title":"_list-title_k43oq_158",listTitle:"_list-title_k43oq_158","security-icon":"_security-icon_k43oq_166",securityIcon:"_security-icon_k43oq_166","alert-title":"_alert-title_k43oq_171",alertTitle:"_alert-title_k43oq_171"};var bo={[3]:"wallet_extension_approval_alertbanner_dapp_risky_approvals",[2]:"wallet_extension_alertbanner_deprecated_adddress",[1]:"wallet_extension_approve_alertbanner_desc_mal_approval"},Co=()=>{let p=(0,ko.useHistory)(),m=so(),{loading:d,run:l,error:u}=(0,To.useRequest)(async()=>await m(),{manual:!0}),N=(0,M.useSelector)(z),I=ao(),v=I.get("projectAddr"),f=I.get("chainId"),C=io(N),t=(0,o.useMemo)(()=>(C||[]).find(n=>n.approvalAddress===v&&Number(n.chainId)===Number(f))||{},[C,v,f]),_=(0,M.useSelector)(J);(0,o.useEffect)(()=>{_&&(0,yo.isEmpty)(t)&&p.goBack()},[_,t]),(0,o.useEffect)(()=>{!_&&l()},[_,l]);let k=(0,o.useMemo)(()=>t?.tokens?.length?(t.tokens||[]).findIndex(n=>{let g=w.safeCeilDiv(n.approvalNum,10**n.decimalNum);return n.approvalNum===q||Number(g)>P})!==-1:!1,[t.tokens]),A=(0,o.useMemo)(()=>{let s=t.blackTagType,n=!1,g,G,R;if((s||k)&&(n=!0),s){G=S.TYPE.error,R="okx-wallet-plugin-security-1";let V=bo[s];g=s===3?a(V,{num:t.blackTagLongTimeDayLimit}):a(V)}else g=a("wallet_extension_alertbanner_unlimited_approval");return{show:n,props:{title:o.default.createElement("span",{className:e.alertTitle},g),type:G,icon:R}}},[t.blackTagLongTimeDayLimit,t.blackTagType,k]),{projectIcon:D,projectName:L,network:j,approvalAddress:h,linkApprovalAddress:B}=t;return no(),o.default.createElement(r.Container,null,o.default.createElement(to,{bordered:!1,closeable:!1}),o.default.createElement(lo,{isError:!!u,isLoading:d,reload:l},A.show&&o.default.createElement(r.Box,{className:e.alert},o.default.createElement(S,{...A.props,closable:!1})),o.default.createElement(r.FlexBox,{className:e.project},o.default.createElement(H,{pictureClassName:e.logo,className:e.img,src:D,alt:L}),o.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,justify:"space-between",className:e.textInfo},o.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,className:e.text},o.default.createElement(c.Text,{className:e.projectName,ellipsis:{tooltip:!0},strong:!0},L)),o.default.createElement(c.Text,{type:c.TYPE.secondary,size:c.SIZE.xs,ellipsis:{tooltip:!0},className:e.network},j))),o.default.createElement(r.Box,{className:e.addressWrapper},o.default.createElement(r.Box,{className:e.title},a("wallet_extension_approval_subtitle_contract_address")),o.default.createElement(r.FlexBox,{className:e.addressInfo,justify:"space-between"},o.default.createElement(c.Text,{size:c.SIZE.md,className:e.address},h),o.default.createElement(r.FlexBox,null,o.default.createElement(F,{className:(0,O.default)("okx-wallet-plugin-copy-3",e.icon,e.copyIcon),onClick:()=>{(0,xo.default)(h),y.success({title:a("wallet_transaction_history_toast_address_copied"),duration:3,showClose:!0,placement:y.DIRECTION.top})}}),o.default.createElement(F,{onClick:()=>{globalThis.open(B)},className:(0,O.default)("okds-open-link",e.addWeight,e.linkIcon)})))),o.default.createElement(r.Box,{className:(0,O.default)(e.listTitle)},a("wallet_extension_mid_text_approved_amount")),o.default.createElement(fo,{projectAddr:v,chainId:f,tokenList:t?.tokens||[]})))},_e=Co;export{bo as RISK_ALERT_TITLE_MAP,_e as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ApproveDetailPage-5LBGH6XM.js.map
