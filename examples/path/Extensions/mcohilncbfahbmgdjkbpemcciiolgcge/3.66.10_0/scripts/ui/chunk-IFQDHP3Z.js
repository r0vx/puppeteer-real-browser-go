import{a as br}from"./chunk-HUC3JPS2.js";import{c as et}from"./chunk-ZTIVM5ML.js";import{b as xt,c as tt}from"./chunk-2E2OBQTS.js";import{c as Or}from"./chunk-WO6OHGU2.js";import{Ha as Ye,Ia as Te,Ja as Er,ia as Xe,na as fr,oa as Et}from"./chunk-POP3LIKS.js";import{A as j,C as mr,E as _r,G as z,I as hr,K as gr,f as pr,g as dr,l as M,m as K,n as V,p as qe,q as pe,s as ur,t as ft,u as Ce}from"./chunk-G44PPNNQ.js";import{b as Lr}from"./chunk-K2BSCLBF.js";import{a as Rr}from"./chunk-PZY7HRHV.js";import{a as Ir,b as Qe,c as vr,d as wr,e as Le,f as Sr,g as yr,h as kt}from"./chunk-Z2L2F5M5.js";import{a as Tr,c as S,e as kr,g as Ar}from"./chunk-IPLOJJIA.js";import{a as Je,b as Ze}from"./chunk-RLPRDJ34.js";import{a as xr,b as Ct,c as Cr,d as Tt}from"./chunk-TQWSBAXG.js";import{a as Y,b as Q}from"./chunk-6JVCYB7O.js";import{a as lr}from"./chunk-QO4JMOUQ.js";import{a as re}from"./chunk-SIITVWZR.js";import{c as fe,d as Lo}from"./chunk-FYTT4U7M.js";import{A as xe,H as w,b as ne,o as ze,p as gt,q as Re,u as cr}from"./chunk-XR4SQWL7.js";import{H as ar,U as nr,d as or,j as je,ra as ir}from"./chunk-CYTB2B6Q.js";import{aa as Ee,ka as ie,v as sr}from"./chunk-6M3PZK2X.js";import{b}from"./chunk-OL67KS7C.js";import{a as Oo}from"./chunk-D2YP6KBJ.js";import{d as rr,f as k,h as L,o as c,q as l}from"./chunk-SHG7TIBL.js";c();l();function Dr(){let{pathname:o}=gr();return o.endsWith(fr)||o.endsWith(Et)}function At(){return(V()||tt())&&Dr()}c();l();ir();c();l();c();l();c();l();var de=k(b());var Nr=k(re());c();l();var Pr={container:"_container_1tebl_1"};var bo=({children:o,disabled:e=!1,title:t,disableOnMobile:r=!0,className:n,...i})=>{let[s,p]=(0,de.useState)(!1),d=e||r&&sr();return!t||d?de.default.createElement(de.default.Fragment,null,o):s?de.default.createElement(xe,{...i,title:t,disabled:d},o):de.default.createElement("span",{className:(0,Nr.default)(Pr.container,n),onMouseEnter:()=>{p(!0)}},o)},It=bo;c();l();var rt=k(b()),vt=k(re());c();l();var Gr={container:"_container_14mjv_1","single-ellipsis-container":"_single-ellipsis-container_14mjv_7",singleEllipsisContainer:"_single-ellipsis-container_14mjv_7","display-text":"_display-text_14mjv_10",displayText:"_display-text_14mjv_10","ellipsis-enhanced":"_ellipsis-enhanced_14mjv_14",ellipsisEnhanced:"_ellipsis-enhanced_14mjv_14"};var Do=({data:o,containerClass:e="",className:t="",children:r=null,height:n=void 0,tooltipProps:i={},outerStyle:s={},...p})=>{let d=r||o;return rt.default.createElement("div",{className:(0,vt.default)(Gr.singleEllipsisContainer,e),style:{height:n,...s}},rt.default.createElement(xe,{title:o,noWrapper:!0,textOverflow:{text:o},...i},rt.default.createElement("div",{className:(0,vt.default)("ellipsis",t),...p},d)))},ot=Do;c();l();var J=k(b());c();l();var nt=k(b());var at={fetchConfig:{site:"okx",project:"okx_web_metax_defi"}};function wt({children:o,isSelfProject:e=!1}){return e?nt.default.createElement(nt.default.Fragment,null,o):nt.default.createElement(_r,{normalCsr:!0,fetchConfig:at.fetchConfig,customRender:(t,r)=>r?o:""},o)}c();l();var h=(...o)=>mr({partName:at.fetchConfig.project})(...o);c();l();c();l();c();l();var st=k(lr());c();l();var be=k(Oo());c();l();var No=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Mr={sha256:1};function Wr(o){if(o&&!Mr[o]&&!Mr[o.toLowerCase()])throw new Error("Digest method not supported");return new St}var St=class{constructor(){this.A=1779033703,this.B=-1150833019,this.C=1013904242,this.D=-1521486534,this.E=1359893119,this.F=-1694144372,this.G=528734635,this.H=1541459225,this._size=0,this._sp=0,(!it||Oe>=8e3)&&(it=new ArrayBuffer(8e3),Oe=0),this._byte=new Uint8Array(it,Oe,80),this._word=new Int32Array(it,Oe,20),Oe+=80}update(e){if(typeof e=="string")return this._utf8(e);if(e==null)throw new TypeError("Invalid type: "+typeof e);let t=e.byteOffset,r=e.byteLength,n=r/64|0,i=0;if(n&&!(t&3)&&!(this._size%64)){let p=new Int32Array(e.buffer,t,n*16);for(;n--;)this._int32(p,i>>2),i+=64;this._size+=i}if(e.BYTES_PER_ELEMENT!==1&&e.buffer){let p=new Uint8Array(e.buffer,t+i,r-i);return this._uint8(p)}return i===r?this:this._uint8(e,i)}_uint8(e,t){let{_byte:r,_word:n}=this,i=e.length;for(t=t|0;t<i;){let s=this._size%64,p=s;for(;t<i&&p<64;)r[p++]=e[t++];p>=64&&this._int32(n),this._size+=p-s}return this}_utf8(e){let{_byte:t,_word:r}=this,n=e.length,i=this._sp;for(let s=0;s<n;){let p=this._size%64,d=p;for(;s<n&&d<64;){let u=e.charCodeAt(s++)|0;u<128?t[d++]=u:u<2048?(t[d++]=192|u>>>6,t[d++]=128|u&63):u<55296||u>57343?(t[d++]=224|u>>>12,t[d++]=128|u>>>6&63,t[d++]=128|u&63):i?(u=((i&1023)<<10)+(u&1023)+65536,t[d++]=240|u>>>18,t[d++]=128|u>>>12&63,t[d++]=128|u>>>6&63,t[d++]=128|u&63,i=0):i=u}d>=64&&(this._int32(r),r[0]=r[16]),this._size+=d-p}return this._sp=i,this}_int32(e,t){let{A:r,B:n,C:i,D:s,E:p,F:d,G:u,H:g}=this,_=0;for(t=t|0;_<16;)ue[_++]=q(e[t++]);for(_=16;_<64;_++)ue[_]=Fo(ue[_-2])+ue[_-7]+Ho(ue[_-15])+ue[_-16]|0;for(_=0;_<64;_++){let C=g+Bo(p)+Wo(p,d,u)+No[_]+ue[_]|0,v=$o(r)+Uo(r,n,i)|0;g=u,u=d,d=p,p=s+C|0,s=i,i=n,n=r,r=C+v|0}this.A=r+this.A|0,this.B=n+this.B|0,this.C=i+this.C|0,this.D=s+this.D|0,this.E=p+this.E|0,this.F=d+this.F|0,this.G=u+this.G|0,this.H=g+this.H|0}digest(e){let{_byte:t,_word:r}=this,n=this._size%64|0;for(t[n++]=128;n&3;)t[n++]=0;if(n>>=2,n>14){for(;n<16;)r[n++]=0;n=0,this._int32(r)}for(;n<16;)r[n++]=0;let i=this._size*8,s=(i&4294967295)>>>0,p=(i-s)/4294967296;return p&&(r[14]=q(p)),s&&(r[15]=q(s)),this._int32(r),e==="hex"?this._hex():this._bin()}_hex(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:p,H:d}=this;return se(e)+se(t)+se(r)+se(n)+se(i)+se(s)+se(p)+se(d)}_bin(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:p,H:d,_byte:u,_word:g}=this;return g[0]=q(e),g[1]=q(t),g[2]=q(r),g[3]=q(n),g[4]=q(i),g[5]=q(s),g[6]=q(p),g[7]=q(d),u.slice(0,32)}},ue=new Int32Array(64),it,Oe=0,se=o=>(o+4294967296).toString(16).substr(-8),Go=o=>o<<24&4278190080|o<<8&16711680|o>>8&65280|o>>24&255,Mo=o=>o,q=Ko()?Mo:Go,Wo=(o,e,t)=>t^o&(e^t),Uo=(o,e,t)=>o&e|t&(o|e),$o=o=>(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),Bo=o=>(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),Ho=o=>(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,Fo=o=>(o>>>17|o<<15)^(o>>>19|o<<13)^o>>>10;function Ko(){return new Uint8Array(new Uint16Array([65279]).buffer)[0]===254}var Ur=o=>Wr().update(o).digest(),Vo=o=>{let e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";if(!o||typeof o!="string")throw new Error(`Expected base58 string but got \u201C${o}\u201D`);if(o.match(/[IOl0]/gmu))throw new Error(`Invalid base58 character \u201C${o.match(/[IOl0]/gmu)}\u201D`);let t=o.match(/^1+/gmu),r=t?t[0].length:0,n=(o.length-r)*(Math.log(58)/Math.log(256))+1>>>0;return new Uint8Array([...new Uint8Array(r),...o.match(/.{1}/gmu).map(i=>e.indexOf(i)).reduce((i,s)=>(i=i.map(p=>{let d=p*58+s;return s=d>>8,d}),i),new Uint8Array(n)).reverse().filter((i=>s=>i=i||s)(!1))])},me={mainnet:"mainnet",testnet:"testnet",regtest:"regtest"},_e={p2pkh:"p2pkh",p2sh:"p2sh",p2wpkh:"p2wpkh",p2wsh:"p2wsh",p2tr:"p2tr"},$r={0:{type:_e.p2pkh,network:me.mainnet},111:{type:_e.p2pkh,network:me.testnet},5:{type:_e.p2sh,network:me.mainnet},196:{type:_e.p2sh,network:me.testnet}},jo=o=>{let e;try{o.startsWith("bc1p")||o.startsWith("tb1p")||o.startsWith("bcrt1p")?e=be.bech32m.decode(o):e=be.bech32.decode(o)}catch{throw new Error("Invalid address")}let r={bc:me.mainnet,tb:me.testnet,bcrt:me.regtest}[e.prefix];if(r===void 0)throw new Error("Invalid address");let n=e.words[0];if(n<0||n>16)throw new Error("Invalid address");let i=be.bech32.fromWords(e.words.slice(1)),s;return i.length===20?s=_e.p2wpkh:n===1?s=_e.p2tr:s=_e.p2wsh,{bech32:!0,network:r,address:o,type:s}},zo=o=>{let e,t=o.substr(0,2).toLowerCase();if(t==="bc"||t==="tb")return jo(o);try{e=Vo(o)}catch{throw new Error("Invalid address")}let r=e.length;if(r!==25)throw new Error("Invalid address");let n=e[0],i=e.slice(r-4,r),s=e.slice(0,r-4),p=Ur(Ur(s)).slice(0,4);if(i.some((g,_)=>g!==p[_]))throw new Error("Invalid address");if(!Object.keys($r).map(Number).includes(n))throw new Error("Invalid address");return{...$r[n],address:o,bech32:!1}},Br=(o,e)=>{try{let t=zo(o);return e?e===t.network:!0}catch{return!1}};c();l();var Hr=k(lr()),yt=async({abi:o,addr:e,ownerAddr:t,operatorAddr:r,amount:n,web3:i})=>new Promise(s=>{new i.eth.Contract(o,e).methods.allowance(t,r).call((d,u)=>{if(n){let g=i.utils.BN,_=new g(u),C=new g(n);_.gte(C)?(console.log("commApproved, the amount is greater than the consumption amount, pass!"),s(!0)):s(!1)}else s(u==="0"||!u?0:u)})}),Fr=async({addr:o,web3:e})=>new Promise(t=>{new e.eth.Contract(Hr.default,o).methods.decimals().call((n,i)=>{t(i||0)})});c();l();async function qo(o){switch(o){case S.METAMASK:return(await import("./MetaMaskAdapter-L53W23EB.js")).MetaMaskAdapter;case S.PHANTOM:return(await import("./PhantomAdapter-7FQUPVLJ.js")).PhantomAdapter;case S.WALLET_CONNECT:return(await import("./WalletConnectAdapter-NYNYHWOR.js")).WalletConnectAdapter;case S.OKX_WALLET:return(await import("./OkxWalletAdapter-7NLWJVSA.js")).OkxWalletAdapter;case S.KEPLR:return(await import("./KeplrAdapter-PGU5YW3U.js")).KeplrAdapter;case S.LEDGER:return(await import("./LedgerAdapter-VCIXL4JD.js")).LedgerAdapter;case S.UNISAT:return(await import("./UnisatAdapter-LGHIICNW.js")).UnisatAdapter;case S.XVERSE:return(await import("./XverseAdapter-PK34SRQB.js")).XverseAdapter;case S.PHANTOM_BTC:return(await import("./PhantomBtcAdapter-IAB44RYF.js")).PhantomBtcAdapter;case S.OKX_CONNECT:return(await import("./OkxConnectAdapter-NRPN3QPP.js")).OkxConnectAdapter;default:throw new Error(`Unsupported walletType: ${o}`)}}async function Rt({okxWalletSupportChain:o}){let e=Le();if(e){let t=await qo(e);if([S.OKX_WALLET,S.WALLET_CONNECT,S.OKX_CONNECT].includes(e)){let r=new t({supportChain:o});return await r.initPromise,r}return new t}throw new Error("No supported wallet found")}function Xo(o,e){let t=new Promise(r=>{let n=setTimeout(()=>{clearTimeout(n),r("Timeout")},o)});return Promise.race([e,t])}var Lt=class{constructor(){this.adapter=null,this.adapterFlag=!1,this.okxWalletSupportChain=[],this.initPromise=this.init(),this.walletChangeCallbacks=new Map,this.chainChangeCallbacks=new Map,this.dashboardChangeCallbacks=new Map,this.nextWalletChangeSubId=1,this.nextChainChangeSubId=1,this.nextDashboardChangeSubId=1,this.adapterReadyPromise=new Promise(e=>{this.resolveAdapterReady=e})}resetAdapterPromise(){this.adapterReadyPromise=new Promise(e=>{this.resolveAdapterReady=e})}onWalletChange(e){if(Y())return;let t=this.nextWalletChangeSubId++;return Je({subscriptionId:t,callbacks:this.walletChangeCallbacks,callback:e})}offWalletChange(e){Y()||Ze({subscriptionId:e,callbacks:this.walletChangeCallbacks})}onDashboardChange(e){if(Y())return;let t=this.nextDashboardChangeSubId++;return Je({subscriptionId:t,callbacks:this.dashboardChangeCallbacks,callback:e})}offDashboardChange(e){Y()||Ze({subscriptionId:e,callbacks:this.dashboardChangeCallbacks})}async onChainChange(e){if(Y())return;let t=async()=>{let n=await this.getChainId(),i=`0x${parseInt(n).toString(16)}`;e&&e(i)};this.adapter?.onChainChange?this.adapter?.onChainChange(t):window?.ethereum?.on?.("chainChanged",t);let r=this.nextChainChangeSubId++;return Je({subscriptionId:r,callbacks:this.chainChangeCallbacks,callback:t})}async offChainChange(e){if(Y())return;let t=()=>{};for(let[n,i]of this.chainChangeCallbacks.entries())if(i===e){t=n;break}Ze({subscriptionId:e,callbacks:this.chainChangeCallbacks}),window?.okxwallet?.removeListener?.("chainChanged",t),window?.ethereum?.removeListener?.("chainChanged",t),(await vr())?.ethereum?.removeListener?.("chainChanged",t)}get chainTypeEnum(){return Ct}get chainIdEnum(){return xr}get chainTypeKeyEnum(){return Cr}get walletTypeEnum(){return S}get walletActionTypeEnum(){return Ar}get chainType(){return this.adapter?.chainType}get btcAddressTypeEnum(){return Tr}get isConnected(){return!!Le()}get isWalletReady(){return!!this.adapter}get Web3(){return typeof Web3>"u"?void 0:Web3}async walletDataChangeCallBack(e,t){console.log("walletDataChangeCallBack ---> start");let{actionType:r}=e;if(["add_connected_wallet","init_wallet"].includes(r)){this.adapterFlag||t.adapter||(t.adapter=await Rt({okxWalletSupportChain:t.okxWalletSupportChain}),t.resolveAdapterReady(),console.log("walletDataChangeCallBack success ======>"));for(let n of this.walletChangeCallbacks.keys())n(e)}else if(r==="log_out_wallet"){t.adapter=null,t.resolveAdapterReady();let n=setTimeout(()=>{t.resetAdapterPromise(),clearTimeout(n)},2005);for(let i of this.walletChangeCallbacks.keys())i(e)}for(let n of this.dashboardChangeCallbacks.keys())n(e)}async init(){try{if(Y())return;let{onchain:e={}}=Q,{onWalletDataChange:t}=e,r=this;t&&t(n=>{this.walletDataChangeCallBack(n,r)})}catch(e){console.log(e)}}async createAdapter({isForce:e}={}){(e||!this.adapter)&&(this.adapter=await Rt({okxWalletSupportChain:this.okxWalletSupportChain}),this.resolveAdapterReady(),this.adapterFlag=!1,console.log("createAdapter walletDataChangeCallBack success ======>"))}setOkxWalletSupportChain(e){this.okxWalletSupportChain=e}connect(e){try{if(Y())return;let{successCallback:t}=e||{},n={...e,successCallback:async i=>{this.adapterFlag=!0,await this.createAdapter(),t&&t(i)}};Q?.onchain?.getWalletWidget().then(i=>{i&&i.connect(n)})}catch(t){throw console.error("Error connecting wallet:",t),t}}disconnect(){Y()||Q?.onchain?.setWalletLogout()}async getWeb3(e){if(e)return yr(e);if(this.adapter)return this.adapter.getWeb3?.()}async getWalletAdapter(){if(!this.adapter)throw new Error("No wallet connected");return this.adapter}async getAccount(e){return await this.adapter?.getAccount(e)||""}async getChainId(){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.getChainId()}async signData({account:e,signData:t,nonce:r,...n}){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.signMessage({message:t,account:e,nonce:r,...n})}async signMessage({message:e,nonce:t,...r}){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.signMessage({message:e,nonce:t,...r})}async signTypedData({message:e,...t}){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter?.signTypedData({message:e,...t})}async sendTransaction(e,t,r,n){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.sendTransaction({payload:e,cb:t,extraParams:r,externalProvider:n})}async switchNetwork({chain:e,chainType:t,switchFaildCallback:r=()=>{},...n}){let i=kt(e);if(!this.adapter)throw new Error("No wallet connected");try{this.adapter.setChainType&&await this.adapter.setChainType({chainId:i,chainType:t});let s=await this.adapter.switchNetwork({chain:i,chainType:t,...n});return s||r(e),s}catch(s){return console.log("switchNetwork error: ",s),r(e),!1}}async commAdapterLinkAndNet({chain:e,chainType:t,connectOptions:r,succCallback:n,closeCallback:i,switchFaildCallback:s,...p}){let d=kt(e);try{return new Promise(async u=>{let g=()=>{this.connect({...r,successCallback:async()=>{n&&n();let _=await this.switchNetwork({...p,chain:d,chainType:t,switchFaildCallback:s});u(_)},closeCallback:i})};if(this.adapter)if(this.adapter.setChainType&&await this.adapter.setChainType({chainId:d,chainType:t}),await this.isSupportChainType({chainId:d})){let C=await this.switchNetwork({...p,chain:d,chainType:t,switchFaildCallback:s});u(C)}else s&&s(e),u(!1);else g()})}catch{return s&&s(d),Promise.resolve(!1)}}async checkLinKAndNet(e,t,r){return this.commAdapterLinkAndNet({chain:e,switchFaildCallback:t,...r})}async getConnectedConfig(){return Ir()}async commAdapterChain({chain:e,switchFaildCallback:t,...r}){return this.switchNetwork({chain:e,switchFaildCallback:t,...r})}async commAdaterChain({chain:e,switchFaildCallback:t,...r}){return this.switchNetwork({chain:e,switchFaildCallback:t,...r})}async checkWalletNet(e,t,...r){return this.switchNetwork({chain:e,switchFaildCallback:t,...r})}async getWalletAccount({isNeedAll:e,chainId:t,...r}={}){return await this.getAccount({isNeedAll:e,chainId:t,...r})}async getProviderData(){return Qe()}async setChainType({chainType:e,chainId:t}){if(this.adapter?.setChainType)return await this.adapter.setChainType({chainType:e,chainId:t})}async isSupportChainType({chainId:e}){let t=Sr(e),r=!0,n=await Qe(),{walletType:i}=n;return[S.OKX_WALLET,S.OKX_CONNECT].includes(i)&&this.adapter?.getAccountByChainId?r=!!await this.adapter.getAccountByChainId({chainId:e}):i===S.LEDGER?r=!0:i!==S.NO_WALLET?(kr[i]||[]).includes(t)||(r=!1):i===S.NO_WALLET&&(r=!1),r}getChainTypeByChainId(e){let t=Ct.EVM;return Object.keys(Tt).forEach(r=>{Tt[r].includes(e)&&(t=Number(r))}),t}async getAllChainTypeInfoList(){return this.adapter?.getAllChainTypeInfoList?.()||[]}async getWalletType(){let e=await Qe(),{walletType:t}=e;return t}async commApproved(e,t,r,n,i,s,p){return this.commApproveToken({abi:e,addr:t,operatorAddr:r,amount:n,cb:i,maxFeePerGas:s,maxPriorityFeePerGas:p})}async commApproveToken({abi:e,addr:t,operatorAddr:r,amount:n,cb:i,maxFeePerGas:s,maxPriorityFeePerGas:p,extParams:d}){let u=e||st.default,g=await this.getAccount(),_=await this.getWeb3();if(await yt({abi:u,addr:t,ownerAddr:g,operatorAddr:r,amount:n,web3:_}))return!0;let v=await this.approvedToken({abi:u,addr:t,operatorAddr:r,cb:i,maxFeePerGas:s,maxPriorityFeePerGas:p,extParams:d});return v&&console.log("commApproved, Unlimited authorization, pass!"),v}async approvedToken({abi:e,addr:t,operatorAddr:r,cb:n,maxFeePerGas:i,maxPriorityFeePerGas:s,extParams:p}){try{let d=e||st.default,u=await this.getWeb3(),g=new u.eth.Contract(d,t),C={from:await this.getAccount(),to:t,data:g.methods.approve(r,Rr).encodeABI(),extParams:{...p,canSupplyGas:!0}};return i&&s&&(C.maxFeePerGas=i,C.maxPriorityFeePerGas=s),await this.sendTransaction(C,n),console.log(`Approved Token success to ${r}`),!0}catch(d){return console.log("Approved Token error",d),!1}}async isApproved({abi:e,addr:t,ownerAddr:r,operatorAddr:n,amount:i}){let s=e||st.default,p=await this.getWeb3();return!!await yt({abi:s,addr:t,ownerAddr:r,operatorAddr:n,amount:i,web3:p})}async getContract(e,t){let r=await this.getWeb3();return new r.eth.Contract(e,t)}async getDecimals(e){let t=await this.getWeb3();return Fr({addr:e,web3:t})}async getEthBalance(e){let t=await this.getWeb3();return new Promise(r=>{t.eth.getBalance(e,(n,i)=>{let s=t.utils.fromWei(i,"ether");r(s)})})}async getWalletProvider(){return wr()}async setSupportWalletOptions(e){if(Q.onchain){let t=Q.onchain.supportWalletOptions;Q.onchain.supportWalletOptions={...t,...e}}}async getDeposit({currency:e,network:t,address:r,prefix:n,contract:i,onClose:s,...p}){(await(await Q?.onchain?.getWalletWidget?.())?.getDeposit?.())?.V1({currency:e,network:t,address:r,prefix:n,contract:i,onClose:s,...p})}async getWalletStorage(){return await(await Q?.onchain?.getWalletWidget?.())?.getWalletStorage()}async getWalletWidget(){return await Q?.onchain?.getWalletWidget?.()}async okxAppSendCustomTransaction(e,t){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.sendCustomTransaction?.(e,t)}async okxAppCancelApprove({abi:e,addr:t,operatorAddr:r,cb:n,options:i}){if(!this.adapter)throw new Error("No wallet connected");return await this.adapter.okxAppCancelApprove?.({abi:e,addr:t,operatorAddr:r,cb:n,options:i})}isBtcAddress(e){return Br(e)}checkSolanaAccountRentExemption({accountAddress:e}){return Lr({accountAddress:e})}},Yo=new Lt,Qo=new Proxy(Yo,{get(o,e,t){let r=Reflect.get(o,e,t);return["getChainTypeByChainId","Web3","onWalletChange","offWalletChange","onDashboardChange","offDashboardChange","setOkxWalletSupportChain","setSupportWalletOptions","connect","disconnect","getWalletStorage","createAdapter","isBtcAddress","checkSolanaAccountRentExemption"].includes(e)?r:typeof r=="function"?async function(...i){return await o.initPromise,Le()&&await Xo(2e3,o.adapterReadyPromise),r.apply(o,i)}:r}}),Ot=Qo;c();l();var a="",jn=`${a}/priapi/v1/dx/trade/multi/orders`,zn=`${a}/priapi/v1/dx/trade/multi/orders/details`,qn=`${a}/priapi/v1/dx/trade/multi/post/pending/orders`,Xn=`${a}/priapi/v1/dx/trade/limit-order/orders`,Yn=`${a}/priapi/v1/dx/trade/limit-order/order/detail`,Qn=`${a}/priapi/v1/dx/market/kLine/infos`,Jn=`${a}/priapi/v1/dx/trade/multi/allTokens`,Zn=`${a}/priapi/v1/dx/trade/bridge/crossAbility/allTokens`;var ei=`${a}/priapi/v1/dx/trade/multi/v3/quote`,ti=`${a}/priapi/v1/dx/trade/multi/outer/v3/quote/snap-mode`,ri=`${a}/priapi/v1/dx/trade/multi/v3/reverse/quote`,oi=`${a}/priapi/v1/dx/trade/multi/v3/quote/snap-mode`,ai=`${a}/priapi/v1/dx/trade/bridge/v3/quote`,ni=`${a}/priapi/v1/dx/trade/multi/v3/quote/aggregateQuote`,ii=`${a}/priapi/v1/dx/trade/multi/defiPlatform-list`,si=`${a}/priapi/v1/dx/trade/multi/v2/saveOrder`,ci=`${a}/priapi/v1/dx/trade/multi/outer/saveOrder`,li=`${a}/priapi/v1/dx/trade/multi/updateOrder`,pi=`${a}/priapi/v1/dx/trade/bridge/supportChain/list`,di=`${a}/priapi/v1/dx/public/swap/chain/list`,ui=`${a}/priapi/v1/dx/trade/bridge/chain/list`,mi=`${a}/priapi/v1/dx/trade/limit-order/chain/list`,_i=`${a}/priapi/v1/dx/trade/multi/order/checkRepeat`,hi=`${a}/priapi/v1/dx/trade/bridge/common/check`,gi=`${a}/priapi/v1/dx/trade/multi/v2/checkAndGetTokenInfo`,fi=`${a}/priapi/v1/dx/trade/crossChain/toastTokenCheck`,Ei=`${a}/priapi/v1/dx/trade/bridge/crossTokenCheck`,xi=`${a}/priapi/v1/dx/trade/multi/batchGetTokenApproveInfo`,Ci=`${a}/priapi/v1/dx/trade/multi/approveData`,Ti=`${a}/priapi/v1/dx/trade/multi/v2/saveApprove`,ki=`${a}/priapi/v1/dx/trade/bridge/gasDropConfig`,Ai=`${a}/priapi/v1/dx/trade/multi/allNetWorkTokens`,Ii=`${a}/priapi/v1/dx/trade/multi/swap/allNetWorkTokens`,vi=`${a}/priapi/v1/dx/trade/bridge/crossAbility/allTokens`,wi=`${a}/priapi/v1/dx/trade/multi/addOrCancelCollectionToken`,Si=`${a}/priapi/v1/dx/market/collectionTokens`,yi=`${a}/priapi/v1/dx/trade/multi/single/chain/collectionGroups`,Ri=`${a}/priapi/v1/dx/trade/bridge/collectionGroup/group/list`,Li=`${a}/priapi/v1/dx/trade/multi/single/chain/collectionTokens`,Oi=`${a}/priapi/v1/dx/trade/bridge/crossAbility/collectionTokens`,bi=`${a}/priapi/v1/dx/trade/multi/tokens/v2/search`,Di=`${a}/priapi/v1/dx/trade/multi/tokens/single/search`,Pi=`${a}/priapi/v1/dx/trade/bridge/crossAbility/tokens/search`,Ni=`${a}/priapi/v1/dx/market/coin/detail`,Gi=`${a}/priapi/v1/dx/trade/activity/invite/banner/list`,Mi=`${a}/priapi/v1/dx/trade/multi/tokens/tx/status`,Wi=`${a}/priapi/v1/dx/trade/multi/slippage/configs`,Ui=`${a}/priapi/v1/dx/trade/multi/callData`,$i=`${a}/priapi/v1/dx/trade/multi/v3/quote/callData`,Bi=`${a}/priapi/v1/dx/trade/multi/redeem/callData`,Hi=`${a}/priapi/v1/dx/trade/limit-order/exChangeRate`,Fi=`${a}/priapi/v1/dx/trade/limit-order/calOrder`,Ki=`${a}/priapi/v1/dx/trade/limit-order/expireTimeConfig`,Vi=`${a}/priapi/v1/dx/trade/limit-order/calldata`,ji=`${a}/priapi/v1/dx/trade/limit-order/create`,zi=`${a}/priapi/v1/dx/trade/limit-order/cancel`,qi=`${a}/priapi/v1/dx/trade/multi/cancel-order`,Xi=`${a}/priapi/v1/dx/trade/multi/liquidityList`,Yi=`${a}/v2/support/helpCenter/simpleFaq`,Qi=`${a}/priapi/v1/dx/trade/multi/order/checkContinue`,Ji=`${a}/priapi/v1/dx/trade/bridge/queryBlackList`,Zi=`${a}/priapi/v1/dx/trade/single/toastTokenCheck`,es=`${a}/priapi/v1/dx/trade/intent/quote`,ts=`${a}/priapi/v1/dx/trade/intent/quote/callData`,rs=`${a}/priapi/v1/dx/trade/intent/createOrder`,os=`${a}/priapi/v1/dx/trade/limit-order/recommend`,as=`${a}/priapi/v1/dx/trade/multi/business/chain/list`,ns=`${a}/priapi/v1/dx/trade/bridge/intent/quote/calldata`,is=`${a}/priapi/v1/dx/trade/bridge/intent/orderSubmit`,ss=`${a}/priapi/v1/dx/public/swap/chain/dapp-list`,cs=`${a}/priapi/v1/dx/trade/bridge/dapp-list`,ls=`${a}/priapi/v1/dx/public/swap/chain/ca-dapp-list`,ps=`${a}/priapi/v1/dx/market/v2/search`,ds=`${a}/priapi/v1/dx/market/v2/ranking/hot-search`,us=`${a}/priapi/v1/dx/market/batch/addOrCancelCollectionToken`,ms=`${a}/priapi/v1/dx/market/coin/check`,_s=`${a}/priapi/v1/dx/market/v2/market/check`,hs=`${a}/priapi/v1/dx/market/v2/ranking/base-info`,gs=`${a}/priapi/v1/dx/market/v2/ranking/content`,fs=`${a}/priapi/v1/dx/market/v2/highlight/ranking`,Es=`${a}/priapi/v1/dx/market/v2/collection/list`,xs=`${a}/priapi/v1/dx/market/v2/collection/top`,Cs=`${a}/priapi/v1/dx/market/v2/smartmoney/ranking/content`,Ts=`${a}/priapi/v1/dx/market/v2/advanced/ranking/config/new`,ks=`${a}/priapi/v1/dx/market/v2/chain/list`,As=`${a}/priapi/v1/dx/market/v2/advanced/ranking/content`,Is=`${a}/priapi/v1/dx/market/v2/advanced/ranking/categories`,vs=`${a}/priapi/v1/dx/trade/limit-order/toastCheck`,ws=`${a}/priapi/v1/dx/market/toastTokenCheck`,Ss=`${a}/priapi/v1/dx/market/pool/list`,ys=`${a}/priapi/v1/dx/market/vote`,Rs=`${a}/priapi/v1/dx/market/vote/like`,Ls=`${a}/priapi/v1/dx/market/vote/dislike`,Os=`${a}/priapi/v1/dx/market/v2/latest/info`,bs=`${a}/priapi/v1/dx/trade/multi/support/swap`,Ds=`${a}/priapi/v1/dx/market/v2/report/valid-search`,Ps=`${a}/priapi/v1/dx/market/v2/token/overview`,Ns=`${a}/priapi/v1/dx/market/v2/token/share/info`,Gs=`${a}/priapi/v1/dx/market/v2/token/activity`,Ms=`${a}/priapi/v1/dx/market/v2/trading-history/info`,Ws=`${a}/priapi/v1/dx/market/v2/trading-history/filter-list`,Us=`${a}/priapi/v1/dx/market/v2/my-position/latest-pnl`,$s=`${a}/priapi/v1/dx/market/v2/my-position/recent-transactions`,Bs=`${a}/priapi/v1/dx/market/v2/pnl/share/info`,Hs=`${a}/priapi/v1/dx/market/v2/pnl/share/wallet-profile`,Fs=`${a}/priapi/v1/dx/market/v2/trading-history/filter-config`,Ks=`${a}/priapi/v1/dx/market/v2/pool-liquidity/change-history/filter-list`,Vs=`${a}/priapi/v1/dx/market/v2/pool-liquidity/tendency/chart`,js=`${a}/priapi/v1/dx/market/v2/pool-liquidity/change-history/filter-config`,zs=`${a}/priapi/v1/dx/trade/multi/simple/tokenList`,qs=`${a}/priapi/v1/dx/market/v2/trading/kline-bs-point`,Xs=`${a}/priapi/v1/dx/market/v2/trading/tag/kline-bs-point`,Ys=`${a}/priapi/v1/dx/market/tag/tmpFilterTags`,Qs=`${a}/priapi/v1/dx/market/tag/txHistoryTagFilter`,Js=`${a}/priapi/v1/dx/market/tag/holderTagFilter`,Zs=`${a}/priapi/v1/dx/market/v2/holders/holding-list`,ec=`${a}/priapi/v1/dx/market/v2/risk/new/check`,tc=`${a}/priapi/v1/dx/market/v2/query/banner`,rc=`${a}/priapi/v1/dx/market/v2/address/collect/update`,oc=`${a}/priapi/v1/dx/market/v2/address/collect/simplify/query`,ac=`${a}/priapi/v1/dx/market/v2/address/collect/group/query`,nc=`${a}/priapi/v1/dx/market/v2/address/alias/update`,ic=`${a}/priapi/v1/dx/market/v2/address/alias/simplify/query`,sc=`${a}/priapi/v1/dx/market/v2/address/collect/support/chain`,cc=`${a}/priapi/v1/dx/market/v2/address/collect/checkSize`,lc=`${a}/priapi/v1/dx/market/v2/address/collect/checkBotSize`,pc=`${a}/priapi/v1/dx/market/v2/address/collect/batch/import`,dc=`${a}/priapi/v1/dx/market/user/sign`,uc=`${a}/priapi/v1/dx/market/user/login`,mc=`${a}/priapi/v1/dx/market/v2/address/collect/queryTxHistory`,_c=`${a}/priapi/v1/dx/market/v2/tracker/smartmoney/activity`,hc=`${a}/priapi/v1/dx/trade/blinks/share/url`,gc=`${a}/priapi/v1/dx/market/v2/universal/link/create`;var fc=`${a}/priapi/v1/dx/trade/multi/order/save/broadcast`,Ec=`${a}/priapi/v5/dex/token/market/dex-token-hlc-candles`,xc=`${a}/priapi/v5/dex/token/market/history-dex-token-hlc-candles`,Cc=`${a}/priapi/v1/dx/market/v2/config/info`,Tc=`${a}/priapi/v1/dx/market/v2/holders/over-time`,kc=`${a}/priapi/v1/dx/market/v2/holders/ranking-list`,Ac=`${a}/priapi/v1/dx/market/v2/trading-history/statistics`,Ic=`${a}/priapi/v1/dx/market/v2/trading/kline-bs-point`,vc=`${a}/priapi/v1/dx/market/v2/holders/analysis-info`,wc=`${a}/priapi/v1/dx/market/v2/holders/single-detail-info`,Sc=`${a}/priapi/v1/dx/market/v2/holders/early-buyer/list`,yc=`${a}/priapi/v1/dx/market/v2/memefun/entrance`,Rc=`${a}/priapi/v1/dx/market/v2/memefun/ranking/type`,Lc=`${a}/priapi/v1/dx/market/v2/memefun/ranking/info`,Oc=`${a}/priapi/v1/dx/market/v2/memefun/ranking/config`,bc=`${a}/priapi/v1/dx/market/v2/memefun/ranking/list`,Dc=`${a}/priapi/v1/dx/market/v2/config/info`,Pc=`${a}/priapi/v1/dx/market/v2/smartmoney/ranking/content`,Nc=`${a}/priapi/v1/dx/market/v2/smartmoney/signal-list`,Gc=`${a}/priapi/v1/dx/market/v2/smartmoney/signal-detail`,Mc=`${a}/priapi/v1/dx/market/v2/smartmoney/config/new`,Kr=`${a}/priapi/v1/dx/market/v2/watchlist/token/group/list`,Vr=`${a}/priapi/v1/dx/market/v2/watchlist/token/group/create`,jr=`${a}/priapi/v1/dx/market/v2/watchlist/token/group/delete`,zr=`${a}/priapi/v1/dx/market/v2/watchlist/token/group/rename`,qr=`${a}/priapi/v1/dx/market/v2/watchlist/token/group/sort`,Xr=`${a}/priapi/v1/dx/market/v2/watchlist/token/group/top`,Yr=`${a}/priapi/v1/dx/market/v2/watchlist/token/all/list`,Wc=`${a}/priapi/v1/dx/market/v2/watchlist/token/all/details`,Uc=`${a}/priapi/v1/dx/market/v2/watchlist/token/inGroupIds`,Qr=`${a}/priapi/v1/dx/market/v2/watchlist/token/inGroups`,$c=`${a}/priapi/v1/dx/market/v2/watchlist/token/group/tokenList`,Bc=`${a}/priapi/v1/dx/market/v2/watchlist/token/group/tokenTop`,Jr=`${a}/priapi/v1/dx/market/v2/watchlist/token/addOrDelete`,Hc=`${a}/priapi/v1/dx/market/v2/address/collect/group/top`,Fc=`${a}/priapi/v1/dx/market/v2/address/collect/group/update`,Kc=`${a}/priapi/v1/dx/market/v2/address/collect/group/sort`,Vc=`${a}/priapi/v1/dx/trade/limit-order/web/exChangeRate`,jc=`${a}/priapi/v1/dx/trade/multi/meme/openOrders`,zc=`${a}/priapi/v1/dx/market/v2/tracker/trends/trade/list`,qc=`${a}/priapi/v1/dx/market/v2/tracker/trends/trade/detail`,Xc=`${a}/priapi/v1/dx/market/v2/tracker/smartmoney/trends`,Yc=`${a}/priapi/v1/dx/market/v2/tracker/smartmoney/trends/detail`,Qc=`${a}/priapi/v1/dapp/insights/control/summaryAndInsight`,Jc=`${a}/priapi/v1/dx/trade/multi/getAllTokenTagInfo`,Zc=`${a}/priapi/v1/dx/trade/multi/getServiceFeeTagInfo`,el=`${a}/priapi/v1/dx/trade/multi/feeToken/search`,tl=`${a}/priapi/v1/dx/market/v2/address/collect/detail-query`,rl=`${a}/priapi/v1/dx/market/v2/tracker/smartmoney/address`,ol=`${a}/priapi/v1/dx/market/v2/tracker/ranking/info`,al=`${a}/priapi/v1/dx/market/v2/tracker/smartmoney/ranking`,nl=`${a}/priapi/v1/dx/trade/multi/checkServiceOffLine`,il=`${a}/priapi/v1/dx/trade/bridge/trade/multi/checkServiceOffLine`,sl=`${a}/priapi/v1/dx/market/v2/getLimitOrderBalance`,cl=`${a}/priapi/v1/dx/market/v2/address/collect/groupId/query`;var eo={};rr(eo,{createAbortController:()=>bt,default:()=>W,interceptRequest:()=>De,interceptResponse:()=>Pe,isCancel:()=>Dt,setDataProxy:()=>ea});c();l();Lo();var Jo=[0],bt=()=>new AbortController,Zo=()=>Promise.reject(),Dt=o=>o?.status===fe.STATUS_CODE?.ERR_CANCELED;async function De(o={}){let e=o;return V()||e.headers||(e.headers={}),e.needSign=!0,e.customToLogin=Zo,e}function Pe(o){return o.then(e=>{let{data:t}=e;return Jo.includes(t?.code)?t:Promise.reject(t||{})})}var ke={};ke.get=(o,e)=>Pe(De({...e,url:o}).then(t=>{let{url:r,...n}=t;return fe.get(r,n).then(i=>(i?.status===200&&i?.data?.code&&(i.data.code=+i.data.code),i))}));ke.getWithCache=(o,e)=>Pe(De({...e,url:o}).then(t=>{let{url:r,...n}=t;return fe.getWithCache(r,{cacheSeconds:60*5,...n})}));ke.post=(o,e,t)=>Pe(De({...t,url:o,data:e,method:"post"}).then(r=>{let{url:n,data:i,...s}=r;return fe.post(n,i,s)}));ke.delete=(o,e,t)=>Pe(De({...t,url:o,data:e,method:"delete"}).then(r=>{let{url:n,...i}=r;return fe.delete(n,i)}));var W=ke,Zr=!1,ea=o=>{Zr||(Zr=!0,Object.keys(o).forEach(e=>{ke[e]=o[e]}))};var ta=async()=>{try{if(!Ot.adapter)return await Ot.createAdapter({isForce:!0})}catch(o){return Promise.reject(o)}return Promise.resolve()};var to=async o=>{try{await ta();let e=j.getProjectStorage("onChain");if(!e||!e.connectedAccount)return"";let t=e.connectedAccount.chainIdAddressMap||{};return t[o]||Object.values(t)[0]||""}catch{return""}};var ct={};rr(ct,{getRandomId:()=>ra,getWalletId:()=>ro,initUniqueId:()=>Nt});c();l();c();l();c();l();var Ne="universe_swap";j.init({project:Ne});j.session.init({project:Ne});var Pt=V()?j:j.getInstance(Ne),bl=V()?j.session:j.session.getInstance(Ne);function ra(o){let e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=[],r=e.length;if(o)for(let n=0;n<o;n++)t[n]=e[0|ft.get()*r];return t.join("")}function ro(){let o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[],t;e[8]="-",e[13]="-",e[18]="-",e[23]="-",e[14]="4";for(let r=0;r<36;r++)e[r]||(t=0|ft.get()*16,e[r]=o[r==19?t&3|8:t]);return e.join("")}function Nt(){if(V())return"";let o=Pt.get("onChainUserId"),e=ro();return o||Pt.set("onChainUserId",e),o||e}c();l();var oo={10064:"swaptrade_market_error_watchlist_name_already_exist",10066:"swaptrade_market_error_name_char_limt",10067:"swaptrade_market_error_max_group_limit",10068:"swaptrade_market_error_delete_last_group",10069:"swaptrade_market_error_watchlist_token_limit"},ao=200,lt=20,no=30,io=1,pt=2;var oa={chainId:"all",chainName:"",chainLogo:"",chainBWLogoUrl:"",monitorName:"all_networks"},so=oa.chainId,Gt="universe_swap_token_map_change",Mt="universe_swap_token_group_map_change",Wt="universe_swap_watch_list_group_change";c();l();var Ut=class{constructor(){this.accountId="";this.userUniqueId="";this.collectWalletAddress="";this.fetchCollectGroupUrl="";this.groupDialogBoxScroll=!1;M(this,{},{autoBind:!0})}},A=new Ut;var $t=class{constructor(){this.initCommonTokenCollectAction=async({accountId:e,fetchCollectGroupUrl:t,groupDialogBoxScroll:r,tokenCollectWalletAddress:n})=>{if(e!==A.accountId&&(A.accountId=e,A.fetchCollectGroupUrl=t||"",A.groupDialogBoxScroll=r||!1,A.userUniqueId||(A.userUniqueId=Nt()),e)){let i;if(n!==void 0)i=n;else try{i=await to(io)}catch{i=""}A.collectWalletAddress=i}};this.destroyCommonTokenCollectAction=()=>{A.accountId&&(A.accountId="",A.collectWalletAddress="")};M(this,{},{autoBind:!0})}},Ae=new $t;c();l();c();l();var E={DEFAULT:"DEFAULT",LOADING:"LOADING",READY:"READY",NULL:"NULL",ERROR:"ERROR",SUCCESS:"SUCCESS"};c();l();var Ge=({chainId:o,tokenContractAddress:e,tokenAddress:t=void 0}={})=>`${o}_${(e||t)?.toLowerCase()}`;c();l();function Me(o,e={}){let t=new CustomEvent(o,{detail:{params:e,timestamp:Date.now()}});window.dispatchEvent(t)}function We(o,e){let t=r=>{e(r.detail.params)};return window.addEventListener(o,t),()=>{window.removeEventListener(o,t)}}c();l();var Bt=class{constructor(){this.collectionMap={};this.collectionGroupMap={};this.fetchCollectionDataStatus=E.DEFAULT;M(this,{},{autoBind:!0})}get computedCollectionMap(){return{...this.collectionMap}}},N=new Bt;c();l();var X=()=>{let o=A.accountId,e=A.collectWalletAddress;return{accountId:o,walletAddress:e}};var Ht=class{constructor(){this.destroyReaction=()=>{};this.removeEventListener=()=>{};this.removeEventGroupListener=()=>{};this.initEd=!1;this.initCollectionData=()=>{this.initEd||(this.initEd=!0,this.destroyReaction(),this.destroyReaction=dr(()=>A.collectWalletAddress,e=>{e?(this.refreshCollectionData(),this.onUpdateTokenCollectMapData(),this.onUpdateTokenCollectGroupMapData()):this.destroyCollectionData()}))};this.updateCollectionGroupMap=({selected:e,groupId:t})=>{let r=N.collectionGroupMap[t];r===void 0?N.collectionGroupMap[t]=1:N.collectionGroupMap[t]=e?r+1:r-1};this.cancelRef=null;this.updateTokenCollectStatus=async({tokenInfo:e,groupInfo:t,callBack:r})=>{if(!A.accountId){this.walletWarnInterceptor();return}this.cancelRef&&this.cancelRef.abort(),this.cancelRef=bt();let{groupId:n,status:i}=t,s=i===1?0:1,p={tokenContractAddress:e?.tokenContractAddress,chainId:Number(e?.chainId),symbol:e?.tokenSymbol,decimal:e?.decimals,userUniqueId:A.userUniqueId,...X(),groupIds:[n],action:s,isCustomToken:e?.isCustomToken||e?.isSubscribe},[d,u]=await z(W.post(Jr,p,{signal:this.cancelRef.signal}));this.handleResult({error:d,res:u,callBack:r,tokenInfo:e,action:s,groupId:n})};this.debounceUpdateTokenCollectStatus=ur(this.updateTokenCollectStatus,300);this.walletWarnInterceptor=()=>{w.error({title:h("swaptrade_selecttoken_toast_connect_wallet"),duration:pt})};this.fetchCollectionData=async()=>{if([E.LOADING,E.READY].includes(N.fetchCollectionDataStatus))return;N.fetchCollectionDataStatus=E.LOADING;let[e,t]=await z(W.get(Yr,{params:{chainId:so,...X()}}));if(N.fetchCollectionDataStatus=E.READY,!e&&t&&t?.data&&Array.isArray(t.data)){let r={};t?.data.forEach(n=>{let i=Ge({chainId:n?.chainId,tokenContractAddress:n.tokenContractAddress,tokenAddress:n.tokenAddress});r[i]=1}),pr(()=>{this.emitUpdateTokenCollectMapData({collectionMap:r})})}};this.destroyCollectionData=()=>{this.emitUpdateTokenCollectMapData({collectionMap:{}}),this.removeEventListener(),this.removeEventGroupListener(),N.fetchCollectionDataStatus=E.DEFAULT};this.refreshCollectionData=()=>{N.fetchCollectionDataStatus=E.DEFAULT,this.fetchCollectionData()};this.updateCollectMap=({tokenInfo:e,afterGroupIds:t,collectionMap:r})=>{let n=!!t?.length;if(e){let i=Ge({chainId:e?.chainId,tokenContractAddress:e.tokenContractAddress});n?N.collectionMap[i]=1:delete N.collectionMap[i]}r&&(N.collectionMap={...r})};this.onUpdateTokenCollectMapData=()=>{this.removeEventListener(),this.removeEventListener=We(Gt,this.updateCollectMap)};this.emitUpdateTokenCollectMapData=(e={})=>{Me(Gt,{...e})};this.onUpdateTokenCollectGroupMapData=()=>{this.removeEventGroupListener(),this.removeEventGroupListener=We(Mt,this.updateCollectionGroupMap)};this.emitUpdateTokenCollectGroupMapData=(e={})=>{Me(Mt,{...e})};this.fetchTokenWatchGroup=Ce(async(e={},t=1e4,r=!0)=>{if(!A.accountId||!A.collectWalletAddress)return this.walletWarnInterceptor(),null;let n={...X(),...e},[i,s]=await z(W.get(Qr,{params:n,timeout:t}));if(i&&!r){let p=i?.message||i?.msg||"";i?.status==="ERR_TIMEOUT"&&(p=h("swaptrade_general_error_connection_timeout")),w.error(p)}return s?.data},500,{leading:!0,trailing:!1});M(this,{},{autoBind:!0})}handleResult({error:e,res:t,callBack:r,tokenInfo:n,action:i,groupId:s}){!Dt(e)&&e?e.code===10023?w.error(h("swaptrade_selecttoken_modal_favorite_limitreached")):w.error(h("swaptrade_pricechart_no_connection_desc")):t&&(i===0?(r({selected:!1,tokenInfo:n}),this.emitUpdateTokenCollectGroupMapData({selected:!1,groupId:s}),w.success({title:h("swaptrade_selecttoken_toast_removed_from_favorite"),duration:pt})):i===1&&(r({selected:!0,tokenInfo:n}),this.emitUpdateTokenCollectGroupMapData({selected:!0,groupId:s}),w.success({title:h("swaptrade_selecttoken_toast_added_to_favorite"),duration:pt})))}},Ie=new Ht;c();l();var Kt=k(b()),co=k(re());c();l();var Ft={icon:"_icon_elmob_1",activity:"_activity_elmob_5"};function Vt(o){let{className:e,isCollection:t,fontSize:r,onClick:n}=o;return Kt.default.createElement(ne,{onClick:n},Kt.default.createElement(Ee,{a11yText:"collection",className:(0,co.default)(`${t?"okx-defi-dex-star-filled":"okx-defi-dex-star"}`,{[Ft.activity]:t},Ft.icon,e),style:{fontSize:r||"24px"}}))}c();l();var ge=k(b());c();l();var zt=k(b());c();l();var Ue=k(b()),lo=k(re());c();l();var dt={"group-item":"_group-item_11yhk_1",groupItem:"_group-item_11yhk_1","group-name":"_group-name_11yhk_17",groupName:"_group-name_11yhk_17"};function jt(o){let{item:e,checked:t,onCheck:r}=o;return Ue.default.createElement(ne,{className:(0,lo.default)(dt.groupItem),onClick:()=>r(e)},Ue.default.createElement(ot,{containerClass:dt.groupName,data:e.groupName}),Ue.default.createElement("span",{className:dt.checkIcon},Ue.default.createElement(Ee,{className:t?"okx-defi-marketplace-selected":"okx-defi-marketplace-unselected"})))}c();l();var po={"group-list":"_group-list_ajv6w_1",groupList:"_group-list_ajv6w_1"};var na=o=>{let{options:e=[],onCheck:t}=o;return zt.default.createElement("div",{className:po.groupList},e.map(r=>zt.default.createElement(jt,{key:r.groupId,item:r,checked:r.status===1,onCheck:t})))},uo=na;c();l();var G=k(b()),mt=k(re());c();l();var _o=k(b()),ho=k(re());c();l();var mo={icon:"_icon_13h51_1"};function he({className:o="",type:e="",size:t,...r}){let n={fontSize:`${t}px`};return _o.default.createElement(Ee,{className:(0,ho.default)(e,mo.icon,o),style:n,...r})}c();l();var P=k(b()),le=k(re());c();l();var $e=k(b()),qt=k(re());c();l();var ut={"tip-icon":"_tip-icon_w15f9_1",tipIcon:"_tip-icon_w15f9_1","arrow-icon":"_arrow-icon_w15f9_5",arrowIcon:"_arrow-icon_w15f9_5",disabled:"_disabled_w15f9_9"};var ce=({title:o,tipsClass:e="",iconClass:t="",iconName:r="okx-defi-nft-information-circle",onClick:n=()=>{},size:i=16,disabled:s=!1,...p})=>$e.default.createElement(It,{title:o,className:(0,qt.default)(ut.tipIcon,e),...p},$e.default.createElement(he,{className:(0,qt.default)(r,ut.arrowIcon,t,s&&ut.disabled),size:i,a11yText:o,onClick:d=>{(0,$e.startTransition)(()=>{!s&&n(d)})}}));c();l();c();l();var Xt=class{constructor(){this.accountId="";this.fetchWatchListGroupUrl=A.fetchCollectGroupUrl||Kr;this.groupList=[];this.managedGroupList=[];this.status=E.DEFAULT;this.query={};this.optionStatus=E.DEFAULT;this.editGroup=null;this.hasInit=!1;M(this,{},{autoBind:!0})}get computedGroupStatusLoading(){return this.status===E.LOADING}get computedGroupOptions(){return(this.groupList||[]).map(t=>{let{groupId:r,groupName:n}=t;return{value:r,label:n}})}},x=new Xt;var Yt=class{constructor(){this.removeEventListener=()=>{};this.onUpdateGroupList=()=>{this.removeEventListener(),this.removeEventListener=We(Wt,this.setGroupList)};this.emitUpdateGroupList=(e=[])=>{Me(Wt,[...e])};this.fetchGroups=Ce(async(e=!1,t=null)=>{let{accountId:r,walletAddress:n,fetchGroupUrl:i}=t||{},s=r?{accountId:r,walletAddress:n}:X();!e&&!x.hasInit&&this.setStatus(E.LOADING);let[p,d]=await z(W.get(i||x.fetchWatchListGroupUrl,{params:s}));if(p)e||(this.emitUpdateGroupList([]),this.setManagedGroupList([]),this.setStatus(E.ERROR));else{let u=d?.data||[];this.emitUpdateGroupList(u),this.setManagedGroupList(this.getItemsFromList(u)),e||(u.length===0?this.setStatus(E.NULL):this.setStatus(E.READY)),x.hasInit=!0}return d?.data},500,{leading:!0,trailing:!1});M(this,{},{autoBind:!0})}initGroupList(e=!1,t=null){this.onUpdateGroupList(),this.fetchGroups(e,t)}resetStore(){this.emitUpdateGroupList([]),this.setManagedGroupList([]),this.setStatus(E.NULL)}setStatus(e){x.status=e}setOptionStatus(e){x.optionStatus=e}setGroupList(e){x.groupList=e}setManagedGroupList(e){x.managedGroupList=e}setEditGroup(e){let t=x.managedGroupList?.map(r=>({...r,disabled:!!(e?.id&&r.id!==e?.id)}));x.editGroup=e&&{...e},this.setManagedGroupList(t)}getItemsFromList(e=[]){return e.map(r=>({id:r.groupId,groupName:r.groupName,tokenCount:r.tokenCount,disabled:!1}))}showErrorMessage(e,t={}){let r=oo[e?.code];if(r){let n=h(r,t);w.warn(n)}else{let n=e?.error_message||e?.msg;n&&w.error(n)}this.setManagedGroupList(this.getItemsFromList(x.groupList))}async createGroup(e,t){this.setOptionStatus(E.LOADING);let r=X(),[n,i]=await z(W.post(Vr,{...r,groupName:e}));if(n)this.setOptionStatus(E.ERROR),this.showErrorMessage(n,{groupName:e});else{w.success({title:h("swaptrade_market_watchlist_toast_group_added",{groupName:e})});let s=i.data,p={groupId:s,groupName:e,tokenCount:0,sortOrder:x.groupList?.length};x.groupList.push(p),x.managedGroupList.push({id:s,groupName:e,disabled:!1,tokenCount:0}),t&&t(),this.setOptionStatus(E.READY)}return i}async deleteGroup(e,t){let{id:r,groupName:n}=e;this.setOptionStatus(E.LOADING);let i=A.userUniqueId,[s,p]=await z(W.delete(jr,{...X(),groupId:r,userUniqueId:i}));if(s)this.setOptionStatus(E.ERROR),this.showErrorMessage(s);else{w.success({title:h("swaptrade_market_watchlist_toast_group_deleted",{groupName:n})}),this.setOptionStatus(E.READY);let d=x.groupList.findIndex(u=>u.groupId===r);x.groupList.splice(d,1),t&&t()}return p}async renameGroup(e,t,r){let n=x.groupList?.findIndex(d=>d.groupId===e),i=x.groupList?.[n];if(i.groupName===t)return Promise.resolve(t);this.setOptionStatus(E.LOADING);let[s,p]=await z(W.post(zr,{groupId:e,groupName:t,...X()}));if(s)this.setOptionStatus(E.ERROR),this.showErrorMessage(s,{groupName:t});else{w.success({title:h("swaptrade_market_watchlist_toast_group_renamed",{groupName:t})});let d={...i,groupName:t};x.groupList.splice(n,1,d),r&&r(),this.setOptionStatus(E.READY)}return p}async sortGroup(e){let t=e.map(i=>i.id);this.setOptionStatus(E.LOADING);let[r,n]=await z(W.post(qr,{groupIds:t,...X()}));if(r)this.setOptionStatus(E.ERROR),this.showErrorMessage(r);else{let i=new Map;x.groupList.forEach(p=>{i.set(p.groupId,p)});let s=t.map(p=>i.get(p));this.emitUpdateGroupList(s),this.setOptionStatus(E.READY)}return n}async topGroup(e){let{id:t,groupName:r}=e,n=x.groupList?.findIndex(p=>p.groupId===t);if(n===0)return Promise.resolve(1);this.setOptionStatus(E.LOADING);let[i,s]=await z(W.post(Xr,{groupId:t,...X()}));if(i)this.setOptionStatus(E.ERROR),this.showErrorMessage(i);else{w.success({title:h("swaptrade_market_watchlist_toast_group_move_top",{groupName:r})}),this.setOptionStatus(E.READY);let p=[...x.groupList],d=p.splice(n,1)?.[0];p.unshift(d),this.emitUpdateGroupList(p)}return s}},U=new Yt;c();l();var ve=k(b());var Qt=({value:o="",valueLen:e=no,values:t=[],valuesCount:r=lt})=>o?Array.from(o).length>e?(w.warn(h("swaptrade_market_error_name_char_limt")),!1):t.includes(o)?(w.warn(h("swaptrade_market_error_watchlist_name_already_exist")),!1):t.length>=r?(w.warn(h("swaptrade_market_error_max_group_limit")),!1):!0:(w.warn(h("swaptrade_market_error_name_empty")),!1);function Be(o){return Ce(o,500,{leading:!0,trailing:!1})}var go=o=>{let{setEditGroup:e,setManagedGroupList:t,topGroup:r,sortGroup:n,deleteGroup:i,renameGroup:s}=U,{editGroup:p,managedGroupList:d}=x,{refreshCollectionData:u}=Ie,g=Be(y=>{t(y),(0,ve.startTransition)(()=>{n(y),o({button_name:"drag_move"})})}),_=Be(y=>{(0,ve.startTransition)(()=>{let{id:H}=y,Z=d.findIndex(F=>F.id===H);d.unshift(...d.splice(Z,1)),t([...d]),r(y),o({button_name:"pin_top"})})}),C=Be(y=>{(0,ve.startTransition)(()=>{let{id:H}=y,Z=d.findIndex(F=>F.id===H);d.splice(Z,1),t([...d]),i(y,()=>{u()}),o({button_name:"delete"})})}),v=Be((y,H,Z)=>{(0,ve.startTransition)(()=>{let F=d.findIndex(we=>we.id===y);d.splice(F,1,{...d[F],groupName:H}),t([...d]),s(y,H,Z),o({button_name:"rename"})})}),B=Be(y=>{(0,ve.startTransition)(()=>{e(y)})});return{managedGroupList:d,setManagedGroupList:t,editGroup:p,handlerEditGroup:B,handlerDragEnd:g,handlerTopSort:_,handlerDelete:C,handlerRename:v}};c();l();var f=k(b()),D=k(re());c();l();var I={"create-box":"_create-box_uuypa_1",createBox:"_create-box_uuypa_1","create-input-container":"_create-input-container_uuypa_8",createInputContainer:"_create-input-container_uuypa_8","create-input":"_create-input_uuypa_8",createInput:"_create-input_uuypa_8","group-item":"_group-item_uuypa_15",groupItem:"_group-item_uuypa_15","item-left":"_item-left_uuypa_24",itemLeft:"_item-left_uuypa_24","edit-input":"_edit-input_uuypa_29",editInput:"_edit-input_uuypa_29","item-name":"_item-name_uuypa_32",itemName:"_item-name_uuypa_32",sm:"_sm_uuypa_38","item-right":"_item-right_uuypa_41",itemRight:"_item-right_uuypa_41","icon-class":"_icon-class_uuypa_48",iconClass:"_icon-class_uuypa_48","success-icon":"_success-icon_uuypa_53",successIcon:"_success-icon_uuypa_53","cancel-icon":"_cancel-icon_uuypa_56",cancelIcon:"_cancel-icon_uuypa_56","confirm-title":"_confirm-title_uuypa_59",confirmTitle:"_confirm-title_uuypa_59","title-icon":"_title-icon_uuypa_63",titleIcon:"_title-icon_uuypa_63","confirm-text":"_confirm-text_uuypa_67",confirmText:"_confirm-text_uuypa_67","dialog-confirmation":"_dialog-confirmation_uuypa_70",dialogConfirmation:"_dialog-confirmation_uuypa_70"};var fo=K(({onCreated:o,handleGroupCallback:e})=>{let[t,r]=(0,f.useState)(""),[n,i]=(0,f.useState)(!1),{managedGroupList:s,editGroup:p}=x,{createGroup:d}=U;(0,f.useEffect)(()=>{i(!!p?.id),p?.id&&r("")},[p?.id]);let u=async()=>{let C=qe(t.trim());(0,f.startTransition)(()=>{let v=s.map(y=>y.groupName||"");Qt({value:C,values:v})&&(d(C,()=>{r(""),o()}),e({button_name:"add_group"}))})},g=C=>{let v=C.target?.value;r(v)},_=h("swaptrade_market_watchlist_dialog_input_new_group");return f.default.createElement("div",{className:(0,D.default)(I.createBox)},f.default.createElement(Re,{className:(0,D.default)(I.createInputContainer),innerClassName:(0,D.default)(I.createInput),value:t,onChange:g,size:Re.SIZE.lg,placeholder:_,onPressEnter:u,disabled:n}),f.default.createElement(ie,{rect:!0,type:ie.TYPE.primary,onClick:u,icon:"okx-defi-x1-liquidity-plus",iconType:ie.ICON_POSITION.leading,disabled:n},h("swaptrade_market_btn_create")))}),Eo=K(({handlerRename:o})=>{let{managedGroupList:e,editGroup:t}=x,{setEditGroup:r}=U,[n,i]=(0,f.useState)(t?.groupName),s=g=>{let _=g.target?.value;i(_)},p=()=>{(0,f.startTransition)(()=>{i(""),r(null)})},d=()=>{(0,f.startTransition)(()=>{let g=qe(String(n).trim());if(t?.groupName===g){p();return}let _=e?.map(v=>v.groupName||"");Qt({value:g,values:_,valuesCount:lt+1})&&o(t?.id,g,()=>{p()})})},u=h("swaptrade_market_watchlist_dialog_input_new_group");return f.default.createElement("div",{className:(0,D.default)(I.groupItem)},f.default.createElement(Re,{className:(0,D.default)(I.itemLeft),innerClassName:(0,D.default)(I.editInput),value:n,onChange:s,size:Re.SIZE.sm,placeholder:u}),f.default.createElement("div",{className:(0,D.default)(I.itemRight)},f.default.createElement(ce,{title:h("commonall_filter_btn_save"),size:20,iconClass:(0,D.default)(I.iconClass,I.successIcon),iconName:"okds-success-circle-fill",onClick:d}),f.default.createElement(ce,{title:h("commonall_text_btn_cancel"),size:20,iconClass:(0,D.default)(I.iconClass,I.cancelIcon),iconName:"okds-fail-circle-fill",onClick:p})))}),xo=K(({item:o,handlerTopSort:e,handlerDelete:t,handlerEditGroup:r,delDisabled:n})=>{let{isSm:i}=et(),[s,p]=(0,f.useState)(!1),d=()=>{p(!0)};return f.default.createElement(f.default.Fragment,null,s&&f.default.createElement(ne,{className:I.dialogConfirmation,onClick:u=>{u.stopPropagation()}},f.default.createElement(ze.Confirmation,{visible:s,title:f.default.createElement("div",{className:I.confirmTitle},f.default.createElement(he,{className:I.titleIcon,type:"okds-warning-circle-fill",size:28}),h("swaptrade_market_watchlist_dialog_title_delete_group")),confirmText:h("commonall_filter_btn_delete"),cancelText:h("commonall_text_btn_cancel"),onConfirm:()=>{p(!1),t(o)},onCancel:()=>{p(!1)},onClose:()=>{p(!1)}},f.default.createElement("div",{className:I.confirmText},h("swaptrade_market_watchlist_dialog_desc_delete_group")))),f.default.createElement("div",{className:(0,D.default)(I.groupItem)},f.default.createElement("div",{className:(0,D.default)(I.itemLeft)},f.default.createElement(ot,{className:(0,D.default)(I.itemName,i&&I.sm),data:o?.groupName}),f.default.createElement("span",{className:(0,D.default)(I.itemCount,"mt-4")},h("swaptrade_market_watchlist_dialog_desc_token_num",{num:o?.tokenCount}))),f.default.createElement("div",{className:(0,D.default)(I.itemRight)},f.default.createElement(ce,{title:h("swaptrade_market_tooltips_move_top"),size:20,iconClass:I.iconClass,iconName:"okds-back-to-top",onClick:()=>e(o)}),f.default.createElement(ce,{title:h("swaptrade_market_filter_btn_edit"),size:20,iconClass:I.iconClass,iconName:"okx-defi-marketplace-edit",onClick:()=>r(o)}),f.default.createElement(ce,{title:h("commonall_filter_btn_delete"),size:20,iconClass:I.iconClass,iconName:"okds-trash",disabled:n,onClick:d}))))});c();l();var O={"group-button":"_group-button_1xujz_1",groupButton:"_group-button_1xujz_1","dialog-box":"_dialog-box_1xujz_4",dialogBox:"_dialog-box_1xujz_4","dialog-body":"_dialog-body_1xujz_4",dialogBody:"_dialog-body_1xujz_4",sm:"_sm_1xujz_8","wallet-dialog-box":"_wallet-dialog-box_1xujz_11",walletDialogBox:"_wallet-dialog-box_1xujz_11","drag-container":"_drag-container_1xujz_20",dragContainer:"_drag-container_1xujz_20","drag-item":"_drag-item_1xujz_39",dragItem:"_drag-item_1xujz_39","item-disabled":"_item-disabled_1xujz_47",itemDisabled:"_item-disabled_1xujz_47","drag-handler":"_drag-handler_1xujz_50",dragHandler:"_drag-handler_1xujz_50","custom-drag-handler":"_custom-drag-handler_1xujz_54",customDragHandler:"_custom-drag-handler_1xujz_54","empty-drag-handler":"_empty-drag-handler_1xujz_60",emptyDragHandler:"_empty-drag-handler_1xujz_60","drag-icon":"_drag-icon_1xujz_64",dragIcon:"_drag-icon_1xujz_64","group-manage":"_group-manage_1xujz_67",groupManage:"_group-manage_1xujz_67"};var ia=o=>{let{getHandlerRef:e,listeners:t,disabled:r}=o,{editGroup:n}=x;return n?.id&&!r?P.default.createElement("div",{className:O.emptyDragHandler}):P.default.createElement("div",{ref:e,...t,className:(0,le.default)(O.customDragHandler)},P.default.createElement(ce,{title:h("swaptrade_market_watchlist_tooltip_drag_sort"),size:20,iconClass:O.dragIcon,iconName:"okds-hamburger"}))},sa=K(o=>{let{handleGroupCallback:e}=o,{editGroup:t,handlerEditGroup:r,managedGroupList:n,handlerDragEnd:i,handlerTopSort:s,handlerDelete:p,handlerRename:d}=go(e);return P.default.createElement(cr.Sortable,{onDragEnd:i,dataSource:n,mobileLongPress:!0,withVirtualPlaceholder:!0,virtualPlaceholderOpacity:.3,itemClassName:(0,le.default)(O.dragItem),itemDraggingClassName:(0,le.default)(O.dragItem),handlerClassName:(0,le.default)(O.dragHandler),overlayMountToBody:!0,renderHandler:ia},n.map(u=>u.id===t?.id?P.default.createElement(Eo,{key:u.id,handlerRename:d}):P.default.createElement(xo,{key:u.id,item:u,handlerEditGroup:r,handlerTopSort:s,handlerDelete:p,delDisabled:n.length===1})))}),ca=o=>{let{visible:e,onClose:t,handleGroupCallback:r}=o,{setEditGroup:n,fetchGroups:i}=U,{isSm:s}=et(),p=(0,P.useRef)(null),d=()=>{setTimeout(()=>{p?.current?.scrollTo({top:p.current.scrollHeight,behavior:"smooth"})},100)},u=()=>{n({}),t()};return(0,P.useEffect)(()=>{e&&i(!0)},[e]),P.default.createElement(ze.Action,{visible:e,title:h("swaptrade_market_watchlist_dialog_title_manage_groups"),onClose:u,scrollBoxClassName:(0,le.default)(O.dialogBox,{[O.walletDialogBox]:A.groupDialogBoxScroll}),containerClassName:(0,le.default)(O.dialogBody,s&&O.sm),width:600},P.default.createElement(fo,{onCreated:d,handleGroupCallback:r}),P.default.createElement("div",{className:(0,le.default)(O.dragContainer,s&&O.sm),ref:p},P.default.createElement(sa,{handleGroupCallback:r})))},Co=K(ca);var la=o=>{let{size:e="",onClick:t,isButton:r=!1,className:n="",onVisible:i=()=>{},onClose:s=()=>{},handleGroupCallback:p=()=>{}}=o,[d,u]=(0,G.useState)(!1),g=()=>{(0,G.startTransition)(()=>{u(!1),setTimeout(()=>{i(!1),s?.()},200)})},_=(v,B)=>{(0,G.startTransition)(()=>{u(!0),setTimeout(()=>{i(!0),t(v,B),p({source:B})},100)})},C=e||ie.SIZE.xs;return G.default.createElement(G.default.Fragment,null,r?G.default.createElement(ie,{className:(0,mt.default)(O.groupButton,n),rect:!0,type:ie.TYPE.gray,onClick:v=>_(v,"list_group_manage"),icon:"okx-defi-chart-settings",size:C},h("swaptrade_market_btn_manage")):G.default.createElement(ne,{className:(0,mt.default)(O.groupManage,n),onClick:v=>_(v,"add_token_popup")},G.default.createElement(he,{className:(0,mt.default)("mr-8"),size:16,type:"okx-defi-chart-settings"}),G.default.createElement("span",null,h("swaptrade_market_watchlist_dialog_title_manage_groups"))),G.default.createElement(Co,{visible:d,onClose:g,handleGroupCallback:p}))},To=K(la);c();l();var _t={"dividing-line":"_dividing-line_xp5n5_1",dividingLine:"_dividing-line_xp5n5_1","group-manage":"_group-manage_xp5n5_5",groupManage:"_group-manage_xp5n5_5"};var pa=(o,e)=>{let{options:t=[],onCheck:r=()=>{},onGroupManageVisible:n,handleGroupCallback:i}=o;return ge.default.createElement("div",{className:_t.groupContent,ref:e},ge.default.createElement(uo,{options:t,onCheck:r}),ge.default.createElement("div",{className:_t.dividingLine}),ge.default.createElement(To,{className:_t.groupManage,onVisible:n,handleGroupCallback:i,onClick:()=>{}}))},ko=(0,ge.forwardRef)(pa);c();l();var $=k(b());var Jt=(o,e=!1,t=()=>Promise.resolve(!0),r=()=>{})=>{let n=(0,$.useRef)(null),[i,s]=(0,$.useState)(e),[p,d]=(0,$.useState)(!1),[u,g]=(0,$.useState)(!1),[_,C]=(0,$.useState)([]),{debounceUpdateTokenCollectStatus:v,fetchTokenWatchGroup:B,emitUpdateTokenCollectMapData:y}=Ie,{computedCollectionMap:H}=N,{computedGroupOptions:Z}=x,{initGroupList:F}=U,we=async T=>{if(!T){let{chainId:R,tokenContractAddress:ae}=o,te=await B({chainId:R,tokenContractAddress:ae});Array.isArray(te)&&C(te)}g(T)},Se=async()=>{if(p)d(!p),r(!p);else{let{chainId:T,tokenContractAddress:R}=o,ee=await B({chainId:T,tokenContractAddress:R},1e3,!1);Array.isArray(ee)&&(C(ee),d(!p),r(!p)),Z?.length||F(!0)}},He=(T,R)=>{let ae=_.findIndex(te=>te.groupId===T.groupId),ee=T.tokenCount+(R?1:-1);_.splice(ae,1,{...T,status:R,tokenCount:ee}),C([..._])},ye=(0,$.useMemo)(()=>_.filter(T=>T.status===1).map(T=>T.groupId),[_]),ht=async(T,R)=>{if(!await t({tokenInfo:o,groupIds:ye,groupInfo:T}))return;let{groupName:ee,tokenCount:te,status:yo}=T;if(yo===0&&te>=ao){w.warn(h("swaptrade_market_error_watchlist_token_limit",{groupName:ee}));return}v({tokenInfo:o,groupInfo:T,callBack:({selected:Ke})=>{He(T,Ke?1:0);let Ve=[];Ke?Ve=[...ye,T.groupId]:Ve=ye.filter(Ro=>Ro!==T.groupId),y({tokenInfo:o,selected:Ke,afterGroupIds:Ve,groupInfo:T}),R&&R(Ke,o,Ve)}})},Fe=Ge(o);return(0,$.useEffect)(()=>{let T=!!H?.[Fe]||e;s(T)},[e,H,Fe]),(0,$.useEffect)(()=>{let T=R=>{!u&&n.current&&!n.current.contains(R.target)&&setTimeout(()=>{d(!1),r(!1)},100)};return p?window.addEventListener("mousedown",T,!0):window.removeEventListener("mousedown",T,!0),()=>window.removeEventListener("mousedown",T,!0)},[n,p,u]),{popupRef:n,isCollection:i,setIsCollection:s,options:_,updateOptions:He,showPopup:p,setShowPopup:d,onGroupManageVisible:we,clickIcon:Se,onCheck:ht}};c();l();var Zt={container:"_container_zydai_1","group-popup":"_group-popup_zydai_4",groupPopup:"_group-popup_zydai_4"};var da=o=>{let{accountId:e,tokenInfo:t,collected:r=!1,iconSize:n,className:i="",handleIconCallback:s=()=>{},collectCallBack:p=()=>{},handleGroupCallback:d=()=>{},clickedPromise:u=()=>Promise.resolve(!0),checkedPromise:g=()=>Promise.resolve(!0),fetchCollectGroupUrl:_,groupDialogBoxScroll:C,showTooltip:v=!1,tokenCollectWalletAddress:B,isSelfProject:y=!1}=o,{popupRef:H,options:Z,isCollection:F,setIsCollection:we,showPopup:Se,onGroupManageVisible:He,clickIcon:ye,onCheck:ht}=Jt(t,r,g),Fe=async R=>{R.stopPropagation(),R.preventDefault(),await u()&&(ye(),s())},T=R=>{ht(R,(ae,ee,te)=>{p?.(ae,ee,te),we(!!te?.length)})};return(0,J.useEffect)(()=>{Ie.initCollectionData()},[]),(0,J.useEffect)(()=>{e?Ae.initCommonTokenCollectAction({accountId:e,fetchCollectGroupUrl:_,groupDialogBoxScroll:C,tokenCollectWalletAddress:B}):Ae.destroyCommonTokenCollectAction()},[e,_,C,B]),J.default.createElement(wt,{isSelfProject:y},J.default.createElement("div",{className:Zt.container},J.default.createElement(gt,{useReactTransition:!0,stopPropagation:!0,hideArrow:!0,placement:gt.DIRECTION.bottomRight,content:Se?J.default.createElement(ko,{ref:H,options:Z,onGroupManageVisible:He,onCheck:T,handleGroupCallback:d}):null,show:Se,contentClassName:Zt.groupPopup},J.default.createElement(xe,{delayShow:400,title:h(F?"swaptrade_market_header_tooltips_remove_watchlist":"swaptrade_market_header_tooltips_addto_watchlist"),disabled:v===!1||Se},J.default.createElement(Vt,{className:i,isCollection:F,fontSize:n,onClick:Fe})))))},ua=K(da);c();l();var ma={initGroupList:U.initGroupList,destroyGroupList:U.resetStore,initTokenCollectAction:Ae.initCommonTokenCollectAction,destroyTokenCollectAction:Ae.destroyCommonTokenCollectAction},_a=ma;c();l();ir();c();l();var ha="referrer_page_url_storage_key";var oe={MARKER_SEARCH:"market_search",RANKING_SEARCH:"ranking_search",TOKEN_DETAILS_SEARCH:"token_details_search",HOT_LIST:"hot_list",WATCH_LIST:"watch_list",TREND_TOKEN_LIST:"token_detail_trending",WATCH_TOKEN_LIST:"token_detail_watch",MY_TOKEN_LIST:"token_detail_holding",SWAP_DETAIL:"swap",MARKET_TRENDING:"market_trending",MARKET_HOT_SEARCH:"market_hot_search",MARKET_NEWEST:"market_newest",MARKET_MEME_PUMP:"market_meme_pump",MARKET_SIGNAL:"market_signal",MARKET_TRACKER:"market_tracker",DISCOVER_PAGE:"discover_page"},I_={[oe.MARKET_TRENDING]:"MARKET_Tokens",[oe.MARKET_HOT_SEARCH]:"MARKET_Tokens",[oe.MARKET_NEWEST]:"MARKET_Tokens",[oe.MARKET_MEME_PUMP]:"MARKET_Meme Pump",[oe.MARKET_SIGNAL]:"MARKET_Signal",[oe.MARKET_TRACKER]:"MARKET_Tracker_Address",[oe.WATCH_LIST]:"MARKET_Tracker_Token",[oe.DISCOVER_PAGE]:Te.DISCOVER_FEED},v_={TAB_NAME:{history:"history",fund_pool:"liq",holders:"holders",my_position:"position",traders:"trader"},QUICK_TAB_NAME:{trending:"trending",watchlist:"watchlist",my_tokens:"holding"},CURRENCY_SWITCH:{stable:"stable",native_token:"native_token"},MINI_CHART:{holders:"holders",top_hundred:"top_hundred",avg_holding:"avg_holding",holding_greater_than_10u:"holding_greater_than_10u",dev_holding:"dev_holding",suspicious_holding:"suspicious_holding",suspected_insider:"suspected_insider"},point:1,yes:"yes",no:"no"};var Io=(o,e=null)=>{try{return xt.g?.get?.(o)??e}catch(t){return Ao.stuff("safeGlobalGet error:",t),e}};var ga=o=>{let{pathname:e}=Or(o);return Er.find(r=>new RegExp(r.reg).test(e))?.params||{}},vo="dex_source_env",fa="dex-swap/bridge",Ea="dex-swap/meme",V_=()=>{if(V())return{};if(tt())return Io(vo);if(Xe()){let o=Ye.SWAP,e=window?.location?.hash;e?.indexOf(fa)>-1?o=Ye.BRIDGE:e?.indexOf(Ea)>-1&&(o=Ye.MEME);let t=Te.PLUGIN;return br()&&(t=Te.TGAPP,xt.get("pageSource")==="bot"&&(t=Te.COMMAND)),{source:t,business_type:o,trade_dialog:"no"}}return ga(hr.href)};var wo=()=>{let o=Io(vo,{}),e=je(o,"wallet_info")||{},t=je(o,"widgetsdk_version");return ar(e)&&!t?null:new URLSearchParams({...e,widgetSdkVersion:je(o,"widgetsdk_version")}).toString()};c();l();function er(){return Xe()?{walletType:"okwallet-extension"}:j.getProjectStorage("onChain")}var So={HEART:"heart",HEART_FINISH:"heartFinish",UPDATE_HASH:"updateHash",UPDATE_HASH_ERROR:"updateHashError",SAVE_ORDER:"saveOrder",SAVE_ORDER_PARAMS:"saveOrderParams",SAVE_ORDER_ERROR:"saveOrderError",SEND_ERROR:"sendError",ON_WALLET_FAIL:"onWalletFail",PAYLOAD:"payload",UPDATE_NONCE:"updateNonce",UPDATE_NONCE_FAIL:"updateNonceFail",CLOSE_CONFIRM_SWAP:"closeConfirmSwap",BEFOREUNLOAD:"beforeunload",CANCEL_ORDER:"cancelOrder",REDEEM_ORDER:"redeemOrder",ERROR_BOUNDARY:"errorBoundary",STUFF_LOG:"stuffLog",GET_LIMIT_CALL_DATA_ERROR:"getLimitCallDataError",SAVE_APPROVE:"saveApprove",SAVE_APPROVE_ERROR:"saveApproveError",APPROVE_DATA:"approveData",APPROVE_TOKEN_ERROR:"approveTokenError",CHAIN_ID_ADDRESS_MAP_IS_EMPTY:"chainIdAddressMapIsEmpty",UPDATE_BTC_BALANCE_ERROR_BEFORE_SWAP:"updateBtcBalanceErrorBeforeSwap",CHAIN_INFO:"chainInfo",ON_CHAIN_CHANGE:"onChainChange",LINK_SWITCH_START:"linkSwitchStart",LINK_SWITCH_SUCCESS:"linkSwitchSuccess",LINK_SWITCH_FAILED:"linkSwitchFailed",LINK_SWITCH_END:"linkSwitchEnd",DOUBLE_CHECK_CHAIN_ID_SUCCESS:"doubleCheckChainIdSuccess",DOUBLE_CHECK_CHAIN_ID_FAILED:"doubleCheckChainIdFailed",GET_CHAIN_ID_FAILED:"getChainIdFailed",UPDATE_APPROVAL_GAS_INFO_ERROR:"updateApprovalGasInfoError",WALLET_INFO:"walletInfo",OVER_VIEW_PRE_DATA_ERROR:"overViewInfoPreDataError",TRANSACTION_HISTORY_PRE_DATA_ERROR:"transactionHistoryPreDataError",REDEEM_ORDER_CALL_DATA:"redeemOrderCallData",REDEEM_ORDER_CALL_DATA_ERROR:"redeemOrderCallDataError",REDEEM_ORDER_ERROR:"redeemOrderError",INTENT_QUOTE_CALLDATA_ERROR:"intentQuoteCallDataError",INTENT_SWAP_SIGN_ERROR:"intentSwapSignError",INTENT_ORDER_CREATE_ERROR:"intentOrderCreateError",INTENT_SWAP_CALLDATA_ERROR:"intentSwapCalldataError",INTENT_SWAP_PROCESS_ERROR:"intentSwapProcessError",REGISTER_CO_LISTING_ERROR:"registerCoListingError",BEFORE_SEND_TRANSACTION_ERROR:"beforeSendTransactionError",TRANSACTION_HISTORY_LIST_ERROR:"transaction_history_list_error",TRANSACTION_HISTORY_INFO_ERROR:"transaction_history_info_error",EXTENSION_SWITCH_BTC_ADDRESS_ERROR:"extensionSwitchBtcAddressError",CHECK_CHAIN_ID_BEFORE_SEND_TRANSACTION:"checkChainIdBeforeSendTransaction",CHECK_CHAIN_ID_AFTER_SEND_TRANSACTION:"checkChainIdAfterSendTransaction",WIDGET_UPDATE_PROVIDER_ERROR:"widgetUpdateProviderError",WIDGET_DISCONNECT_WALLET_ERROR:"widgetDisconnectWalletError",OK_GLOBAL_LOCALE_MAP_IS_EMPTY:"okGlobalLocaleMapIsEmpty",SET_LANGUAGE_ERROR:"setLanguageError",SIGN_PERMIT2_DATA:"signPermit2Data",LIMIT_ORDER_TOKEN_PAIR_ERROR:"limitOrderTokenPairError",LIMIT_TOKEN_CONFIG_EMPTY:"limitChainListTokenConfigIsEmpty",LIMIT_TOKEN_CONFIG_DIFF_CHAIN:"limitChainListTokenConfigIsDiffChain",SWAP_SLIPPAGER_MEV_SETTING:"swapSlippagerMevSetting",BA_FANG_SDK_INIT_ERROR:"baFangSdkInitError",BA_FANG_SDK_INIT_SUCCESS:"baFangSdkInitSuccess",BA_FANG_SDK_INIT_FAILED:"baFangSdkInitFailed",MEME_SWAP_VALUE_DIFF_ERROR:"memeSwapValueDiffError",MEME_SWAP_GET_CALLDATA_PARAMS:"memeSwapGetCalldataParams",MEME_SWAP_GET_CALLDATA_ERROR:"memeSwapGetCalldataError",MEME_SWAP_CONFIRM_ORDER_ERROR:"memeSwapConfirmOrderError",MEME_SWAP_PRE_EXECUTE_PARAMS:"memeSwapPreExecuteParams",MEME_SWAP_PRE_EXECUTE_ERR:"memeSwapPreExecuteErr",MEME_SWAP_PRE_EXECUTE_RESULT_ERR:"memeSwapPreExecuteResultErr",MEME_SWAP_PRE_EXECUTE_RESULT:"memeSwapPreExecuteResult",MEME_SWAP_SIGN_PARAMS:"memeSwapSgParams",MEME_SWAP_SIGN_SUCCESS:"memeSwapSgSuccess",MEME_SWAP_SIGN_ERROR:"memeSwapSgERROR",MEME_SWAP_BROADCAST_PARAMS:"memeSwapBroadcastParams",MEME_SWAP_BROADCAST_ERROR:"memeSwapBroadcastError",MEME_SWAP_BROADCAST_SUCCESS:"memeSwapBroadcastSuccess",GET_BALANCE:"getBalanceV2",CLICK_WALLET_SWAP_BUTTON:"clickWalletSwapButtonV2",BALANCE_IS_ERROR:"balanceIsErrorV2",USER_ON_OR_OFF_MEV_IN_WALLET:"userOnOrOffMevInWallet",MEME_SWAP_AMOUNT_SELECT:"memeSwapAmountSelect",MEME_SWAP_AMOUNT_INPUT:"memeSwapAmountInput",MEME_SWAP_CUSTOM_PRESET:"memeSwapCustomPreset",COLLECT_ADDRESS_SIGN_INFO:"collectAddressSignInfo",COLLECT_ADDRESS_SIGN_ERROR:"collectAddressSignError",LIMIT_ORDER_QUOTE_ERROR_RATE:"limitOrderQuoteErrorRate",LIMIT_ORDER_CALL_DATA:"limitOrderCallData",LIMIT_ORDER_CALL_DATA_SUCCESS:"limitOrderCallDataSuccess",LIMIT_ORDER_CALL_DATA_ERROR:"limitOrderCallDataError",LIMIT_ORDER_CALL_DATA_SIGN:"limitOrderCallDataSign",LIMIT_ORDER_CALL_DATA_SIGN_SUCCESS:"limitOrderCallDataSignSuccess",LIMIT_ORDER_CALL_DATA_SIGN_ERROR:"limitOrderCallDataSignError",LIMIT_ORDER_BROADCAST:"limitOrderBroadcast",LIMIT_ORDER_BROADCAST_SUCCESS:"limitOrderBroadcastSuccess",LIMIT_ORDER_BROADCAST_ERROR:"limitOrderBroadcastError",PRESET_EDIT_SAVE:"presetEditSave",PRESET_CHANGE_SELECT_TYPE:"presetChangeSelectType",QUICK_BUY_CALL_DATA:"quickBuyCallData",QUICK_BUY_WALLET_ERROR:"quick_buyCallDataError",QUICK_BUY_BROADCAST:"quickBuyBroadcast",SWAP_PRECHECK_PROMPT:"swapPrecheckPrompt",OKXGLOBAL_PREFERENCE_IS_EMPTY:"okxGlobalPreferenceIsEmpty",FETCH_CLAIM_CALDATA_ERROR:"fetchClaimCaldataError",CLAIM_PAYLOAD:"claimPayload",UPDATE_CLAIM_ORDER:"updateClaimOrder",TOKEN_HOLDER_FETCH_AUTH_INFO_ERROR:"tokenHolderFetchAuthInfoError"};var ih=(o={})=>{let e=o.data?.code||o.error_code||o.code||"",t=o.error_message||o.message||"";return{errorCode:e,errorMsg:t}},xa=()=>At()?{widgetExtInfo:wo()}:{},Ca={business:"dex"},tr=class{constructor(e){L(this,"setTags",e=>{this.tags={...this.tags,...e}});L(this,"extendTags",()=>{let{walletType:e,scanAppType:t}=er();return nr({walletType:e,scanAppType:t,taskId:this.uid,...xa(),...this.tags},or)});L(this,"wrapHandle",(e,t,r={})=>{e(t,{...r,tags:{...this.extendTags(),...r?.tags}})});L(this,"debug",(...e)=>{this.wrapHandle(pe.debug,...e)});L(this,"info",(...e)=>{this.wrapHandle(pe.info,...e)});L(this,"error",(...e)=>{this.wrapHandle(pe.error,...e)});L(this,"warn",(...e)=>{this.wrapHandle(pe.warn,...e)});L(this,"stuff",(...e)=>{e.length===1&&typeof e[0]=="string"?this.wrapHandle(pe.info,So.STUFF_LOG,{msg:e[0]}):this.wrapHandle(pe.info,So.STUFF_LOG,...e)});L(this,"generateUUID",()=>{this.uid=ct.getWalletId()});L(this,"timerRef",null);L(this,"heartNumber",0);L(this,"uid","");L(this,"keepLive",()=>{this.generateUUID(),this.heartNumber=0,this.timerRef&&clearInterval(this.timerRef),this.heartCheck(),this.timerRef=setInterval(()=>{this.heartCheck()},30*1e3)});L(this,"heartCheck",()=>{this.info("heart",{tags:{heartNumber:this.heartNumber}}),this.heartNumber++});L(this,"removeKeep",()=>{this.timerRef&&clearInterval(this.timerRef),this.info("heart finish",{tags:{heartNumber:this.heartNumber}}),this.heartNumber=0,this.uid=""});this.tags=e}};var Ao=new tr(Ca);export{It as a,eo as b,ct as c,x as d,Jt as e,ua as f,_a as g,At as h,ha as i,I_ as j,v_ as k,So as l,ih as m,Ao as n,V_ as o};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-IFQDHP3Z.js.map
