import{a as yi,b as Ei,k as vi}from"./chunk-PFAKNC74.js";import{a as hi,b as Ci}from"./chunk-CFQQ6KCO.js";import{a as _o,b as Oo,c as Lo,d as Lt,e as _i,f as Ti,g as gi,h as xi}from"./chunk-62AO3YNL.js";import{a as oi,b as Dt,c as ai,d as mi,e as li,f as ci,h as pi,i as di,j as ui,m as fi}from"./chunk-QJYNTF2A.js";import{a as N,b as k,c as Ze,d as ti,e as ri,f as De,g as ni,h as Ot,i as ii,k as si}from"./chunk-SR7OSGG2.js";import"./chunk-TW4KQJBW.js";import"./chunk-7DDBBEVP.js";import{a as ve,b as Pe,c as fo,d as jn,e as Jn,f as Rn,g as ei,i as Pt}from"./chunk-XOLRBQKR.js";import{a as Xn}from"./chunk-54L4J5QB.js";import{d as E}from"./chunk-62FCUUV6.js";import"./chunk-A52G67PA.js";import{a as qn,b as Qn}from"./chunk-RG4D4JRN.js";import{a as Se}from"./chunk-7VC7N33E.js";import{a as Zn}from"./chunk-EI5LQA46.js";import{a as Mn,b as Un,c as Wn,d as $n,e as Yn,f as Kn}from"./chunk-MZGKA3VL.js";import{a as Hn}from"./chunk-Q4BJZ4WV.js";import{a as Fn}from"./chunk-BYIL3SNH.js";import"./chunk-7XLDA2AD.js";import"./chunk-GNELMQ7P.js";import{a as Vn}from"./chunk-5SHXKUU3.js";import"./chunk-BVRLWTY5.js";import"./chunk-7QDSLHV2.js";import"./chunk-7BNH3Q5V.js";import"./chunk-SOSMI6LE.js";import"./chunk-ZIGLMPS5.js";import{a as Ln}from"./chunk-JIT4MLY3.js";import"./chunk-UDTGE34O.js";import{a as On}from"./chunk-NZOYKJV7.js";import{a as Dn}from"./chunk-7GRDW7ZD.js";import"./chunk-C6HPT3PU.js";import"./chunk-ZZH7FUZX.js";import"./chunk-7FBDFG5E.js";import"./chunk-IK5VIKIS.js";import{a as Nn,d as bn}from"./chunk-Y6T5M4AD.js";import"./chunk-J3K74NCM.js";import"./chunk-UWCOP3B7.js";import{a as gr}from"./chunk-UFD2MUZI.js";import"./chunk-CEM2RCMY.js";import{a as wn}from"./chunk-SKXNZFRN.js";import{a as Do,b as Pn,d as hr}from"./chunk-7X4DXTSI.js";import{a as Sn}from"./chunk-LURPYTXM.js";import"./chunk-OADPFYBO.js";import{a as An,b as xr}from"./chunk-64LKONIY.js";import"./chunk-VVJ6BK3Q.js";import"./chunk-FUVVPSUI.js";import{l as Tr}from"./chunk-NKIUEXOA.js";import"./chunk-EP23RRSK.js";import{h as uo}from"./chunk-4YDY4B6P.js";import{b as kn}from"./chunk-CGFS6AE4.js";import"./chunk-DDT324RS.js";import"./chunk-2TQXMDYZ.js";import"./chunk-RNMISV22.js";import"./chunk-A267SEFJ.js";import{a as ie}from"./chunk-VR7OPIR6.js";import"./chunk-UXJTBFQP.js";import"./chunk-W4ECJTFI.js";import{a as St,b as Bn}from"./chunk-L2RHVUUV.js";import"./chunk-U2LZ7AZA.js";import"./chunk-7A4GWZDF.js";import"./chunk-SKR2JKRV.js";import"./chunk-LKSOM4R2.js";import"./chunk-HBWTVKRO.js";import"./chunk-4ZGOJDNI.js";import"./chunk-ZPQXBUKT.js";import"./chunk-35Y7QMWN.js";import"./chunk-VIT5MDY4.js";import{a as In}from"./chunk-RH6WPBEZ.js";import"./chunk-TLCBIZ4W.js";import"./chunk-TZ7T5CIH.js";import"./chunk-C5O75IHM.js";import"./chunk-O3U6IW2R.js";import"./chunk-MZGXPN5Z.js";import"./chunk-PIQKWFMY.js";import"./chunk-32XJE5HT.js";import"./chunk-CDNJY7Z3.js";import"./chunk-DBWXHHZT.js";import"./chunk-VVKAQ7K5.js";import"./chunk-7JSJY3SQ.js";import"./chunk-NWY3GPDX.js";import"./chunk-6JEFG7DQ.js";import"./chunk-HUOF3MWN.js";import{b as zn}from"./chunk-6SNKRANG.js";import{a as Gn}from"./chunk-YEFTFSOJ.js";import{a as At}from"./chunk-L6DDH2OK.js";import"./chunk-WPAZ67JY.js";import"./chunk-B6YXJZUF.js";import"./chunk-4I2JSOYJ.js";import"./chunk-GTN3RCGH.js";import"./chunk-3VKPY2QL.js";import"./chunk-AOSRFQ4E.js";import"./chunk-ULL77AIR.js";import"./chunk-PJYSMRRW.js";import"./chunk-GKQQDLVP.js";import"./chunk-7YKP5374.js";import"./chunk-KGG7DXMS.js";import"./chunk-FGIHS4ZF.js";import"./chunk-U65R4NF3.js";import"./chunk-OTUJWRS5.js";import"./chunk-WIW5JVRP.js";import"./chunk-7CXUJS4C.js";import"./chunk-ULXZERAJ.js";import"./chunk-PJ5X5CUU.js";import"./chunk-TSVRDRPO.js";import"./chunk-PPTAKQQT.js";import"./chunk-IFQDHP3Z.js";import"./chunk-DA5RJYYW.js";import"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import"./chunk-ZTIVM5ML.js";import"./chunk-2E2OBQTS.js";import"./chunk-VICEBZ4G.js";import"./chunk-WO6OHGU2.js";import"./chunk-3S4BGA37.js";import"./chunk-POP3LIKS.js";import"./chunk-PMRTKWFS.js";import"./chunk-G44PPNNQ.js";import"./chunk-K2BSCLBF.js";import"./chunk-PZY7HRHV.js";import"./chunk-Z2L2F5M5.js";import"./chunk-IPLOJJIA.js";import"./chunk-RLPRDJ34.js";import"./chunk-2ASICJQL.js";import"./chunk-TQWSBAXG.js";import"./chunk-6JVCYB7O.js";import"./chunk-GR42TVIZ.js";import"./chunk-NALXMZEC.js";import"./chunk-UX47DP5M.js";import"./chunk-QMSSDBOR.js";import"./chunk-5RCFYEZ6.js";import{a as Na,c as po,d as te,e as So,f as _n}from"./chunk-2KUTI2VO.js";import{b as J,c as ue,d as sn,e as yt,f as co,g as an,h as Et,i as mn,j as pr,k as wo,l as vt,m as Ao,n as ln,o as cn,p as pn,q as It,r as dn,s as dr,t as un,u as fn,w as kt,x as ur}from"./chunk-XUTIJBNA.js";import"./chunk-LOILO52X.js";import"./chunk-Q6REWZWR.js";import{b as Ct}from"./chunk-FKISPHB5.js";import"./chunk-EFGAB3O3.js";import"./chunk-UNPFRSIN.js";import"./chunk-STU536TK.js";import"./chunk-BULMUVKY.js";import"./chunk-5QHVWW7O.js";import"./chunk-5PDHABUQ.js";import{b as Tn}from"./chunk-B3SXRDEQ.js";import"./chunk-7HRNNJBX.js";import"./chunk-F6UVHIJV.js";import"./chunk-ZLJJZYPU.js";import"./chunk-5TNLDTW5.js";import{b as vn}from"./chunk-LSHLVVX4.js";import{a as Qr}from"./chunk-36PYO4PJ.js";import{b as so}from"./chunk-636UWIUZ.js";import"./chunk-34JXWTF5.js";import"./chunk-JSOLAK4X.js";import"./chunk-R7LZSAVU.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-YGIVEMKT.js";import"./chunk-T4RFDN7D.js";import{c as $r,qa as Yr,va as Kr}from"./chunk-NQAVUB4Q.js";import{a as En}from"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import{c as gn,d as xn,e as fr}from"./chunk-5A3RJQCM.js";import"./chunk-MWPAA6TC.js";import"./chunk-73HPZW2B.js";import"./chunk-LQBCLW7R.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-JMCNWKNZ.js";import"./chunk-MKDQBVRZ.js";import"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-7C7MBE2C.js";import"./chunk-KJWX5V23.js";import{e as rn,h as nn,l as wt,n as fe,o as b,p as hn,s as Cn,u as yn}from"./chunk-KDVER5QK.js";import"./chunk-5CHE7P4E.js";import{a as D}from"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import{b as ne}from"./chunk-67F2WFQO.js";import{d as ht}from"./chunk-QYDRYMWS.js";import{a as _r,h as bt}from"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3C5KK.js";import"./chunk-XZE3L7K7.js";import"./chunk-BO5YOOQA.js";import"./chunk-QTKQMZ5K.js";import{a as z}from"./chunk-Y5K5NJ6U.js";import"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import{a as Ae}from"./chunk-Q7FGM7BT.js";import{b as Nt}from"./chunk-TKE74ERX.js";import"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{$ as Rr,Fa as on,Ga as dt,Ha as ao,Ia as de,Ja as ut,Ka as ft,La as _t,Ma as Tt,Na as gt,Oa as mo,Pa as xt,Y as jr,Z as Jr,a as Q,ia as en,ib as tn,j as Xr}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import{a as pt,r as Ee}from"./chunk-WGVA2GGS.js";import"./chunk-APGT6UVG.js";import{f as lo}from"./chunk-V34MB2FG.js";import{o as oe}from"./chunk-XP3TNE3R.js";import{C as G,Fb as Wr,Jb as zr,Kb as Vr,jc as A}from"./chunk-QRHYK2TW.js";import"./chunk-PODZSVO7.js";import"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as W}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import"./chunk-ZDOH3CEJ.js";import{c as Gr,e as Da}from"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-NU4UJZBB.js";import{a as $,b as qr}from"./chunk-2FDQIA7D.js";import"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import{e as Zr}from"./chunk-YCFHPQAJ.js";import{f as bo,n as io}from"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import"./chunk-OCAFSBNZ.js";import{c as Po}from"./chunk-62ZAND24.js";import{a as re}from"./chunk-SIITVWZR.js";import{$d as cr,I as ba,J as V,K as at,M as $e,O as mt,P as to,Q as Ye,R as No,S as ro,Wa as Aa,X as Ke,Y as me,ba as lt,gc as Hr,ia as j,la as Br,od as Sa,oe as Pa,ra as wa,t as Lr}from"./chunk-QHXUL3YM.js";import{H as I,l as oo,n as M,p as Or,y as a}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{A as ye,D as H,G as no,H as Ur,d as Fr,o as ct,q as P,y as Mr}from"./chunk-XR4SQWL7.js";import"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-NNUMMJQC.js";import"./chunk-Z3JMRMVO.js";import{K as Dr,L as st,f as Sr,r as Pr,ra as ko}from"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as B,fa as lr,ka as O}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as _}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-D2YP6KBJ.js";import"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-S5ACFHVS.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{f as l,h as mr,o as i,q as s}from"./chunk-SHG7TIBL.js";i();s();var et=l(_()),va=l(A()),vo=l(W());i();s();var Z=l(_()),ee=l(W());i();s();var v=l(_()),Fo=l(A()),Ui=l(W()),Hi=l(oe());I();wa();ba();i();s();var le=l(_()),Ii=l(W()),ki=l(re()),Ni=l(_r());I();i();s();var Bo={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var Oa=190,bi=({dataSource:e,backupHeight:t,scrollTop:o})=>{let r=(0,le.useMemo)(()=>e.length>=8&&o>Oa,[e.length,o]),{paddingBottom:n,buttonPaddingBottom:m,absoluteBottom:c}=zn({isButtonAbsolute:r,backupHeight:t});return le.default.createElement("div",{className:Bo.wrapper},le.default.createElement("div",{style:{paddingBottom:n}},le.default.createElement(fr,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>le.default.createElement(fr.Coin,{name:p?.name,symbol:p?.symbol,to:`${mo}?${Ni.default.stringify({address:p?.address})}`,balance:p.balance||"0",market:!1,displayPrecision:p?.displayPrecision,stableCoin:p?.stableCoin})})),le.default.createElement("div",{className:`${r?Bo.showButton:""} ${Bo.button}`,style:{bottom:c,paddingBottom:m}},le.default.createElement(Ii.Link,{to:_t},le.default.createElement(O,{circle:!0,type:O.TYPE.primary,category:O.CATEGORY.outline},le.default.createElement(B,{className:(0,ki.default)("okx-wallet-plugin-edit-wallet",Bo.editIcon)}),a("developer_mode_home_maintitle_managecpt")))))};i();s();var Oe=l(_()),Ai=l(W()),Si=l(_r());i();s();var wi=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Pi=()=>{let{isNotBackupWallet:e}=At(),t=St(),o=(0,Ai.useHistory)(),r=fe(),{extensionConfig:n}=D("rpc_info"),m=(0,Oe.useMemo)(()=>r.filter(({balance:x})=>!!Number(x)),[r]),c=(0,Oe.useCallback)(()=>{m.length===1?o.push(`${de}?${Si.default.stringify({address:m[0]?.address})}`):o.push(ft)},[m]),p=(0,Oe.useCallback)(()=>{e?t():o.push(ao)},[e]),d=()=>{o.push(gt)},f=(0,Oe.useCallback)(()=>{n.faucetUrl&&globalThis.open(n.faucetUrl)},[n.faucetUrl]),T=()=>{Kr({button_name:"more",site:""})},h=()=>{o.push(Xr)},g=(0,Oe.useCallback)(x=>{switch(x.type){case"SEND":c();break;case"RECEIVE":p();break;case"HISTORY":d();break;case"FAUCET":f();break;case"DAPP_CONNECT":h();break;case"MORE":T();break;default:break}},[h,f,d,p,c]),C=(0,Oe.useMemo)(()=>wi.map(x=>x.type==="FAUCET"?{...x,disabled:!n?.faucetUrl}:x),[n]);return{clickHandle:g,iconOptions:C}};i();s();var Bt=l(_()),Oi=l(A()),Li=l(W()),Bi=l(oe());I();i();s();var Ma=l(_()),Ua=l(A());i();s();var Ba=l(_()),Fa=l(re());var Di="SHOW-SWITCH";var Fi=()=>{let e=ie(),t=(0,Li.useHistory)(),o=fe(),{extensionConfig:r}=D("rpc_info"),n=ne(),[m,c]=Bt.default.useState(!0),{isNotBackupWallet:p}=At(),d=(0,Oi.useSelector)(Wr);(0,Bi.useMount)(()=>{e.get("from")==="setting"&&(c(!1),t.replace({search:""}),Or.listen(Di,()=>{c(!0)}))});let f=(0,Bt.useMemo)(()=>o.find(({address:T})=>!T)||{},[o]);return{rpcInfo:r,mainToken:f,chainTokens:o,walletAccount:d,ethereumAccount:n,isNotBackupWallet:p,switchVisible:m}};i();s();var Mi={wrapper:"_wrapper_11hdl_1"};var Ha=({history:e,unapprovedTxCount:t,isNotBackupWallet:o,unapprovedRequestCount:r,unapprovedPermissionsRequestId:n,triggerShowBackupWalletDialog:m})=>{o&&r!==0?m({text:a("wallet_dapp_conncetion_alert_backup_wallet")},n):t>0?e.push(Rr):r>0&&e.push(jr)},Ga=({history:e,isRpcMode:t})=>{t||e.replace(Q)},Wa=({walletAccount:e})=>{let{walletId:t}=e||{};return t},za=e=>{let t=Br()===Lr;(0,v.useEffect)(()=>{e&&t&&globalThis.platform.openExtensionInPopup(dt)},[])},Va=()=>{let{isNeedShowDisconnectUpgrade:e,setDisconnectUpgrade:t}=Fn();return(0,v.useCallback)(()=>{e&&(no.success({title:a("wallet_extension_card_subtitle_disconnect_update")}),t())},[e,t])},$a=e=>{let[t,o]=(0,v.useState)(so.init);return{tryRpc:()=>{!e.rpcUrl||(o(so.loading),hi(e.rpcUrl).then(()=>{o(so.success)}).catch(()=>{o(so.failed)}))},status:t,setStatus:o}},Ya=({mainToken:e,chainId:t,walletId:o,symbol:r})=>{(0,v.useEffect)(()=>{e?.balance&&t&&Yr({wallet_id:o,main_coin_number_by_networks:[{chain_id:$(t),main_token_symbol:r,main_token_amount:e?.balance}]})},[o,e?.balance,t,r])},Ka=(e,t)=>{let o=(0,Fo.useDispatch)();(0,v.useEffect)(()=>{(async()=>{e===0&&!t&&await o(Tn())})()},[e])},Gi=()=>{let e=(0,Ui.useHistory)(),t=St(),o=Gn(),{rpcInfo:r,chainTokens:n,isNotBackupWallet:m,mainToken:c,ethereumAccount:p}=Fi(),d=bt(),f=(0,v.useRef)(null),[T,h]=(0,v.useState)(0),[g,C]=(0,v.useState)(0),x=(0,v.useRef)(null),{unapprovedRequestCount:S,unapprovedTxCount:se,unapprovedPermissionsRequestId:q}=fi(),X=Mn(),{loadingMoonCatData:we}=vn(),ae=(0,v.useCallback)((...ar)=>{we||t(...ar)},[t,we]);(0,v.useEffect)(()=>{Ha({history:e,unapprovedTxCount:se,isNotBackupWallet:m,unapprovedRequestCount:S,unapprovedPermissionsRequestId:q,triggerShowBackupWalletDialog:ae})},[m,S,ae]);let ot=(0,Fo.useSelector)(zr);Ka(S,ot);let{isRpcMode:ze}=(0,Fo.useSelector)(ht);(0,v.useEffect)(()=>{Ga({history:e,isRpcMode:ze})},[ze]),za(ot);let nr=pt(c.balance).value,{clickHandle:Re,iconOptions:Ve}=Pi(),ir=Va(),eo=Vn(),{run:Io}=(0,Hi.useDebounceFn)(()=>{C(x.current?.scrollTop||0)},{wait:50,maxWait:50}),{status:tt,tryRpc:F}=$a(r);(0,v.useEffect)(()=>{F()},[r]),(0,v.useLayoutEffect)(()=>{f.current&&m&&h(f.current?.clientHeight||0)},[m]);let sr=Wa({walletAccount:d}),{chainId:rt,symbol:nt}=r;return Ya({mainToken:c,chainId:rt,walletId:sr,symbol:nt}),v.default.createElement("div",{className:Mi.wrapper,ref:x,onScroll:()=>{Io()}},v.default.createElement("div",null,v.default.createElement($n,{titleLeft:d?.keyringName,titleRight:d?.walletName,subTitle:G(p),address:p,chainName:r?.name}),v.default.createElement(Kn,{balance:nr,symbol:c.symbol}),v.default.createElement(Wn,{clickHandle:Re,iconOptions:Ve}),v.default.createElement(bi,{dataSource:n,scrollTop:g,backupHeight:m?T+24:0})),v.default.createElement(Un,{info:o,isNotBackupWallet:m,disconnectCallback:ir}),v.default.createElement("div",{ref:f},v.default.createElement(Bn,{offsetBottom:24})),v.default.createElement(Yn,{showBackup:()=>{}}),v.default.createElement(Ci,{visible:tt===so.failed,onRetry:F,onChangeNet:()=>{e.push(`${Jr}?tab=${eo?.networkType??"1"}`)}}),X&&v.default.createElement(Hn,{actionMap:{["RECOVER"]:()=>{e.push(`${tn}?action=${In.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${en}?fromHome=1`)}}}))};i();s();var $i=l(_());i();s();var Mo=l(_()),Wi=l(A()),Ft=l(oe());ko();var zi=l(Na());j();var Cr=class extends zi.default{constructor(){super();mr(this,"DROPPED_BUFFER_COUNT",3);mr(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.provider=null}setProvider(o){this.provider=o}setConfirmedTxs(o){this.confirmedTxs=o}async checkPendingTx(o,r,n){let m=[o,...o.txPool],c=0,p;(await Promise.allSettled(m.map(f=>this.checkOnePendingTx(f)))).forEach(f=>{if(f.status==="fulfilled"){let{value:T={}}=f;if(T.status==="dropped")c++;else if(T.status==="confirmed"){let{txId:h,transactionReceipt:g}=T;p={id:h,transactionReceipt:g}}}}),p?r(p,o.id):c===m.length&&n(o.id)}async checkOnePendingTx(o){let{id:r,txHash:n}=o;if(!n||o.status===N.DROPPED||this.checkIfNonceIsTaken(o))return{status:"dropped"};try{let m=await this.provider.getTransactionReceipt(n);if(m?.blockNumber)return{status:"confirmed",txId:r,transactionReceipt:m}}catch(m){throw new Error(m)}return await this.checkIfTxWasDropped(o)?{status:"dropped"}:{}}checkIfNonceIsTaken(o){return this.confirmedTxs.some(r=>r.id!==o.id&&ro($(r.txParams.nonce),$(o.txParams.nonce)))}async checkIfTxWasDropped(o){let{id:r,txHash:n,txParams:{nonce:m,from:c}}=o,p=`${r}-${n}`,d;try{d=await this.provider.getTransactionCount(c)}catch{return!1}if(st(d)||No($(m),d))return!1;this.droppedBlocksBufferByTxHash.has(p)||this.droppedBlocksBufferByTxHash.set(p,0);let f=this.droppedBlocksBufferByTxHash.get(p);return f<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(p,f+1),!1):(this.droppedBlocksBufferByTxHash.delete(p),!0)}};function Vi(){let e=wt(),t=ai(),o=(0,Wi.useSelector)(Ct),r=(0,Ft.useLatest)(ne()),n=(0,Ft.useLatest)(De()),m=(0,Ft.useLatest)(ti()),c=(0,Mo.useRef)(!1),p=(0,Mo.useRef)(new Cr),d=async(h,g,C)=>{let x=await oi({txId:h,replaceTxId:g,tx:C});t(x)},f=h=>{d(h,null,{status:N.DROPPED,finishTime:+new Date})},T=({id:h,transactionReceipt:g},C)=>{let x={blockNumber:g.blockNumber,gasUsed:g.gasUsed.toString(),finishTime:+new Date,extraParams:{contractAddress:g.contractAddress}};g.status?x.status=N.SUCCEED:x.status=N.FAILED,d(C,h,x)};(0,Mo.useEffect)(()=>{(async()=>{if(!(n.current.length===0||c.current)){c.current=!0;try{let g=await e();p.current.setProvider(g),p.current.setConfirmedTxs(m.current);let C=null;try{C=await g.getTransactionCount(r.current,"latest")}catch{}await Promise.all(n.current.map(x=>C!==null&&No($(x.txParams.nonce),C)?null:p.current.checkPendingTx(x,T,f)))}finally{c.current=!1}}})()},[o,e])}var Za=()=>(Zn(),Ti(),Vi(),xi(),null),Yi=(0,$i.memo)(Za);i();s();var Mt=l(_()),Ki=l(W());var qa=()=>{let e=(0,Ki.useHistory)(),t=ie(),o=t.get("showClose"),r=t.get("address"),{extensionConfig:n}=D("rpc_info"),m=b(r),c=ne(),p=`ethereum:${c}`;return Mt.default.createElement(kn,{navigator:{bordered:!1,onClose:o?()=>{e.push(Q)}:null,closeable:!0},content:{symbol:m?.symbol,coinLogo:m?.icon,chainName:n?.name,walletAddress:c,aggregation:!1,QRCodeAddress:p}})},Zi=(0,Mt.memo)(qa);i();s();var ge=l(_()),ss=l(A()),as=l(oe());i();s();var qe=l(_()),Uo=l(A());I();function Qa(){let e=(0,Uo.useDispatch)(),t=(0,Uo.useSelector)(ue),o=(0,Uo.useSelector)(yt),r=(0,qe.useRef)(null),n=c=>{let{value:p}=c.target,d=null;p?p&&!uo(p,{allowNonPrefixed:!1})&&(d={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):d={key:"wallet_transfer_errortip_receive_address_empty"},e(cn(p)),e(pn(d))};(0,qe.useLayoutEffect)(()=>{r.current.focus()},[]);let m=a("wallet_extension_transaction_placeholder_input_address");return qe.default.createElement(Se.Row,null,qe.default.createElement(P.TextArea,{onRef:c=>{r.current=c},value:t,label:a("wallet_extension_transaction_input_label_to"),placeholder:m,size:P.SIZE.xl,autoResize:!0,errorType:P.TIP_TYPE.always,error:o&&a(o.key,o.args),onChange:n}))}var qi=Qa;i();s();var Te=l(_()),Le=l(A()),Ht=l(oe());I();j();i();s();var Ut={"max-button":"_max-button_zd8rw_1",maxButton:"_max-button_zd8rw_1",balance:"_balance_zd8rw_14","balance-wrap":"_balance-wrap_zd8rw_18",balanceWrap:"_balance-wrap_zd8rw_18"};function Xa(e){let t=(0,Le.useDispatch)(),o=(0,Le.useSelector)(J),r=b(),n=b(o),m=r?.balance,c=Oo(e),p=!o,{run:d,cancel:f}=(0,Ht.useThrottleFn)(T=>{let h=null,g=$e(m,c);mt(g,0)?h={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:r?.symbol}}:Ye(T,p?g:n?.balance)&&(h={key:"wallet_transfer_errortip_insufficient_balance"}),t(dn(h))},{wait:100});return(0,Ht.useUnmount)(f),d}function ja({currentGasInfo:e}){let t=(0,Le.useDispatch)(),o=b(),r=(0,Le.useSelector)(J),n=(0,Le.useSelector)(co),m=(0,Le.useSelector)(Et),c=b(r),p=c?.balanceInt,d=_o(c?.balance,{symbol:c?.symbol,decimals:c?.decimals}),f=Xa(e),T=Oo(e),h=(0,Te.useRef)(!!n),g=x=>{h.current=!0,t(It(x))},C=()=>{let x=c.decimals,S=at(p,10**x);if(r)g(S);else{let se=$e(S,T);g(to(se,0)?"0":se)}t(ur(!0))};return(0,Te.useEffect)(()=>{h.current&&f(n)},[n,T,o?.balance]),Te.default.createElement(Se.Row,null,Te.default.createElement(P.Number,{placeholder:M.showFloorTruncation(0,6,{needZero:!0}),title:a("wallet_extension_send_subtitle_amount"),size:P.SIZE.xl,enableMinus:!1,precision:c?.decimals,value:n,error:m&&a(m.key,m.args),errorType:P.TIP_TYPE.always,onChange:x=>{g(x),t(ur(!1))},action:Te.default.createElement(Ee.Text,{size:Ee.SIZE.xs,type:Ee.TYPE.secondary,className:Ut["balance-wrap"],onClick:C},`${a("wallet_extension_send_text_balance")}:`,Te.default.createElement(Ee.Text,{inherit:!0,ellipsis:{tooltip:!0},className:Ut.balance},d)),suffix:Te.default.createElement(Ee.Text,{className:Ut["max-button"],onClick:C},a("wallet_extension_send_text_max"))}))}var Qi=ja;i();s();var Gt=l(_()),To=l(A()),Xi=l(W());I();function Ja(){let e=(0,To.useSelector)(ue),t=(0,To.useSelector)(yt),o=(0,To.useSelector)(Et);return!e||!!t||!!o}function Ra({loading:e}){let t=(0,To.useSelector)(ue),o=ne(),r=(0,Xi.useHistory)(),n=(0,To.useSelector)(J),m=Ja(),c=Qn(),[p,d]=(0,Gt.useState)(!1),f=p||e,{extensionConfig:T}=D("rpc_info"),h=async()=>{try{d(!0),await c({from:o,to:t,method:qn,isRpcChain:!0,chainIndex:$(T?.chainId)});let g=ut;n&&(g+=`?address=${n}`),r.push(g)}finally{d(!1)}};return Gt.default.createElement(O,{category:O.CATEGORY.fill,type:O.TYPE.highlight,size:O.SIZE.lg,loading:f,block:!0,disabled:m,onClick:h},a("wallet_extension_send_btn_next"))}var ji=Ra;i();s();var Ji=l(_());var Ri=l(W()),Ho=l(A());var em=()=>{let e=(0,Ri.useHistory)(),t=(0,Ho.useDispatch)(),r=ie().get("showClose"),n=(0,Ho.useSelector)(vt),m=(0,Ho.useSelector)(J),c=b(m),p=()=>{setTimeout(()=>{t(kt())},200)},d=()=>{p(),e.goBack()},f=r?()=>{p(),e.push(n||Q)}:null;return Ji.default.createElement(z,{title:c?.symbol,icon:{text:c?.symbol},onBack:d,onClose:f})},es=em;i();s();var Be=l(_()),Ie=l(A()),os=l(Aa());ko();I();j();i();s();function om(){let e=(0,Ie.useDispatch)(),t=(0,Ie.useSelector)(J),o=b(t),r=(0,Ie.useSelector)(ue),n=(0,Ie.useSelector)(co);(0,Be.useEffect)(()=>{if(t&&uo(r)&&o?.decimals){let m=!n||Dr(Number(n));e(dr(Qr(r,m?"0":(0,os.addHexPrefix)(qr(V(n,10**o?.decimals))))))}},[t,o?.decimals,r,n])}function tm(){let e=(0,Ie.useDispatch)(),o=!(0,Ie.useSelector)(J),r=(0,Ie.useSelector)(mn);return om(),o?Be.default.createElement(Se.Row,null,Be.default.createElement(P,{title:Be.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},a("developer_mode_send_maintitle_gasprice"),Be.default.createElement(ye,{title:a("developer_mode_send_tooltip_additional_data"),placement:ye.DIRECTION.topRight},Be.default.createElement(B,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:a("developer_mode_select_a_token_input_optional"),errorType:P.TIP_TYPE.always,size:P.SIZE.xl,value:r,onChange:n=>{e(dr(n.target.value))}})):null}var ts=tm;i();s();var go=l(_()),Go=l(A()),rs=l(re());ko();I();j();i();s();function rm(){let e=(0,Go.useDispatch)(),t=(0,Go.useSelector)(wo),o=(0,Go.useSelector)(Ao),r=p=>{e(un(p))},n;t&&(Ye(t,o)?n=a("developer_mode_send_tooltip_higher",{num:o}):mt(t,o)&&(n=a("developer_mode_send_tooltip_lower",{num:o})));let m=a("developer_mode_send_maintitle_nonce1"),c=`${st(o)?"":M.thousandFormat(o)}`;return go.default.createElement(Se.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},go.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},go.default.createElement(P.Number,{innerClassName:(0,rs.default)({"rpc-evm-send-edit-nonce__warning-input":!!n}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,precision:0,title:m,placeholder:c,size:P.SIZE.xl,value:t,onAdd:()=>!t&&o!==null?(r(o+1),!1):!0,onSub:()=>!t&&Ye(o,0)?(r(o-1),!1):!0,onChange:r})),n&&go.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},go.default.createElement(B,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),n))}var ns=rm;i();s();var is={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function nm(){let e=(0,ss.useDispatch)(),t=ie(),{chainGasLimitLoading:o,currentGasInfo:r}=Lt(),{loadingNonce:n}=_i();return(0,as.useMount)(()=>{e(ln(t.get("address")))}),ge.default.createElement(Po.Container,null,ge.default.createElement(es,null),ge.default.createElement(Po.Box,{className:is["rpc-evm-send-edit__inner"]},ge.default.createElement(qi,null),ge.default.createElement(Qi,{currentGasInfo:r}),ge.default.createElement(ts,null),ge.default.createElement(ns,null)),ge.default.createElement(Ae.FooterActions,{usePortal:!0},ge.default.createElement(ji,{loading:o||n})))}var ms=nm;i();s();var w=l(_()),U=l(A()),ls=l(W()),cs=l(oe());ko();I();Sa();j();function im(e){let t=(0,U.useSelector)(J),o=!t,r=ne(),n=(0,U.useSelector)(ue),m=(0,U.useSelector)(pr),c=(0,U.useSelector)(an),p=(0,U.useSelector)(wo),d=(0,U.useSelector)(Ao),{extensionConfig:f}=D("rpc_info"),T={from:r,to:o?n:t,value:o?c:"0x0",data:m},[h,g]=pi(T),C=di({data:T.data,type:h}),x=b(T.to),S=On(C?.amount||0,x?.decimals);return{txMeta:ui({tx:T,customGasInfo:e,nonce:p||d,txData:C,tokenInfo:x,chain:f,approvedAmount:S,formattedAmount:S,txType:h}),loadingTxData:g}}var sm=()=>{let e=(0,ls.useHistory)(),t=(0,U.useDispatch)(),o=(0,U.useSelector)(vt),r=(0,U.useSelector)(J),n=b(r),m=b(),c=(0,U.useSelector)(co),p=En(),d=bt(p),f=(0,U.useSelector)(ue),T=(0,U.useSelector)(wo),h=(0,U.useSelector)(Ao),g=(0,U.useSelector)(pr),{extensionConfig:C}=D("rpc_info"),x=mi(),S=Dn(p),[se,q]=(0,w.useState)(!1),[X,we]=(0,w.useState)(!1),{setGasType:ae,chainGasLevels:ot,currentGasInfo:ze,setCustomGasOption:nr,chainGasLoading:Re,chainGasLoadFailed:Ve,chainGasLimitLoadFailed:ir}=Lt(),eo=ze,Io=Oo(ze),tt=(0,U.useSelector)(sn),{txMeta:F,loadingTxData:sr}=im(ze),rt=n?.balanceInt;(0,cs.useMount)(()=>{if(!f){let pe=de;r&&(pe+=`?address=${r}`),e.replace(pe)}});let nt=(0,w.useMemo)(()=>[k.AUTHORIZATION,k.CANCEL_AUTHORIZATION].includes(F.type)?!1:F.type===k.TRANS_OUT?F.extraParams?.value:c,[c,F]),ar=(0,w.useMemo)(()=>F.type===k.TRANS_OUT?F.extraParams?.coinSymbol:[k.AUTHORIZATION,k.CANCEL_AUTHORIZATION].includes(F.type)?a(Ze[F.type],{symbol:F.extraParams?.coinSymbol}):a(Ze[F.type]),[F]),wr=()=>{setTimeout(()=>{t(kt())},200),e.push(o||Q)},Ia=async()=>{try{we(!0),await x(F,void 0,pe=>{let it=rn[d?.keyringIdentityType];$r({tx_source:"transfer",from_addr:pe?.txParams?.from,to_addr:f,main_token_symbol:C?.symbol,token_symbol:pe?.extraParams?.coinSymbol||"",contract_address:r||"",volume_token:c,volume_usdt:"",tx_hash_unique:pe?.txHash,wallet_type:it,chain_id:parseInt(C?.chainId,16)})}),wr()}catch(pe){Sr(pe)}finally{we(!1)}},ka=(0,w.useMemo)(()=>Ve?{type:hr.TIP_TYPE.FEE_ERROR}:eo?.isSupportEip1559&&eo?.baseFeePerGas==="0"?{type:Fr.TYPE.warn,message:a("wallet_extension_transaction_error_base_zero")}:null,[Ve,eo?.baseFeePerGas,eo?.isSupportEip1559]);return(0,w.useEffect)(()=>{if(tt){let pe=n.decimals,it=at(rt,10**pe),Ar=r?it:$e(it,Io);t(It(to(Ar,0)?"0":Ar))}},[Io,tt,rt,r,n.decimals]),w.default.createElement(Po.Container,null,w.default.createElement(z,{icon:F.type===k.TRANS_OUT&&{text:F.extraParams?.coinSymbol},title:ar,onClose:wr}),nt&&w.default.createElement(Do,null,w.default.createElement(Pn,{summaryList:[{useMinPrecision:!1,coinAmount:nt,injectCoin:n,displayEstimate:!1}],title:a("wallet_extension_send_colored_send")})),w.default.createElement(Do,null,w.default.createElement(xr,{localType:Hr,title:a("extension_send_mid_text_from"),walletId:p,onCopyCallback:()=>{S({trade:"send",all_confirmation:"wallet_used_address"})}}),w.default.createElement(xr,{address:f,title:a("extension_send_mid_text_to"),onCopyCallback:()=>{S({trade:"send",all_confirmation:"to_address"})}})),w.default.createElement(Do,null,w.default.createElement(Sn,{onClick:()=>{q(!0)},injectCoin:m,estimateFailed:!!Ve,networkFee:Re?void 0:M.mul(Io,10**m?.decimals),loading:Re})),w.default.createElement(Do,{bordered:!1},w.default.createElement(An,{title:a("developer_mode_send_maintitle_nonce1")},w.default.createElement(Ee.Text,{size:Ee.SIZE.sm},T||h)),!!g&&w.default.createElement(Ln,{copyable:!0,defaultExpanded:!0,data:g})),w.default.createElement(Ae,{placeholder:!0,offsetBottom:0},w.default.createElement(hr,{...ka}),w.default.createElement(Tr,{buttonGroup:[{disabled:!!Ve,onClick:Ia,actionType:Tr.ACTION_TYPE.CONFIRM,loading:(sr||X||Re)&&!Ve}]})),Re?null:w.default.createElement(gi,{onBack:()=>{q(!1)},visible:se,rpcInfo:C,setGasType:ae,chainGasLevels:ot,setCustomGasOption:nr,currentGasInfo:ze,chainGasLimitLoadFailed:ir}))},ps=sm;i();s();var Ue=l(_());I();var Ls=l(oe()),Bs=l(A());i();s();var ds=l(_()),Wt=l(A());I();var us=l(oe());function am(){let e=(0,Wt.useDispatch)(),t=(0,Wt.useSelector)(te),o=De(),r=[{text:a("wallet_extension_history_option_pending",{num:o.length}),value:po.PENDING},{text:a("wallet_extension_history_tab_completed"),value:po.COMPLETE}];return(0,us.useMount)(()=>{o.length===0&&e(So({status:po.COMPLETE}))}),ds.default.createElement(E.FilterTabs,{tabs:r,value:t.status,onSelect:n=>{e(So({status:n}))}})}var fs=am;i();s();var Wo=l(_()),Vt=l(A()),_s=l(re());I();Da();i();s();var zt={"retina-border-basic":"_retina-border-basic_2pibg_1",retinaBorderBasic:"_retina-border-basic_2pibg_1",root:"_root_2pibg_29",resetNonceIcon:"_resetNonceIcon_2pibg_99",disabledResetNonceIcon:"_disabledResetNonceIcon_2pibg_103"};function mm(){let e=(0,Vt.useDispatch)(),t=(0,Vt.useSelector)(te),o=De(),r=()=>{o.length!==0&&ct.warn({alignBottom:!1,title:a("extension_wallet_advanced_title_clear_confirm"),text:a("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:a("wallet_extension_btn_general_cancel"),confirmText:a("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await Gr().rpcEvmClearPendingTransaction(),Ur.success({title:a("extension_wallet_advanced_notification_cleared")})}})};return Wo.default.createElement("div",{className:zt.root},Wo.default.createElement(E.DateRangeSelection,{dates:t.dates,onChange:(n,m)=>{e(So({dates:m}))}}),Wo.default.createElement(ye,{title:a("wallet_extension_settings_tooltips_reset_nonce"),placement:ye.DIRECTION.bottomRight},Wo.default.createElement(B,{className:(0,_s.default)("okx-wallet-plugin-brush-20",zt.resetNonceIcon,{[zt.disabledResetNonceIcon]:o.length===0}),onClick:r})))}var Ts=mm;i();s();var Me=l(_()),Ds=l(A());i();s();i();s();var je=l(_());I();i();s();var xe=l(_());I();i();s();i();s();var Yt=l(_());j();i();s();j();var $t=e=>{if(!e?.txParams)return{};let{gasPrice:t,maxFeePerGas:o,maxPriorityFeePerGas:r,gasLimit:n,type:m}=e.txParams,c={gasLimit:n};return m===io.FEE_MARKET?(c.maxFeePerGas=lt(V(o,1.2),0),c.maxPriorityFeePerGas=lt(V(r,1.2),0)):c.gasPrice=lt(V(t,1.2),0),c};function lm({txId:e,onClose:t}){let o=Ot(e),r=li(),[n,m]=(0,Yt.useState)(!1),c=$t(o),p=async()=>{if(n)return;m(!0);let X=await Dt(o.id);if(!X||X.status!==N.PENDING){m(!1),t();return}r(o,c).catch(we=>{console.log(we)}).finally(()=>{m(!1),t()})},{gasPrice:d,maxFeePerGas:f,gasLimit:T,type:h}=o?.txParams||{},g="",C="";h===io.FEE_MARKET?(g=f,C=c.maxFeePerGas):(g=d,C=c.gasPrice);let x=Lo(me(V(g,T))),S=`=Gas Price(${Ke(g)})`,se=Lo(me(V(C,c.gasLimit))),q=`=Gas Price(${Ke(C)})`;return Yt.default.createElement(E.EthereumTxSpeedDialogBase,{visible:!!o,onConfirm:p,loading:n,onClose:t,oldGasFeeDisplay:x,oldGasDetailDisplay:S,newGasFeeDisplay:se,newGasDetailDisplay:q})}var zo=lm;i();s();var Kt=l(_());j();function cm({txId:e,onClose:t}){let o=Ot(e),r=ci(),n=b(),[m,c]=(0,Kt.useState)(!1),p=$t(o),d=async()=>{if(m)return;if(c(!0),(await Dt(o.id)).status!==N.PENDING){c(!1),t();return}r(o,p).catch(x=>{console.log(x)}).finally(()=>{t(),c(!1)})},{type:f}=o?.txParams||{},T="";f===io.FEE_MARKET?T=p.maxFeePerGas:T=p.gasPrice;let h=Lo(me(V(T,p.gasLimit))),g=`Gas Price (${Ke(T)} GWEI) *Gas Limit(${p.gasLimit}) `;return Kt.default.createElement(E.EthereumTxCancelDialogBase,{visible:!!o,onConfirm:d,loading:m,onClose:t,chainSymbol:n?.symbol,newGasFeeDisplay:h,newGasDetailDisplay:g})}var Vo=cm;i();s();var ke=l(_());i();s();var Qe=l(_()),hs=l(A());I();i();s();var $o=l(_());I();var gs=({onClick:e,children:t})=>$o.default.createElement(O,{className:"rpc-evm-tx-actions__button",category:O.CATEGORY.outline,type:O.TYPE.primary,size:O.SIZE.xs,onClick:o=>{o.stopPropagation(),e&&e(o)}},t);function pm({tx:e,onCancel:t,onSpeed:o}){let{isShowPending:r,isCanceling:n}=e,m=n?a("wallet_extension_history_list_status_btn_speed_up_cancellation"):a("wallet_extension_history_list_status_btn_cancel_transaction");return r?$o.default.createElement("div",{className:"rpc-evm-tx-actions"},$o.default.createElement(gs,{onClick:t},m),!n&&$o.default.createElement(gs,{onClick:o},a("wallet_extension_history_list_status_btn_speed_up"))):null}var xs=pm;i();s();I();Pa();j();function Zt({type:e,extraParams:t}){let o=Ze[e],r,n=a(o);return e===k.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===k.AUTHORIZATION||e===k.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",n=a(o,{symbol:t?.coinSymbol})):e===k.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===k.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:n}}function qt({type:e,txParams:t,extraParams:o}){let{extensionConfig:r}=D("rpc_info");if(e===k.TRANS_OUT){let c=o?.value;return c&&(c=M.thousandFormat(c)),[{direction:cr.OUT,coinAmount:`${c||""} ${o?.coinSymbol||""}`}]}let{value:n}=t||{},m=$(n);return Ye(m,0)?[{direction:cr.OUT,coinAmount:`${M.thousandFormat(me(m))} ${r.symbol||""}`}]:[]}function Qt(e){let t;return e.type===k.TRANS_OUT?t=`${a("wallet_extension_history_list_send_to")}   ${G(e.extraParams.toAddress)}`:e.type===k.AUTHORIZATION||e.type===k.CANCEL_AUTHORIZATION?t=G(e.extraParams?.approvedAddress):t=G(e.txParams.to),t}function dm({isShowPending:e,isSpeeding:t,isCanceling:o}){let r="",n="";return e?(r=bo.PENDING,t?n=a("wallet_extension_send_status_speedingup"):o?n=a("wallet_extension_send_status_canceling"):n=a("wallet_extension_history_list_status_pending")):(r=bo.WAITING,n=a("wallet_extension_history_list_status_waiting")),{labelType:r,labelText:n}}function um(e){let t=Qt(e),o=(0,hs.useSelector)(lo),r=[t],n=oo(e.sendTime,{format:"yyyyMMddHHmmss",locale:o});return r.push(n),r}function fm({tx:e,onClick:t,onCancel:o,onSpeed:r}){let{icons:n,title:m}=Zt(e),{labelType:c,labelText:p}=dm(e),d=qt(e),f=um(e),T=Pt(f,d),h=Qe.default.createElement(E.Label,{className:"tx-history-ml4",type:c,text:p});return Qe.default.createElement(E.ItemContainer,{onClick:g=>{t&&t(e,g)}},Qe.default.createElement(E.Row,{assets:d,align:T},Qe.default.createElement(E.Info,{icons:n,title:m,label:h,details:f}),Qe.default.createElement(E.Assets,{assets:d})),Qe.default.createElement(xs,{tx:e,onCancel:o,onSpeed:r}))}var Yo=fm;function _m({txs:e,onClick:t}){let[o,r]=(0,ke.useState)(null),[n,m]=(0,ke.useState)(null);return ke.default.createElement(ke.default.Fragment,null,e.map(c=>ke.default.createElement(Yo,{key:c.id,tx:c,onClick:t,onSpeed:()=>{r(c.id)},onCancel:()=>{m(c.id)}})),ke.default.createElement(zo,{txId:o,onClose:()=>{r(null)}}),ke.default.createElement(Vo,{txId:n,onClose:()=>{m(null)}}))}var Ko=_m;i();s();var Xe=l(_());I();var yr=l(A());function Tm({txs:e,onClick:t}){let o=(0,yr.useSelector)(lo),{dates:r}=(0,yr.useSelector)(te),n=(0,Xe.useMemo)(()=>{let m=e.map(T=>({...T,groupDate:oo(T.sortTime,{format:"yyyyMMdd",locale:o})})),c=[],p=0,d,f;return m.forEach(T=>{let{groupDate:h}=T;d!==h&&(d=h,f=[],c[p++]={date:d,list:f}),f.push(T)}),c},[e,r]);return Xe.default.createElement(E.List,null,n.map(({date:m,list:c},p)=>Xe.default.createElement("div",{key:p},Xe.default.createElement(E.Date,null,m),c.map(d=>Xe.default.createElement(d.Comp,{key:d.id,tx:d,onClick:t})))))}var Zo=Tm;i();s();var xo=l(_());I();function gm({status:e}){let t="",o="";return(e===N.FAILED||e===N.DROPPED)&&(t=bo.FAILED,o=a("wallet_extension_history_status_failed")),{labelText:o,labelType:t}}function xm(e){return[Qt(e)]}function hm({tx:e,onClick:t}){let{icons:o,title:r}=Zt(e),n=qt(e),m=xm(e),c=Pt(m,n),{labelType:p,labelText:d}=gm(e),f=xo.default.createElement(E.Label,{className:"tx-history-ml4",type:p,text:d});return xo.default.createElement(E.ItemContainer,{onClick:T=>{t&&t(e,T)}},xo.default.createElement(E.Row,{assets:n,align:c},xo.default.createElement(E.Info,{icons:o,title:r,label:f,details:m}),xo.default.createElement(E.Assets,{assets:n})))}var qo=hm;function Cm({tx:e}){let t=si(),{status:o,isShowPending:r,isCanceling:n}=e,[m,c]=(0,xe.useState)(!1),[p,d]=(0,xe.useState)(!1);return xe.default.createElement(xe.default.Fragment,null,(o===N.SUCCEED||o===N.FAILED)&&xe.default.createElement(Jn,{url:t(e.txHash),text:a("wallet_extension_mid_link_explorer")}),r&&o===N.PENDING&&xe.default.createElement(Rn,{isShowCancel:!n,isShowSpeedUp:!n,isShowSpeedupCancel:n,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&xe.default.createElement(zo,{txId:e?.id,onClose:()=>{d(!1)}}),m&&xe.default.createElement(Vo,{txId:e?.id,onClose:()=>{c(!1)}}))}var Cs=Cm;i();s();var Fe=l(_());I();i();s();var Er=l(_()),vr=l(re());i();s();var ym={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},Em={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function vm({icon:e,className:t,text:o,size:r="normal",fontSize:n,theme:m,color:c,background:p}){if(!o)return null;let d=o[0].toUpperCase(),f,T,h;if(m){let S=ym[m];f=S?.color,T=S?.background,h=S?.border}let g,C;if(typeof r=="string"){let S=Em[r];g=S?.size,C=S?.fontSize}else g=r.size;let x={width:`${g}px`,height:`${g}px`};return e?Er.default.createElement("img",{alt:"",src:e,style:x,className:(0,vr.default)("capitalize-letter",t)}):(x={...x,fontSize:`${n||C}px`,color:c||f,background:p||T,border:h},Er.default.createElement("div",{style:x,className:(0,vr.default)("capitalize-letter",t)},d))}var Y=vm;j();i();s();var R=l(_()),Xt=l(re());I();i();s();function Im({className:e,label:t,children:o}){return R.default.createElement("div",{className:(0,Xt.default)("rpc-evm-coin-flow__label",e)},R.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},t),R.default.createElement("div",null,o))}function km({isNFT:e,icon:t,title:o,address:r}){let n=typeof t=="string"?R.default.createElement(wn,{className:(0,Xt.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:t,alt:""}):t;return R.default.createElement("div",{className:"rpc-evm-coin-flow__record"},R.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},n),R.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},R.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},o),r&&R.default.createElement(Pe,{className:"rpc-evm-coin-flow__record-address",label:G(r),value:r,message:a("wallet_extension_popup_title_receiving_address_copied")})))}function Nm({data:e=[]}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let t=e.length===1,o=r=>{if(!r)return null;let{items:n,label:m,...c}=r;return R.default.createElement(Im,{...c,label:m,key:r},n.map((p,d)=>R.default.createElement(km,{...p,key:d})))};return R.default.createElement("div",{className:(0,Xt.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":t})},e.map(o))}var ys=Nm;var{TRANS_OUT:Es,CONTRACT_CALL:vs,AUTHORIZATION:jt,CANCEL_AUTHORIZATION:Jt,CONTRACT_DEPLOY:Is}=k,bm={[jt]:"wallet_extension_header_approval_title_approve",[Jt]:"wallet_extension_header_approval_title_cancel_approval"},wm={[jt]:"wallet_extension_header_approval_title_for",[Jt]:"wallet_extension_header_approval_title_for"},Am="/static/images/tx-history/default-protocol.svg";function Sm(e){let{type:t}=e,o=b("",!0);switch(t){case Es:{let{value:r,coinSymbol:n}=e.extraParams||{},m=`- ${M.thousandFormat(r)} ${n||a("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Fe.default.createElement(Y,{icon:!n&&Zr,text:n,size:"large",theme:"black"}),title:Fe.default.createElement(gr,{maxWidth:"284px",text:m})}]}}case vs:{let{value:r}=e.txParams||{},n=$(r);if(ro(n,0))return null;let m=`- ${_o(me(n),{symbol:o.symbol,decimals:o?.decimals})}`;return{items:[{icon:Fe.default.createElement(Y,{text:o.symbol,size:"large",theme:"black"}),title:Fe.default.createElement(gr,{text:m,maxWidth:"284px"})}]}}case jt:case Jt:{let{coinSymbol:r}=e.extraParams||{};return r?{label:a(bm[t]),items:[{icon:Fe.default.createElement(Y,{text:r,size:"large",theme:"black"}),title:r}]}:null}case Is:default:return null}}function Pm(e){let{type:t,extraParams:o}=e;switch(t){case jt:case Jt:{let{approvedAddress:r}=o||{};return{label:a(wm[t]),items:[{icon:Am,title:Fe.default.createElement(Pe,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:G(r),value:r,message:a("wallet_extension_popup_title_receiving_address_copied")})}]}}case Es:case vs:case Is:default:return null}}function Dm({tx:e}){let t=Sm(e),o=Pm(e);return Fe.default.createElement(ys,{data:[t,o]})}var ks=Dm;i();s();var y=l(_()),Ir=l(A()),Ns=l(re());I();j();function Om({status:e,isCanceling:t,isSpeeding:o,isShowPending:r}){let n,m="";return e===N.SUCCEED?(n=fo.TxStatusInfoEnum.SUCCESS,m=a("wallet_extension_history_status_completed")):e===N.FAILED||e===N.DROPPED?(n=fo.TxStatusInfoEnum.FAILED,m=a("wallet_extension_history_status_failed")):e===N.PENDING&&(r?(n=fo.TxStatusInfoEnum.PENDING,t?m=a("wallet_extension_send_status_canceling"):o?m=a("wallet_extension_send_status_speedingup"):m=a("wallet_extension_history_list_status_pending")):(n=fo.TxStatusInfoEnum.WAITING,m=a("wallet_extension_history_list_status_waiting"))),y.default.createElement(fo,{label:a("wallet_extension_mid_text_status"),status:n,statusText:m})}function Lm({status:e,sendTime:t,finishTime:o}){let r=(0,Ir.useSelector)(lo);return y.default.createElement(ve,{label:a("wallet_extension_mid_text_time"),value:oo(e===N.PENDING?t:o,{format:"yyyyMMddHHmmss",locale:r})})}function Bm({type:e,extraParams:t}){let{approvedAmount:o}=t||{};return e!==k.AUTHORIZATION?null:y.default.createElement(ve,{label:a("wallet_extension_mid_text_approved_amount"),value:o>=10**13?a("wallet_extension_mid_text_unlimited"):M.thousandFormat(o||"0")})}function Fm({status:e,blockNumber:t}){let o=(0,Ir.useSelector)(Ct),r=$e(o,t);return e===N.PENDING||e===N.DROPPED||to(r,0)||No(r,14)?null:y.default.createElement(ve,{label:a("wallet_extension_mid_text_block_confirmation"),value:r})}function Mm(){let{extensionConfig:e}=D("rpc_info");return y.default.createElement(ve,{label:a("wallet_extension_mid_text_network"),value:y.default.createElement(y.default.Fragment,null,y.default.createElement(Y,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:e.icon,text:e.name,size:"small",theme:"lightGray"}),e.name)})}function Um({txParams:e}){let{from:t}=e;return y.default.createElement(ve,{label:a("wallet_extension_mid_text_from"),value:y.default.createElement(Pe,{label:G(t),value:t,message:a("wallet_extension_popup_title_receiving_address_copied")})})}function Hm({status:e,type:t,extraParams:o,txParams:r}){let{toAddress:n,tokenAddress:m,contractAddress:c}=o||{},{to:p}=r,d,f;if(t===k.TRANS_OUT)d=a("wallet_extension_mid_text_to"),f=n;else if(t===k.CONTRACT_DEPLOY)if(e===N.SUCCEED)d=a("developer_mode_history_subtitle_developer"),f=c;else return null;else d=a("wallet_extension_mid_text_interaction_address"),t===k.AUTHORIZATION||t===k.CANCEL_AUTHORIZATION?f=m:f=p;return y.default.createElement(ve,{label:d,value:y.default.createElement(Pe,{label:G(f),value:f,message:a("wallet_extension_popup_title_receiving_address_copied")})})}function Gm({status:e,gasUsed:t,txParams:o}){let{extensionConfig:r}=D("rpc_info"),{gasLimit:n,maxFeePerGas:m,gasPrice:c}=o,p=Nn(V,me),d=c||m,f=_o(p(d,t||n),{symbol:r?.symbol,decimals:r?.decimals});return y.default.createElement(jn,{label:a("wallet_extension_mid_text_network_fee"),value:f,tip:e===N.PENDING&&a("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:M.thousandFormat(Ke(d)),gasLimit:M.thousandFormat(n)})})}function Wm({txParams:e}){let{data:t}=e,[o,r]=(0,y.useState)(!1);return t?y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{r(n=>!n)}},a("developer_mode_history_title_transaction_data"),y.default.createElement(B,{className:(0,Ns.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":o})})),o&&y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function zm({tx:e}){let{txHash:t,txParams:{nonce:o}}=e;return y.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},y.default.createElement(Om,{...e}),y.default.createElement(Lm,{...e}),y.default.createElement(Bm,{...e}),y.default.createElement(Fm,{...e}),y.default.createElement(Mm,{...e}),y.default.createElement(Um,{...e}),y.default.createElement(Hm,{...e}),y.default.createElement(Gm,{...e}),y.default.createElement(ve,{label:a("developer_mode_history_title_nonce"),value:$(o)}),y.default.createElement(ve,{label:a("wallet_extension_mid_text_transaction_hash"),value:y.default.createElement(Pe,{label:G(t),value:t,message:a("wallet_extension_popup_title_transaction_hash_copied")})}),y.default.createElement(Wm,{...e}))}var bs=zm;var Vm=e=>{if(!e)return null;let{type:t,extraParams:o}=e,r=Ze[t];return t===k.AUTHORIZATION||t===k.CANCEL_AUTHORIZATION?a(r,{symbol:o?.coinSymbol||""}):a(r)};function $m({txId:e,onBack:t}){let r=ni().find(({id:m})=>m===e),n=Vm(r);return je.default.createElement(ct.Action,{isFull:!0,titleCenter:!0,title:n,visible:!!e,onClose:t},je.default.createElement(ei,{message:r?.errorMessage}),!!r&&je.default.createElement("div",{className:"rpc-mode-tx-detail__content"},je.default.createElement(ks,{tx:r}),je.default.createElement(bs,{tx:r}),je.default.createElement(Cs,{tx:r})))}var Qo=$m;i();s();var kr=l(_());function Ym({symbol:e}){return kr.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},kr.default.createElement(Y,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var Nr=Ym;i();s();i();s();var Rt=l(_()),ws=l(A());function Km({onClick:e}){let{dates:t}=(0,ws.useSelector)(te),o=De({dates:t});return o.length===0?Rt.default.createElement(E.Empty,{top:72}):Rt.default.createElement(E.ListContainer,{style:{paddingTop:"8px"}},Rt.default.createElement(Ko,{txs:o,onClick:e}))}var As=Km;i();s();var ho=l(_());var Ss=l(A());function Zm({onClick:e}){let{dates:t}=(0,Ss.useSelector)(te),o=ri({dates:t}),r=(0,ho.useMemo)(()=>o.map(n=>({...n,sortTime:n.finishTime,Comp:qo})),[o]);return r.length===0?ho.default.createElement(E.Empty,{top:72}):ho.default.createElement(E.ListContainer,null,ho.default.createElement(Zo,{txs:r,onClick:e}))}var Ps=Zm;function qm(){let e=(0,Ds.useSelector)(te),[t,o]=(0,Me.useState)(null),r=n=>{o(n.id)};return Me.default.createElement(Me.default.Fragment,null,e.status===po.PENDING?Me.default.createElement(As,{onClick:r}):Me.default.createElement(Ps,{onClick:r}),t&&Me.default.createElement(Qo,{txId:t,onBack:()=>{o(null)}}))}var Os=qm;i();s();function Qm(){let e=(0,Bs.useDispatch)();return(0,Ls.useUnmount)(()=>{e(_n())}),Ue.default.createElement(E.PageContainer,{className:"rpc-evm-tx-history"},Ue.default.createElement(Ae,{className:"rpc-evm-tx-history__top",offsetTop:0},Ue.default.createElement(z,{sticky:!1,title:a("wallet_extension_header_text_history")}),Ue.default.createElement(fs,null),Ue.default.createElement(Ts,null)),Ue.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},Ue.default.createElement(Os,null)))}var Fs=Qm;i();s();var yo=l(_());i();s();var Co=l(_()),Ms=l(W());I();i();s();function He(){return ie().get("address")}var Xm=()=>{let e=(0,Ms.useHistory)(),t=He(),o=b(t),r=()=>{e.push(Q)};return Co.default.createElement(z,{title:Co.default.createElement(Nr,{symbol:o?.symbol}),onBack:r},t&&Co.default.createElement(ye,{title:a("developer_mode_infor_tooltip_token_details"),placement:ye.DIRECTION.bottom},Co.default.createElement(B,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{e.push(`${xt}?address=${t}`)}})))},Us=Co.default.memo(Xm);i();s();var he=l(_());i();s();var Hs=l(_());function jm({txs:e,onClick:t}){return e.length===0?null:Hs.default.createElement(Ko,{txs:e,onClick:t})}var Gs=jm;i();s();var er=l(_());function Jm({txs:e,onClick:t}){let o=(0,er.useMemo)(()=>e.map(r=>{let n,m;return r.status===N.PENDING?(n=r.sendTime,m=Yo):(n=r.finishTime,m=qo),{...r,sortTime:n,Comp:m}}),[e]);return o.length===0?null:er.default.createElement(Zo,{txs:o,onClick:t})}var Ws=Jm;function Rm(){let e=He(),t=ii({tokenAddress:e}),[o,r]=(0,he.useState)(null),[n,m]=(0,he.useMemo)(()=>{let p=[],d=[];return t.forEach(f=>{f.isShowPending?p.push(f):d.push(f)}),[p,d]},[t]),c=p=>{r(p.id)};return t.length===0?he.default.createElement(E.Empty,null):he.default.createElement("div",null,he.default.createElement(Gs,{txs:n,onClick:c}),he.default.createElement(Ws,{txs:m,onClick:c}),he.default.createElement(Qo,{txId:o,onBack:()=>{r(null)}}))}var zs=Rm;i();s();var jo=l(_()),Ks=l(A());j();i();s();var Xo=l(_()),Vs=l(A()),$s=l(W());I();j();function el(){let e=(0,$s.useHistory)(),t=(0,Vs.useDispatch)(),{extensionConfig:o}=D("rpc_info"),r=He(),n=b(r),m=`${mo}?address=${r||""}`,c=!r&&o?.faucetUrl;return Xo.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${c?"with-faucet":"without-faucet"}`},Xo.default.createElement(Nt.IconButtonWithLabel,{disabled:ro(n?.balance,0),icon:"okx-wallet-plugin-up",text:a("wallet_home_btn_send"),onClick:()=>{t(fn(m));let p=`${de}?showClose=1`;r&&(p+=`&address=${r}`),e.push(p)}}),Xo.default.createElement(Nt.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:a("wallet_home_btn_receive"),onClick:()=>{let p=r?`&address=${r}`:"";e.push(`${ao}?showClose=1${p}`)}}),c&&Xo.default.createElement(Nt.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:a("developer_mode_home_btn_faucet"),href:o?.faucetUrl}))}var Ys=el;function ol(){let e=He(),t=b(e),o=t?.balance||0,{symbol:r,usdToThisRate:n}=(0,Ks.useSelector)(Vr),m=V(t?.price,n);return{coinAmount:o,coinSymbol:t?.symbol,coinAmountDisplay:pt(o).value,currencyAmountDisplay:bn({amount:o,rate:m,symbol:r},{useSign:!0,useFixed:!0})}}function tl(){let e=ne(),{coinSymbol:t,coinAmountDisplay:o}=ol();return jo.default.createElement(vi,null,jo.default.createElement(Ei,{coinSymbol:t,amountDisplay:o,currencyDisplay:null}),jo.default.createElement(yi,{address:e}),jo.default.createElement(Ys,null))}var Zs=tl;i();s();function rl(){return yo.default.createElement("div",{className:"rpc-evm-coin-detail"},yo.default.createElement(Us,null),yo.default.createElement("div",{className:"rpc-evm-coin-detail__content"},yo.default.createElement(Zs,null),yo.default.createElement(zs,null)))}var qs=rl;i();s();var ce=l(_()),oa=l(_r());I();var ta=l(W());i();s();var Ne=l(_()),js=l(re());i();s();var Eo=l(_()),Qs=l(re());var Xs=({token:e,className:t,children:o,onClick:r})=>Eo.default.createElement("div",{onClick:r,className:(0,Qs.default)("rc-mode__token",t)},Eo.default.createElement(Y,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e?.symbol}),Eo.default.createElement("div",{className:"rc-mode__token__info"},Eo.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),Eo.default.createElement("div",{className:"rc-mode__token__name"},e.name)),o);var Js=({className:e,dataSource:t=[],renderItem:o,emptyText:r,useFade:n,component:m="div",...c})=>{let p=!t.length,d=n?gn:Ne.default.Fragment,f=n?xn:Ne.default.Fragment,T=n?"div":Ne.default.Fragment;return Ne.default.createElement(m,{className:(0,js.default)("rc-mode__tokens",e),...c},Ne.default.createElement(d,null,t.map((h,g)=>{let C=g,x=Ne.default.createRef();return Ne.default.createElement(f,{key:C,nodeRef:x},Ne.default.createElement(T,{ref:x},o(h)))})),p&&r)};Js.Item=Xs;var Ge=Js;i();s();var Jo=l(_()),Rs=l(oe());var ea=()=>{let e=fe(),[t,o]=Jo.default.useState(),r=(0,Rs.useMemoizedFn)(({target:{value:c}})=>{o(c)},[]),n=(0,Jo.useMemo)(()=>e.filter(({balance:c})=>!!Number(c)),[e]);return[(0,Jo.useMemo)(()=>t?n.filter(({name:c,symbol:p})=>{let d=t?.toLowerCase();return c?.toLowerCase()?.includes(d)||p?.toLowerCase()?.includes(d)}):n,[t,n]),{onChange:r,value:t,showSearch:!!n.length}]};i();s();var ra=()=>{let[e,{showSearch:t,...o}]=ea();return ce.default.createElement("div",{className:"rc-mode-select__token"},ce.default.createElement(z,{title:a("developer_mode_send_title_selecta_token")}),t&&ce.default.createElement(P.Search,{placeholder:a("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...o}),ce.default.createElement(Ge,{dataSource:e,renderItem:r=>ce.default.createElement(ta.Link,{to:`${de}?${oa.default.stringify({showClose:1,address:r?.address})}`},ce.default.createElement(Ge.Item,{token:r},ce.default.createElement("div",{className:"rc-mode-select__token__balance"},ce.default.createElement("div",{className:"rc-mode-select__token__amount"},M.thousandFormat(r.balance||0))))),emptyText:ce.default.createElement(Mr.State,{className:"rc-mode-select__token__empty",title:t?a("developer_mode_send_toast_addnewtoken",{crypto:ce.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},o.value)}):a("developer_mode_send_toast_nonetoken")})}))};i();s();var Je=l(_()),la=l(W()),ca=l(oe());I();i();s();i();s();var or=l(_()),nl=({children:e})=>or.default.createElement("div",{className:"token-detail-container"},e),na=(0,or.memo)(nl);i();s();var We=l(_()),il=({image:e,symbol:t,name:o})=>We.default.createElement("div",{className:"token-detail-intro"},We.default.createElement("div",{className:"token-detail-intro__image"},e),We.default.createElement("div",{className:"token-detail-intro__desc"},We.default.createElement("div",{className:"token-detail-intro__symbol"},t),We.default.createElement("div",{className:"token-detail-intro__name"},o))),ia=(0,We.memo)(il);i();s();var Ce=l(_()),sa=l(re());var sl=({className:e,title:t,text:o,copyText:r,copyNotificationTitle:n,copyNotificationDesc:m})=>{let c=(0,sa.default)("token-detail-row",e),[p,d]=Xn();return Ce.default.createElement("div",{className:c},Ce.default.createElement("div",{className:"token-detail-row__title"},t),Ce.default.createElement("div",{className:"token-detail-row__content"},Ce.default.createElement("div",{className:"token-detail-row__text"},o),r&&Ce.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{p||(d(r),no.success({title:n,desc:Ce.default.createElement("div",{className:"token-detail-row__copy-desc"},m)}))}},Ce.default.createElement(B,{className:"okx-wallet-plugin-copy"}))))},tr=(0,Ce.memo)(sl);i();s();var Ro=l(_()),aa=l(re());var al=({details:e})=>Ro.default.createElement("div",{className:"token-detail-details"},e.map((t,o)=>{let r=o===0?"":"token-detail-details__split",n=(0,aa.default)(t?.className,r);return Ro.default.createElement(tr,{...t,className:n})})),ma=(0,Ro.memo)(al);var rr={Container:na,Intro:ia,Row:tr,Details:ma};i();s();function ml(){let e=(0,la.useHistory)(),o=ie().get("address"),r=b(o,!0),{extensionConfig:n}=D("rpc_info"),m=[{title:a("developer_mode_infor_subtitle_contractadd"),text:G(o),copyText:o,copyNotificationTitle:a("developer_mode_infor_toast_success"),copyNotificationDesc:o},{title:a("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:a("developer_mode_infor_subtitle_network"),text:n.name}];return(0,ca.useMount)(()=>{o||e.replace(Q)}),Je.default.createElement("div",{className:"rpc-evm-token-detail"},Je.default.createElement(z,{title:a("developer_mode_infor_maintitle_tokendetails")}),Je.default.createElement(rr.Container,null,Je.default.createElement(rr.Intro,{image:Je.default.createElement(Y,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),Je.default.createElement(rr.Details,{details:m})))}var pa=ml;i();s();var K=l(_()),Ta=l(W()),ga=l(re());I();i();s();var da=l(_()),ua=l(A()),fa=l(oe());var _a=()=>{let e=(0,ua.useDispatch)(),{extensionConfig:t}=D("rpc_info"),{chainId:o}=t,r=fe(!0,!0),n=(0,da.useMemo)(()=>{let c=[],p=[];return r.forEach(d=>{d.isDeleted?p.push(d):c.push(d)}),{usedChainTokens:c,disusedChainTokens:p}},[r]),m=(0,fa.useMemoizedFn)(({address:c,isDeleted:p})=>{e(nn({chainId:o,address:c,isDeleted:!p}))},[o]);return[n,m]};i();s();var xa=()=>{let[{usedChainTokens:e,disusedChainTokens:t},o]=_a();return K.default.createElement("div",{className:"rpc-mode-manage-crypto"},K.default.createElement(z,{closeable:!1,title:a("developer_mode_home_maintitle_managecpt")}),K.default.createElement(Ta.Link,{to:Tt},K.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},K.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},a("developer_mode_manage_text_customcpt")),K.default.createElement(B,{className:"okds-arrow-chevron-right-centered-md rpc-mode-manage-crypto__custom__icon"}))),K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},a("developer_mode_manage_title_addedcpt")),K.default.createElement(Ge,{useFade:!0,className:"rc-mode-home__tokens",dataSource:e,renderItem:r=>{let n=!r.address;return K.default.createElement(Ge.Item,{token:r},K.default.createElement(B,{className:(0,ga.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":n}),onClick:()=>o(r)}))}}),!!t.length&&K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},a("developer_mode_manage_title_adding")),K.default.createElement(Ge,{useFade:!0,className:"rc-mode-home__tokens",dataSource:t,renderItem:r=>K.default.createElement(Ge.Item,{token:r,key:r?.address},K.default.createElement(B,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>o(r)}))}))};i();s();var L=l(_());I();i();s();var be=l(_()),ha=l(W()),br=l(oe());ko();I();var ll="0x",cl=()=>{let e=wt();return async t=>{try{return!uo(t)||await(await e()).getCode(t)===ll}catch(o){return console.log(o),!0}}},Ca=()=>{let e=H.useForm(),t=(0,ha.useHistory)(),[o,r]=be.default.useState(null),[n,m]=be.default.useState(!1),[c,p]=be.default.useState(!1),d=yn(),f=hn(),T=Cn(),h=cl(),g=fe(!0,!0),{extensionConfig:C}=D("rpc_info");be.default.useEffect(()=>{e?.setFieldsValue({network:C.name})},[C]);let x=(0,br.useMemoizedFn)(()=>{let{chainId:q}=C,X=e.getFieldsValue();d(q,X.address,X),T({chainId:q,address:X.address}),no.success({title:a("developer_mode_manage_toast_added")}),t.go(-1)},[C]),S=(0,br.useMemoizedFn)(Pr(async()=>{r(null),p(null);let q=e.getFieldValue("address");if(e.cleanErrors(),!q)return!1;let X=g.find(ae=>ae.address===q);if(X&&!X.isDeleted)return e.setErrors({address:a("developer_mode_manage_errortip_duplicate_add")});if(m(!0),p(!1),await h(q))return m(!1),e.setErrors({address:a("developer_mode_manage_errortip_request_failed")});try{let ae=await f(q);r(ae),e.setFieldsValue(ae)}catch(ae){p(!0),e.setErrors({address:""}),console.log("error",ae)}finally{m(!1)}},250),[g]),se=(0,be.useMemo)(()=>c?be.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},a("developer_mode_manage_errortip_request_failed"),be.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:S},a("developer_mode_manage_errortip_refresh"))):null,[c]);return{form:e,token:o,rpcInfo:C,fetching:n,addressError:se,onConfirm:x,onAddressTrigger:S}};i();s();var pl=11,ya=()=>{let{form:e,token:t,rpcInfo:o,fetching:r,onConfirm:n,addressError:m,onAddressTrigger:c}=Ca();return L.default.createElement("div",{className:"rpc-mode-custom-crypto"},L.default.createElement(z,{title:a("developer_mode_manage_maintitle_customcpt")}),L.default.createElement(H,{form:e,size:H.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},L.default.createElement(H.Item,{name:"network",label:a("developer_mode_manage_title_network")},L.default.createElement(P,{size:H.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:L.default.createElement(Y,{theme:"lightGray",icon:o.icon,text:o?.name,className:"rpc-mode-custom-crypto__icon"})})),L.default.createElement(H.Item,{name:"address",label:a("developer_mode_manage_title_contractadd"),extra:m},L.default.createElement(P.TextArea,{autoResize:!0,size:H.SIZE.xl,onChange:c,errorType:P.TIP_TYPE.always,suffix:r&&L.default.createElement(lr.Circle,{size:lr.SIZE.sm})})),L.default.createElement(H.Item,{name:"symbol",hidden:!t,label:a("developer_mode_manage_title_symbol"),rules:[{validator:(p,d)=>d?.length>pl?Promise.reject(a("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},L.default.createElement(P,{size:H.SIZE.xl})),L.default.createElement(H.Item,{hidden:!t,name:"decimals",label:a("developer_mode_manage_title_decimals")},L.default.createElement(P,{size:H.SIZE.xl,disabled:!0})),L.default.createElement(H.Item,{hidden:!0,name:"name"},L.default.createElement(P,{size:H.SIZE.xl})),L.default.createElement(H.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:p,getFieldValue:d})=>L.default.createElement(Ae.FooterActions,{usePortal:!0,offsetBottom:0},L.default.createElement(O,{size:O.SIZE.lg,type:O.TYPE.highlight,category:O.CATEGORY.fill,disabled:p().length||!d("symbol"),onClick:n},a("developer_mode_manage_btn_confirm"))))))};var Ea=()=>Z.default.createElement(Z.default.Fragment,null,Z.default.createElement(ee.Switch,null,Z.default.createElement(ee.Route,{path:dt,component:Gi,exact:!0}),Z.default.createElement(ee.Route,{path:ao,component:Zi,exact:!0}),Z.default.createElement(ee.Route,{path:de,component:ms,exact:!0}),Z.default.createElement(ee.Route,{path:ut,component:ps,exact:!0}),Z.default.createElement(ee.Route,{path:ft,component:ra,exact:!0}),Z.default.createElement(ee.Route,{path:_t,component:xa,exact:!0}),Z.default.createElement(ee.Route,{path:Tt,component:ya,exact:!0}),Z.default.createElement(ee.Route,{path:gt,component:Fs,exact:!0}),Z.default.createElement(ee.Route,{path:mo,component:qs,exact:!0}),Z.default.createElement(ee.Route,{path:xt,component:pa,exact:!0})),Z.default.createElement(Yi,null));var yE=()=>{let e=(0,vo.useHistory)(),{isRpcMode:t}=(0,va.useSelector)(ht);return(0,et.useEffect)(()=>{t||e.replace(Q)},[t]),et.default.createElement(vo.Switch,null,et.default.createElement(vo.Route,{path:on,component:Ea}))};export{yE as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=rpc-mode-5UT32PM4.js.map
