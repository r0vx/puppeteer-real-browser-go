import{a as ll}from"./chunk-MZSDFALS.js";import{a as ul}from"./chunk-32BL2FRE.js";import{a as re,j as il}from"./chunk-SR7OSGG2.js";import{a as ol,b as al,c as ns,d as sl}from"./chunk-UD6DWZAJ.js";import{a as nl}from"./chunk-V4ELRF6L.js";import{a as tl}from"./chunk-V7MVE7GF.js";import{c as rl}from"./chunk-LXDEJX7F.js";import"./chunk-CQWP5UAS.js";import{a as zo,b as $u}from"./chunk-IK5VIKIS.js";import"./chunk-Y6T5M4AD.js";import{b as Wo,c as rs,d as Zu}from"./chunk-J3K74NCM.js";import{a as qu}from"./chunk-UWCOP3B7.js";import"./chunk-6DUYAS7R.js";import"./chunk-CEM2RCMY.js";import"./chunk-VVJ6BK3Q.js";import"./chunk-FUVVPSUI.js";import{A as Dn,B as Gr,a as Vn,t as Yu,x as Ct}from"./chunk-NKIUEXOA.js";import{c as Vu,h as Ku}from"./chunk-4YDY4B6P.js";import"./chunk-CGFS6AE4.js";import"./chunk-DDT324RS.js";import"./chunk-2TQXMDYZ.js";import"./chunk-RNMISV22.js";import{a as Gu}from"./chunk-A267SEFJ.js";import"./chunk-VR7OPIR6.js";import{a as Cn,b as fr,c as Yr,d as Ju,e as _t,f as ct,g as Qu,h as Uo,i as el}from"./chunk-OYW5VCY2.js";import{a as Xu}from"./chunk-DHQ6D2W3.js";import"./chunk-RT3YHZTS.js";import"./chunk-4ZGOJDNI.js";import"./chunk-ZPQXBUKT.js";import"./chunk-35Y7QMWN.js";import"./chunk-VIT5MDY4.js";import"./chunk-RH6WPBEZ.js";import{b as Wu,k as Uu,y as Hu}from"./chunk-CDNJY7Z3.js";import"./chunk-DBWXHHZT.js";import"./chunk-VVKAQ7K5.js";import{d as yr,e as zu}from"./chunk-7JSJY3SQ.js";import"./chunk-NWY3GPDX.js";import"./chunk-6JEFG7DQ.js";import"./chunk-B6YXJZUF.js";import"./chunk-4I2JSOYJ.js";import"./chunk-GTN3RCGH.js";import"./chunk-3VKPY2QL.js";import"./chunk-AOSRFQ4E.js";import"./chunk-ULL77AIR.js";import"./chunk-PJYSMRRW.js";import"./chunk-GKQQDLVP.js";import"./chunk-7YKP5374.js";import"./chunk-KGG7DXMS.js";import"./chunk-FGIHS4ZF.js";import"./chunk-U65R4NF3.js";import"./chunk-OTUJWRS5.js";import"./chunk-WIW5JVRP.js";import"./chunk-7CXUJS4C.js";import"./chunk-ULXZERAJ.js";import"./chunk-PJ5X5CUU.js";import"./chunk-TSVRDRPO.js";import"./chunk-PPTAKQQT.js";import"./chunk-IFQDHP3Z.js";import"./chunk-DA5RJYYW.js";import"./chunk-HUC3JPS2.js";import"./chunk-MYNDXPHU.js";import{c as $e}from"./chunk-ZTIVM5ML.js";import"./chunk-2E2OBQTS.js";import"./chunk-VICEBZ4G.js";import"./chunk-WO6OHGU2.js";import"./chunk-3S4BGA37.js";import"./chunk-POP3LIKS.js";import"./chunk-PMRTKWFS.js";import"./chunk-G44PPNNQ.js";import"./chunk-K2BSCLBF.js";import"./chunk-PZY7HRHV.js";import"./chunk-Z2L2F5M5.js";import"./chunk-IPLOJJIA.js";import"./chunk-RLPRDJ34.js";import"./chunk-2ASICJQL.js";import"./chunk-TQWSBAXG.js";import"./chunk-6JVCYB7O.js";import"./chunk-GR42TVIZ.js";import"./chunk-QMSSDBOR.js";import{A as Cu,B as Eu,C as Au,D as Bu,E as Mo,F as xu,G as yt,H as wu,I as Fu,J as yu,K as Tu,L as _u,M as Su,a as Je,b as Ur,c as de,d as He,e as eu,f as tu,g as ru,h as nu,i as ou,j as au,k as su,l as iu,m as uu,n as lu,o as cu,p as vn,q as lt,r as fu,s as du,t as mu,u as pu,v as hu,w as vu,x as gu,y as es,z as Du}from"./chunk-6527YXTT.js";import{a as Zi,b as Xi,d as Ji,e as Qi}from"./chunk-Q6REWZWR.js";import{b as Po}from"./chunk-5QHVWW7O.js";import"./chunk-5PDHABUQ.js";import"./chunk-ZLJJZYPU.js";import"./chunk-36PYO4PJ.js";import{e as Ki}from"./chunk-636UWIUZ.js";import"./chunk-34JXWTF5.js";import{d as jo}from"./chunk-JSOLAK4X.js";import"./chunk-R7LZSAVU.js";import"./chunk-LTLRDXME.js";import"./chunk-RMI6BAM3.js";import"./chunk-AADHEW4J.js";import{g as ju}from"./chunk-OK4242CI.js";import"./chunk-6MVL4I6V.js";import"./chunk-E7MGN3V4.js";import"./chunk-YGIVEMKT.js";import{a as Ru}from"./chunk-T4RFDN7D.js";import{M as Yi,d as Wi,h as Ui,pa as qi,r as Hi,w as Gi}from"./chunk-NQAVUB4Q.js";import"./chunk-IEGAVAV7.js";import"./chunk-V4P2E4SN.js";import"./chunk-DYL77QBO.js";import"./chunk-5A3RJQCM.js";import"./chunk-MN3UHDTX.js";import"./chunk-IJW6HFV5.js";import"./chunk-N2MMFEEK.js";import"./chunk-MKDQBVRZ.js";import"./chunk-DA2FCNEZ.js";import"./chunk-TLZRRG7J.js";import"./chunk-ZFFAX2YS.js";import"./chunk-7UDMBSMI.js";import"./chunk-7C7MBE2C.js";import"./chunk-KJWX5V23.js";import{a as Lo,b as $i,g as Ou,q as Mu}from"./chunk-KDVER5QK.js";import{a as gn,d as ku}from"./chunk-5CHE7P4E.js";import"./chunk-PD44C7EF.js";import"./chunk-6K6UF6OE.js";import"./chunk-OKXHAJNT.js";import"./chunk-CBHKW7LL.js";import"./chunk-67F2WFQO.js";import{d as bu}from"./chunk-QYDRYMWS.js";import{h as Pu,k as Lu}from"./chunk-AZNX5TUC.js";import"./chunk-JU4HVVJ2.js";import"./chunk-NKWTNXAD.js";import"./chunk-XZE3C5KK.js";import"./chunk-XZE3L7K7.js";import"./chunk-Y5K5NJ6U.js";import"./chunk-UR7XESQE.js";import"./chunk-JABAEAEN.js";import"./chunk-VY2VK2OT.js";import"./chunk-Q7FGM7BT.js";import{b as Ge}from"./chunk-TKE74ERX.js";import{a as Iu}from"./chunk-MONRGJFN.js";import"./chunk-RYT7JDQV.js";import"./chunk-CZZFLX67.js";import"./chunk-IK72BO4I.js";import{Ra as Hr,Sa as Yn,Ta as qn,Ua as $n}from"./chunk-QMENNGDH.js";import"./chunk-KANXVZ35.js";import{a as hn,r as xe}from"./chunk-WGVA2GGS.js";import{a as tp}from"./chunk-APGT6UVG.js";import"./chunk-V34MB2FG.js";import{g as Qm,m as ep,o as Ee}from"./chunk-XP3TNE3R.js";import{C as Io,Ha as Ri,Kb as zi,V as ki,Va as Fr,ca as Mi,gb as ji,jc as Tt}from"./chunk-QRHYK2TW.js";import"./chunk-PODZSVO7.js";import{a as Li}from"./chunk-QO4JMOUQ.js";import"./chunk-7N263AYH.js";import{a as ts}from"./chunk-532YJKK4.js";import"./chunk-Q4YLD24R.js";import"./chunk-K5ZGZULR.js";import"./chunk-M6J3OOFH.js";import{b as Oi,c as To,d as qa,e as $a,f as Km}from"./chunk-ZDOH3CEJ.js";import{c as Qa,e as Jm}from"./chunk-AS4Z3FNS.js";import"./chunk-KW2XDOEY.js";import"./chunk-NU4UJZBB.js";import"./chunk-2FDQIA7D.js";import{c as Qe,d as ko,e as Vi}from"./chunk-L524QXHA.js";import"./chunk-ZFTHPYIG.js";import"./chunk-N6DAHVYW.js";import"./chunk-YCFHPQAJ.js";import{da as Ja,ia as Jt,l as Oo,n as Za,s as Xa,u as No}from"./chunk-4EIUGT5A.js";import"./chunk-7FRDKLRJ.js";import"./chunk-P7VKC6DQ.js";import"./chunk-D7FW64MN.js";import"./chunk-6ZZOO2CD.js";import"./chunk-JPTLCZ2Y.js";import"./chunk-COS5CL3D.js";import"./chunk-VL2YBSHB.js";import{d as Ro}from"./chunk-AVC4ODUV.js";import"./chunk-RJ3YTAFM.js";import{a as Nu}from"./chunk-OCAFSBNZ.js";import{c as y}from"./chunk-62ZAND24.js";import{a as qe}from"./chunk-SIITVWZR.js";import{Eb as Xt,Ec as ge,Jb as Hn,K as Fi,L as wo,M as fn,Ma as Zt,Mc as Va,Na as zn,Pc as cr,Pd as Zm,Rd as Ii,S as yi,Sc as _o,Uc as pn,V as Mn,Vc as So,X as Ti,Xd as Xm,Ya as yo,_d as Pi,a as ci,b as qm,ba as Ha,bd as bo,db as Wn,ge as Gn,ia as dn,ib as Un,mc as Ce,od as je,oe as Ka,pd as Ni,rc as ye,vc as ce,wc as We}from"./chunk-QHXUL3YM.js";import{H as pe,n as H,y as T}from"./chunk-MOTAOJVG.js";import"./chunk-FYTT4U7M.js";import{A as Ft,G as Ya,N as bi,Q as Fo,c as _i,d as Rn,h as jn,o as Wr,q as _e,r as wr,w as Ga,x as mn,z as Si}from"./chunk-XR4SQWL7.js";import{a as $m}from"./chunk-NCGYY6X6.js";import"./chunk-LMBQGBLO.js";import"./chunk-QWIXUG3W.js";import"./chunk-NNUMMJQC.js";import"./chunk-Z3JMRMVO.js";import{$ as Bi,A as kn,F as hi,H as vi,L as gi,Q as cn,R as Ao,S as Di,V as Ci,Z as Ei,_ as Ai,ea as xi,f as fi,ia as Bo,k as di,la as wi,m as mi,ma as xo,ra as st,w as pi}from"./chunk-CYTB2B6Q.js";import"./chunk-CAFKDDXA.js";import"./chunk-CTOTVO2J.js";import"./chunk-T2ETCKOI.js";import"./chunk-6P63CWAB.js";import"./chunk-RJPAKY6O.js";import"./chunk-ZCK5UHUS.js";import"./chunk-ANUO2YYF.js";import{aa as ut,fa as Ht,ka as te}from"./chunk-6M3PZK2X.js";import"./chunk-TPIKSUHH.js";import{b as ee}from"./chunk-OL67KS7C.js";import"./chunk-TVBFJITU.js";import"./chunk-D2YP6KBJ.js";import{a as Vm}from"./chunk-2EEW2VNF.js";import"./chunk-TLR6EQX6.js";import"./chunk-S5ACFHVS.js";import"./chunk-FQLRWF7X.js";import"./chunk-NLMDM2WF.js";import"./chunk-BJAL3374.js";import"./chunk-KDUIZVRC.js";import"./chunk-VYKQ62AB.js";import"./chunk-263G66VF.js";import"./chunk-SUANL2KV.js";import"./chunk-KTFU3F6C.js";import"./chunk-2OVRHWIW.js";import"./chunk-32ZJ4F2J.js";import"./chunk-WIP2REO7.js";import"./chunk-JBHIVXO6.js";import"./chunk-LECESFCD.js";import"./chunk-NW4HKKTQ.js";import"./chunk-EBMX24YQ.js";import"./chunk-3C4MEE67.js";import"./chunk-R4BHRBC7.js";import{c as li,f as S,h as Ut,o as g,q as D}from"./chunk-SHG7TIBL.js";var dc=li((XE,fc)=>{"use strict";g();D();fc.exports=bv;var lc="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",cc="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",_v=new RegExp("^[^"+cc+"]*["+lc+"]"),Sv=new RegExp("^[^"+lc+"]*["+cc+"]");function bv(t){return t=String(t||""),_v.test(t)?"rtl":Sv.test(t)?"ltr":"neutral"}});var Rc=li(er=>{"use strict";g();D();Object.defineProperty(er,"__esModule",{value:!0});var Uv=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Bs={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Hv={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Uv?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Pc={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(no=1;no<20;no++)Pc["f"+no]=111+no;var no;function la(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var n=t.map(function(s){return Lc(s,e)}),o=function(i){return n.some(function(c){return kc(c,i)})},a=r==null?o:o(r);return a}function Gv(t,e){return la(t,e)}function Yv(t,e){return la(t,{byKey:!0},e)}function Lc(t,e){var r=e&&e.byKey,n={};t=t.replace("++","+add");var o=t.split("+"),a=o.length;for(var s in Bs)n[Bs[s]]=!1;var i=!0,c=!1,l=void 0;try{for(var f=o[Symbol.iterator](),v;!(i=(v=f.next()).done);i=!0){var h=v.value,m=h.endsWith("?")&&h.length>1;m&&(h=h.slice(0,-1));var p=xs(h),u=Bs[p];(a===1||!u)&&(r?n.key=p:n.which=Mc(h)),u&&(n[u]=m?null:!0)}}catch(C){c=!0,l=C}finally{try{!i&&f.return&&f.return()}finally{if(c)throw l}}return n}function kc(t,e){for(var r in t){var n=t[r],o=void 0;if(n!=null&&(r==="key"&&e.key!=null?o=e.key.toLowerCase():r==="which"?o=n===91&&e.which===93?91:e.which:o=e[r],!(o==null&&n===!1)&&o!==n))return!1}return!0}function Mc(t){t=xs(t);var e=Pc[t]||t.toUpperCase().charCodeAt(0);return e}function xs(t){return t=t.toLowerCase(),t=Hv[t]||t,t}er.default=la;er.isHotkey=la;er.isCodeHotkey=Gv;er.isKeyHotkey=Yv;er.parseHotkey=Lc;er.compareHotkey=kc;er.toKeyCode=Mc;er.toKeyName=xs});g();D();var Rr=S(ee()),Wa=S(Tt()),un=S(ts()),Mm=S(Ee());g();D();g();D();var Kn=S(Tt()),cl=S(ee()),fl=S(Ee()),It=(t,e)=>r=>{let n=(0,Kn.useSelector)(t),o=(0,Kn.useDispatch)(),a=i=>{e&&o(e(i))},s=(0,fl.useMemoizedFn)(a);return(0,cl.useEffect)(()=>{if(r===void 0)return;let i=typeof r=="function"?r():r;s(i)},[r,s]),[n,a]},dl=t=>()=>{let e=(0,Kn.useDispatch)();return(...n)=>{t&&e(t(...n))}};var Ye=It(nu,gu),ue=It(ou,vu),Ho=It(au,Mo),En=It(su,xu),it=It(tu,hu),Go=It(mu,Au),q0=It(pu,Bu),Ae=It(iu,Du),ml=dl(Fu),ft=It(lu,Cu),dt=It(cu,Eu),An=It(ru,wu);g();D();var Cl=S(ee()),Xn=S(Tt()),Tr=S(Ee());pe();g();D();var os=S(Ee());pe();Ka();je();zn();Hn();var rp="8000",Yo=()=>{let t=Ct();return(0,os.useMemoizedFn)(async({coinId:e,address:r,inputData:n})=>{let o=await t({coinId:e,address:r,fromAddr:r,scenario:Oo.SCENARIO_SEND_COIN}),a=o,{gasUnitPrice:s}=o;if(n){let{data:{gasLimit:c}}=await Xt(Zt.getAptosGasLimit,{inputData:n});a=c}else a=rp;let i=H.mul(s,a);return{...o,networkFee:i,maxGasAmount:a,gasUnitPrice:s}})},pl=()=>{let t=Dn({localType:ye});return(0,os.useMemoizedFn)(async({to:e,from:r,amount:n,baseCoinId:o,metaAddress:a,sequenceNumber:s,maxGasAmount:i,gasUnitPrice:c,protocolType:l,chainId:f,expirationTimestampSecs:v,tyArg:h})=>{let p={base:{sequenceNumber:s,chainId:f,maxGasAmount:i,gasUnitPrice:c,expirationTimestampSecs:v}},u={amount:n,recipientAddress:e};return o===0&&(p.type=No.TRANSFER,p.data=u),o!==0&&l===Gn.APTOS_FUNGIBLE_TOKEN&&(p.type=No.FUNGIBLE_ASSET_TRANSFER,p.data={...u,fungibleAssetMetadataAddress:a}),o!==0&&l===Gn.APTOS_TOKEN&&(p.type=No.TOKEN_TRANSFER,p.data={...u,tyArg:h}),await t({params:p,fromAddr:r})})};g();D();var Zn=S(Ee());pe();Ka();je();var hl=()=>(0,Zn.useMemoizedFn)(async({to:t,toes:e,from:r,value:n,values:o,budget:a,gasPrice:s,inputCoins:i,tokenInputCoins:c,baseCoinId:l})=>{let f=e?.length?e:[t],v=o?.length?o:[n],h=i.map((u={})=>{let{digest:C,version:E,objectId:A}=u;return{digest:C,version:E,objectId:A}}),m=new Uu;if(m.setGasPrice(s),m.setGasPayment(h||[]),m.setSender(r),a&&m.setGasBudget(a),l===0){let u=m.splitCoins(m.gas,v);f.forEach((C,E)=>{m.transferObjects([u[E]],m.pure.address(C))})}else if(c?.length>1){let u=c.slice(1).map(A=>m.object(A.objectId)),C=m.object(c[0].objectId);m.mergeCoins(C,u);let E=m.splitCoins(C,[n]);m.transferObjects([E],m.pure.address(t))}else{let u=m.splitCoins(m.object(c[0].objectId),[n]);m.transferObjects([u],m.pure.address(t))}let p=Wu(await m.build({client:nl}));return{tx:m,txBytes:p}}),qo=()=>{let t=Ct(),e=hl();return(0,Zn.useMemoizedFn)(async({to:r,from:n,value:o,values:a,toes:s,coinId:i,baseCoinId:c})=>{let l=a?.length?a?.reduce((m,p)=>H.add(m,p),0):o,f=await t({coinId:i,address:n,value:l,toAddr:s?.[0]||r});return(await e({...f,to:r,toes:s,from:n,value:o,coinId:i,values:a,baseCoinId:c}))?.tx?.blockData?.gasConfig?.budget||"0"})},vl=()=>{let t=hl(),e=Ct(),r=Dn({localType:We});return(0,Zn.useMemoizedFn)(async({to:n,toes:o,values:a,from:s,coinId:i,value:c,baseCoinId:l})=>{let f=a?.length?a?.reduce((C,E)=>H.add(C,E),0):c,v=await e({value:f,coinId:i,address:s,toAddr:o?.[0]||n}),{tx:h,txBytes:m}=await t({...v,value:c,coinId:i,to:n,toes:o,from:s,values:a,baseCoinId:l}),u=await r({params:{type:"raw",data:m},fromAddr:s});return{tx:h,txBytes:m,signedTx:u}})},gl=t=>{let e=Lu(),r=Pu(),n=Gr({coinId:t,txSource:Pi.NORMAL});return(0,Zn.useMemoizedFn)(async({tx:o,to:a,from:s,txBytes:i,coinAmount:c,signedTx:l,walletId:f})=>{let{signature:v,hash:h}=l||{},m=e(f)||r;return await n({tx_bytes:i,signatures:[v],request_type:"WaitForEffectsCert"},{txHash:h,coinAmount:c,accountId:f,fromAdr:s,toAdr:a,walletType:m?.serverWalletType,serviceCharge:o?.blockData?.gasConfig?.budget||"0"})})};Jm();Un();je();dn();g();D();var Dl=S(ee());var qr=t=>{let[e]=Ye(),r=t||e?.rpcUrl;return(0,Dl.useCallback)(async()=>r?await $i(r):{},[r])};var $o=t=>{let[e]=Ye(),r=t||e?.rpcUrl;return Zi(r)};var np=(t,e)=>{let[r]=ue(),{ready:n=!0,onSuccess:o}=e||{},a=Xi(t);(0,Tr.useRequest)(async()=>{let s=await a(r?.chainId);return{isSupportEip1559:s?.[0]?.isSupportEip1559||!1,gasPriceLevels:s}},{onSuccess:o,pollingInterval:7e3,ready:!!r?.chainId&&!!n})},El=()=>{let[t]=ue(),[e]=Ye(),r=(0,Xn.useDispatch)(),[n]=Go(),[o,a]=(0,Cl.useState)([]),[,s]=An(),i=gn(t?.localType),c=i&&Qe(i,t?.localType),l=(0,Xn.useSelector)(vn);return np(e?.rpcUrl,{ready:!!e?.rpcUrl&&!t?.coinId,onSuccess:({isSupportEip1559:f,gasPriceLevels:v})=>{let h=Qi({chainGasLevels:v,chainGasRate:l});s(f),r(es(h)),a(h)}}),qu({coinId:t?.coinId,chainId:t?.chainId,address:c},{ready:!!t?.coinId&&![ye,Ce,We,ce,ge].includes(t?.localType)&&n===Ur.CONFIRM,onSuccess:f=>{let{gasPrice:v,needExtFee:h}=f;r(Tu(h)),s(v?.supportEip1559||!1),a(rs(v)),r(es(rs(v)))}}),o};var Vo=()=>{let t=yr(cr,{withPrice:!0}),e=Ct(),r=Yu();return(0,Tr.useMemoizedFn)(async({from:n,to:o,coinId:a,chainId:s})=>{let i=await e({coinId:a,toAddr:o,address:n,fromAddr:n,scenario:Oo.SCENARIO_SEND_COIN})||{},c=await r({from:n,chainId:s,coinId:a,bizLine:6,simulateTransactionParamList:[{sigVerify:!1,replaceRecentBlockhash:!0}],checkTypes:[Ja.TX_ANALYZE]}),{simulateTransactionResultList:l}=c?.[Ja.TX_ANALYZE]||{},{unitGasLimit:f}=l[0]||{},{fee:v,feelimit:h,computeUnitPrice:m,rent:p,solRent:u,toAddressLegal:C,tokenAccountToAddress:E}=i;if(v){let{priorityFee:A,priorityGasPrice:F,priorityGasLimit:w}=ji(h,m,f),_=H.add(v,A),L=H.div(_,10**t?.decimals);return{rent:p,solRent:u,networkFee:L,networkFeeInt:_,computeUnitLimit:w,computeUnitPrice:F,networkFeeMarket:H.mul(L,t?.currencyPrice),toAddressLegal:C,tokenAccountToAddress:E}}return{estimateFailed:!0}})},Al=()=>{let t=yr(So,{withPrice:!0}),e=qo();return(0,Tr.useMemoizedFn)(async({coinId:r,from:n,to:o,value:a,baseCoinId:s})=>{let i=await e({to:o,from:n,value:a,coinId:r,baseCoinId:s}),c=H.div(i,10**t?.decimals);return{networkFee:c,networkFeeInt:i,networkFeeMarket:H.mul(c,t?.currencyPrice)}})},Ko=t=>{let e=yr(t||pn,{withPrice:!0});return(0,Tr.useMemoizedFn)(async({to:r,chainId:n,contractAddress:o})=>{let a={address:r,type:"Transfer",contractAddress:o,chainId:n||e?.chainId},i=(await tl(a))?.data?.fee||"0",c=H.div(i,10**(e?.decimals||0));return{networkFee:c,networkFeeInt:i,networkFeeMarket:H.mul(c,e?.currencyPrice)}})},Bl=()=>{let t=yr(_o,{withPrice:!0}),e=Yo();return(0,Tr.useMemoizedFn)(async({coinId:r,address:n,inputData:o})=>{let{networkFee:a}=await e({coinId:r,address:n,inputData:o}),s=H.div(a,10**t?.decimals);return{networkFee:s,networkFeeInt:a,networkFeeMarket:H.mul(s,t?.currencyPrice)}})},Zo=()=>{let e=Uo(!1,ge).map(i=>i.options).flat(),r=(0,Xn.useDispatch)(),n=sl(),o=yr(bo,{withPrice:!0}),[a]=ue(),s=Ct();return(0,Tr.useMemoizedFn)(async({baseCoinId:i,coinId:c,chainId:l,from:f,to:v,tokenAddress:h,decimals:m,amount:p,sendMode:u=Fr.CARRY_ALL_REMAINING_BALANCE,memo:C})=>{let A=e?.find(W=>W.address===f)?.walletId||await Qa().getWalletIdByAddress(f,ge),F=await Qa().getWalletIdentityByWalletId(A),w=Hu(F,f),_=await s({coinId:c,address:f,fromAddr:f,toAddr:v,value:"0"}),L=await n(_,a?.baseCoinId);if(r(_u(L)),L.getCustomPayloadInfoRpcError)return{networkFee:0,networkFeeInt:0,networkFeeMarket:0,signInfo:L,gasLimitInfo:null,bodyParams:null};let I={to:v,seqno:L?.nonce,decimal:m,amount:p,memo:C,expireAt:ol(L?.ttl),walletVersion:w};i===0?I={...I,type:ns.TRANSFER,sendMode:u}:(I={...I,type:ns.JETTON_TRANSFER,fromJettonAccount:L?.fromJettonAccount,sendMode:Fr.PAY_GAS_SEPARATELY+Fr.IGNORE_ERRORS},L?.customPayload&&(I={...I,customPayload:L?.customPayload,stateInit:L?.stateInit}));let k=await al({fromAddress:f,body:I,walletId:A}),{data:b}=await ki({address:f,tokenAddress:h,chainId:l,coinId:c,value:"0",inputData:JSON.stringify(k)}),{invokeNotificationFee:U="0",gasLimit:G="0"}=b,M=i===0?G:wo(G,U),Y=H.div(M,10**(o?.decimals||0));return{networkFee:Y,networkFeeInt:M,networkFeeMarket:H.mul(Y,o?.currencyPrice),signInfo:L,gasLimitInfo:b,bodyParams:I}})};je();dn();g();D();var qt=S(ee());pe();g();D();var op={MANY_TO_MANY:"MANY_TO_MANY",ONE_TO_MANY:"ONE_TO_MANY",MANY_TO_ONE:"MANY_TO_ONE"},J=op;g();D();var dr=S(ee());var Xo=S(qe());g();D();g();D();var Jn=S(ee());g();D();var xl=S(ts());function ap(){let t=(0,xl.useHistory)(),[e,r]=Go(),n=(m,p)=>(u=!0)=>{e!==p&&r(p),u?t.replace(m):t.push(m)},o=m=>t.location.pathname===m,a=n(Hr,Ur.SELECT_TYPE),s=n(Yn,Ur.ADD_ADDRESS),i=n(qn,Ur.CONFIRM),c=n($n,Ur.SEND),l=o(Hr),f=o(Yn),v=o(qn),h=o($n);return{isConfirmPage:v,isHomePage:l,isSendPage:h,isAddressPage:f,gotoAddressPage:s,gotoConfirmPage:i,gotoSendPage:c,gotoHomePage:a}}var Et=ap;function sp(){let[t]=Ye(),[e]=ue(),[r]=Ae(),{gotoHomePage:n,gotoAddressPage:o,isConfirmPage:a,isSendPage:s,isAddressPage:i,isHomePage:c}=Et(),l=(0,Jn.useCallback)(()=>{!t&&!e?.symbol&&!c&&n()},[t,e,c,n]),f=(0,Jn.useCallback)(()=>{r.length<=0&&!i&&o()},[r,i,o]);(0,Jn.useLayoutEffect)(()=>{i?l():(a||s)&&(l(),f())},[l,f,i,a,s])}var wl=sp;function ip(){return wl(),null}var Fl=ip;g();D();var $r={root:"_root_189ao_1",container:"_container_189ao_6",okgLayout:"_okgLayout_189ao_10",headerBox:"_headerBox_189ao_32",header:"_header_189ao_32",footer:"_footer_189ao_125"};function up({children:t}){return dr.default.createElement(y.Box,{className:$r.footer},t)}function lp({children:t,footer:e,useOkg:r=!0,headerProps:n={}}){let o=r?dr.default.Fragment:y.Box;return dr.default.createElement(y.FlexBox,{className:$r.root,direction:y.DIRECTION.vertical},dr.default.createElement(y.Container,{className:(0,Xo.default)($r.container,r&&$r.okgLayout)},dr.default.createElement(o,{className:(0,Xo.default)(!r&&$r.headerBox)},dr.default.createElement(ul,{...n,className:(0,Xo.default)($r.header,n.className)})),t),dr.default.createElement(up,null,e),dr.default.createElement(Fl,null))}var _r=lp;g();D();var Cr=S(ee()),kf=S(qe());pe();g();D();var be=S(ee()),Ws=S(Ee()),Of=S(Vm());g();D();g();D();function yl(t){return Object.prototype.toString.call(t)==="[object Object]"}function et(t){var e,r;return yl(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(yl(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}Km();var cp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=B.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},fp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=me.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},dp={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=O.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},Qo=new WeakMap,ea=new WeakMap,eo=new WeakMap,oc=new WeakMap,Tl=new WeakMap,_l=new WeakMap,Sl=new WeakMap,B={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=B.levels(t,e);return r?n=n.slice(1):n=n.slice(0,-1),n},common(t,e){for(var r=[],n=0;n<t.length&&n<e.length;n++){var o=t[n],a=e[n];if(o!==a)break;r.push(o)}return r},compare(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},endsAfter(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),a=t[r],s=e[r];return B.equals(n,o)&&a>s},endsAt(t,e){var r=t.length,n=t.slice(0,r),o=e.slice(0,r);return B.equals(n,o)},endsBefore(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),a=t[r],s=e[r];return B.equals(n,o)&&a<s},equals(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return B.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&B.compare(t,e)===0},isBefore(t,e){return B.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&B.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&B.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&B.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&B.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var r=t.slice(0,-1),n=e.slice(0,-1),o=t[t.length-1],a=e[e.length-1];return o!==a&&B.equals(r,n)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=[],o=0;o<=t.length;o++)n.push(t.slice(0,o));return r&&n.reverse(),n},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!B.isAncestor(e,t)&&!B.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var n=[...t],{affinity:o="forward"}=r;if(t.length===0)return n;switch(e.type){case"insert_node":{var{path:a}=e;(B.equals(a,n)||B.endsBefore(a,n)||B.isAncestor(a,n))&&(n[a.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(B.equals(s,n)||B.isAncestor(s,n))return null;B.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:i,position:c}=e;B.equals(i,n)||B.endsBefore(i,n)?n[i.length-1]-=1:B.isAncestor(i,n)&&(n[i.length-1]-=1,n[i.length]+=c);break}case"split_node":{var{path:l,position:f}=e;if(B.equals(l,n)){if(o==="forward")n[n.length-1]+=1;else if(o!=="backward")return null}else B.endsBefore(l,n)?n[l.length-1]+=1:B.isAncestor(l,n)&&t[l.length]>=f&&(n[l.length-1]+=1,n[l.length]-=f);break}case"move_node":{var{path:v,newPath:h}=e;if(B.equals(v,h))return n;if(B.isAncestor(v,n)||B.equals(v,n)){var m=h.slice();return B.endsBefore(v,h)&&v.length<h.length&&(m[v.length-1]-=1),m.concat(n.slice(v.length))}else B.isSibling(v,h)&&(B.isAncestor(h,n)||B.equals(h,n))?B.endsBefore(v,n)?n[v.length-1]-=1:n[v.length-1]+=1:B.endsBefore(h,n)||B.equals(h,n)||B.isAncestor(h,n)?(B.endsBefore(v,n)&&(n[v.length-1]-=1),n[h.length-1]+=1):B.endsBefore(v,n)&&(B.equals(h,n)&&(n[h.length-1]+=1),n[v.length-1]-=1);break}}return n}};function ht(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Qn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var mp=(t,e,r)=>{switch(r.type){case"insert_node":{var{path:n,node:o}=r,a=V.parent(t,n),s=n[n.length-1];if(s>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(a.children.splice(s,0,o),e)for(var[i,c]of O.points(e))e[c]=me.transform(i,r);break}case"insert_text":{var{path:l,offset:f,text:v}=r;if(v.length===0)break;var h=V.leaf(t,l),m=h.text.slice(0,f),p=h.text.slice(f);if(h.text=m+v+p,e)for(var[u,C]of O.points(e))e[C]=me.transform(u,r);break}case"merge_node":{var{path:E}=r,A=V.get(t,E),F=B.previous(E),w=V.get(t,F),_=V.parent(t,E),L=E[E.length-1];if(Q.isText(A)&&Q.isText(w))w.text+=A.text;else if(!Q.isText(A)&&!Q.isText(w))w.children.push(...A.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(E,"] to nodes of different interfaces: ").concat(tt.stringify(A)," ").concat(tt.stringify(w)));if(_.children.splice(L,1),e)for(var[I,k]of O.points(e))e[k]=me.transform(I,r);break}case"move_node":{var{path:b,newPath:U}=r;if(B.isAncestor(b,U))throw new Error("Cannot move a path [".concat(b,"] to new path [").concat(U,"] because the destination is inside itself."));var G=V.get(t,b),M=V.parent(t,b),Y=b[b.length-1];M.children.splice(Y,1);var W=B.transform(b,r),$=V.get(t,B.parent(W)),ne=W[W.length-1];if($.children.splice(ne,0,G),e)for(var[fe,ve]of O.points(e))e[ve]=me.transform(fe,r);break}case"remove_node":{var{path:X}=r,ie=X[X.length-1],Te=V.parent(t,X);if(Te.children.splice(ie,1),e)for(var[De,Ze]of O.points(e)){var x=me.transform(De,r);if(e!=null&&x!=null)e[Ze]=x;else{var q=void 0,j=void 0;for(var[K,le]of V.texts(t))if(B.compare(le,X)===-1)q=[K,le];else{j=[K,le];break}var oe=!1;q&&j&&(B.equals(j[1],X)?oe=!B.hasPrevious(j[1]):oe=B.common(q[1],X).length<B.common(j[1],X).length),q&&!oe?(De.path=q[1],De.offset=q[0].text.length):j?(De.path=j[1],De.offset=0):e=null}}break}case"remove_text":{var{path:he,offset:Ie,text:Ne}=r;if(Ne.length===0)break;var Le=V.leaf(t,he),Se=Le.text.slice(0,Ie),at=Le.text.slice(Ie+Ne.length);if(Le.text=Se+at,e)for(var[mt,Xe]of O.points(e))e[Xe]=me.transform(mt,r);break}case"set_node":{var{path:Ot,properties:jt,newProperties:pt}=r;if(Ot.length===0)throw new Error("Cannot set properties on the root node!");var Nt=V.get(t,Ot);for(var Be in pt){if(Be==="children"||Be==="text")throw new Error('Cannot set the "'.concat(Be,'" property of nodes!'));var lr=pt[Be];lr==null?delete Nt[Be]:Nt[Be]=lr}for(var ln in jt)pt.hasOwnProperty(ln)||delete Nt[ln];break}case"set_selection":{var{newProperties:ot}=r;if(ot==null)e=ot;else{if(e==null){if(!O.isRange(ot))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(tt.stringify(ot)," when there is no current selection."));e=Qn({},ot)}for(var zt in ot){var Co=ot[zt];if(Co==null){if(zt==="anchor"||zt==="focus")throw new Error('Cannot remove the "'.concat(zt,'" selection property'));delete e[zt]}else e[zt]=Co}}break}case"split_node":{var{path:Wt,position:jr,properties:Eo}=r;if(Wt.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Wt,"] because the root node cannot be split."));var zr=V.get(t,Wt),Rm=V.parent(t,Wt),jm=Wt[Wt.length-1],Ua;if(Q.isText(zr)){var zm=zr.text.slice(0,jr),Wm=zr.text.slice(jr);zr.text=zm,Ua=Qn(Qn({},Eo),{},{text:Wm})}else{var Um=zr.children.slice(0,jr),Hm=zr.children.slice(jr);zr.children=Um,Ua=Qn(Qn({},Eo),{},{children:Hm})}if(Rm.children.splice(jm+1,0,Ua),e)for(var[Gm,Ym]of O.points(e))e[Ym]=me.transform(Gm,r);break}}return e},pp={transform(t,e){t.children=qa(t.children);var r=t.selection&&qa(t.selection);try{r=mp(t,r,e)}finally{t.children=$a(t.children),r?t.selection=Oi(r)?$a(r):r:t.selection=null}}},hp={insertNodes(t,e,r){t.insertNodes(e,r)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,r){t.setNodes(e,r)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,r){t.unsetNodes(e,r)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,r){t.wrapNodes(e,r)}},vp={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,r){t.setPoint(e,r)},setSelection(t,e){t.setSelection(e)}},ac=(t,e)=>{for(var r in t){var n=t[r],o=e[r];if(et(n)&&et(o)){if(!ac(n,o))return!1}else if(Array.isArray(n)&&Array.isArray(o)){if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==o[a])return!1}else if(n!==o)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0};function gp(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function hr(t,e){if(t==null)return{};var r=gp(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var Dp=["anchor","focus"];function Ol(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Cp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ol(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ol(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var O={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,{anchor:n,focus:o}=t;return O.isBackward(t)===r?[n,o]:[o,n]},end(t){var[,e]=O.edges(t);return e},equals(t,e){return me.equals(t.anchor,e.anchor)&&me.equals(t.focus,e.focus)},includes(t,e){if(O.isRange(e)){if(O.includes(t,e.anchor)||O.includes(t,e.focus))return!0;var[r,n]=O.edges(t),[o,a]=O.edges(e);return me.isBefore(r,o)&&me.isAfter(n,a)}var[s,i]=O.edges(t),c=!1,l=!1;return me.isPoint(e)?(c=me.compare(e,s)>=0,l=me.compare(e,i)<=0):(c=B.compare(e,s.path)>=0,l=B.compare(e,i.path)<=0),c&&l},intersection(t,e){var r=hr(t,Dp),[n,o]=O.edges(t),[a,s]=O.edges(e),i=me.isBefore(n,a)?a:n,c=me.isBefore(o,s)?o:s;return me.isBefore(c,i)?null:Cp({anchor:i,focus:c},r)},isBackward(t){var{anchor:e,focus:r}=t;return me.isAfter(e,r)},isCollapsed(t){var{anchor:e,focus:r}=t;return me.equals(e,r)},isExpanded(t){return!O.isCollapsed(t)},isForward(t){return!O.isBackward(t)},isRange(t){return et(t)&&me.isPoint(t.anchor)&&me.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=O.edges(t);return e},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return To(t,n=>{if(n===null)return null;var{affinity:o="inward"}=r,a,s;if(o==="inward"){var i=O.isCollapsed(n);O.isForward(n)?(a="forward",s=i?a:"backward"):(a="backward",s=i?a:"forward")}else o==="outward"?O.isForward(n)?(a="backward",s="forward"):(a="forward",s="backward"):(a=o,s=o);var c=me.transform(n.anchor,e,{affinity:a}),l=me.transform(n.focus,e,{affinity:s});if(!c||!l)return null;n.anchor=c,n.focus=l})}},Nl=t=>et(t)&&V.isNodeList(t.children)&&!d.isEditor(t),Z={isAncestor(t){return et(t)&&V.isNodeList(t.children)},isElement:Nl,isElementList(t){return Array.isArray(t)&&t.every(e=>Z.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return Nl(e)&&e[n]===r},matches(t,e){for(var r in e)if(r!=="children"&&t[r]!==e[r])return!1;return!0}},Ep=["children"],Ap=["text"],Il=new WeakMap,V={ancestor(t,e){var r=V.get(t,e);if(Q.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(tt.stringify(r)));return r},*ancestors(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of B.ancestors(e,r)){var o=V.ancestor(t,n),a=[o,n];yield a}},child(t,e){if(Q.isText(t))throw new Error("Cannot get the child of a text node: ".concat(tt.stringify(t)));var r=t.children[e];if(r==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(tt.stringify(t)));return r},*children(t,e){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:n=!1}=r,o=V.ancestor(t,e),{children:a}=o,s=n?a.length-1:0;n?s>=0:s<a.length;){var i=V.child(o,s),c=e.concat(s);yield[i,c],s=n?s-1:s+1}},common(t,e,r){var n=B.common(e,r),o=V.get(t,n);return[o,n]},descendant(t,e){var r=V.get(t,e);if(d.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(tt.stringify(r)));return r},*descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of V.nodes(t,e))n.length!==0&&(yield[r,n])},*elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of V.nodes(t,e))Z.isElement(r)&&(yield[r,n])},extractProps(t){if(Z.isAncestor(t)){var e=hr(t,Ep);return e}else{var e=hr(t,Ap);return e}},first(t,e){for(var r=e.slice(),n=V.get(t,r);n&&!(Q.isText(n)||n.children.length===0);)n=n.children[0],r.push(0);return[n,r]},fragment(t,e){if(Q.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(tt.stringify(t)));var r=To({children:t.children},n=>{var[o,a]=O.edges(e),s=V.nodes(n,{reverse:!0,pass:h=>{var[,m]=h;return!O.includes(e,m)}});for(var[,i]of s){if(!O.includes(e,i)){var c=V.parent(n,i),l=i[i.length-1];c.children.splice(l,1)}if(B.equals(i,a.path)){var f=V.leaf(n,i);f.text=f.text.slice(0,a.offset)}if(B.equals(i,o.path)){var v=V.leaf(n,i);v.text=v.text.slice(o.offset)}}d.isEditor(n)&&(n.selection=null)});return r.children},get(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(Q.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(tt.stringify(t)));r=r.children[o]}return r},has(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(Q.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode(t){return Q.isText(t)||Z.isElement(t)||d.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=Il.get(t);if(e!==void 0)return e;var r=t.every(n=>V.isNode(n));return Il.set(t,r),r},last(t,e){for(var r=e.slice(),n=V.get(t,r);n&&!(Q.isText(n)||n.children.length===0);){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf(t,e){var r=V.get(t,e);if(!Q.isText(r))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(tt.stringify(r)));return r},*levels(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of B.levels(e,r)){var o=V.get(t,n);yield[o,n]}},matches(t,e){return Z.isElement(t)&&Z.isElementProps(e)&&Z.matches(t,e)||Q.isText(t)&&Q.isTextProps(e)&&Q.matches(t,e)},*nodes(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:r,reverse:n=!1}=e,{from:o=[],to:a}=e,s=new Set,i=[],c=t;!(a&&(n?B.isBefore(i,a):B.isAfter(i,a)));){if(s.has(c)||(yield[c,i]),!s.has(c)&&!Q.isText(c)&&c.children.length!==0&&(r==null||r([c,i])===!1)){s.add(c);var l=n?c.children.length-1:0;B.isAncestor(i,o)&&(l=o[i.length]),i=i.concat(l),c=V.get(t,i);continue}if(i.length===0)break;if(!n){var f=B.next(i);if(V.has(t,f)){i=f,c=V.get(t,i);continue}}if(n&&i[i.length-1]!==0){var v=B.previous(i);i=v,c=V.get(t,i);continue}i=B.parent(i),c=V.get(t,i),s.add(c)}},parent(t,e){var r=B.parent(e),n=V.get(t,r);if(Q.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(t){return Q.isText(t)?t.text:t.children.map(V.string).join("")},*texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of V.nodes(t,e))Q.isText(r)&&(yield[r,n])}};function Pl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ke(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var pr={isNodeOperation(t){return pr.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!et(t))return!1;switch(t.type){case"insert_node":return B.isPath(t.path)&&V.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&B.isPath(t.path);case"merge_node":return typeof t.position=="number"&&B.isPath(t.path)&&et(t.properties);case"move_node":return B.isPath(t.path)&&B.isPath(t.newPath);case"remove_node":return B.isPath(t.path)&&V.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&B.isPath(t.path);case"set_node":return B.isPath(t.path)&&et(t.properties)&&et(t.newProperties);case"set_selection":return t.properties===null&&O.isRange(t.newProperties)||t.newProperties===null&&O.isRange(t.properties)||et(t.properties)&&et(t.newProperties);case"split_node":return B.isPath(t.path)&&typeof t.position=="number"&&et(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>pr.isOperation(e))},isSelectionOperation(t){return pr.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return pr.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return ke(ke({},t),{},{type:"remove_node"});case"insert_text":return ke(ke({},t),{},{type:"remove_text"});case"merge_node":return ke(ke({},t),{},{type:"split_node",path:B.previous(t.path)});case"move_node":{var{newPath:e,path:r}=t;if(B.equals(e,r))return t;if(B.isSibling(r,e))return ke(ke({},t),{},{path:e,newPath:r});var n=B.transform(r,t),o=B.transform(B.next(r),t);return ke(ke({},t),{},{path:n,newPath:o})}case"remove_node":return ke(ke({},t),{},{type:"insert_node"});case"remove_text":return ke(ke({},t),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:s}=t;return ke(ke({},t),{},{properties:s,newProperties:a})}case"set_selection":{var{properties:i,newProperties:c}=t;return i==null?ke(ke({},t),{},{properties:c,newProperties:null}):c==null?ke(ke({},t),{},{properties:null,newProperties:i}):ke(ke({},t),{},{properties:c,newProperties:i})}case"split_node":return ke(ke({},t),{},{type:"merge_node",path:B.next(t.path)})}}},Ll=new WeakMap,Bp=t=>{var e=Ll.get(t);if(e!==void 0)return e;if(!et(t))return!1;var r=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||et(t.marks))&&(t.selection===null||O.isRange(t.selection))&&V.isNodeList(t.children)&&pr.isOperationList(t.operations);return Ll.set(t,r),r},d={above(t,e){return t.above(e)},addMark(t,e,r){t.addMark(e,r)},after(t,e,r){return t.after(e,r)},before(t,e,r){return t.before(e,r)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteBackward(r)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteForward(r)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,r){t.insertFragment(e,r)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,r){return t.isEdge(e,r)},isEditor(t){return Bp(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,r){return t.isEnd(e,r)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,r){return t.isStart(e,r)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,r){return t.leaf(e,r)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,r){return t.node(e,r)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,r){return t.parent(e,r)},path(t,e,r){return t.path(e,r)},pathRef(t,e,r){return t.pathRef(e,r)},pathRefs(t){return t.pathRefs()},point(t,e,r){return t.point(e,r)},pointRef(t,e,r){return t.pointRef(e,r)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,r){return t.range(e,r)},rangeRef(t,e,r){return t.rangeRef(e,r)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,r){return t.string(e,r)},unhangRange(t,e,r){return t.unhangRange(e,r)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)}};var xp={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(B.isPath)}};function kl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Ml(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var me={compare(t,e){var r=B.compare(t.path,e.path);return r===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:r},isAfter(t,e){return me.compare(t,e)===1},isBefore(t,e){return me.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&B.equals(t.path,e.path)},isPoint(t){return et(t)&&typeof t.offset=="number"&&B.isPath(t.path)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return To(t,n=>{if(n===null)return null;var{affinity:o="forward"}=r,{path:a,offset:s}=n;switch(e.type){case"insert_node":case"move_node":{n.path=B.transform(a,e,r);break}case"insert_text":{B.equals(e.path,a)&&(e.offset<s||e.offset===s&&o==="forward")&&(n.offset+=e.text.length);break}case"merge_node":{B.equals(e.path,a)&&(n.offset+=e.position),n.path=B.transform(a,e,r);break}case"remove_text":{B.equals(e.path,a)&&e.offset<=s&&(n.offset-=Math.min(s-e.offset,e.text.length));break}case"remove_node":{if(B.equals(e.path,a)||B.isAncestor(e.path,a))return null;n.path=B.transform(a,e,r);break}case"split_node":{if(B.equals(e.path,a)){if(e.position===s&&o==null)return null;(e.position<s||e.position===s&&o==="forward")&&(n.offset-=e.position,n.path=B.transform(a,e,Ml(Ml({},r),{},{affinity:"forward"})))}else n.path=B.transform(a,e,r);break}}})}},Rl=void 0,tt={setScrubber(t){Rl=t},stringify(t){return JSON.stringify(t,Rl)}},wp=["text"],Fp=["anchor","focus"];function jl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Q={equals(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=r;function o(a){var s=hr(a,wp);return s}return ac(n?o(t):t,n?o(e):e)},isText(t){return et(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>Q.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var r in e)if(r!=="text"&&(!t.hasOwnProperty(r)||t[r]!==e[r]))return!1;return!0},decorations(t,e){var r=[mr({},t)];for(var n of e){var o=hr(n,Fp),[a,s]=O.edges(n),i=[],c=0,l=a.offset,f=s.offset;for(var v of r){var{length:h}=v.text,m=c;if(c+=h,l<=m&&c<=f){Object.assign(v,o),i.push(v);continue}if(l!==f&&(l===c||f===m)||l>c||f<m||f===m&&m!==0){i.push(v);continue}var p=v,u=void 0,C=void 0;if(f<c){var E=f-m;C=mr(mr({},p),{},{text:p.text.slice(E)}),p=mr(mr({},p),{},{text:p.text.slice(0,E)})}if(l>m){var A=l-m;u=mr(mr({},p),{},{text:p.text.slice(0,A)}),p=mr(mr({},p),{},{text:p.text.slice(A)})}Object.assign(p,o),u&&i.push(u),i.push(p),C&&i.push(C)}r=i}return r}},as=t=>t.selection?t.selection:t.children.length>0?d.end(t,[]):[0],xn=(t,e)=>{var[r]=d.node(t,e);return n=>n===r},ss=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!r,o=r?Op(e):e,a=se.None,s=se.None,i=0,c=null,l=null;for(var f of o){var v=f.codePointAt(0);if(!v)break;var h=Hp(f,v);if([a,s]=n?[s,h]:[h,a],Bn(a,se.ZWJ)&&Bn(s,se.ExtPict)&&(n?c=zl(e.substring(0,i)):c=zl(e.substring(0,e.length-i)),!c)||Bn(a,se.RI)&&Bn(s,se.RI)&&(l!==null?l=!l:n?l=!0:l=Vp(e.substring(0,e.length-i)),!l)||a!==se.None&&s!==se.None&&Yp(a,s))break;i+=f.length}return i||1},yp=/\s/,Tp=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,_p=/['\u2018\u2019]/,Sp=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,o=!1;e.length>0;){var a=ss(e,r),[s,i]=is(e,a,r);if(bp(s,i,r))o=!0,n+=a;else if(!o)n+=a;else break;e=i}return n},is=(t,e,r)=>{if(r){var n=t.length-e;return[t.slice(n,t.length),t.slice(0,n)]}return[t.slice(0,e),t.slice(e)]},bp=function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(yp.test(e))return!1;if(_p.test(e)){var o=ss(r,n),[a,s]=is(r,o,n);if(t(a,s,n))return!0}return!Tp.test(e)},Op=function*(e){for(var r=e.length-1,n=0;n<e.length;n++){var o=e.charAt(r-n);if(Ip(o.charCodeAt(0))){var a=e.charAt(r-n-1);if(Np(a.charCodeAt(0))){yield a+o,n++;continue}}yield o}},Np=t=>t>=55296&&t<=56319,Ip=t=>t>=56320&&t<=57343,se;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(se||(se={}));var Pp=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Lp=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,kp=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Mp=/^[\u1100-\u115F\uA960-\uA97C]$/,Rp=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,jp=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,zp=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,Wp=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Up=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Hp=(t,e)=>{var r=se.Any;return t.search(Pp)!==-1&&(r|=se.Extend),e===8205&&(r|=se.ZWJ),e>=127462&&e<=127487&&(r|=se.RI),t.search(Lp)!==-1&&(r|=se.Prepend),t.search(kp)!==-1&&(r|=se.SpacingMark),t.search(Mp)!==-1&&(r|=se.L),t.search(Rp)!==-1&&(r|=se.V),t.search(jp)!==-1&&(r|=se.T),t.search(zp)!==-1&&(r|=se.LV),t.search(Wp)!==-1&&(r|=se.LVT),t.search(Up)!==-1&&(r|=se.ExtPict),r};function Bn(t,e){return(t&e)!==0}var Gp=[[se.L,se.L|se.V|se.LV|se.LVT],[se.LV|se.V,se.V|se.T],[se.LVT|se.T,se.T],[se.Any,se.Extend|se.ZWJ],[se.Any,se.SpacingMark],[se.Prepend,se.Any],[se.ZWJ,se.ExtPict],[se.RI,se.RI]];function Yp(t,e){return Gp.findIndex(r=>Bn(t,r[0])&&Bn(e,r[1]))===-1}var qp=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,zl=t=>t.search(qp)!==-1,$p=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Vp=t=>{var e=t.match($p);if(e===null)return!1;var r=e[0].length/2;return r%2===1},Kp={delete(t,e){t.delete(e)},insertFragment(t,e,r){t.insertFragment(e,r)},insertText(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(t,()=>{var{voids:n=!1}=r,{at:o=as(t)}=r;if(B.isPath(o)&&(o=d.range(t,o)),O.isRange(o))if(O.isCollapsed(o))o=o.anchor;else{var a=O.end(o);if(!n&&d.void(t,{at:a}))return;var s=O.start(o),i=d.pointRef(t,s),c=d.pointRef(t,a);z.delete(t,{at:o,voids:n});var l=i.unref(),f=c.unref();o=l||f,z.setSelection(t,{anchor:o,focus:o})}if(!(!n&&d.void(t,{at:o})||d.elementReadOnly(t,{at:o}))){var{path:v,offset:h}=o;e.length>0&&t.apply({type:"insert_text",path:v,offset:h,text:e})}})}};function Wl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Jo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var z=Jo(Jo(Jo(Jo({},pp),hp),vp),Kp),Zp=(t,e)=>{for(var r of d.pathRefs(t))cp.transform(r,e);for(var n of d.pointRefs(t))fp.transform(n,e);for(var o of d.rangeRefs(t))dp.transform(o,e);var a=Qo.get(t)||[],s=ea.get(t)||new Set,i,c,l=p=>{if(p){var u=p.join(",");c.has(u)||(c.add(u),i.push(p))}};if(B.operationCanTransformPath(e)){i=[],c=new Set;for(var f of a){var v=B.transform(f,e);l(v)}}else i=a,c=s;var h=t.getDirtyPaths(e);for(var m of h)l(m);Qo.set(t,i),ea.set(t,c),z.transform(t,e),t.operations.push(e),d.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),eo.get(t)||(eo.set(t,!0),Promise.resolve().then(()=>{eo.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},Xp=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=e;return B.levels(r)}case"insert_node":{var{node:n,path:o}=e,a=B.levels(o),s=Q.isText(n)?[]:Array.from(V.nodes(n),U=>{var[,G]=U;return o.concat(G)});return[...a,...s]}case"merge_node":{var{path:i}=e,c=B.ancestors(i),l=B.previous(i);return[...c,l]}case"move_node":{var{path:f,newPath:v}=e;if(B.equals(f,v))return[];var h=[],m=[];for(var p of B.ancestors(f)){var u=B.transform(p,e);h.push(u)}for(var C of B.ancestors(v)){var E=B.transform(C,e);m.push(E)}var A=m[m.length-1],F=v[v.length-1],w=A.concat(F);return[...h,...m,w]}case"remove_node":{var{path:_}=e,L=B.ancestors(_);return[...L]}case"split_node":{var{path:I}=e,k=B.levels(I),b=B.next(I);return[...k,b]}default:return[]}},Jp=t=>{var{selection:e}=t;return e?V.fragment(t,e):[]},Qp=(t,e)=>{var[r,n]=e;if(!Q.isText(r)){if(Z.isElement(r)&&r.children.length===0){var o={text:""};z.insertNodes(t,o,{at:n.concat(0),voids:!0});return}for(var a=d.isEditor(r)?!1:Z.isElement(r)&&(t.isInline(r)||r.children.length===0||Q.isText(r.children[0])||t.isInline(r.children[0])),s=0,i=0;i<r.children.length;i++,s++){var c=V.get(t,n);if(!Q.isText(c)){var l=c.children[s],f=c.children[s-1],v=i===r.children.length-1,h=Q.isText(l)||Z.isElement(l)&&t.isInline(l);if(h!==a)z.removeNodes(t,{at:n.concat(s),voids:!0}),s--;else if(Z.isElement(l)){if(t.isInline(l)){if(f==null||!Q.isText(f)){var m={text:""};z.insertNodes(t,m,{at:n.concat(s),voids:!0}),s++}else if(v){var p={text:""};z.insertNodes(t,p,{at:n.concat(s+1),voids:!0}),s++}}}else f!=null&&Q.isText(f)&&(Q.equals(l,f,{loose:!0})?(z.mergeNodes(t,{at:n.concat(s),voids:!0}),s--):f.text===""?(z.removeNodes(t,{at:n.concat(s-1),voids:!0}),s--):l.text===""&&(z.removeNodes(t,{at:n.concat(s),voids:!0}),s--))}}}},eh=(t,e)=>{var{iteration:r,initialDirtyPathsLength:n}=e,o=n*42;if(r>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},th=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:o="lowest",at:a=e.selection,match:s}=r;if(!!a){var i=d.path(e,a),c=o==="lowest";for(var[l,f]of d.levels(e,{at:i,voids:n,match:s,reverse:c}))if(!Q.isText(l)){if(O.isRange(a)){if(B.isAncestor(f,a.anchor.path)&&B.isAncestor(f,a.focus.path))return[l,f]}else if(!B.equals(i,f))return[l,f]}}};function Ul(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Hl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ul(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rh=(t,e,r)=>{var{selection:n}=t;if(n){var o=(v,h)=>{if(!Q.isText(v))return!1;var[m,p]=d.parent(t,h);return!t.isVoid(m)||t.markableVoid(m)},a=O.isExpanded(n),s=!1;if(!a){var[i,c]=d.node(t,n);if(i&&o(i,c)){var[l]=d.parent(t,c);s=l&&t.markableVoid(l)}}if(a||s)z.setNodes(t,{[e]:r},{match:o,split:!0,voids:!0});else{var f=Hl(Hl({},d.marks(t)||{}),{},{[e]:r});t.marks=f,eo.get(t)||t.onChange()}}};function Gl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Yl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var nh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.point(e,r,{edge:"end"}),a=d.end(e,[]),s={anchor:o,focus:a},{distance:i=1}=n,c=0,l;for(var f of d.positions(e,Yl(Yl({},n),{},{at:s}))){if(c>i)break;c!==0&&(l=f),c++}return l};function ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function $l(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ql(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ql(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var oh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.start(e,[]),a=d.point(e,r,{edge:"start"}),s={anchor:o,focus:a},{distance:i=1}=n,c=0,l;for(var f of d.positions(e,$l($l({},n),{},{at:s,reverse:!0}))){if(c>i)break;c!==0&&(l=f),c++}return l},ah=(t,e)=>{var{selection:r}=t;r&&O.isCollapsed(r)&&z.delete(t,{unit:e,reverse:!0})},sh=(t,e)=>{var{selection:r}=t;r&&O.isCollapsed(r)&&z.delete(t,{unit:e})},ih=function(e){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&O.isExpanded(n)&&z.delete(e,{reverse:r==="backward"})},uh=(t,e)=>[d.start(t,e),d.end(t,e)];function Vl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Kl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var lh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.above(e,Kl(Kl({},r),{},{match:n=>Z.isElement(n)&&d.isElementReadOnly(e,n)}))},ch=(t,e)=>d.point(t,e,{edge:"end"}),fh=(t,e)=>{var r=d.path(t,e,{edge:"start"});return d.node(t,r)},dh=(t,e)=>{var r=d.range(t,e);return V.fragment(t,r)};function Zl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Xl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var mh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return d.above(e,Xl(Xl({},r),{},{match:n=>Z.isElement(n)&&d.isVoid(e,n)}))},ph=(t,e)=>e.children.some(r=>Z.isElement(r)&&d.isBlock(t,r)),hh=(t,e)=>e.children.some(r=>Q.isText(r)||d.isInline(t,r)),vh=(t,e)=>V.has(t,e),gh=(t,e)=>e.children.every(r=>Q.isText(r)),Dh=t=>{z.splitNodes(t,{always:!0})},Ch=(t,e,r)=>{z.insertNodes(t,e,r)},Eh=t=>{z.splitNodes(t,{always:!0})};function Jl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Ah(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jl(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Bh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:a}=e;if(o){if(a){var s=Ah({text:r},a);z.insertNodes(e,s,{at:n.at,voids:n.voids})}else z.insertText(e,r,n);e.marks=null}},xh=(t,e)=>!t.isInline(e),wh=(t,e,r)=>d.isStart(t,e,r)||d.isEnd(t,e,r),Fh=(t,e)=>{var{children:r}=e,[n]=r;return r.length===0||r.length===1&&Q.isText(n)&&n.text===""&&!t.isVoid(e)},yh=(t,e,r)=>{var n=d.end(t,r);return me.equals(e,n)},Th=t=>{var e=oc.get(t);return e===void 0?!0:e},_h=(t,e,r)=>{if(e.offset!==0)return!1;var n=d.start(t,r);return me.equals(e,n)},Sh=(t,e)=>{var r=d.path(t,e,{edge:"end"});return d.node(t,r)},bh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=V.leaf(e,o);return[a,o]};function*Oh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,reverse:n=!1,voids:o=!1}=e,{match:a}=e;if(a==null&&(a=()=>!0),!!r){var s=[],i=d.path(t,r);for(var[c,l]of V.levels(t,i))if(!!a(c,l)&&(s.push([c,l]),!o&&Z.isElement(c)&&d.isVoid(t,c)))break;n&&s.reverse(),yield*s}}var Nh=["text"],Ih=["text"],Ph=function(e){var{marks:r,selection:n}=e;if(!n)return null;if(r)return r;if(O.isExpanded(n)){var[o]=d.nodes(e,{match:Q.isText});if(o){var[a]=o,s=hr(a,Nh);return s}else return{}}var{anchor:i}=n,{path:c}=i,[l]=d.leaf(e,c);if(i.offset===0){var f=d.previous(e,{at:c,match:Q.isText}),v=d.above(e,{match:E=>Z.isElement(E)&&d.isVoid(e,E)&&e.markableVoid(E)});if(!v){var h=d.above(e,{match:E=>Z.isElement(E)&&d.isBlock(e,E)});if(f&&h){var[m,p]=f,[,u]=h;B.isAncestor(u,p)&&(l=m)}}}var C=hr(l,Ih);return C},Lh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection}=r;if(!!s){var i=d.after(e,s,{voids:o});if(!!i){var[,c]=d.last(e,[]),l=[i.path,c];if(B.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(B.isPath(s)){var[f]=d.parent(e,s);a=h=>f.children.includes(h)}else a=()=>!0;var[v]=d.nodes(e,{at:l,match:a,mode:n,voids:o});return v}}},kh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=V.get(e,o);return[a,o]};function*Mh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,mode:n="all",universal:o=!1,reverse:a=!1,voids:s=!1,ignoreNonSelectable:i=!1}=e,{match:c}=e;if(c||(c=()=>!0),!!r){var l,f;if(xp.isSpan(r))l=r[0],f=r[1];else{var v=d.path(t,r,{edge:"start"}),h=d.path(t,r,{edge:"end"});l=a?h:v,f=a?v:h}var m=V.nodes(t,{reverse:a,from:l,to:f,pass:w=>{var[_]=w;return Z.isElement(_)?!!(!s&&(d.isVoid(t,_)||d.isElementReadOnly(t,_))||i&&!d.isSelectable(t,_)):!1}}),p=[],u;for(var[C,E]of m)if(!(i&&Z.isElement(C)&&!d.isSelectable(t,C))){var A=u&&B.compare(E,u[1])===0;if(!(n==="highest"&&A)){if(!c(C,E)){if(o&&!A&&Q.isText(C))return;continue}if(n==="lowest"&&A){u=[C,E];continue}var F=n==="lowest"?u:[C,E];F&&(o?p.push(F):yield F),u=[C,E]}}n==="lowest"&&u&&(o?p.push(u):yield u),o&&(yield*p)}}var Rh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:o}=r,a=f=>Qo.get(f)||[],s=f=>ea.get(f)||new Set,i=f=>{var v=a(f).pop(),h=v.join(",");return s(f).delete(h),v};if(!!d.isNormalizing(e)){if(n){var c=Array.from(V.nodes(e),f=>{var[,v]=f;return v}),l=new Set(c.map(f=>f.join(",")));Qo.set(e,c),ea.set(e,l)}a(e).length!==0&&d.withoutNormalizing(e,()=>{for(var f of a(e))if(V.has(e,f)){var v=d.node(e,f),[h,m]=v;Z.isElement(h)&&h.children.length===0&&e.normalizeNode(v,{operation:o})}for(var p=a(e),u=p.length,C=0;p.length!==0;){if(!e.shouldNormalize({dirtyPaths:p,iteration:C,initialDirtyPathsLength:u,operation:o}))return;var E=i(e);if(V.has(e,E)){var A=d.node(e,E);e.normalizeNode(A,{operation:o})}C++,p=a(e)}})}},jh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=d.path(e,r,n),a=B.parent(o),s=d.node(e,a);return s},zh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,c=d.pathRefs(e);return c.delete(a),a.current=null,i}},s=d.pathRefs(e);return s.add(a),a},Wh=t=>{var e=Tl.get(t);return e||(e=new Set,Tl.set(t,e)),e},Uh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:a}=n;if(B.isPath(r)){if(a==="start"){var[,s]=V.first(e,r);r=s}else if(a==="end"){var[,i]=V.last(e,r);r=i}}return O.isRange(r)&&(a==="start"?r=O.start(r):a==="end"?r=O.end(r):r=B.common(r.anchor.path,r.focus.path)),me.isPoint(r)&&(r=r.path),o!=null&&(r=r.slice(0,o)),r},Hh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,c=d.pointRefs(e);return c.delete(a),a.current=null,i}},s=d.pointRefs(e);return s.add(a),a},Gh=t=>{var e=_l.get(t);return e||(e=new Set,_l.set(t,e)),e},Yh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=n;if(B.isPath(r)){var a;if(o==="end"){var[,s]=V.last(e,r);a=s}else{var[,i]=V.first(e,r);a=i}var c=V.get(e,a);if(!Q.isText(c))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(r,"] because it has no ").concat(o," text node."));return{path:a,offset:o==="end"?c.text.length:0}}if(O.isRange(r)){var[l,f]=O.edges(r);return o==="start"?l:f}return r};function*qh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,unit:n="offset",reverse:o=!1,voids:a=!1,ignoreNonSelectable:s=!1}=e;if(!r)return;var i=d.range(t,r),[c,l]=O.edges(i),f=o?l:c,v=!1,h="",m=0,p=0,u=0;for(var[C,E]of d.nodes(t,{at:r,reverse:o,voids:a,ignoreNonSelectable:s})){if(Z.isElement(C)){if(!a&&(t.isVoid(C)||t.isElementReadOnly(C))){yield d.start(t,E);continue}if(t.isInline(C))continue;if(d.hasInlines(t,C)){var A=B.isAncestor(E,l.path)?l:d.end(t,E),F=B.isAncestor(E,c.path)?c:d.start(t,E);h=d.string(t,{anchor:F,focus:A},{voids:a}),v=!0}}if(Q.isText(C)){var w=B.equals(E,f.path);for(w?(p=o?f.offset:C.text.length-f.offset,u=f.offset):(p=C.text.length,u=o?p:0),(w||v||n==="offset")&&(yield{path:E,offset:u},v=!1);;){if(m===0){if(h==="")break;m=_(h,n,o),h=is(h,m,o)[1]}if(u=o?u-m:u+m,p=p-m,p<0){m=-p;break}m=0,yield{path:E,offset:u}}}}function _(L,I,k){return I==="character"?ss(L,k):I==="word"?Sp(L,k):I==="line"||I==="block"?L.length:1}}var $h=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection}=r;if(!!s){var i=d.before(e,s,{voids:o});if(!!i){var[,c]=d.first(e,[]),l=[i.path,c];if(B.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(B.isPath(s)){var[f]=d.parent(e,s);a=h=>f.children.includes(h)}else a=()=>!0;var[v]=d.nodes(e,{reverse:!0,at:l,match:a,mode:n,voids:o});return v}}},Vh=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,a={current:r,affinity:o,unref(){var{current:i}=a,c=d.rangeRefs(e);return c.delete(a),a.current=null,i}},s=d.rangeRefs(e);return s.add(a),a},Kh=t=>{var e=Sl.get(t);return e||(e=new Set,Sl.set(t,e)),e},Zh=(t,e,r)=>{if(O.isRange(e)&&!r)return e;var n=d.start(t,e),o=d.end(t,r||e);return{anchor:n,focus:o}};function Ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Xh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ql(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ql(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Jh=(t,e)=>{var{selection:r}=t;if(r){var n=(f,v)=>{if(!Q.isText(f))return!1;var[h,m]=d.parent(t,v);return!t.isVoid(h)||t.markableVoid(h)},o=O.isExpanded(r),a=!1;if(!o){var[s,i]=d.node(t,r);if(s&&n(s,i)){var[c]=d.parent(t,i);a=c&&t.markableVoid(c)}}if(o||a)z.unsetNodes(t,e,{match:n,split:!0,voids:!0});else{var l=Xh({},d.marks(t)||{});delete l[e],t.marks=l,eo.get(t)||t.onChange()}}},Qh=(t,e)=>{oc.set(t,e)},ev=(t,e)=>d.point(t,e,{edge:"start"}),tv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,a=d.range(e,r),[s,i]=O.edges(a),c="";for(var[l,f]of d.nodes(e,{at:a,match:Q.isText,voids:o})){var v=l.text;B.equals(f,i.path)&&(v=v.slice(0,i.offset)),B.equals(f,s.path)&&(v=v.slice(s.offset)),c+=v}return c},rv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,[a,s]=O.edges(r);if(a.offset!==0||s.offset!==0||O.isCollapsed(r)||B.hasPrevious(s.path))return r;var i=d.above(e,{at:s,match:p=>Z.isElement(p)&&d.isBlock(e,p),voids:o}),c=i?i[1]:[],l=d.start(e,a),f={anchor:l,focus:s},v=!0;for(var[h,m]of d.nodes(e,{at:f,match:Q.isText,reverse:!0,voids:o})){if(v){v=!1;continue}if(h.text!==""||B.isBefore(m,c)){s={path:m,offset:h.text.length};break}}return{anchor:a,focus:s}},nv=(t,e)=>{var r=d.isNormalizing(t);d.setNormalizing(t,!1);try{e()}finally{d.setNormalizing(t,r)}d.normalize(t)},ov=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var n,o,{reverse:a=!1,unit:s="character",distance:i=1,voids:c=!1}=r,{at:l=e.selection,hanging:f=!1}=r;if(!!l){var v=!1;if(O.isRange(l)&&O.isCollapsed(l)&&(v=!0,l=l.anchor),me.isPoint(l)){var h=d.void(e,{at:l,mode:"highest"});if(!c&&h){var[,m]=h;l=m}else{var p={unit:s,distance:i},u=a?d.before(e,l,p)||d.start(e,[]):d.after(e,l,p)||d.end(e,[]);l={anchor:l,focus:u},f=!0}}if(B.isPath(l)){z.removeNodes(e,{at:l,voids:c});return}if(!O.isCollapsed(l)){if(!f){var[,C]=O.edges(l),E=d.end(e,[]);me.equals(C,E)||(l=d.unhangRange(e,l,{voids:c}))}var[A,F]=O.edges(l),w=d.above(e,{match:Se=>Z.isElement(Se)&&d.isBlock(e,Se),at:A,voids:c}),_=d.above(e,{match:Se=>Z.isElement(Se)&&d.isBlock(e,Se),at:F,voids:c}),L=w&&_&&!B.equals(w[1],_[1]),I=B.equals(A.path,F.path),k=c?null:(n=d.void(e,{at:A,mode:"highest"}))!==null&&n!==void 0?n:d.elementReadOnly(e,{at:A,mode:"highest"}),b=c?null:(o=d.void(e,{at:F,mode:"highest"}))!==null&&o!==void 0?o:d.elementReadOnly(e,{at:F,mode:"highest"});if(k){var U=d.before(e,A);U&&w&&B.isAncestor(w[1],U.path)&&(A=U)}if(b){var G=d.after(e,F);G&&_&&B.isAncestor(_[1],G.path)&&(F=G)}var M=[],Y;for(var W of d.nodes(e,{at:l,voids:c})){var[$,ne]=W;Y&&B.compare(ne,Y)===0||(!c&&Z.isElement($)&&(d.isVoid(e,$)||d.isElementReadOnly(e,$))||!B.isCommon(ne,A.path)&&!B.isCommon(ne,F.path))&&(M.push(W),Y=ne)}var fe=Array.from(M,Se=>{var[,at]=Se;return d.pathRef(e,at)}),ve=d.pointRef(e,A),X=d.pointRef(e,F),ie="";if(!I&&!k){var Te=ve.current,[De]=d.leaf(e,Te),{path:Ze}=Te,{offset:x}=A,q=De.text.slice(x);q.length>0&&(e.apply({type:"remove_text",path:Ze,offset:x,text:q}),ie=q)}if(fe.reverse().map(Se=>Se.unref()).filter(Se=>Se!==null).forEach(Se=>z.removeNodes(e,{at:Se,voids:c})),!b){var j=X.current,[K]=d.leaf(e,j),{path:le}=j,oe=I?A.offset:0,he=K.text.slice(oe,F.offset);he.length>0&&(e.apply({type:"remove_text",path:le,offset:oe,text:he}),ie=he)}!I&&L&&X.current&&ve.current&&z.mergeNodes(e,{at:X.current,hanging:!0,voids:c}),v&&a&&s==="character"&&ie.length>1&&ie.match(/[\u0E00-\u0E7F]+/)&&z.insertText(e,ie.slice(0,ie.length-i));var Ie=ve.unref(),Ne=X.unref(),Le=a?Ie||Ne:Ne||Ie;r.at==null&&Le&&z.select(e,Le)}}})},av=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:a=!1}=n,{at:s=as(e)}=n;if(!!r.length){if(O.isRange(s))if(o||(s=d.unhangRange(e,s,{voids:a})),O.isCollapsed(s))s=s.anchor;else{var[,i]=O.edges(s);if(!a&&d.void(e,{at:i}))return;var c=d.pointRef(e,i);z.delete(e,{at:s}),s=c.unref()}else B.isPath(s)&&(s=d.start(e,s));if(!(!a&&d.void(e,{at:s}))){var l=d.above(e,{at:s,match:x=>Z.isElement(x)&&d.isInline(e,x),mode:"highest",voids:a});if(l){var[,f]=l;if(d.isEnd(e,s,f)){var v=d.after(e,f);s=v}else if(d.isStart(e,s,f)){var h=d.before(e,f);s=h}}var m=d.above(e,{match:x=>Z.isElement(x)&&d.isBlock(e,x),at:s,voids:a}),[,p]=m,u=d.isStart(e,s,p),C=d.isEnd(e,s,p),E=u&&C,A=!u||u&&C,F=!C,[,w]=V.first({children:r},[]),[,_]=V.last({children:r},[]),L=[],I=x=>{var[q,j]=x,K=j.length===0;return K?!1:E?!0:!(A&&B.isAncestor(j,w)&&Z.isElement(q)&&!e.isVoid(q)&&!e.isInline(q)||F&&B.isAncestor(j,_)&&Z.isElement(q)&&!e.isVoid(q)&&!e.isInline(q))};for(var k of V.nodes({children:r},{pass:I}))I(k)&&L.push(k);var b=[],U=[],G=[],M=!0,Y=!1;for(var[W]of L)Z.isElement(W)&&!e.isInline(W)?(M=!1,Y=!0,U.push(W)):M?b.push(W):G.push(W);var[$]=d.nodes(e,{at:s,match:x=>Q.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),[,ne]=$,fe=d.isStart(e,s,ne),ve=d.isEnd(e,s,ne),X=d.pathRef(e,C&&!G.length?B.next(p):p),ie=d.pathRef(e,ve?B.next(ne):ne);z.splitNodes(e,{at:s,match:x=>Y?Z.isElement(x)&&d.isBlock(e,x):Q.isText(x)||d.isInline(e,x),mode:Y?"lowest":"highest",always:Y&&(!u||b.length>0)&&(!C||G.length>0),voids:a});var Te=d.pathRef(e,!fe||fe&&ve?B.next(ne):ne);if(z.insertNodes(e,b,{at:Te.current,match:x=>Q.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),E&&!b.length&&U.length&&!G.length&&z.delete(e,{at:p,voids:a}),z.insertNodes(e,U,{at:X.current,match:x=>Z.isElement(x)&&d.isBlock(e,x),mode:"lowest",voids:a}),z.insertNodes(e,G,{at:ie.current,match:x=>Q.isText(x)||d.isInline(e,x),mode:"highest",voids:a}),!n.at){var De;if(G.length>0&&ie.current?De=B.previous(ie.current):U.length>0&&X.current?De=B.previous(X.current):Te.current&&(De=B.previous(Te.current)),De){var Ze=d.end(e,De);z.select(e,Ze)}}Te.unref(),X.unref(),ie.unref()}}})},sv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=r,{selection:o}=e;if(o){if(n==="anchor")z.select(e,o.anchor);else if(n==="focus")z.select(e,o.focus);else if(n==="start"){var[a]=O.edges(o);z.select(e,a)}else if(n==="end"){var[,s]=O.edges(o);z.select(e,s)}}else return},iv=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},uv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:o=1,unit:a="character",reverse:s=!1}=r,{edge:i=null}=r;if(!!n){i==="start"&&(i=O.isBackward(n)?"focus":"anchor"),i==="end"&&(i=O.isBackward(n)?"anchor":"focus");var{anchor:c,focus:l}=n,f={distance:o,unit:a,ignoreNonSelectable:!0},v={};if(i==null||i==="anchor"){var h=s?d.before(e,c,f):d.after(e,c,f);h&&(v.anchor=h)}if(i==null||i==="focus"){var m=s?d.before(e,l,f):d.after(e,l,f);m&&(v.focus=m)}z.setSelection(e,v)}},lv=(t,e)=>{var{selection:r}=t;if(e=d.range(t,e),r){z.setSelection(t,e);return}if(!O.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(tt.stringify(e)));t.apply({type:"set_selection",properties:r,newProperties:e})};function ec(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function tc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ec(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var cv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=e,{edge:a="both"}=n;if(!!o){a==="start"&&(a=O.isBackward(o)?"focus":"anchor"),a==="end"&&(a=O.isBackward(o)?"anchor":"focus");var{anchor:s,focus:i}=o,c=a==="anchor"?s:i;z.setSelection(e,{[a==="anchor"?"anchor":"focus"]:tc(tc({},c),r)})}},fv=(t,e)=>{var{selection:r}=t,n={},o={};if(!!r){for(var a in e)(a==="anchor"&&e.anchor!=null&&!me.equals(e.anchor,r.anchor)||a==="focus"&&e.focus!=null&&!me.equals(e.focus,r.focus)||a!=="anchor"&&a!=="focus"&&e[a]!==r[a])&&(n[a]=r[a],o[a]=e[a]);Object.keys(n).length>0&&t.apply({type:"set_selection",properties:n,newProperties:o})}},dv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:a=!1,mode:s="lowest"}=n,{at:i,match:c,select:l}=n;if(V.isNode(r)&&(r=[r]),r.length!==0){var[f]=r;if(i||(i=as(e),l=!0),l==null&&(l=!1),O.isRange(i))if(o||(i=d.unhangRange(e,i,{voids:a})),O.isCollapsed(i))i=i.anchor;else{var[,v]=O.edges(i),h=d.pointRef(e,v);z.delete(e,{at:i}),i=h.unref()}if(me.isPoint(i)){c==null&&(Q.isText(f)?c=I=>Q.isText(I):e.isInline(f)?c=I=>Q.isText(I)||d.isInline(e,I):c=I=>Z.isElement(I)&&d.isBlock(e,I));var[m]=d.nodes(e,{at:i.path,match:c,mode:s,voids:a});if(m){var[,p]=m,u=d.pathRef(e,p),C=d.isEnd(e,i,p);z.splitNodes(e,{at:i,match:c,mode:s,voids:a});var E=u.unref();i=C?B.next(E):E}else return}var A=B.parent(i),F=i[i.length-1];if(!(!a&&d.void(e,{at:A}))){for(var w of r){var _=A.concat(F);F++,e.apply({type:"insert_node",path:_,node:w}),i=B.next(i)}if(i=B.previous(i),l){var L=d.end(e,i);L&&z.select(e,L)}}}})},mv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:o="lowest",voids:a=!1}=r,{match:s}=r;if(s==null&&(s=B.isPath(n)?xn(e,n):w=>Z.isElement(w)&&d.isBlock(e,w)),!!n){var i=d.nodes(e,{at:n,match:s,mode:o,voids:a}),c=Array.from(i,w=>{var[,_]=w;return d.pathRef(e,_)});for(var l of c){var f=l.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var v=d.node(e,B.parent(f)),[h,m]=v,p=f[f.length-1],{length:u}=h.children;if(u===1){var C=B.next(m);z.moveNodes(e,{at:f,to:C,voids:a}),z.removeNodes(e,{at:m,voids:a})}else if(p===0)z.moveNodes(e,{at:f,to:m,voids:a});else if(p===u-1){var E=B.next(m);z.moveNodes(e,{at:f,to:E,voids:a})}else{var A=B.next(f),F=B.next(m);z.splitNodes(e,{at:A,voids:a}),z.moveNodes(e,{at:f,to:F,voids:a})}}}})},pv=["text"],hv=["children"],sc=(t,e)=>{if(Z.isElement(e)){var r=e;return d.isVoid(t,e)?!0:r.children.length===1?sc(t,r.children[0]):!1}else return!d.isEditor(e)},vv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{match:n,at:o=e.selection}=r,{hanging:a=!1,voids:s=!1,mode:i="lowest"}=r;if(!!o){if(n==null)if(B.isPath(o)){var[c]=d.parent(e,o);n=U=>c.children.includes(U)}else n=U=>Z.isElement(U)&&d.isBlock(e,U);if(!a&&O.isRange(o)&&(o=d.unhangRange(e,o,{voids:s})),O.isRange(o))if(O.isCollapsed(o))o=o.anchor;else{var[,l]=O.edges(o),f=d.pointRef(e,l);z.delete(e,{at:o}),o=f.unref(),r.at==null&&z.select(e,o)}var[v]=d.nodes(e,{at:o,match:n,voids:s,mode:i}),h=d.previous(e,{at:o,match:n,voids:s,mode:i});if(!(!v||!h)){var[m,p]=v,[u,C]=h;if(!(p.length===0||C.length===0)){var E=B.next(C),A=B.common(p,C),F=B.isSibling(p,C),w=Array.from(d.levels(e,{at:p}),U=>{var[G]=U;return G}).slice(A.length).slice(0,-1),_=d.above(e,{at:p,mode:"highest",match:U=>w.includes(U)&&sc(e,U)}),L=_&&d.pathRef(e,_[1]),I,k;if(Q.isText(m)&&Q.isText(u)){var b=hr(m,pv);k=u.text.length,I=b}else if(Z.isElement(m)&&Z.isElement(u)){var b=hr(m,hv);k=u.children.length,I=b}else throw new Error("Cannot merge the node at path [".concat(p,"] with the previous sibling because it is not the same kind: ").concat(tt.stringify(m)," ").concat(tt.stringify(u)));F||z.moveNodes(e,{at:p,to:E,voids:s}),L&&z.removeNodes(e,{at:L.current,voids:s}),Z.isElement(u)&&d.isEmpty(e,u)||Q.isText(u)&&u.text===""&&C[C.length-1]!==0?z.removeNodes(e,{at:C,voids:s}):e.apply({type:"merge_node",path:E,position:k,properties:I}),L&&L.unref()}}}})},gv=(t,e)=>{d.withoutNormalizing(t,()=>{var{to:r,at:n=t.selection,mode:o="lowest",voids:a=!1}=e,{match:s}=e;if(!!n){s==null&&(s=B.isPath(n)?xn(t,n):m=>Z.isElement(m)&&d.isBlock(t,m));var i=d.pathRef(t,r),c=d.nodes(t,{at:n,match:s,mode:o,voids:a}),l=Array.from(c,m=>{var[,p]=m;return d.pathRef(t,p)});for(var f of l){var v=f.unref(),h=i.current;v.length!==0&&t.apply({type:"move_node",path:v,newPath:h}),i.current&&B.isSibling(h,v)&&B.isAfter(h,v)&&(i.current=B.next(i.current))}i.unref()}})},Dv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1,mode:a="lowest"}=r,{at:s=e.selection,match:i}=r;if(!!s){i==null&&(i=B.isPath(s)?xn(e,s):m=>Z.isElement(m)&&d.isBlock(e,m)),!n&&O.isRange(s)&&(s=d.unhangRange(e,s,{voids:o}));var c=d.nodes(e,{at:s,match:i,mode:a,voids:o}),l=Array.from(c,m=>{var[,p]=m;return d.pathRef(e,p)});for(var f of l){var v=f.unref();if(v){var[h]=d.node(e,v);e.apply({type:"remove_node",path:v,node:h})}}}})},Cv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{match:o,at:a=e.selection,compare:s,merge:i}=n,{hanging:c=!1,mode:l="lowest",split:f=!1,voids:v=!1}=n;if(!!a){if(o==null&&(o=B.isPath(a)?xn(e,a):k=>Z.isElement(k)&&d.isBlock(e,k)),!c&&O.isRange(a)&&(a=d.unhangRange(e,a,{voids:v})),f&&O.isRange(a)){if(O.isCollapsed(a)&&d.leaf(e,a.anchor)[0].text.length>0)return;var h=d.rangeRef(e,a,{affinity:"inward"}),[m,p]=O.edges(a),u=l==="lowest"?"lowest":"highest",C=d.isEnd(e,p,p.path);z.splitNodes(e,{at:p,match:o,mode:u,voids:v,always:!C});var E=d.isStart(e,m,m.path);z.splitNodes(e,{at:m,match:o,mode:u,voids:v,always:!E}),a=h.unref(),n.at==null&&z.select(e,a)}s||(s=(k,b)=>k!==b);for(var[A,F]of d.nodes(e,{at:a,match:o,mode:l,voids:v})){var w={},_={};if(F.length!==0){var L=!1;for(var I in r)I==="children"||I==="text"||s(r[I],A[I])&&(L=!0,A.hasOwnProperty(I)&&(w[I]=A[I]),i?r[I]!=null&&(_[I]=i(A[I],r[I])):r[I]!=null&&(_[I]=r[I]));L&&e.apply({type:"set_node",path:F,properties:w,newProperties:_})}}}})},Ev=(t,e)=>{if(O.isCollapsed(e))return e.anchor;var[,r]=O.edges(e),n=d.pointRef(t,r);return z.delete(t,{at:e}),n.unref()},Av=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:o=!1}=r,{match:a,at:s=e.selection,height:i=0,always:c=!1}=r;if(a==null&&(a=X=>Z.isElement(X)&&d.isBlock(e,X)),O.isRange(s)&&(s=Ev(e,s)),B.isPath(s)){var l=s,f=d.point(e,l),[v]=d.parent(e,l);a=X=>X===v,i=f.path.length-l.length+1,s=f,c=!0}if(!!s){var h=d.pointRef(e,s,{affinity:"backward"}),m;try{var[p]=d.nodes(e,{at:s,match:a,mode:n,voids:o});if(!p)return;var u=d.void(e,{at:s,mode:"highest"}),C=0;if(!o&&u){var[E,A]=u;if(Z.isElement(E)&&e.isInline(E)){var F=d.after(e,A);if(!F){var w={text:""},_=B.next(A);z.insertNodes(e,w,{at:_,voids:o}),F=d.point(e,_)}s=F,c=!0}var L=s.path.length-A.length;i=L+1,c=!0}m=d.pointRef(e,s);var I=s.path.length-i,[,k]=p,b=s.path.slice(0,I),U=i===0?s.offset:s.path[I]+C;for(var[G,M]of d.levels(e,{at:b,reverse:!0,voids:o})){var Y=!1;if(M.length<k.length||M.length===0||!o&&Z.isElement(G)&&d.isVoid(e,G))break;var W=h.current,$=d.isEnd(e,W,M);if(c||!h||!d.isEdge(e,W,M)){Y=!0;var ne=V.extractProps(G);e.apply({type:"split_node",path:M,position:U,properties:ne})}U=M[M.length-1]+(Y||$?1:0)}if(r.at==null){var fe=m.current||d.end(e,[]);z.select(e,fe)}}finally{var ve;h.unref(),(ve=m)===null||ve===void 0||ve.unref()}}})},Bv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var o={};for(var a of r)o[a]=null;z.setNodes(e,o,n)},xv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.withoutNormalizing(e,()=>{var{mode:n="lowest",split:o=!1,voids:a=!1}=r,{at:s=e.selection,match:i}=r;if(!!s){i==null&&(i=B.isPath(s)?xn(e,s):m=>Z.isElement(m)&&d.isBlock(e,m)),B.isPath(s)&&(s=d.range(e,s));var c=O.isRange(s)?d.rangeRef(e,s):null,l=d.nodes(e,{at:s,match:i,mode:n,voids:a}),f=Array.from(l,m=>{var[,p]=m;return d.pathRef(e,p)}).reverse(),v=function(p){var u=p.unref(),[C]=d.node(e,u),E=d.range(e,u);o&&c&&(E=O.intersection(c.current,E)),z.liftNodes(e,{at:E,match:A=>Z.isAncestor(C)&&C.children.includes(A),voids:a})};for(var h of f)v(h);c&&c.unref()}})};function rc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function nc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rc(Object(r),!0).forEach(function(n){ht(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var wv=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};d.withoutNormalizing(e,()=>{var{mode:o="lowest",split:a=!1,voids:s=!1}=n,{match:i,at:c=e.selection}=n;if(!!c){if(i==null&&(B.isPath(c)?i=xn(e,c):e.isInline(r)?i=E=>Z.isElement(E)&&d.isInline(e,E)||Q.isText(E):i=E=>Z.isElement(E)&&d.isBlock(e,E)),a&&O.isRange(c)){var[l,f]=O.edges(c),v=d.rangeRef(e,c,{affinity:"inward"});z.splitNodes(e,{at:f,match:i,voids:s}),z.splitNodes(e,{at:l,match:i,voids:s}),c=v.unref(),n.at==null&&z.select(e,c)}var h=Array.from(d.nodes(e,{at:c,match:e.isInline(r)?E=>Z.isElement(E)&&d.isBlock(e,E):E=>d.isEditor(E),mode:"lowest",voids:s}));for(var[,m]of h){var p=O.isRange(c)?O.intersection(c,d.range(e,m)):c;if(!!p){var u=Array.from(d.nodes(e,{at:p,match:i,mode:o,voids:s}));if(u.length>0){var C=function(){var[E]=u,A=u[u.length-1],[,F]=E,[,w]=A;if(F.length===0&&w.length===0)return"continue";var _=B.equals(F,w)?B.parent(F):B.common(F,w),L=d.range(e,F,w),I=d.node(e,_),[k]=I,b=_.length+1,U=B.next(w.slice(0,b)),G=nc(nc({},r),{},{children:[]});z.insertNodes(e,G,{at:U,voids:s}),z.moveNodes(e,{at:L,match:M=>Z.isAncestor(k)&&k.children.includes(M),to:U.concat(0),voids:s})}();if(C==="continue")continue}}}}})},ic=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Zp(t,...n)},addMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rh(t,...n)},deleteBackward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ah(t,...n)},deleteForward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sh(t,...n)},deleteFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ih(t,...n)},getFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Jp(t,...n)},insertBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dh(t,...n)},insertSoftBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Eh(t,...n)},insertFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return av(t,...n)},insertNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ch(t,...n)},insertText:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bh(t,...n)},normalizeNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qp(t,...n)},removeMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Jh(t,...n)},getDirtyPaths:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Xp(t,...n)},shouldNormalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return eh(t,...n)},above:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return th(t,...n)},after:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return nh(t,...n)},before:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return oh(t,...n)},collapse:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sv(t,...n)},delete:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ov(t,...n)},deselect:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return iv(t,...n)},edges:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return uh(t,...n)},elementReadOnly:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lh(t,...n)},end:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ch(t,...n)},first:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fh(t,...n)},fragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dh(t,...n)},getMarks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ph(t,...n)},hasBlocks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ph(t,...n)},hasInlines:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hh(t,...n)},hasPath:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vh(t,...n)},hasTexts:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gh(t,...n)},insertNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dv(t,...n)},isBlock:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xh(t,...n)},isEdge:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return wh(t,...n)},isEmpty:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fh(t,...n)},isEnd:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yh(t,...n)},isNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Th(t,...n)},isStart:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _h(t,...n)},last:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Sh(t,...n)},leaf:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return bh(t,...n)},levels:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Oh(t,...n)},liftNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mv(t,...n)},mergeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vv(t,...n)},move:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return uv(t,...n)},moveNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gv(t,...n)},next:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Lh(t,...n)},node:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return kh(t,...n)},nodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Mh(t,...n)},normalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Rh(t,...n)},parent:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return jh(t,...n)},path:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Uh(t,...n)},pathRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return zh(t,...n)},pathRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Wh(t,...n)},point:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Yh(t,...n)},pointRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Hh(t,...n)},pointRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Gh(t,...n)},positions:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return qh(t,...n)},previous:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return $h(t,...n)},range:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Zh(t,...n)},rangeRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Vh(t,...n)},rangeRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Kh(t,...n)},removeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dv(t,...n)},select:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lv(t,...n)},setNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Cv(t,...n)},setNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qh(t,...n)},setPoint:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return cv(t,...n)},setSelection:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fv(t,...n)},splitNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Av(t,...n)},start:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ev(t,...n)},string:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return tv(t,...n)},unhangRange:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rv(t,...n)},unsetNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bv(t,...n)},unwrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xv(t,...n)},void:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mh(t,...n)},withoutNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return nv(t,...n)},wrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return wv(t,...n)}};return t};g();D();var Fv={isHistory(t){return et(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||pr.isOperationList(t.redos[0].operations))&&(t.undos.length===0||pr.isOperationList(t.undos[0].operations))}};var us=new WeakMap,ls=new WeakMap,wn={isHistoryEditor(t){return Fv.isHistory(t.history)&&d.isEditor(t)},isMerging(t){return ls.get(t)},isSaving(t){return us.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=wn.isMerging(t);ls.set(t,!1),e(),ls.set(t,r)},withoutSaving(t,e){var r=wn.isSaving(t);us.set(t,!1),e(),us.set(t,r)}},uc=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:o}=n;if(o.length>0){var a=o[o.length-1];a.selectionBefore&&z.setSelection(e,a.selectionBefore),wn.withoutSaving(e,()=>{d.withoutNormalizing(e,()=>{for(var s of a.operations)e.apply(s)})}),n.redos.pop(),e.writeHistory("undos",a)}},e.undo=()=>{var{history:n}=e,{undos:o}=n;if(o.length>0){var a=o[o.length-1];wn.withoutSaving(e,()=>{d.withoutNormalizing(e,()=>{var s=a.operations.map(pr.inverse).reverse();for(var i of s)e.apply(i);a.selectionBefore&&z.setSelection(e,a.selectionBefore)})}),e.writeHistory("redos",a),n.undos.pop()}},e.apply=n=>{var{operations:o,history:a}=e,{undos:s}=a,i=s[s.length-1],c=i&&i.operations[i.operations.length-1],l=wn.isSaving(e),f=wn.isMerging(e);if(l==null&&(l=Tv(n)),l){if(f==null&&(i==null?f=!1:o.length!==0?f=!0:f=yv(n,c)),i&&f)i.operations.push(n);else{var v={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",v)}for(;s.length>100;)s.shift();a.redos=[]}r(n)},e.writeHistory=(n,o)=>{e.history[n].push(o)},e},yv=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&B.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&B.equals(t.path,e.path)),Tv=(t,e)=>t.type!=="set_selection";g();D();var Is=S(dc()),Jc=S(Qm()),Qc=S(ep()),P=S(ee());g();D();g();D();function mc(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function pc(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function cs(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return pc(r.overflowY,e)||pc(r.overflowX,e)||function(n){var o=function(a){if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(t)}return!1}function ta(t,e,r,n,o,a,s,i){return a<t&&s>e||a>t&&s<e?0:a<=t&&i<=r||s>=e&&i>=r?a-t-n:s>e&&i<r||a<t&&i>r?s-e+o:0}var fs=function(t,e){var r=window,n=e.scrollMode,o=e.block,a=e.inline,s=e.boundary,i=e.skipOverflowHiddenElements,c=typeof s=="function"?s:function(Se){return Se!==s};if(!mc(t))throw new TypeError("Invalid target");for(var l,f,v=document.scrollingElement||document.documentElement,h=[],m=t;mc(m)&&c(m);){if((m=(f=(l=m).parentElement)==null?l.getRootNode().host||null:f)===v){h.push(m);break}m!=null&&m===document.body&&cs(m)&&!cs(document.documentElement)||m!=null&&cs(m,i)&&h.push(m)}for(var p=r.visualViewport?r.visualViewport.width:innerWidth,u=r.visualViewport?r.visualViewport.height:innerHeight,C=window.scrollX||pageXOffset,E=window.scrollY||pageYOffset,A=t.getBoundingClientRect(),F=A.height,w=A.width,_=A.top,L=A.right,I=A.bottom,k=A.left,b=o==="start"||o==="nearest"?_:o==="end"?I:_+F/2,U=a==="center"?k+w/2:a==="end"?L:k,G=[],M=0;M<h.length;M++){var Y=h[M],W=Y.getBoundingClientRect(),$=W.height,ne=W.width,fe=W.top,ve=W.right,X=W.bottom,ie=W.left;if(n==="if-needed"&&_>=0&&k>=0&&I<=u&&L<=p&&_>=fe&&I<=X&&k>=ie&&L<=ve)return G;var Te=getComputedStyle(Y),De=parseInt(Te.borderLeftWidth,10),Ze=parseInt(Te.borderTopWidth,10),x=parseInt(Te.borderRightWidth,10),q=parseInt(Te.borderBottomWidth,10),j=0,K=0,le="offsetWidth"in Y?Y.offsetWidth-Y.clientWidth-De-x:0,oe="offsetHeight"in Y?Y.offsetHeight-Y.clientHeight-Ze-q:0,he="offsetWidth"in Y?Y.offsetWidth===0?0:ne/Y.offsetWidth:0,Ie="offsetHeight"in Y?Y.offsetHeight===0?0:$/Y.offsetHeight:0;if(v===Y)j=o==="start"?b:o==="end"?b-u:o==="nearest"?ta(E,E+u,u,Ze,q,E+b,E+b+F,F):b-u/2,K=a==="start"?U:a==="center"?U-p/2:a==="end"?U-p:ta(C,C+p,p,De,x,C+U,C+U+w,w),j=Math.max(0,j+E),K=Math.max(0,K+C);else{j=o==="start"?b-fe-Ze:o==="end"?b-X+q+oe:o==="nearest"?ta(fe,X,$,Ze,q+oe,b,b+F,F):b-(fe+$/2)+oe/2,K=a==="start"?U-ie-De:a==="center"?U-(ie+ne/2)+le/2:a==="end"?U-ve+x+le:ta(ie,ve,ne,De,x+le,U,U+w,w);var Ne=Y.scrollLeft,Le=Y.scrollTop;b+=Le-(j=Math.max(0,Math.min(Le+j/Ie,Y.scrollHeight-$/Ie+oe))),U+=Ne-(K=Math.max(0,Math.min(Ne+K/he,Y.scrollWidth-ne/he+le)))}G.push({el:Y,top:j,left:K})}return G};function hc(t){return t===Object(t)&&Object.keys(t).length!==0}function Ov(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(n){var o=n.el,a=n.top,s=n.left;o.scroll&&r?o.scroll({top:a,left:s,behavior:e}):(o.scrollTop=a,o.scrollLeft=s)})}function Nv(t){return t===!1?{block:"end",inline:"nearest"}:hc(t)?t:{block:"start",inline:"nearest"}}function Iv(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(hc(e)&&typeof e.behavior=="function")return e.behavior(r?fs(t,e):[]);if(!!r){var n=Nv(e);return Ov(fs(t,n),n.behavior)}}var vc=Iv;g();D();g();D();g();D();g();D();g();D();g();D();g();D();var Pt=[];var gc=function(){return Pt.some(function(t){return t.activeTargets.length>0})};g();D();var Dc=function(){return Pt.some(function(t){return t.skippedTargets.length>0})};g();D();var Cc="ResizeObserver loop completed with undelivered notifications.",Ec=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:Cc}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=Cc),window.dispatchEvent(t)};g();D();g();D();g();D();g();D();var Vr;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Vr||(Vr={}));g();D();g();D();var Gt=function(t){return Object.freeze(t)};var ds=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,Gt(this)}return t}();g();D();var ms=function(){function t(e,r,n,o){return this.x=e,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Gt(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,o=e.top,a=e.right,s=e.bottom,i=e.left,c=e.width,l=e.height;return{x:r,y:n,top:o,right:a,bottom:s,left:i,width:c,height:l}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}();g();D();var to=function(t){return t instanceof SVGElement&&"getBBox"in t},ra=function(t){if(to(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var o=t,a=o.offsetWidth,s=o.offsetHeight;return!(a||s||t.getClientRects().length)},ps=function(t){var e;if(t instanceof Element)return!0;var r=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},Ac=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};g();D();var Kr=typeof window<"u"?window:{};var na=new WeakMap,Bc=/auto|scroll/,Pv=/^tb|vertical/,Lv=/msie|trident/i.test(Kr.navigator&&Kr.navigator.userAgent),Qt=function(t){return parseFloat(t||"0")},Fn=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new ds((r?e:t)||0,(r?t:e)||0)},xc=Gt({devicePixelContentBoxSize:Fn(),borderBoxSize:Fn(),contentBoxSize:Fn(),contentRect:new ms(0,0,0,0)}),hs=function(t,e){if(e===void 0&&(e=!1),na.has(t)&&!e)return na.get(t);if(ra(t))return na.set(t,xc),xc;var r=getComputedStyle(t),n=to(t)&&t.ownerSVGElement&&t.getBBox(),o=!Lv&&r.boxSizing==="border-box",a=Pv.test(r.writingMode||""),s=!n&&Bc.test(r.overflowY||""),i=!n&&Bc.test(r.overflowX||""),c=n?0:Qt(r.paddingTop),l=n?0:Qt(r.paddingRight),f=n?0:Qt(r.paddingBottom),v=n?0:Qt(r.paddingLeft),h=n?0:Qt(r.borderTopWidth),m=n?0:Qt(r.borderRightWidth),p=n?0:Qt(r.borderBottomWidth),u=n?0:Qt(r.borderLeftWidth),C=v+l,E=c+f,A=u+m,F=h+p,w=i?t.offsetHeight-F-t.clientHeight:0,_=s?t.offsetWidth-A-t.clientWidth:0,L=o?C+A:0,I=o?E+F:0,k=n?n.width:Qt(r.width)-L-_,b=n?n.height:Qt(r.height)-I-w,U=k+C+_+A,G=b+E+w+F,M=Gt({devicePixelContentBoxSize:Fn(Math.round(k*devicePixelRatio),Math.round(b*devicePixelRatio),a),borderBoxSize:Fn(U,G,a),contentBoxSize:Fn(k,b,a),contentRect:new ms(v,c,k,b)});return na.set(t,M),M},oa=function(t,e,r){var n=hs(t,r),o=n.borderBoxSize,a=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case Vr.DEVICE_PIXEL_CONTENT_BOX:return s;case Vr.BORDER_BOX:return o;default:return a}};var vs=function(){function t(e){var r=hs(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=Gt([r.borderBoxSize]),this.contentBoxSize=Gt([r.contentBoxSize]),this.devicePixelContentBoxSize=Gt([r.devicePixelContentBoxSize])}return t}();g();D();var aa=function(t){if(ra(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e};var wc=function(){var t=1/0,e=[];Pt.forEach(function(s){if(s.activeTargets.length!==0){var i=[];s.activeTargets.forEach(function(l){var f=new vs(l.target),v=aa(l.target);i.push(f),l.lastReportedSize=oa(l.target,l.observedBox),v<t&&(t=v)}),e.push(function(){s.callback.call(s.observer,i,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var o=n[r];o()}return t};g();D();var gs=function(t){Pt.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(aa(o.target)>t?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var Fc=function(){var t=0;for(gs(t);gc();)t=wc(),gs(t);return Dc()&&Ec(),t>0};g();D();g();D();var Ds,yc=[],kv=function(){return yc.splice(0).forEach(function(t){return t()})},Tc=function(t){if(!Ds){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return kv()}).observe(r,n),Ds=function(){r.textContent="".concat(e?e--:e++)}}yc.push(t),Ds()};var _c=function(t){Tc(function(){requestAnimationFrame(t)})};var sa=0,Mv=function(){return!!sa},Rv=250,jv={attributes:!0,characterData:!0,childList:!0,subtree:!0},Sc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],bc=function(t){return t===void 0&&(t=0),Date.now()+t},Cs=!1,zv=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Rv),!Cs){Cs=!0;var n=bc(e);_c(function(){var o=!1;try{o=Fc()}finally{if(Cs=!1,e=n-bc(),!Mv())return;o?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,jv)};document.body?r():Kr.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Sc.forEach(function(r){return Kr.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Sc.forEach(function(r){return Kr.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),ia=new zv,Es=function(t){!sa&&t>0&&ia.start(),sa+=t,!sa&&ia.stop()};g();D();var Wv=function(t){return!to(t)&&!Ac(t)&&getComputedStyle(t).display==="inline"},Oc=function(){function t(e,r){this.target=e,this.observedBox=r||Vr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=oa(this.target,this.observedBox,!0);return Wv(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}();g();D();var Nc=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}();var ua=new WeakMap,Ic=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},ro=function(){function t(){}return t.connect=function(e,r){var n=new Nc(e,r);ua.set(e,n)},t.observe=function(e,r,n){var o=ua.get(e),a=o.observationTargets.length===0;Ic(o.observationTargets,r)<0&&(a&&Pt.push(o),o.observationTargets.push(new Oc(r,n&&n.box)),Es(1),ia.schedule())},t.unobserve=function(e,r){var n=ua.get(e),o=Ic(n.observationTargets,r),a=n.observationTargets.length===1;o>=0&&(a&&Pt.splice(Pt.indexOf(n),1),n.observationTargets.splice(o,1),Es(-1))},t.disconnect=function(e){var r=this,n=ua.get(e);n.observationTargets.slice().forEach(function(o){return r.unobserve(e,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t}();var As=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ro.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ps(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ro.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ps(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ro.unobserve(this,e)},t.prototype.disconnect=function(){ro.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();var da=S(Rc()),ef=S($m());function ga(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qv(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function Tn(t,e){if(t==null)return{};var r=qv(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var Ps=(0,P.createContext)(null),Ir=()=>{var t=(0,P.useContext)(Ps);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},$v=parseInt(P.default.version.split(".")[0],10)>=17,Vv=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,jc=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),St=typeof navigator<"u"&&/Android/.test(navigator.userAgent),ha=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),oo=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Kv=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),tf=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Zv=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Xv=St&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Jv=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Qv=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),eg=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),ma=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sr=(!Zv||!Xv)&&!Kv&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",Ls=new WeakMap,ks=new WeakMap,rf=new WeakMap,pa=new WeakMap,Fs=new WeakMap,so=new WeakMap,Jr=new WeakMap,ys=new WeakMap,Da=new WeakMap,Ts=new WeakMap,Zr=new WeakMap,Xr=new WeakMap,ao=new WeakMap,_s=new WeakMap,Ms=new WeakMap,Yt=new WeakMap,vr=new WeakMap,At=new WeakMap,br=new WeakMap,Or=new WeakMap,nf=new WeakMap,_n=Symbol("placeholder"),of=Symbol("mark-placeholder"),tg=globalThis.Text,Rs=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,rg=t=>Nr(t)&&t.nodeType===8,Lt=t=>Nr(t)&&t.nodeType===1,Nr=t=>{var e=Rs(t);return!!e&&t instanceof e.Node},Ss=t=>{var e=t&&t.anchorNode&&Rs(t.anchorNode);return!!e&&t instanceof e.Selection},af=t=>Nr(t)&&t.nodeType===3,ng=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,og=t=>{var[e,r]=t;if(Lt(e)&&e.childNodes.length){var n=r===e.childNodes.length,o=n?r-1:r;for([e,o]=sf(e,o,n?"backward":"forward"),n=o<r;Lt(e)&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=sg(e,a,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]},ag=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},sf=(t,e,r)=>{for(var{childNodes:n}=t,o=n[e],a=e,s=!1,i=!1;(rg(o)||Lt(o)&&o.childNodes.length===0||Lt(o)&&o.getAttribute("contenteditable")==="false")&&!(s&&i);){if(a>=n.length){s=!0,a=e-1,r="backward";continue}if(a<0){i=!0,a=e+1,r="forward";continue}o=n[a],e=a,a+=r==="forward"?1:-1}return[o,e]},sg=(t,e,r)=>{var[n]=sf(t,e,r);return n},uf=t=>{var e="";if(af(t)&&t.nodeValue)return t.nodeValue;if(Lt(t)){for(var r of Array.from(t.childNodes))e+=uf(r);var n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e},ig=/data-slate-fragment="(.+?)"/m,ug=t=>{var e=t.getData("text/html"),[,r]=e.match(ig)||[];return r},js=(t,e,r)=>{var{target:n}=e;if(Lt(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:o}=R.getWindow(t);if(o.contains(n))return R.hasDOMNode(t,n,{editable:!0});var a=r.find(s=>{var{addedNodes:i,removedNodes:c}=s;for(var l of i)if(l===n||l.contains(n))return!0;for(var f of c)if(f===n||f.contains(n))return!0});return!a||a===e?!1:js(t,a,r)},lg=0,bs=class{constructor(){this.id="".concat(lg++)}},R={androidPendingDiffs:t=>At.get(t),androidScheduleFlush:t=>{var e;(e=Ms.get(t))===null||e===void 0||e()},blur:t=>{var e=R.toDOMNode(t,t),r=R.findDocumentOrShadowRoot(t);Zr.set(t,!1),r.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,r=R.findDocumentOrShadowRoot(t),n=r.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),e&&z.deselect(t)},findDocumentOrShadowRoot:t=>{var e=R.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:n,target:o}=e;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=R.toSlateNode(t,e.target),s=R.findPath(t,a);if(Z.isElement(a)&&d.isVoid(t,a)){var i=o.getBoundingClientRect(),c=t.isInline(a)?r-i.left<i.left+i.width-r:n-i.top<i.top+i.height-n,l=d.point(t,s,{edge:c?"start":"end"}),f=c?d.before(t,l):d.after(t,l);if(f){var v=d.range(t,f);return v}}var h,{document:m}=R.getWindow(t);if(m.caretRangeFromPoint)h=m.caretRangeFromPoint(r,n);else{var p=m.caretPositionFromPoint(r,n);p&&(h=m.createRange(),h.setStart(p.offsetNode,p.offset),h.setEnd(p.offsetNode,p.offset))}if(!h)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var u=R.toSlateRange(t,h,{exactMatch:!1,suppressThrow:!1});return u},findKey:(t,e)=>{var r=ys.get(e);return r||(r=new bs,ys.set(e,r)),r},findPath:(t,e)=>{for(var r=[],n=e;;){var o=ks.get(n);if(o==null){if(d.isEditor(n))return r;break}var a=Ls.get(n);if(a==null)break;r.unshift(a),n=o}throw new Error("Unable to find the path for Slate node: ".concat(tt.stringify(e)))},focus:t=>{var e=R.toDOMNode(t,t),r=R.findDocumentOrShadowRoot(t);Zr.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},getWindow:t=>{var e=rf.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=n,a=R.toDOMNode(e,e),s;try{s=Lt(r)?r:r.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return s?s.closest("[data-slate-editor]")===a&&(!o||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===a||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>Nr(e)&&R.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:r,focus:n}=e;return d.hasPath(t,r.path)&&d.hasPath(t,n.path)},hasSelectableTarget:(t,e)=>R.hasEditableTarget(t,e)||R.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>Nr(e)&&R.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!Xr.get(t),isFocused:t=>!!Zr.get(t),isReadOnly:t=>!!Ts.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(Ts.get(t))return!1;var r=R.hasTarget(t,e)&&R.toSlateNode(t,e);return Z.isElement(r)&&d.isVoid(t,r)},setFragmentData:(t,e,r)=>t.setFragmentData(e,r),toDOMNode:(t,e)=>{var r=Da.get(t),n=d.isEditor(e)?pa.get(t):r?.get(R.findKey(t,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(tt.stringify(e)));return n},toDOMPoint:(t,e)=>{var[r]=d.node(t,e.path),n=R.toDOMNode(t,r),o;d.void(t,{at:e})&&(e={path:e.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",s=Array.from(n.querySelectorAll(a)),i=0,c=0;c<s.length;c++){var l=s[c],f=l.childNodes[0];if(!(f==null||f.textContent==null)){var{length:v}=f.textContent,h=l.getAttribute("data-slate-length"),m=h==null?v:parseInt(h,10),p=i+m,u=s[c+1];if(e.offset===p&&u!==null&&u!==void 0&&u.hasAttribute("data-slate-mark-placeholder")){var C,E=u.childNodes[0];o=[E instanceof tg?E:u,(C=u.textContent)!==null&&C!==void 0&&C.startsWith("\uFEFF")?1:0];break}if(e.offset<=p){var A=Math.min(v,Math.max(0,e.offset-i));o=[f,A];break}i=p}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(tt.stringify(e)));return o},toDOMRange:(t,e)=>{var{anchor:r,focus:n}=e,o=O.isBackward(e),a=R.toDOMPoint(t,r),s=O.isCollapsed(e)?a:R.toDOMPoint(t,n),i=R.getWindow(t),c=i.document.createRange(),[l,f]=o?s:a,[v,h]=o?a:s,m=Lt(l)?l:l.parentElement,p=!!m.getAttribute("data-slate-zero-width"),u=Lt(v)?v:v.parentElement,C=!!u.getAttribute("data-slate-zero-width");return c.setStart(l,p?1:f),c.setEnd(v,C?1:h),c},toSlateNode:(t,e)=>{var r=Lt(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?so.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,[a,s]=n?e:og(e),i=a.parentNode,c=null,l=0;if(i){var f,v,h=R.toDOMNode(t,t),m=i.closest('[data-slate-void="true"]'),p=m&&h.contains(m)?m:null,u=i.closest("[data-slate-leaf]"),C=null;if(u){if(c=u.closest('[data-slate-node="text"]'),c){var E=R.getWindow(t),A=E.document.createRange();A.setStart(c,0),A.setEnd(a,s);var F=A.cloneContents(),w=[...Array.prototype.slice.call(F.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(F.querySelectorAll("[contenteditable=false]"))];w.forEach(W=>{if(St&&!n&&W.hasAttribute("data-slate-zero-width")&&W.textContent.length>0&&W.textContext!=="\uFEFF"){W.textContent.startsWith("\uFEFF")&&(W.textContent=W.textContent.slice(1));return}W.parentNode.removeChild(W)}),l=F.textContent.length,C=c}}else if(p){for(var _=p.querySelectorAll("[data-slate-leaf]"),L=0;L<_.length;L++){var I=_[L];if(R.hasDOMNode(t,I)){u=I;break}}u?(c=u.closest('[data-slate-node="text"]'),C=u,l=C.textContent.length,C.querySelectorAll("[data-slate-zero-width]").forEach(W=>{l-=W.textContent.length})):l=1}C&&l===C.textContent.length&&St&&C.getAttribute("data-slate-zero-width")==="z"&&(f=C.textContent)!==null&&f!==void 0&&f.startsWith("\uFEFF")&&(i.hasAttribute("data-slate-zero-width")||ha&&(v=C.textContent)!==null&&v!==void 0&&v.endsWith(`

`))&&l--}if(St&&!c&&!n){var k=i.hasAttribute("data-slate-node")?i:i.closest("[data-slate-node]");if(k&&R.hasDOMNode(t,k,{editable:!0})){var b=R.toSlateNode(t,k),{path:U,offset:G}=d.start(t,R.findPath(t,b));return k.querySelector("[data-slate-leaf]")||(G=s),{path:U,offset:G}}}if(!c){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var M=R.toSlateNode(t,c),Y=R.findPath(t,M);return{path:Y,offset:l}},toSlateRange:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,a=Ss(e)?e.anchorNode:e.startContainer,s,i,c,l,f;if(a&&(Ss(e)?(s=e.anchorNode,i=e.anchorOffset,c=e.focusNode,l=e.focusOffset,tf&&ag(s)?f=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:f=e.isCollapsed):(s=e.startContainer,i=e.startOffset,c=e.endContainer,l=e.endOffset,f=e.collapsed)),s==null||c==null||i==null||l==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if("getAttribute"in c&&c.getAttribute("contenteditable")==="false"){var v;c=s,l=((v=s.textContent)===null||v===void 0?void 0:v.length)||0}var h=R.toSlatePoint(t,[s,i],{exactMatch:n,suppressThrow:o});if(!h)return null;var m=f?h:R.toSlatePoint(t,[c,l],{exactMatch:n,suppressThrow:o});if(!m)return null;if(ha&&!f&&s!==c){var p=d.isEnd(t,h,h.path),u=d.isStart(t,m,m.path);if(p){var C=d.after(t,h);h=C||h}if(u){var E=d.before(t,m);m=E||m}}var A={anchor:h,focus:m};return O.isExpanded(A)&&O.isForward(A)&&Lt(c)&&d.void(t,{at:A.focus,mode:"highest"})&&(A=d.unhangRange(t,A,{voids:!0})),A}};function cg(t,e){var{path:r,diff:n}=e;if(!d.hasPath(t,r))return!1;var o=V.get(t,r);if(!Q.isText(o))return!1;if(n.start!==o.text.length||n.text.length===0)return o.text.slice(n.start,n.start+n.text.length)===n.text;var a=B.next(r);if(!d.hasPath(t,a))return!1;var s=V.get(t,a);return Q.isText(s)&&s.text.startsWith(n.text)}function lf(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.reduce((o,a)=>o.slice(0,a.start)+a.text+o.slice(a.end),t)}function fg(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n))return n;return r}function dg(t,e,r){for(var n=Math.min(t.length,e.length,r),o=0;o<n;o++)if(t.charAt(t.length-o-1)!==e.charAt(e.length-o-1))return o;return n}function cf(t,e){var{start:r,end:n,text:o}=e,a=t.slice(r,n),s=fg(a,o),i=Math.min(a.length-s,o.length-s),c=dg(a,o,i),l={start:r+s,end:n-c,text:o.slice(s,o.length-c)};return l.start===l.end&&l.text.length===0?null:l}function mg(t,e,r){var n=Math.min(e.start,r.start),o=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),a=lf(t,e,r),s=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-o),i=a.slice(n,s),c=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return cf(t,{start:n,end:c,text:i})}function pg(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function Os(t,e){var{path:r,offset:n}=e;if(!d.hasPath(t,r))return null;var o=V.get(t,r);if(!Q.isText(o))return null;var a=d.above(t,{match:i=>Z.isElement(i)&&d.isBlock(t,i),at:r});if(!a)return null;for(;n>o.text.length;){var s=d.next(t,{at:r,match:Q.isText});if(!s||!B.isDescendant(s[1],a[1]))return null;n-=o.text.length,o=s[0],r=s[1]}return{path:r,offset:n}}function zc(t,e){var r=Os(t,e.anchor);if(!r)return null;if(O.isCollapsed(e))return{anchor:r,focus:r};var n=Os(t,e.focus);return n?{anchor:r,focus:n}:null}function Ns(t,e,r){var n=At.get(t),o=n?.find(f=>{var{path:v}=f;return B.equals(v,e.path)});if(!o||e.offset<=o.diff.start)return me.transform(e,r,{affinity:"backward"});var{diff:a}=o;if(e.offset<=a.start+a.text.length){var s={path:e.path,offset:a.start},i=me.transform(s,r,{affinity:"backward"});return i?{path:i.path,offset:i.offset+e.offset-a.start}:null}var c={path:e.path,offset:e.offset-a.text.length+a.end-a.start},l=me.transform(c,r,{affinity:"backward"});return l?r.type==="split_node"&&B.equals(r.path,e.path)&&c.offset<r.position&&a.start<r.position?l:{path:l.path,offset:l.offset+a.text.length-a.end+a.start}:null}function Wc(t,e,r){var n=Ns(t,e.anchor,r);if(!n)return null;if(O.isCollapsed(e))return{anchor:n,focus:n};var o=Ns(t,e.focus,r);return o?{anchor:n,focus:o}:null}function hg(t,e){var{path:r,diff:n,id:o}=t;switch(e.type){case"insert_text":return!B.equals(e.path,r)||e.offset>=n.end?t:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:o,path:r};case"remove_text":return!B.equals(e.path,r)||e.offset>=n.end?t:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:o,path:r};case"split_node":return!B.equals(e.path,r)||e.position>=n.end?{diff:n,id:o,path:B.transform(r,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:o,path:r}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:o,path:B.transform(r,e,{affinity:"forward"})};case"merge_node":return B.equals(e.path,r)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:o,path:B.transform(r,e)}:{diff:n,id:o,path:B.transform(r,e)}}var a=B.transform(r,e);return a?{diff:n,path:a,id:o}:null}function Uc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ca(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uc(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var vg=25,gg=200,Dg=function(){},Cg=t=>t?.constructor.name==="DataTransfer";function Eg(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=t,o=!1,a=null,s=null,i=null,c=0,l=!1,f=()=>{var M=Or.get(e);if(Or.delete(e),M){var{selection:Y}=e,W=zc(e,M);W&&(!Y||!O.equals(W,Y))&&z.select(e,W)}},v=()=>{var M=br.get(e);if(br.delete(e),!!M){if(M.at){var Y=me.isPoint(M.at)?Os(e,M.at):zc(e,M.at);if(!Y)return;var W=d.range(e,Y);(!e.selection||!O.equals(e.selection,W))&&z.select(e,Y)}M.run()}},h=()=>{if(s&&(clearTimeout(s),s=null),i&&(clearTimeout(i),i=null),!w()&&!F()){f();return}o||(o=!0,setTimeout(()=>o=!1)),F()&&(o="action");var M=e.selection&&d.rangeRef(e,e.selection,{affinity:"forward"});vr.set(e,e.marks),Dg("flush",br.get(e),At.get(e));for(var Y=w(),W;W=($=At.get(e))===null||$===void 0?void 0:$[0];){var $,ne,fe=Yt.get(e);fe!==void 0&&(Yt.delete(e),e.marks=fe),fe&&l===!1&&(l=null);var ve=pg(W);(!e.selection||!O.equals(e.selection,ve))&&z.select(e,ve),W.diff.text?d.insertText(e,W.diff.text):d.deleteFragment(e),At.set(e,(ne=At.get(e))===null||ne===void 0?void 0:ne.filter(Te=>{var{id:De}=Te;return De!==W.id})),cg(e,W)||(Y=!1,br.delete(e),vr.delete(e),o="action",Or.delete(e),r.cancel(),n.cancel(),M?.unref())}var X=M?.unref();if(X&&!Or.get(e)&&(!e.selection||!O.equals(X,e.selection))&&z.select(e,X),F()){v();return}Y&&r(),r.flush(),n.flush(),f();var ie=vr.get(e);vr.delete(e),ie!==void 0&&(e.marks=ie,e.onChange())},m=M=>{a&&clearTimeout(a),a=setTimeout(()=>{Xr.set(e,!1),h()},vg)},p=M=>{Xr.set(e,!0),a&&(clearTimeout(a),a=null)},u=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,W=Fs.get(e);if(!!W){if(w()||Y){W.style.display="none";return}W.style.removeProperty("display")}},C=(M,Y)=>{var W,$=(W=At.get(e))!==null&&W!==void 0?W:[];At.set(e,$);var ne=V.leaf(e,M),fe=$.findIndex(ie=>B.equals(ie.path,M));if(fe<0){var ve=cf(ne.text,Y);ve&&$.push({path:M,diff:Y,id:c++}),u();return}var X=mg(ne.text,$[fe].diff,Y);if(!X){$.splice(fe,1),u();return}$[fe]=ca(ca({},$[fe]),{},{diff:X})},E=function(Y){var{at:W}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l=!1,Or.delete(e),r.cancel(),n.cancel(),F()&&h(),br.set(e,{at:W,run:Y}),i=setTimeout(h)},A=M=>{var Y;s&&(clearTimeout(s),s=null);var{inputType:W}=M,$=null,ne=M.dataTransfer||M.data||void 0;l!==!1&&W!=="insertText"&&W!=="insertCompositionText"&&(l=!1);var[fe]=M.getTargetRanges();fe&&($=R.toSlateRange(e,fe,{exactMatch:!1,suppressThrow:!0}));var ve=R.getWindow(e),X=ve.getSelection();if(!$&&X&&(fe=X,$=R.toSlateRange(e,X,{exactMatch:!1,suppressThrow:!0})),$=(Y=$)!==null&&Y!==void 0?Y:e.selection,!!$){var ie=!0;if(W.startsWith("delete")){if(O.isExpanded($)){var[Te,De]=O.edges($),Ze=V.leaf(e,Te.path);if(Ze.text.length===Te.offset&&De.offset===0){var x=d.next(e,{at:Te.path,match:Q.isText});x&&B.equals(x[1],De.path)&&($={anchor:De,focus:De})}}var q=W.endsWith("Backward")?"backward":"forward",[j,K]=O.edges($),[le,oe]=d.leaf(e,j.path),he={text:"",start:j.offset,end:K.offset},Ie=At.get(e),Ne=Ie?.find(Wt=>B.equals(Wt.path,oe)),Le=Ne?[Ne.diff,he]:[he],Se=lf(le.text,...Le);if(Se.length===0&&(ie=!1),O.isExpanded($)){if(ie&&B.equals($.anchor.path,$.focus.path)){var at={path:$.anchor.path,offset:j.offset},mt=d.range(e,at,at);return I(mt),C($.anchor.path,{text:"",end:K.offset,start:j.offset})}return E(()=>d.deleteFragment(e,{direction:q}),{at:$})}}switch(W){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return E(()=>d.deleteFragment(e),{at:$});case"deleteContent":case"deleteContentForward":{var{anchor:Xe}=$;if(ie&&O.isCollapsed($)){var Ot=V.leaf(e,Xe.path);if(Xe.offset<Ot.text.length)return C(Xe.path,{text:"",start:Xe.offset,end:Xe.offset+1})}return E(()=>d.deleteForward(e),{at:$})}case"deleteContentBackward":{var jt,{anchor:pt}=$,Nt=Ss(fe)?fe.isCollapsed:!!((jt=fe)!==null&&jt!==void 0&&jt.collapsed);return ie&&Nt&&O.isCollapsed($)&&pt.offset>0?C(pt.path,{text:"",start:pt.offset-1,end:pt.offset}):E(()=>d.deleteBackward(e),{at:$})}case"deleteEntireSoftLine":return E(()=>{d.deleteBackward(e,{unit:"line"}),d.deleteForward(e,{unit:"line"})},{at:$});case"deleteHardLineBackward":return E(()=>d.deleteBackward(e,{unit:"block"}),{at:$});case"deleteSoftLineBackward":return E(()=>d.deleteBackward(e,{unit:"line"}),{at:$});case"deleteHardLineForward":return E(()=>d.deleteForward(e,{unit:"block"}),{at:$});case"deleteSoftLineForward":return E(()=>d.deleteForward(e,{unit:"line"}),{at:$});case"deleteWordBackward":return E(()=>d.deleteBackward(e,{unit:"word"}),{at:$});case"deleteWordForward":return E(()=>d.deleteForward(e,{unit:"word"}),{at:$});case"insertLineBreak":return E(()=>d.insertSoftBreak(e),{at:$});case"insertParagraph":return E(()=>d.insertBreak(e),{at:$});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Cg(ne))return E(()=>R.insertData(e,ne),{at:$});var Be=ne??"";if(Yt.get(e)&&(Be=Be.replace("\uFEFF","")),W==="insertText"&&/.*\n.*\n$/.test(Be)&&(Be=Be.slice(0,-1)),Be.includes(`
`))return E(()=>{var Wt=Be.split(`
`);Wt.forEach((jr,Eo)=>{jr&&d.insertText(e,jr),Eo!==Wt.length-1&&d.insertSoftBreak(e)})},{at:$});if(B.equals($.anchor.path,$.focus.path)){var[lr,ln]=O.edges($),ot={start:lr.offset,end:ln.offset,text:Be};if(Be&&l&&W==="insertCompositionText"){var zt=l.start+l.text.search(/\S|$/),Co=ot.start+ot.text.search(/\S|$/);Co===zt+1&&ot.end===l.start+l.text.length?(ot.start-=1,l=null,U()):l=!1}else W==="insertText"?l===null?l=ot:l&&O.isCollapsed($)&&l.end+l.text.length===lr.offset?l=ca(ca({},l),{},{text:l.text+Be}):l=!1:l=!1;if(ie){C(lr.path,ot);return}}return E(()=>d.insertText(e,Be),{at:$})}}}},F=()=>!!br.get(e),w=()=>{var M;return!!((M=At.get(e))!==null&&M!==void 0&&M.length)},_=()=>F()||w(),L=()=>o,I=M=>{Or.set(e,M),s&&(clearTimeout(s),s=null);var{selection:Y}=e;if(!!M){var W=!Y||!B.equals(Y.anchor.path,M.anchor.path),$=!Y||!B.equals(Y.anchor.path.slice(0,-1),M.anchor.path.slice(0,-1));(W&&l||$)&&(l=!1),(W||w())&&(s=setTimeout(h,gg))}},k=()=>{(F()||!w())&&h()},b=M=>{w()||(u(!0),setTimeout(u))},U=()=>{F()||(i=setTimeout(h))},G=M=>{if(!(w()||F())&&M.some(W=>js(e,W,M))){var Y;(Y=nf.get(e))===null||Y===void 0||Y()}};return{flush:h,scheduleFlush:U,hasPendingDiffs:w,hasPendingAction:F,hasPendingChanges:_,isFlushing:L,handleUserSelect:I,handleCompositionEnd:m,handleCompositionStart:p,handleDOMBeforeInput:A,handleKeyDown:b,handleDomMutations:G,handleInput:k}}function Ag(){var t=(0,P.useRef)(!1);return(0,P.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var io=ma?P.useLayoutEffect:P.useEffect;function Bg(t,e,r){var[n]=(0,P.useState)(()=>new MutationObserver(e));io(()=>{n.takeRecords()}),(0,P.useEffect)(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(t.current,r),()=>n.disconnect()},[n,t,r])}var xg=["node"];function Hc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function wg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hc(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Fg={subtree:!0,childList:!0,characterData:!0},yg=St?t=>{var{node:e}=t,r=Tn(t,xg);if(!St)return null;var n=Ir(),o=Ag(),[a]=(0,P.useState)(()=>Eg(wg({editor:n},r)));return Bg(e,a.handleDomMutations,Fg),Ms.set(n,a.scheduleFlush),o&&a.flush(),a}:()=>null,Tg=["anchor","focus"],_g=["anchor","focus"],Sg=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),ff=(t,e)=>{var r=Tn(t,Tg),n=Tn(e,_g);return t[_n]===e[_n]&&Sg(r,n)},bg=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(!O.equals(n,o)||!ff(n,o))return!1}return!0},Og=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(n.anchor.offset!==o.anchor.offset||n.focus.offset!==o.focus.offset||!ff(n,o))return!1}return!0},Ng=t=>{var{isLast:e,leaf:r,parent:n,text:o}=t,a=Ir(),s=R.findPath(a,o),i=B.parent(s),c=r[of]===!0;return a.isVoid(n)?P.default.createElement(ws,{length:V.string(n).length}):r.text===""&&n.children[n.children.length-1]===o&&!a.isInline(n)&&d.string(a,i)===""?P.default.createElement(ws,{isLineBreak:!0,isMarkPlaceholder:c}):r.text===""?P.default.createElement(ws,{isMarkPlaceholder:c}):e&&r.text.slice(-1)===`
`?P.default.createElement(Gc,{isTrailing:!0,text:r.text}):P.default.createElement(Gc,{text:r.text})},Gc=t=>{var{text:e,isTrailing:r=!1}=t,n=(0,P.useRef)(null),o=()=>"".concat(e??"").concat(r?`
`:""),[a]=(0,P.useState)(o);return io(()=>{var s=o();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),P.default.createElement(Ig,{ref:n},a)},Ig=(0,P.memo)((0,P.forwardRef)((t,e)=>P.default.createElement("span",{"data-slate-string":!0,ref:e},t.children))),ws=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=t,o={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return n&&(o["data-slate-mark-placeholder"]=!0),P.default.createElement("span",Object.assign({},o),!St||!r?"\uFEFF":null,r?P.default.createElement("br",null):null)};function Pg(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function Yc(t){t.current&&(clearTimeout(t.current),t.current=null)}var Lg=t=>{var{leaf:e,isLast:r,text:n,parent:o,renderPlaceholder:a,renderLeaf:s=A=>P.default.createElement(Mg,Object.assign({},A))}=t,i=Ir(),c=(0,P.useRef)(null),l=(0,P.useRef)(null),[f,v]=(0,P.useState)(!1),h=(0,P.useRef)(null),m=(0,P.useCallback)(A=>{if(Pg(c,A==null),A==null){var F;Fs.delete(i),(F=e.onPlaceholderResize)===null||F===void 0||F.call(e,null)}else{if(Fs.set(i,A),!c.current){var w=window.ResizeObserver||As;c.current=new w(()=>{var _;(_=e.onPlaceholderResize)===null||_===void 0||_.call(e,A)})}c.current.observe(A),l.current=A}},[l,e,i]),p=P.default.createElement(Ng,{isLast:r,leaf:e,parent:o,text:n}),u=e[_n];if((0,P.useEffect)(()=>(u?h.current||(h.current=setTimeout(()=>{v(!0),h.current=null},300)):(Yc(h),v(!1)),()=>Yc(h)),[u,v]),u&&f){var C={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:oo?"inherit":void 0},contentEditable:!1,ref:m}};p=P.default.createElement(P.default.Fragment,null,a(C),p)}var E={"data-slate-leaf":!0};return s({attributes:E,children:p,leaf:e,text:n})},kg=P.default.memo(Lg,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Q.equals(e.leaf,t.leaf)&&e.leaf[_n]===t.leaf[_n]),Mg=t=>{var{attributes:e,children:r}=t;return P.default.createElement("span",Object.assign({},e),r)},Rg=t=>{for(var{decorations:e,isLast:r,parent:n,renderPlaceholder:o,renderLeaf:a,text:s}=t,i=Ir(),c=(0,P.useRef)(null),l=Q.decorations(s,e),f=R.findKey(i,s),v=[],h=0;h<l.length;h++){var m=l[h];v.push(P.default.createElement(kg,{isLast:r&&h===l.length-1,key:"".concat(f.id,"-").concat(h),renderPlaceholder:o,leaf:m,text:s,parent:n,renderLeaf:a}))}var p=(0,P.useCallback)(u=>{var C=Da.get(i);u?(C?.set(f,u),Jr.set(s,u),so.set(u,s)):(C?.delete(f),Jr.delete(s),c.current&&so.delete(c.current)),c.current=u},[c,i,f,s]);return P.default.createElement("span",{"data-slate-node":"text",ref:p},v)},df=P.default.memo(Rg,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Og(e.decorations,t.decorations)),jg=t=>{var{decorations:e,element:r,renderElement:n=A=>P.default.createElement(Wg,Object.assign({},A)),renderPlaceholder:o,renderLeaf:a,selection:s}=t,i=Ir(),c=Gg(),l=i.isInline(r),f=R.findKey(i,r),v=(0,P.useCallback)(A=>{var F=Da.get(i);A?(F?.set(f,A),Jr.set(r,A),so.set(A,r)):(F?.delete(f),Jr.delete(r))},[i,f,r]),h=pf({decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:s}),m={"data-slate-node":"element",ref:v};if(l&&(m["data-slate-inline"]=!0),!l&&d.hasInlines(i,r)){var p=V.string(r),u=(0,Is.default)(p);u==="rtl"&&(m.dir=u)}if(d.isVoid(i,r)){m["data-slate-void"]=!0,!c&&l&&(m.contentEditable=!1);var C=l?"span":"div",[[E]]=V.texts(r);h=P.default.createElement(C,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},P.default.createElement(df,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:E})),Ls.set(E,0),ks.set(E,r)}return n({attributes:m,children:h,element:r})},zg=P.default.memo(jg,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&bg(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&O.equals(t.selection,e.selection))),Wg=t=>{var{attributes:e,children:r,element:n}=t,o=Ir(),a=o.isInline(n)?"span":"div";return P.default.createElement(a,Object.assign({},e,{style:{position:"relative"}}),r)},mf=(0,P.createContext)(()=>[]),Ug=()=>(0,P.useContext)(mf),Hg=(0,P.createContext)(!1);var pf=t=>{for(var{decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:s}=t,i=Ug(),c=Ir(),l=R.findPath(c,r),f=[],v=Z.isElement(r)&&!c.isInline(r)&&d.hasInlines(c,r),h=0;h<r.children.length;h++){var m=l.concat(h),p=r.children[h],u=R.findKey(c,p),C=d.range(c,m),E=s&&O.intersection(C,s),A=i([p,m]);for(var F of e){var w=O.intersection(F,C);w&&A.push(w)}Z.isElement(p)?f.push(P.default.createElement(Hg.Provider,{key:"provider-".concat(u.id),value:!!E},P.default.createElement(zg,{decorations:A,element:p,key:u.id,renderElement:n,renderPlaceholder:o,renderLeaf:a,selection:E}))):f.push(P.default.createElement(df,{decorations:A,key:u.id,isLast:v&&h===r.children.length-1,parent:r,renderPlaceholder:o,renderLeaf:a,text:p})),Ls.set(p,h),ks.set(p,r)}return f},hf=(0,P.createContext)(!1),Gg=()=>(0,P.useContext)(hf),vf=(0,P.createContext)(null),Yg=()=>{var t=(0,P.useContext)(vf);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function qg(){var t=Ir(),e=(0,P.useRef)(!1),r=(0,P.useRef)(0),n=(0,P.useCallback)(()=>{if(!e.current){e.current=!0;var o=R.getWindow(t);o.cancelAnimationFrame(r.current),r.current=o.requestAnimationFrame(()=>{e.current=!1})}},[t]);return(0,P.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:n}}var $g=3,Vg={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Kg={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Zg={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Me=t=>{var e=Vg[t],r=Kg[t],n=Zg[t],o=e&&(0,da.isKeyHotkey)(e),a=r&&(0,da.isKeyHotkey)(r),s=n&&(0,da.isKeyHotkey)(n);return i=>!!(o&&o(i)||jc&&a&&a(i)||!jc&&s&&s(i))},ze={isBold:Me("bold"),isCompose:Me("compose"),isMoveBackward:Me("moveBackward"),isMoveForward:Me("moveForward"),isDeleteBackward:Me("deleteBackward"),isDeleteForward:Me("deleteForward"),isDeleteLineBackward:Me("deleteLineBackward"),isDeleteLineForward:Me("deleteLineForward"),isDeleteWordBackward:Me("deleteWordBackward"),isDeleteWordForward:Me("deleteWordForward"),isExtendBackward:Me("extendBackward"),isExtendForward:Me("extendForward"),isExtendLineBackward:Me("extendLineBackward"),isExtendLineForward:Me("extendLineForward"),isItalic:Me("italic"),isMoveLineBackward:Me("moveLineBackward"),isMoveLineForward:Me("moveLineForward"),isMoveWordBackward:Me("moveWordBackward"),isMoveWordForward:Me("moveWordForward"),isRedo:Me("redo"),isSoftBreak:Me("insertSoftBreak"),isSplitBlock:Me("splitBlock"),isTransposeCharacter:Me("transposeCharacter"),isUndo:Me("undo")},Xg=(t,e)=>{var r=[],n=()=>{r=[]},o=s=>{if(!!e.current){var i=s.filter(c=>js(t,c,s));r.push(...i)}};function a(){r.length>0&&(r.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(i=>{s.target.insertBefore(i,s.nextSibling)}),s.addedNodes.forEach(i=>{s.target.removeChild(i)}))}),n())}return{registerMutations:o,restoreDOM:a,clear:n}},Jg={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},va=class extends P.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,Jg)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=Xg(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,n,o=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(o!=null&&o.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(o)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}};va.contextType=Ps;var Qg=St?va:t=>{var{children:e}=t;return P.default.createElement(P.default.Fragment,null,e)},eD=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],tD=["text"];function qc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function yn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qc(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rD=t=>P.default.createElement(P.default.Fragment,null,pf(t)),gf=t=>{var e=(0,P.useCallback)(x=>P.default.createElement(nD,Object.assign({},x)),[]),{autoFocus:r,decorate:n=oD,onDOMBeforeInput:o,placeholder:a,readOnly:s=!1,renderElement:i,renderLeaf:c,renderPlaceholder:l=e,scrollSelectionIntoView:f=aD,style:v={},as:h="div",disableDefaultStyles:m=!1}=t,p=Tn(t,eD),u=Yg(),[C,E]=(0,P.useState)(!1),A=(0,P.useRef)(null),F=(0,P.useRef)([]),[w,_]=(0,P.useState)(),{onUserInput:L,receivedUserInput:I}=qg(),[,k]=(0,P.useReducer)(x=>x+1,0);nf.set(u,k),Ts.set(u,s);var b=(0,P.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,P.useEffect)(()=>{A.current&&r&&A.current.focus()},[r]);var U=(0,P.useRef)(),G=(0,P.useMemo)(()=>(0,Qc.default)(()=>{var x=U.current;if((St||!R.isComposing(u))&&(!b.isUpdatingSelection||x!=null&&x.isFlushing())&&!b.isDraggingInternally){var q=R.findDocumentOrShadowRoot(u),{activeElement:j}=q,K=R.toDOMNode(u,u),le=q.getSelection();if(j===K?(b.latestElement=j,Zr.set(u,!0)):Zr.delete(u),!le)return z.deselect(u);var{anchorNode:oe,focusNode:he}=le,Ie=R.hasEditableTarget(u,oe)||R.isTargetInsideNonReadonlyVoid(u,oe),Ne=R.hasEditableTarget(u,he)||R.isTargetInsideNonReadonlyVoid(u,he);if(Ie&&Ne){var Le=R.toSlateRange(u,le,{exactMatch:!1,suppressThrow:!0});Le&&(!R.isComposing(u)&&!(x!=null&&x.hasPendingChanges())&&!(x!=null&&x.isFlushing())?z.select(u,Le):x?.handleUserSelect(Le))}s&&(!Ie||!Ne)&&z.deselect(u)}},100),[u,s,b]),M=(0,P.useMemo)(()=>(0,Jc.default)(G,0),[G]);U.current=yg({node:A,onDOMSelectionChange:G,scheduleOnDOMSelectionChange:M}),io(()=>{var x,q,j;A.current&&(j=Rs(A.current))?(rf.set(u,j),pa.set(u,A.current),Jr.set(u,A.current),so.set(A.current,u)):Jr.delete(u);var{selection:K}=u,le=R.findDocumentOrShadowRoot(u),oe=le.getSelection();if(!(!oe||!R.isFocused(u)||(x=U.current)!==null&&x!==void 0&&x.hasPendingAction())){var he=at=>{var mt=oe.type!=="None";if(!(!K&&!mt)){var Xe=pa.get(u),Ot=!1;if(Xe.contains(oe.anchorNode)&&Xe.contains(oe.focusNode)&&(Ot=!0),mt&&Ot&&K&&!at){var jt=R.toSlateRange(u,oe,{exactMatch:!0,suppressThrow:!0});if(jt&&O.equals(jt,K)){var pt;if(!b.hasMarkPlaceholder)return;var{anchorNode:Nt}=oe;if(Nt!=null&&(pt=Nt.parentElement)!==null&&pt!==void 0&&pt.hasAttribute("data-slate-mark-placeholder"))return}}if(K&&!R.hasRange(u,K)){u.selection=R.toSlateRange(u,oe,{exactMatch:!1,suppressThrow:!0});return}b.isUpdatingSelection=!0;var Be=K&&R.toDOMRange(u,K);return Be?(O.isBackward(K)?oe.setBaseAndExtent(Be.endContainer,Be.endOffset,Be.startContainer,Be.startOffset):oe.setBaseAndExtent(Be.startContainer,Be.startOffset,Be.endContainer,Be.endOffset),f(u,Be)):oe.removeAllRanges(),Be}},Ie=he(),Ne=((q=U.current)===null||q===void 0?void 0:q.isFlushing())==="action";if(!St||!Ne){setTimeout(()=>{if(Ie&&ha){var at=R.toDOMNode(u,u);at.focus()}b.isUpdatingSelection=!1});return}var Le=null,Se=requestAnimationFrame(()=>{if(Ne){var at=mt=>{try{var Xe=R.toDOMNode(u,u);Xe.focus(),he(mt)}catch{}};at(),Le=setTimeout(()=>{at(!0),b.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Se),Le&&clearTimeout(Le)}}});var Y=(0,P.useCallback)(x=>{if(L(),!s&&R.hasEditableTarget(u,x.target)&&!sD(x,o)){var q;if(U.current)return U.current.handleDOMBeforeInput(x);M.flush(),G.flush();var{selection:j}=u,{inputType:K}=x,le=x.dataTransfer||x.data||void 0,oe=K==="insertCompositionText"||K==="deleteCompositionText";if(oe&&R.isComposing(u))return;var he=!1;if(K==="insertText"&&j&&O.isCollapsed(j)&&x.data&&x.data.length===1&&/[a-z ]/i.test(x.data)&&j.anchor.offset!==0){var Ie,Ne;he=!0,u.marks&&(he=!1);var{anchor:Le}=j,[Se,at]=R.toDOMPoint(u,Le),mt=(Ie=Se.parentElement)===null||Ie===void 0?void 0:Ie.closest("a"),Xe=R.getWindow(u);if(he&&mt&&R.hasDOMNode(u,mt)){var Ot,jt=Xe?.document.createTreeWalker(mt,NodeFilter.SHOW_TEXT).lastChild();jt===Se&&((Ot=jt.textContent)===null||Ot===void 0?void 0:Ot.length)===at&&(he=!1)}if(he&&Se.parentElement&&(Xe==null||(Ne=Xe.getComputedStyle(Se.parentElement))===null||Ne===void 0?void 0:Ne.whiteSpace)==="pre"){var pt=d.above(u,{at:Le.path,match:zt=>Z.isElement(zt)&&d.isBlock(u,zt)});pt&&V.string(pt[0]).includes("	")&&(he=!1)}}if(!K.startsWith("delete")||K.startsWith("deleteBy")){var[Nt]=x.getTargetRanges();if(Nt){var Be=R.toSlateRange(u,Nt,{exactMatch:!1,suppressThrow:!1});if(!j||!O.equals(j,Be)){he=!1;var lr=!oe&&u.selection&&d.rangeRef(u,u.selection);z.select(u,Be),lr&&ao.set(u,lr)}}}if(oe)return;if(he||x.preventDefault(),j&&O.isExpanded(j)&&K.startsWith("delete")){var ln=K.endsWith("Backward")?"backward":"forward";d.deleteFragment(u,{direction:ln});return}switch(K){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{d.deleteFragment(u);break}case"deleteContent":case"deleteContentForward":{d.deleteForward(u);break}case"deleteContentBackward":{d.deleteBackward(u);break}case"deleteEntireSoftLine":{d.deleteBackward(u,{unit:"line"}),d.deleteForward(u,{unit:"line"});break}case"deleteHardLineBackward":{d.deleteBackward(u,{unit:"block"});break}case"deleteSoftLineBackward":{d.deleteBackward(u,{unit:"line"});break}case"deleteHardLineForward":{d.deleteForward(u,{unit:"block"});break}case"deleteSoftLineForward":{d.deleteForward(u,{unit:"line"});break}case"deleteWordBackward":{d.deleteBackward(u,{unit:"word"});break}case"deleteWordForward":{d.deleteForward(u,{unit:"word"});break}case"insertLineBreak":d.insertSoftBreak(u);break;case"insertParagraph":{d.insertBreak(u);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{K==="insertFromComposition"&&R.isComposing(u)&&(E(!1),Xr.set(u,!1)),le?.constructor.name==="DataTransfer"?R.insertData(u,le):typeof le=="string"&&(he?F.current.push(()=>d.insertText(u,le)):d.insertText(u,le));break}}var ot=(q=ao.get(u))===null||q===void 0?void 0:q.unref();ao.delete(u),ot&&(!u.selection||!O.equals(u.selection,ot))&&z.select(u,ot)}},[u,G,L,o,s,M]),W=(0,P.useCallback)(x=>{x==null?(G.cancel(),M.cancel(),pa.delete(u),Jr.delete(u),A.current&&Sr&&A.current.removeEventListener("beforeinput",Y)):Sr&&x.addEventListener("beforeinput",Y),A.current=x},[G,M,u,Y]);io(()=>{var x=R.getWindow(u);return x.document.addEventListener("selectionchange",M),()=>{x.document.removeEventListener("selectionchange",M)}},[M]);var $=n([u,[]]),ne=a&&u.children.length===1&&Array.from(V.texts(u)).length===1&&V.string(u)===""&&!C,fe=(0,P.useCallback)(x=>{if(x&&ne){var q;_((q=x.getBoundingClientRect())===null||q===void 0?void 0:q.height)}else _(void 0)},[ne]);if(ne){var ve=d.start(u,[]);$.push({[_n]:!0,placeholder:a,onPlaceholderResize:fe,anchor:ve,focus:ve})}var{marks:X}=u;if(b.hasMarkPlaceholder=!1,u.selection&&O.isCollapsed(u.selection)&&X){var{anchor:ie}=u.selection,Te=V.leaf(u,ie.path),De=Tn(Te,tD);if(!Q.equals(Te,X,{loose:!0})){b.hasMarkPlaceholder=!0;var Ze=Object.fromEntries(Object.keys(De).map(x=>[x,null]));$.push(yn(yn(yn({[of]:!0},Ze),X),{},{anchor:ie,focus:ie}))}}return(0,P.useEffect)(()=>{setTimeout(()=>{var{selection:x}=u;if(x){var{anchor:q}=x,j=V.leaf(u,q.path);if(X&&!Q.equals(j,X,{loose:!0})){Yt.set(u,X);return}}Yt.delete(u)})}),P.default.createElement(hf.Provider,{value:s},P.default.createElement(mf.Provider,{value:n},P.default.createElement(Qg,{node:A,receivedUserInput:I},P.default.createElement(h,Object.assign({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},p,{spellCheck:Sr||!ma?p.spellCheck:!1,autoCorrect:Sr||!ma?p.autoCorrect:"false",autoCapitalize:Sr||!ma?p.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:W,style:yn(yn({},m?{}:yn({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},w?{minHeight:w}:{})),v),onBeforeInput:(0,P.useCallback)(x=>{if(!Sr&&!s&&!vt(x,p.onBeforeInput)&&R.hasSelectableTarget(u,x.target)&&(x.preventDefault(),!R.isComposing(u))){var q=x.data;d.insertText(u,q)}},[p.onBeforeInput,u,s]),onInput:(0,P.useCallback)(x=>{if(!vt(x,p.onInput)){if(U.current){U.current.handleInput();return}for(var q of F.current)q();F.current=[]}},[p.onInput]),onBlur:(0,P.useCallback)(x=>{if(!(s||b.isUpdatingSelection||!R.hasSelectableTarget(u,x.target)||vt(x,p.onBlur))){var q=R.findDocumentOrShadowRoot(u);if(b.latestElement!==q.activeElement){var{relatedTarget:j}=x,K=R.toDOMNode(u,u);if(j!==K&&!(Lt(j)&&j.hasAttribute("data-slate-spacer"))){if(j!=null&&Nr(j)&&R.hasDOMNode(u,j)){var le=R.toSlateNode(u,j);if(Z.isElement(le)&&!u.isVoid(le))return}if(oo){var oe=q.getSelection();oe?.removeAllRanges()}Zr.delete(u)}}}},[s,b.isUpdatingSelection,b.latestElement,u,p.onBlur]),onClick:(0,P.useCallback)(x=>{if(R.hasTarget(u,x.target)&&!vt(x,p.onClick)&&Nr(x.target)){var q=R.toSlateNode(u,x.target),j=R.findPath(u,q);if(!d.hasPath(u,j)||V.get(u,j)!==q)return;if(x.detail===$g&&j.length>=1){var K=j;if(!(Z.isElement(q)&&d.isBlock(u,q))){var le,oe=d.above(u,{match:mt=>Z.isElement(mt)&&d.isBlock(u,mt),at:j});K=(le=oe?.[1])!==null&&le!==void 0?le:j.slice(0,1)}var he=d.range(u,K);z.select(u,he);return}if(s)return;var Ie=d.start(u,j),Ne=d.end(u,j),Le=d.void(u,{at:Ie}),Se=d.void(u,{at:Ne});if(Le&&Se&&B.equals(Le[1],Se[1])){var at=d.range(u,Ie);z.select(u,at)}}},[u,p.onClick,s]),onCompositionEnd:(0,P.useCallback)(x=>{if(R.hasSelectableTarget(u,x.target)){var q;if(R.isComposing(u)&&(E(!1),Xr.set(u,!1)),(q=U.current)===null||q===void 0||q.handleCompositionEnd(x),vt(x,p.onCompositionEnd)||St)return;if(!oo&&!Jv&&!Vv&&!eg&&!Qv&&x.data){var j=Yt.get(u);Yt.delete(u),j!==void 0&&(vr.set(u,u.marks),u.marks=j),d.insertText(u,x.data);var K=vr.get(u);vr.delete(u),K!==void 0&&(u.marks=K)}}},[p.onCompositionEnd,u]),onCompositionUpdate:(0,P.useCallback)(x=>{R.hasSelectableTarget(u,x.target)&&!vt(x,p.onCompositionUpdate)&&(R.isComposing(u)||(E(!0),Xr.set(u,!0)))},[p.onCompositionUpdate,u]),onCompositionStart:(0,P.useCallback)(x=>{if(R.hasSelectableTarget(u,x.target)){var q;if((q=U.current)===null||q===void 0||q.handleCompositionStart(x),vt(x,p.onCompositionStart)||St)return;E(!0);var{selection:j}=u;if(j){if(O.isExpanded(j)){d.deleteFragment(u);return}var K=d.above(u,{match:he=>Z.isElement(he)&&d.isInline(u,he),mode:"highest"});if(K){var[,le]=K;if(d.isEnd(u,j.anchor,le)){var oe=d.after(u,le);z.setSelection(u,{anchor:oe,focus:oe})}}}}},[p.onCompositionStart,u]),onCopy:(0,P.useCallback)(x=>{R.hasSelectableTarget(u,x.target)&&!vt(x,p.onCopy)&&!$c(x)&&(x.preventDefault(),R.setFragmentData(u,x.clipboardData,"copy"))},[p.onCopy,u]),onCut:(0,P.useCallback)(x=>{if(!s&&R.hasSelectableTarget(u,x.target)&&!vt(x,p.onCut)&&!$c(x)){x.preventDefault(),R.setFragmentData(u,x.clipboardData,"cut");var{selection:q}=u;if(q)if(O.isExpanded(q))d.deleteFragment(u);else{var j=V.parent(u,q.anchor.path);d.isVoid(u,j)&&z.delete(u)}}},[s,u,p.onCut]),onDragOver:(0,P.useCallback)(x=>{if(R.hasTarget(u,x.target)&&!vt(x,p.onDragOver)){var q=R.toSlateNode(u,x.target);Z.isElement(q)&&d.isVoid(u,q)&&x.preventDefault()}},[p.onDragOver,u]),onDragStart:(0,P.useCallback)(x=>{if(!s&&R.hasTarget(u,x.target)&&!vt(x,p.onDragStart)){var q=R.toSlateNode(u,x.target),j=R.findPath(u,q),K=Z.isElement(q)&&d.isVoid(u,q)||d.void(u,{at:j,voids:!0});if(K){var le=d.range(u,j);z.select(u,le)}b.isDraggingInternally=!0,R.setFragmentData(u,x.dataTransfer,"drag")}},[s,u,p.onDragStart,b]),onDrop:(0,P.useCallback)(x=>{if(!s&&R.hasTarget(u,x.target)&&!vt(x,p.onDrop)){x.preventDefault();var q=u.selection,j=R.findEventRange(u,x),K=x.dataTransfer;z.select(u,j),b.isDraggingInternally&&q&&!O.equals(q,j)&&!d.void(u,{at:j,voids:!0})&&z.delete(u,{at:q}),R.insertData(u,K),R.isFocused(u)||R.focus(u)}b.isDraggingInternally=!1},[s,u,p.onDrop,b]),onDragEnd:(0,P.useCallback)(x=>{!s&&b.isDraggingInternally&&p.onDragEnd&&R.hasTarget(u,x.target)&&p.onDragEnd(x),b.isDraggingInternally=!1},[s,b,p,u]),onFocus:(0,P.useCallback)(x=>{if(!s&&!b.isUpdatingSelection&&R.hasEditableTarget(u,x.target)&&!vt(x,p.onFocus)){var q=R.toDOMNode(u,u),j=R.findDocumentOrShadowRoot(u);if(b.latestElement=j.activeElement,ha&&x.target!==q){q.focus();return}Zr.set(u,!0)}},[s,b,u,p.onFocus]),onKeyDown:(0,P.useCallback)(x=>{if(!s&&R.hasEditableTarget(u,x.target)){var q;(q=U.current)===null||q===void 0||q.handleKeyDown(x);var{nativeEvent:j}=x;if(R.isComposing(u)&&j.isComposing===!1&&(Xr.set(u,!1),E(!1)),vt(x,p.onKeyDown)||R.isComposing(u))return;var{selection:K}=u,le=u.children[K!==null?K.focus.path[0]:0],oe=(0,Is.default)(V.string(le))==="rtl";if(ze.isRedo(j)){x.preventDefault();var he=u;typeof he.redo=="function"&&he.redo();return}if(ze.isUndo(j)){x.preventDefault();var Ie=u;typeof Ie.undo=="function"&&Ie.undo();return}if(ze.isMoveLineBackward(j)){x.preventDefault(),z.move(u,{unit:"line",reverse:!0});return}if(ze.isMoveLineForward(j)){x.preventDefault(),z.move(u,{unit:"line"});return}if(ze.isExtendLineBackward(j)){x.preventDefault(),z.move(u,{unit:"line",edge:"focus",reverse:!0});return}if(ze.isExtendLineForward(j)){x.preventDefault(),z.move(u,{unit:"line",edge:"focus"});return}if(ze.isMoveBackward(j)){x.preventDefault(),K&&O.isCollapsed(K)?z.move(u,{reverse:!oe}):z.collapse(u,{edge:"start"});return}if(ze.isMoveForward(j)){x.preventDefault(),K&&O.isCollapsed(K)?z.move(u,{reverse:oe}):z.collapse(u,{edge:"end"});return}if(ze.isMoveWordBackward(j)){x.preventDefault(),K&&O.isExpanded(K)&&z.collapse(u,{edge:"focus"}),z.move(u,{unit:"word",reverse:!oe});return}if(ze.isMoveWordForward(j)){x.preventDefault(),K&&O.isExpanded(K)&&z.collapse(u,{edge:"focus"}),z.move(u,{unit:"word",reverse:oe});return}if(Sr){if((tf||oo)&&K&&(ze.isDeleteBackward(j)||ze.isDeleteForward(j))&&O.isCollapsed(K)){var Ne=V.parent(u,K.anchor.path);if(Z.isElement(Ne)&&d.isVoid(u,Ne)&&(d.isInline(u,Ne)||d.isBlock(u,Ne))){x.preventDefault(),d.deleteBackward(u,{unit:"block"});return}}}else{if(ze.isBold(j)||ze.isItalic(j)||ze.isTransposeCharacter(j)){x.preventDefault();return}if(ze.isSoftBreak(j)){x.preventDefault(),d.insertSoftBreak(u);return}if(ze.isSplitBlock(j)){x.preventDefault(),d.insertBreak(u);return}if(ze.isDeleteBackward(j)){x.preventDefault(),K&&O.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u);return}if(ze.isDeleteForward(j)){x.preventDefault(),K&&O.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u);return}if(ze.isDeleteLineBackward(j)){x.preventDefault(),K&&O.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u,{unit:"line"});return}if(ze.isDeleteLineForward(j)){x.preventDefault(),K&&O.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u,{unit:"line"});return}if(ze.isDeleteWordBackward(j)){x.preventDefault(),K&&O.isExpanded(K)?d.deleteFragment(u,{direction:"backward"}):d.deleteBackward(u,{unit:"word"});return}if(ze.isDeleteWordForward(j)){x.preventDefault(),K&&O.isExpanded(K)?d.deleteFragment(u,{direction:"forward"}):d.deleteForward(u,{unit:"word"});return}}}},[s,u,p.onKeyDown]),onPaste:(0,P.useCallback)(x=>{!s&&R.hasEditableTarget(u,x.target)&&!vt(x,p.onPaste)&&(!Sr||ng(x.nativeEvent)||oo)&&(x.preventDefault(),R.insertData(u,x.clipboardData))},[s,u,p.onPaste])}),P.default.createElement(rD,{decorations:$,node:u,renderElement:i,renderPlaceholder:l,renderLeaf:c,selection:u.selection})))))},nD=t=>{var{attributes:e,children:r}=t;return P.default.createElement("span",Object.assign({},e),r,St&&P.default.createElement("br",null))},oD=()=>[],aD=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&O.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),vc(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},vt=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},$c=t=>Nr(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),sD=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},iD=(0,P.createContext)(!1);var uD=(0,P.createContext)({});function lD(t){var e=(0,P.useRef)([]).current,r=(0,P.useRef)({editor:t}).current,n=(0,P.useCallback)(a=>{r.editor=a,e.forEach(s=>s(a))},[e,r]),o=(0,P.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:a=>(e.push(a),()=>{e.splice(e.indexOf(a),1)})}),[e,r]);return{selectorContext:o,onChange:n}}var cD=["editor","children","onChange","value"],Df=t=>{var{editor:e,children:r,onChange:n,value:o}=t,a=Tn(t,cD),s=(0,P.useRef)(!1),[i,c]=P.default.useState(()=>{if(!V.isNodeList(o))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(tt.stringify(o)));if(!d.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(tt.stringify(e)));return e.children=o,Object.assign(e,a),{v:0,editor:e}}),{selectorContext:l,onChange:f}=lD(e),v=(0,P.useCallback)(()=>{n&&n(e.children),c(p=>({v:p.v+1,editor:e})),f(e)},[e,f,n]);(0,P.useEffect)(()=>(_s.set(e,v),()=>{_s.set(e,()=>{}),s.current=!0}),[e,v]);var[h,m]=(0,P.useState)(R.isFocused(e));return(0,P.useEffect)(()=>{m(R.isFocused(e))},[e]),io(()=>{var p=()=>m(R.isFocused(e));return $v?(document.addEventListener("focusin",p),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",p)}):(document.addEventListener("focus",p,!0),document.addEventListener("blur",p,!0),()=>{document.removeEventListener("focus",p,!0),document.removeEventListener("blur",p,!0)})},[]),P.default.createElement(uD.Provider,{value:l},P.default.createElement(vf.Provider,{value:i},P.default.createElement(Ps.Provider,{value:i.editor},P.default.createElement(iD.Provider,{value:h},r))))};var Vc=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Kc=(t,e,r)=>{var n=R.toDOMRange(t,e).getBoundingClientRect(),o=R.toDOMRange(t,r).getBoundingClientRect();return Vc(n,o)&&Vc(o,n)},fD=(t,e)=>{var r=d.range(t,O.end(e)),n=Array.from(d.positions(t,{at:e})),o=0,a=n.length,s=Math.floor(a/2);if(Kc(t,d.range(t,n[o]),r))return d.range(t,n[o],r);if(n.length<2)return d.range(t,n[n.length-1],r);for(;s!==n.length&&s!==o;)Kc(t,d.range(t,n[s]),r)?a=s:o=s,s=Math.floor((o+a)/2);return d.range(t,n[a],r)};function Zc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Xc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zc(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Cf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:o,onChange:a,deleteBackward:s,addMark:i,removeMark:c}=n;return Da.set(n,new WeakMap),n.addMark=(l,f)=>{var v,h;(v=Ms.get(n))===null||v===void 0||v(),!Yt.get(n)&&(h=At.get(n))!==null&&h!==void 0&&h.length&&Yt.set(n,null),vr.delete(n),i(l,f)},n.removeMark=l=>{var f;!Yt.get(n)&&(f=At.get(n))!==null&&f!==void 0&&f.length&&Yt.set(n,null),vr.delete(n),c(l)},n.deleteBackward=l=>{if(l!=="line")return s(l);if(n.selection&&O.isCollapsed(n.selection)){var f=d.above(n,{match:p=>Z.isElement(p)&&d.isBlock(n,p),at:n.selection});if(f){var[,v]=f,h=d.range(n,v,n.selection.anchor),m=fD(n,h);O.isCollapsed(m)||z.delete(n,{at:m})}}},n.apply=l=>{var f=[],v=At.get(n);if(v!=null&&v.length){var h=v.map(L=>hg(L,l)).filter(Boolean);At.set(n,h)}var m=Or.get(n);m&&Or.set(n,Wc(n,m,l));var p=br.get(n);if(p!=null&&p.at){var u=me.isPoint(p?.at)?Ns(n,p.at,l):Wc(n,p.at,l);br.set(n,u?Xc(Xc({},p),{},{at:u}):null)}switch(l.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{f.push(...fa(n,l.path));break}case"set_selection":{var C;(C=ao.get(n))===null||C===void 0||C.unref(),ao.delete(n);break}case"insert_node":case"remove_node":{f.push(...fa(n,B.parent(l.path)));break}case"merge_node":{var E=B.previous(l.path);f.push(...fa(n,E));break}case"move_node":{var A=B.common(B.parent(l.path),B.parent(l.newPath));f.push(...fa(n,A));break}}o(l);for(var[F,w]of f){var[_]=d.node(n,F);ys.set(_,w)}},n.setFragmentData=l=>{var{selection:f}=n;if(!!f){var[v,h]=O.edges(f),m=d.void(n,{at:v.path}),p=d.void(n,{at:h.path});if(!(O.isCollapsed(f)&&!m)){var u=R.toDOMRange(n,f),C=u.cloneContents(),E=C.childNodes[0];if(C.childNodes.forEach(U=>{U.textContent&&U.textContent.trim()!==""&&(E=U)}),p){var[A]=p,F=u.cloneRange(),w=R.toDOMNode(n,A);F.setEndAfter(w),C=F.cloneContents()}if(m&&(E=C.querySelector("[data-slate-spacer]")),Array.from(C.querySelectorAll("[data-slate-zero-width]")).forEach(U=>{var G=U.getAttribute("data-slate-zero-width")==="n";U.textContent=G?`
`:""}),af(E)){var _=E.ownerDocument.createElement("span");_.style.whiteSpace="pre",_.appendChild(E),C.appendChild(_),E=_}var L=n.getFragment(),I=JSON.stringify(L),k=window.btoa(encodeURIComponent(I));E.setAttribute("data-slate-fragment",k),l.setData("application/".concat(r),k);var b=C.ownerDocument.createElement("div");return b.appendChild(C),b.setAttribute("hidden","true"),C.ownerDocument.body.appendChild(b),l.setData("text/html",b.innerHTML),l.setData("text/plain",uf(b)),C.ownerDocument.body.removeChild(b),l}}},n.insertData=l=>{n.insertFragmentData(l)||n.insertTextData(l)},n.insertFragmentData=l=>{var f=l.getData("application/".concat(r))||ug(l);if(f){var v=decodeURIComponent(window.atob(f)),h=JSON.parse(v);return n.insertFragment(h),!0}return!1},n.insertTextData=l=>{var f=l.getData("text/plain");if(f){var v=f.split(/\r\n|\r|\n/),h=!1;for(var m of v)h&&z.splitNodes(n,{always:!0}),n.insertText(m),h=!0;return!0}return!1},n.onChange=l=>{ef.default.unstable_batchedUpdates(()=>{var f=_s.get(n);f&&f(),a(l)})},n},fa=(t,e)=>{var r=[];for(var[n,o]of d.levels(t,{at:e})){var a=R.findKey(t,n);r.push([o,a])}return r};g();D();var kt=S(ee());st();pe();g();D();var Re={"retina-border-basic":"_retina-border-basic_1taj3_1",retinaBorderBasic:"_retina-border-basic_1taj3_1","batch-send-address":"_batch-send-address_1taj3_29",batchSendAddress:"_batch-send-address_1taj3_29","batch-send-address-dialog-core":"_batch-send-address-dialog-core_1taj3_58",batchSendAddressDialogCore:"_batch-send-address-dialog-core_1taj3_58","batch-send-address-input":"_batch-send-address-input_1taj3_63",batchSendAddressInput:"_batch-send-address-input_1taj3_63","batch-send-address-accordion":"_batch-send-address-accordion_1taj3_76",batchSendAddressAccordion:"_batch-send-address-accordion_1taj3_76","batch-send-address-accordion-header":"_batch-send-address-accordion-header_1taj3_79",batchSendAddressAccordionHeader:"_batch-send-address-accordion-header_1taj3_79","batch-send-address-accordion-content":"_batch-send-address-accordion-content_1taj3_83",batchSendAddressAccordionContent:"_batch-send-address-accordion-content_1taj3_83","batch-send-address-accordion-checkbox":"_batch-send-address-accordion-checkbox_1taj3_87",batchSendAddressAccordionCheckbox:"_batch-send-address-accordion-checkbox_1taj3_87","batch-send-address-select-address-actions":"_batch-send-address-select-address-actions_1taj3_92",batchSendAddressSelectAddressActions:"_batch-send-address-select-address-actions_1taj3_92",upload:"_upload_1taj3_132",uploadIcon:"_uploadIcon_1taj3_147",uploadText:"_uploadText_1taj3_150",addressPre:"_addressPre_1taj3_153",selectAddress:"_selectAddress_1taj3_157",selectedAddressInfo:"_selectedAddressInfo_1taj3_162",addBtn:"_addBtn_1taj3_170","circle-icon":"_circle-icon_1taj3_174",circleIcon:"_circle-icon_1taj3_174",accountTitle:"_accountTitle_1taj3_181",accountTag:"_accountTag_1taj3_185"};var dD=({type:t,title:e,children:r,dropError:n,actionTitle:o,addressErrors:a,onSelectWalletAddress:s})=>{let i=(0,kt.useMemo)(()=>{if(n)return n;if(!a?.length)return null;let c=xo(a,"error");return c?.length>1?T("wallet_extension_sending_text_address_error"):c[0]?.errorText?c[0]?.errorText:T(c[0]?.error,c[0]?.args)},[n,a]);return kt.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"12px"},kt.default.createElement(y.FlexBox,{justify:"space-between",align:y.ALIGN.center},kt.default.createElement(xe.Text,{strong:700,size:xe.SIZE.lg,style:{lineHeight:"24px"}},e,kt.default.createElement(Ge,{className:Re.circleIcon,icon:"okds-question-mark-circle",size:Ge.SIZE.xs,tooltip:{maxWidth:"300px",placement:Ft?.DIRECTION.topRight,title:kt.default.createElement("pre",{className:Re.addressPre},T("wallet_extension_sending_tooltip_address_condition"))}})),kt.default.createElement(y.Space,{direction:y.DIRECTION.horizontal,space:"6px",align:y.ALIGN.center,style:{cursor:"pointer"},onClick:()=>{s(t)}},kt.default.createElement(Ge,{icon:"okx-wallet-plugin-tier-guide",size:Ge.SIZE.md}),kt.default.createElement(xe.Text,{strong:!0,size:xe.SIZE.sm,style:{lineHeight:"16px"}},o))),r,i&&kt.default.createElement(xe.Text,{size:xe.SIZE.xs,type:xe.TYPE.danger},i))},Ca=dD;g();D();var Sn=S(ee()),Ff=S(qe());pe();g();D();var Ea=S(ee()),uo=S(Ee());pe();g();D();var Ef=S(Xu()),mD=(t,e={})=>new Promise((r,n)=>{Ef.default.parse(t,{complete:o=>{r(o)},error:o=>{n(o)},...e})}),pD=(t,e={})=>mD(t,e).then(r=>(r?.data??[]).flat().filter(Boolean)),Af=pD;g();D();var Bf=S(ee());function hD(t,{onDrop:e,onDragLeave:r,onDragEnter:n,onDragOver:o}){(0,Bf.useEffect)(()=>(t&&(t.addEventListener("drop",e),t.addEventListener("dragleave",r),t.addEventListener("dragenter",n),t.addEventListener("dragover",o)),()=>{t&&(t.removeEventListener("drop",e),t.removeEventListener("dragleave",r),t.removeEventListener("dragenter",n),t.removeEventListener("dragover",o))}),[e,r,n,o,t])}var zs=hD;function vD(t){let e=t.scrollHeight;t.scrollTo(0,e)}var gD=1024,DD=1024*gD,xf=1,CD=DD*xf;function ED(t,{onChange:e,slateRef:r,onError:n}={}){let[o,a]=(0,Ea.useState)(!1),s=v=>{r?.current&&(r.current.style.pointerEvents=v?"none":"auto")},i=(0,uo.useMemoizedFn)(v=>{v.preventDefault()});zs(document,{onDrop:i,onDragEnter:i,onDragLeave:i,onDragOver:i});let c=(0,uo.useMemoizedFn)(v=>{s(!1),a(!1);let h=v.dataTransfer?.files?.[0];if(!!h){if(h.type!=="text/csv"){n?.(T("wallet_extension_reminder_text_wrong_format"));return}if(h.size>CD){n?.(T("wallet_extension_reminder_text_large_doc",{num:xf}));return}Af(h).then(m=>{e?.(m)}).catch(()=>{e?.([])})}});(0,Ea.useEffect)(()=>{o&&t.current&&vD(t.current)},[o,t]);let l=(0,uo.useMemoizedFn)(()=>{s(!0),a(!0)}),f=(0,uo.useMemoizedFn)(()=>{s(!1),a(!1)});return zs(t.current,{onDrop:c,onDragEnter:l,onDragLeave:f}),{show:o}}var wf=ED;function AD(t){let{onChange:e,dropRef:r,slateRef:n,onError:o}=t,a=(0,Sn.useRef)(null),{show:s}=wf(r,{onChange:e,slateRef:n,onError:o});return s?Sn.default.createElement(y.Box,{ref:a,className:Re.upload},Sn.default.createElement(ut,{className:(0,Ff.default)("okds-plus-circle",Re.uploadIcon)}),Sn.default.createElement(y.Box,{className:Re.uploadText},T("wallet_extension_reminder_dropzone_input_address"))):void 0}var yf=AD;g();D();st();var BD=[{type:"numbered-list",children:[{type:"list-item",children:[{text:""}]}]}],Tf=(t=[])=>!t||!t?.length?BD:[{type:"numbered-list",children:t.map(e=>({type:"list-item",children:[{text:e}]}))}],_f=t=>{let[{children:e}]=t;return e.map(({children:r})=>Bo(r?.[0]?.text))},Sf=(t=[],e=[])=>!e.some(r=>!t.includes(r)),bf=t=>{let{normalizeNode:e}=t;return t.normalizeNode=r=>{let[n,o]=r;if(Z.isElement(n)&&n.type==="numbered-list"){for(let[a,s]of V.children(t,o))if(Z.isElement(a)&&a.type==="numbered-list"){z.unwrapNodes(t,{at:s});return}}e(r)},t};var xD="Enter",wD=({attributes:t,children:e,element:r})=>{let{error:n}=r;switch(r.type){case"list-item":return be.default.createElement("li",{style:{color:n&&"red"},...t},e);case"numbered-list":return be.default.createElement("ol",{...t},e);default:return be.default.createElement("p",{...t},e)}},FD=({attributes:t,children:e,leaf:r})=>{let{error:n}=r;return be.default.createElement("span",{style:{color:n?"red":void 0},...t},e)},yD=(0,be.forwardRef)(({type:t,title:e,dropError:r,actionTitle:n,placeholder:o,value:a=[],onChange:s,addressErrors:i,onSelectWalletAddress:c,onDrop:l,onDropError:f},v)=>{let h=(0,be.useRef)(0),m=(0,be.useCallback)(w=>be.default.createElement(wD,{...w}),[]),p=(0,be.useCallback)(w=>be.default.createElement(FD,{...w}),[]),u=(0,be.useMemo)(()=>bf(uc(Cf(ic()))),[]),C=(0,be.useRef)(null),E=(0,be.useRef)(null);(0,be.useEffect)(()=>{u?.selection?.focus&&(h.current=u?.selection?.focus?.path?.[1])},[u.selection]),(0,be.useEffect)(()=>{a.forEach((w,_)=>{z.setNodes(u,{error:!1},{at:[0,_,0]})}),i?.forEach(({at:w})=>{(0,Of.isNil)(w)||z.setNodes(u,{error:!0},{at:[0,w,0]})})},[i]);let A=(0,Ws.useMemoizedFn)(w=>{let{path:_}=u.selection?.focus??{path:null},L=i?.find(k=>k.at===_?.[1])?.address,I=w?.[0]?.children?.[_?.[1]]?.children?.[0]?.text;(L&&I!==L||!I)&&z.setNodes(u,{error:!1},{at:[0,_?.[1],0]}),s?.(w,t)},[i]),F=(0,Ws.useMemoizedFn)(async w=>{let{path:_,offset:L}=u.selection?.focus||{};if(!_||!L)return!1;let I=_?.[1];if(w.key===xD){a?.[I]?.length>L&&z.setNodes(u,{error:!1},{at:[0,I,0]}),await Gu(10);let k=_[1]+1;z.setNodes(u,{error:!1},{at:[0,k,0]})}return!0},[a,i]);return(0,be.useImperativeHandle)(v,()=>({insertNodes:(w=[])=>{let _=w.map(I=>({type:"list-item",children:[{text:I}]}));z.insertNodes(u,_);let L=h.current;a?.[L]||z.removeNodes(u,{at:[0,L]})}})),be.default.createElement(Ca,{type:t,title:e,dropError:r,actionTitle:n,addressErrors:i,onSelectWalletAddress:c},be.default.createElement(y.Box,{className:Re["batch-send-address-input"],ref:C},be.default.createElement(y.Box,{ref:E},be.default.createElement(Df,{editor:u,value:Tf(a),onChange:A},be.default.createElement(gf,{autoFocus:!0,spellCheck:!0,renderLeaf:p,renderElement:m,placeholder:o,onKeyDown:F}))),be.default.createElement(yf,{dropRef:C,onChange:l,slateRef:E,onError:f})))}),Us=yD;g();D();var we=S(ee()),Nf=S(Ee());pe();Xm();g();D();var Ve={SEND:"SEND",RECEIVE:"RECEIVE"};var If=t=>Array.isArray(t)?t.map(({name:e,address:r,label:n,options:o})=>r&&!o?{value:r,style:{display:"flex",alignItems:"center"},label:we.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"2px"},we.default.createElement(y.Box,{className:Re.accountTitle},e&&we.default.createElement(xe.Text,{strong:!0,size:xe.SIZE.xs},e),!!n&&we.default.createElement(Fo,{className:Re.accountTag,category:Fo.CATEGORY.fill,size:Fo.SIZE.sm},T(Ii[n]))),r&&we.default.createElement(xe.Text,{size:xe.SIZE.xs,type:xe.TYPE.secondary},r))}:{value:e,label:we.default.createElement(xe.Text,{size:xe.SIZE.md},e),options:If(o)}):[],TD=t=>{let[e,r]=(0,we.useState)([]),[n,o]=(0,we.useState)(!1),a=(0,we.useMemo)(()=>If(t.options),[t.options]),s=(0,we.useMemo)(()=>a?.map(m=>m.options?.map(({value:p})=>p))?.flat(),[a]),{mode:i,type:c}=t,l=(0,we.useMemo)(()=>i===J.ONE_TO_MANY&&c===Ve.SEND||i===J.MANY_TO_ONE&&c===Ve.RECEIVE,[i,c]),f=(0,Nf.useMemoizedFn)((m,p,u)=>{if(l){r([p]);return}let C=[...e];m&&p?C=[...e,p]:!m&&p?C=C.filter(E=>E!==p):m&&u&&u.length?C=[...e,...u]:!m&&u&&u.length&&(C=C.filter(E=>!u.includes(E))),r([...new Set(C)])},[l,e]),v=(0,we.useCallback)(()=>{t?.onChange(e,t?.type)},[e,t]),h=m=>{let p=m.target.checked;r(p?s:[])};return(0,we.useEffect)(()=>{o(e.length===s.length)},[e,s]),we.default.createElement(y.Box,{className:Re.selectAddress},we.default.createElement(y.Box,{className:Re["batch-send-address-dialog-core"]},a.map(({label:m,options:p})=>Array.isArray(p)&&p?.length?we.default.createElement(_i,{defaultExpanded:!0,className:Re["batch-send-address-accordion"],headerClassName:Re["batch-send-address-accordion-header"],contentClassName:Re["batch-send-address-accordion-content"],title:l?m:we.default.createElement(wr,{clickStopPropagation:!0,checked:Sf(e,p.map(({value:u})=>u)),onChange:({target:{checked:u}})=>{f(u,void 0,p.map(({value:C})=>C))}},m)},p.map(({value:u,label:C})=>l?we.default.createElement(Si,{checked:e?.includes(u),className:Re["batch-send-address-accordion-checkbox"],onChange:({target:{checked:E}})=>{f(E,u)}},C):we.default.createElement(wr,{checked:e?.includes(u),className:Re["batch-send-address-accordion-checkbox"],onChange:({target:{checked:E}})=>{f(E,u)}},C))):we.default.createElement(we.default.Fragment,null))),we.default.createElement(y.Box,{className:Re["batch-send-address-select-address-actions"]},!l&&we.default.createElement(y.Box,{className:Re.selectedAddressInfo},we.default.createElement(wr,{checked:n,onChange:h},T("wallet_extension_addressbook_text_select_all")),we.default.createElement(xe.Text,{type:xe.TYPE.secondary,size:xe.SIZE.sm},T("wallet_extension_addressbook_text_selected_address",{wallet_extension_addressbook_text_selected_address:e?.length??0}))),we.default.createElement(y.Box,{className:Re.addBtn},we.default.createElement(te,{category:te.CATEGORY.fill,type:te.TYPE.highlight,size:te.SIZE.lg,onClick:v,disabled:e.length<=0,block:!0},T("wallet_extension_addressbook_btn_add")))))},Pf=TD;g();D();var Hs=S(ee());st();var _D=({type:t,title:e,value:r,onChange:n,actionTitle:o,placeholder:a,addressErrors:s,onSelectWalletAddress:i})=>Hs.default.createElement(Ca,{type:t,title:e,actionTitle:o,addressErrors:s,onSelectWalletAddress:i},Hs.default.createElement(_e,{size:_e.SIZE.xl,value:r?.[0],placeholder:a,onChange:({target:{value:c}})=>{n?.([Bo(c)],t,!0)}})),Gs=_D;g();D();var Dr=S(ee()),gr=S(Ee());var Lf=({mode:t,walletAccounts:e,walletAccountsWithAddressBook:r,onChange:n})=>{let o=(0,Dr.useRef)(null),a=(0,Dr.useRef)(null),[s,i]=(0,Dr.useState)(null),[c,l]=(0,Dr.useState)(!1),[f,v]=(0,Dr.useState)([]),[h,m]=(0,Dr.useState)(""),[p,u]=(0,Dr.useState)(""),C=(0,gr.useMemoizedFn)(()=>{l(!1)},[]),E=(0,gr.useMemoizedFn)((k,b)=>{b===Ve.SEND&&t===J.ONE_TO_MANY||b===Ve.RECEIVE&&t===J.MANY_TO_ONE?n?.(k,b):(b===Ve.SEND?o:a)?.current?.insertNodes(k),C()},[]),A=(0,gr.useMemoizedFn)(k=>{let b=k===Ve.SEND?e:r;l(!0),i(k),v(b)},[]),F=(0,gr.useMemoizedFn)((k=[])=>{o.current.insertNodes(k),m("")}),w=(0,gr.useMemoizedFn)((k=[])=>{a.current.insertNodes(k),u("")}),_=(0,gr.useMemoizedFn)((k,b,U=!1)=>{n?.(U?k:_f(k),b),m(""),u("")},[]),L=(0,gr.useMemoizedFn)(k=>{u(k)}),I=(0,gr.useMemoizedFn)(k=>{m(k)});return{visible:c,sendRef:o,receiveRef:a,addressType:s,addressOptions:f,onCloseDialog:C,onInsertAddresses:E,onSelectWalletAddress:A,onSendDrop:F,onReceiveDrop:w,onAddressInputChange:_,onReceiveDropError:L,onSendDropError:I,sendError:h,receiveError:p}};var SD=t=>{let{mode:e,className:r,style:n,toAddresses:o,fromAddresses:a,addressErrors:s}=t,{visible:i,sendRef:c,receiveRef:l,addressType:f,addressOptions:v,onCloseDialog:h,onInsertAddresses:m,onSelectWalletAddress:p,onSendDrop:u,onReceiveDrop:C,onAddressInputChange:E,onReceiveDropError:A,onSendDropError:F,sendError:w,receiveError:_}=Lf(t),{isSm:L}=$e();return Cr.default.createElement(y.FlexBox,{style:n,direction:L?y.DIRECTION.vertical:y.DIRECTION.horizontal,className:(0,kf.default)(Re["batch-send-address"],r)},e===J.ONE_TO_MANY?Cr.default.createElement(Gs,{value:a,type:Ve.SEND,addressErrors:s?.from,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_sending_title_send_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:p}):Cr.default.createElement(Us,{ref:c,value:a,addressErrors:s?.from,type:Ve.SEND,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_sending_title_send_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:p,onDrop:u,onDropError:F,dropError:w}),e===J.MANY_TO_ONE?Cr.default.createElement(Gs,{value:o,type:Ve.RECEIVE,addressErrors:s?.to,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_receive_title_receive_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:p}):Cr.default.createElement(Us,{ref:l,value:o,type:Ve.RECEIVE,addressErrors:s?.to,placeholder:T("wallet_extension_address_input_input_address"),title:T("wallet_extension_receive_title_receive_address"),actionTitle:T("wallet_extension_address_anchor_address_book"),onChange:E,onSelectWalletAddress:p,onDrop:C,onDropError:A,dropError:_}),Cr.default.createElement(Wr,{visible:i,noContentPadding:!0,windowStyle:{height:"685px",maxHeight:"685px"},title:T("wallet_extension_addressbook_title_address_book"),onClose:h},Cr.default.createElement(Pf,{mode:e,type:f,options:v,onChange:m})))},Mf=Cr.default.memo(SD);g();D();var tr=S(ee());var Ys=S(qe());g();D();var Qr={root:"_root_1uwjx_1",icon:"_icon_1uwjx_69",title:"_title_1uwjx_88",subtitle:"_subtitle_1uwjx_108",tip:"_tip_1uwjx_136",tipIcon:"_tipIcon_1uwjx_140"};function bD(t){let{icon:e,title:r,subtitle:n,tip:o,className:a,titleClassName:s,subtitleClassName:i}=t;return tr.default.createElement(y.Box,{className:(0,Ys.default)(Qr.root,a)},e&&tr.default.createElement(y.Box,{className:Qr.icon},e),tr.default.createElement(y.Box,null,tr.default.createElement(y.Box,{className:(0,Ys.default)(Qr.title,s)},r),tr.default.createElement(y.Box,{className:Qr.subtitle},tr.default.createElement(y.Box,{className:i},n),o&&tr.default.createElement(Ft,{title:o,placement:Ft.DIRECTION.bottom,maxWidth:240},tr.default.createElement(y.Box,{className:Qr.tip},tr.default.createElement(ut,{className:`okds-question-mark-circle ${Qr.tipIcon}`}))))))}var bn=bD;g();D();var en=S(ee()),Vs=S(Ee());st();pe();g();D();je();zn();Hn();var Rf=S(Ee()),OD=()=>(0,Rf.useMemoizedFn)(async t=>{let{data:e}=await Xt(Zt.getSolRentBatch,{coinId:cr,addresses:t});return e}),jf=OD;je();zn();Hn();g();D();st();pe();je();var qs=(t=[],e)=>e===Ve.SEND?t.map(({from:r})=>r):t.map(({to:r})=>r),ND=t=>{let e=Va;return t===Ce?e=cr:t===We?e=So:t===ce?e=pn:t===ye?e=_o:t===ge&&(e=bo),e},ID=({localType:t,addressRegisterStatusMap:e,fromAddressErrors:r,toAddressErrors:n,fromAddress:o,toAddress:a,i:s,tokenSymbol:i})=>{if(t===ce&&o||t===ye&&a){let c=!0;t===ce?c=e[o]??!0:c=e[a]??!0,c===!1&&t===ce&&r.push({address:o,error:"wallet_extension_sending_error_address_no_register",at:s}),c===!1&&t===ye&&n.push({address:a,error:"wallet_extension_sending_error_token_no_register",at:s,args:{token:i}})}},PD=async({mode:t,baseCoinId:e,isRpcMode:r,fromAddresses:n,toAddresses:o,chainIndex:a})=>{let s=[],i=[],c=typeof a=="string"&&a.startsWith("0x")?Cn(a):a,l=[];if(t===J.ONE_TO_MANY?l=o.map(f=>({chainIndex:c,to:f,from:n[0]})):t===J.MANY_TO_ONE?l=n.map(f=>({chainIndex:c,from:f,to:o[0]})):l=n.map((f,v)=>({chainIndex:c,from:f,to:o[v]})),[Va,cr].includes(e))try{let{txTagList:f}=await Mi({txList:l,rpcChain:!!r});f.forEach((v,h)=>{v?.causeRiskItem?.includes("from_risk_reject")&&s.push({address:l[h].from,error:"wallet_extension_mid_subtitle_risky_transaction_account",at:h}),v?.causeRiskItem?.includes("black_tag")&&i.push({address:l[h].to,error:"wallet_extension_mid_subtitle_risky_transaction_account",at:h})})}catch(f){s.push({address:n[0],errorText:f?.msg||T("wallet_extension_transaction_error_general_check_network")})}return{fromAddressErrors:s,toAddressErrors:i}},zf=async({mode:t,localType:e,isRpcMode:r,chainIndex:n,tokenSymbol:o,toAddresses:a,fromAddresses:s,walletAccounts:i,addressRegisterStatusMap:c})=>{let l=[],f=[],v=cn([a?.length,s?.length]),h=s[0],m,p=ND(e);for(let C=0;C<v;C++){(t===J.MANY_TO_MANY||t===J.MANY_TO_ONE)&&(h=s[C]),m=a[C],h&&!i?.includes(h)?f.push({address:h,error:"wallet_extension_sending_text_address_wallet_extension",at:C}):t!==J.ONE_TO_MANY&&h&&s.slice(0,C).includes(h)&&f.push({address:h,error:"wallet_extension_sending_text_address_duplicated",at:C});let E=m&&Qe(m,e),A=await Vu(E,p);m&&!A&&l.push({address:m,error:"wallet_extension_sending_text_address_illegal",at:C}),ID({localType:e,addressRegisterStatusMap:c,fromAddressErrors:f,toAddressErrors:l,fromAddress:h,toAddress:m,i:C,tokenSymbol:o})}let u=await PD({mode:t,baseCoinId:p,isRpcMode:r,fromAddresses:s,toAddresses:a,chainIndex:n});return f=f.concat(u.fromAddressErrors),l=l.concat(u.toAddressErrors),{to:l,from:f}};g();D();var $s=S(Ee());st();g();D();var Wf=S(Ee()),Uf=S(Li());st();Un();var LD=10,kD=async({contract:t,addresses:e})=>{let r=e.map(async o=>{let a=await t.balanceOf(o);return{from:o,balance:a.toString()}});return await Promise.all(r)},MD=async({provider:t,addresses:e})=>{let r=e.map(async o=>{let a=await t.getBalance(o);return{from:o,balance:a.toString(),baseCoinBalance:a.toString()}});return await Promise.all(r)},RD=async({provider:t,addressList:e,contractAddress:r})=>{let{ethers:n}=await Wn(),o=[];if(!e?.length)return[];if(r){let a=new n.Contract(r,Uf.default,t);return o=await kD({contract:a,addresses:e}),o}return o=await MD({provider:t,addresses:e}),o},Hf=t=>{let e=qr(t);return(0,Wf.useMemoizedFn)(async(r,n)=>{let o=await e(),a=wi(r),s=mi(a,LD),i=await Promise.all(s.map(l=>RD({provider:o,addressList:l,contractAddress:n}))),c=di(i);return r?.length!==c?.length?r.map(l=>c.find(({from:v})=>v===l)):c},[e])};je();var jD=()=>{let[t]=ue(),e=ku(void 0,t?.localType),r=zu();return(0,$s.useMemoizedFn)(async n=>{let o=_t(t),a=n?.length,s=[];for(let i=0;i<a;i++){let c=n[i],{walletId:l}=e.find(v=>v.address===c)||{},{coinAmountInt:f}=await r(t?.coinId,l)||{};if(o)s.push({from:c,balance:f,baseCoinBalance:f});else{let{coinAmountInt:v}=await r(t?.baseCoinId,l)||{};s.push({from:c,balance:f,baseCoinBalance:v})}}return s})},zD=()=>{let[t]=Ye(),[e]=ue(),r=Hf(t?.rpcUrl);return(0,$s.useMemoizedFn)(async n=>{let o=!e?.address,a=[],s=n.map(c=>c&&Qe(c,e?.localType)),i=await r(s,void 0);return o||(a=await r(s,Qe(e?.address,e?.localType))),Ao(i,a)},[e])},WD=()=>{let[t]=ue(),e=zD(),r=jD();return[ye,Ce,We,ce,ge].includes(t?.localType)?r:e},Gf=WD;var UD=(t,e)=>{let[r]=ue(),[n,o]=(0,en.useState)(!1),{gotoConfirmPage:a}=Et(),s=Uo(!0,e),[,i]=En(),c=ct(),l=Gf(),f=jf(),[v,h]=Ae(),[m,p]=(0,en.useState)(qs(v,Ve.SEND)),[u,C]=(0,en.useState)(qs(v,Ve.RECEIVE)),[E,A]=(0,en.useState)({}),F=(0,Vs.useMemoizedFn)((I,k)=>{k===Ve.SEND?p(I):C(I)},[]),w=(0,en.useMemo)(()=>{let I=[];if(t===J.MANY_TO_MANY){let k=Di(m.length,u.length),b=u.slice(0,k);m.slice(0,k).forEach((G,M)=>{let Y=b[M];G&&Y&&I.push({to:Y,from:G})})}else if(t===J.MANY_TO_ONE){let k=u.find(b=>!!b);m.forEach(b=>{b&&k&&I.push({to:k,from:b})})}else if(t===J.ONE_TO_MANY){let k=m.find(b=>!!b);u.forEach(b=>{k&&b&&I.push({to:b,from:k})})}return I},[m,t,u]),_=!w?.length,L=(0,Vs.useMemoizedFn)(async()=>{try{o(!0);let I=[];r?.localType===ce?I=m:r?.localType===ye&&(I=u);let k={};if([ye,ce].includes(r?.localType))try{let{data:G}=await Xt(Zt.batchQueryAddressRegister,{chainId:r?.chainId,addresses:I,contractAddress:r?.localType===ye?r?.address:void 0});k=G}catch{}let b=await zf({isRpcMode:c,localType:e,toAddresses:u,fromAddresses:m,walletAccounts:s,mode:t,chainIndex:r?.chainId,addressRegisterStatusMap:k,tokenSymbol:r?.symbol});if(b?.from?.length||b?.to?.length)return o(!1),A(b);let U=await l(kn(w,"from"));if(r?.localType===Ce&&r?.baseCoinId!==0){let G=await f(kn(w,"to"));i(G)}return U=U?.map((G,M)=>({...G,from:ko(G?.from,r?.localType),id:M})),h(Ao([],w,U)),o(!1),a()}catch(I){let k={from:[],to:[]};return k?.from.push({address:m[0],errorText:I?.msg||I?.message||T("wallet_extension_transaction_error_general_check_network")}),o(!1),A(k)}},[u,m,s,w]);return{loading:n,addressErrors:E,sendAddresses:v,fromAddresses:m,toAddresses:u,nextDisabled:_,onNext:L,onAddressChange:F}},Yf=UD;g();D();var Ks={root:"_root_a3p43_2",footer:"_footer_a3p43_67"};var HD=()=>{let{isSm:t}=$e(),[e]=ue(),[r]=it(),{loading:n,fromAddresses:o,toAddresses:a,addressErrors:s,nextDisabled:i,onNext:c,onAddressChange:l}=Yf(r,e?.localType),[f,v]=el(e?.localType),{gotoHomePage:h}=Et(),[m,p]=(0,qt.useMemo)(()=>r===J.MANY_TO_MANY?[T("wallet_extension_multitomulti_subtitle_many_transfer"),T("wallet_extension_reminder_tooltips_portfolio_trading")]:r===J.ONE_TO_MANY?[T("wallet_extension_onetomulti_subtitle_one_to_many"),T("wallet_extension_reminder_tooltips_multisender_onetomulti")]:[T("wallet_extension_multitoone_subtitle_many_to_one"),T("wallet_extension_reminder_tooltips_multisender_multitoone")],[r,T]);return qt.default.createElement(_r,{footer:qt.default.createElement(y.Box,{className:Ks.footer},qt.default.createElement(te,{block:t,category:te.CATEGORY.outline,type:te.TYPE.primary,size:t?te.SIZE.lg:te.SIZE.xl,onClick:()=>{h()}},T("wallet_extension_footer_btn_back")),qt.default.createElement(te,{block:t,loading:n,disabled:i,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:t?te.SIZE.lg:te.SIZE.xl,onClick:c},T("wallet_extension_footer_btn_next")))},qt.default.createElement(bn,{tip:p,subtitle:m,title:T("wallet_extension_address_maintitle_add_address")}),qt.default.createElement(y.Box,{className:Ks.root},qt.default.createElement(Mf,{mode:r,toAddresses:a,fromAddresses:o,addressErrors:s,walletAccounts:f,walletAccountsWithAddressBook:v,onChange:l})))},qf=qt.default.memo(HD);g();D();var rt=S(ee()),Sd=S(Tt()),po=S(qe());st();pe();g();D();var Er=S(ee()),Zs=S(Tt());st();pe();je();g();D();var Aa=S(ee()),$f=S(Tt()),rr=S(Ee());st();je();var GD=()=>{let t=(0,$f.useSelector)(Ou);return(0,Aa.useCallback)(e=>{let r=t.filter(n=>n.chainId===e&&!n.isDeleted);return xo(r,"address")},[t])},YD=(t,e)=>{let r=ct(),{data:n,reload:o,loadingMore:a,listRef:s}=rl({aggregation:!1,chainIds:[Cn(t)],symbolLike:e||void 0},{filter:!1,reloadDeps:[t,e],beforeRequest(){return r||!t?{list:[],pageNo:0,isNoMore:!0}:!1}});return{list:(0,rr.useCreation)(()=>n?.list??[],[n?.list]),listRef:s,loadingMore:a,refreshDom:o}},Vf=(t,e)=>{let{chainId:r,localType:n}=t||{},[o,a]=(0,Aa.useState)([]),s=ct(),i=(0,rr.useDebounce)(e,{wait:300}),{list:c,listRef:l,refreshDom:f,loadingMore:v}=YD(r,i),h=GD(),m=Ct(),p=gn(ce);(0,rr.useAsyncEffect)(async()=>{if(n===ce){let{coinFeeList:C}=await m({coinId:pn,address:p,fromAddr:p,toAddr:p,value:"0"});a(C)}},[n]);let u=(0,rr.useCreation)(()=>{if(n===ce&&o?.length){let C=o.map(({coinId:A})=>A);return c.filter(({coinId:A})=>hi(C,A)).map(A=>{let{tokenId:F,originSymbol:w}=o.find(_=>_?.coinId===A?.coinId);return{...A,tokenId:F,originSymbol:w}})}return c},[n,c,o]);return(0,rr.useCreation)(()=>s?{list:h(r)??[],listRef:null,refreshDom:null,loadingMore:!1}:{list:u,listRef:l,refreshDom:f,loadingMore:v},[r,u,c,l,v,s,h])},Ba=()=>{let t=ct(),e=ju();return(0,rr.useMemoizedFn)(async({coinId:r})=>t?0:e?.[r]?.coinToUSDRate||"0",[t])};var xa=()=>{let[t]=ue(),[e]=Ye(),[r,n]=(0,Er.useState)(0),[o,a]=(0,Er.useState)(0),s=(0,Zs.useSelector)(zi),{usdToThisRate:i}=s,c=_t(t),l=Ba(),f=t?.localType===Ce&&!c,[v]=En(),h=async()=>{if(c){let w=await l({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address});n(w),a(w)}else{let[w,_]=await Promise.all([l({chainId:t?.chainId,coinId:t?.baseCoin?.coinId,contractAddress:t?.address}),l({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address})]);a(w),n(_)}};(0,Er.useEffect)(()=>{h()},[]);let[m]=Ae(),p=(0,Zs.useSelector)(lt),u=m?.length,C=c?t:t?.baseCoin,E=(0,Er.useMemo)(()=>m[0]?.realNetworkFee?m.reduce((_,{realNetworkFee:L})=>H.add(_,L),0):H.mul(p?.networkFee??0,u),[t,p]),A=(0,Er.useMemo)(()=>{let w=m.reduce((_,{txAmount:L})=>H.add(_,L),0);return H.div(w,10**(t?.decimals??18))},[m]);return(0,Er.useMemo)(()=>{let w=H.mul(i,H.mul(o,E)),_=H.mul(i,H.mul(r,A)),L=[{title:"wallet_extension_info_title_internet",icon:e?.icon,value:e?.chainName,showIcon:!0},{title:"wallet_extension_info_title_crypto",icon:t?.image,value:t?.symbol,showIcon:!0},{title:"wallet_extension_info_title_address_amount",value:H.thousandFormat(u)},{title:"wallet_extension_info_title_transfer_amount",value:hn(cn([A,0]),{symbol:t?.symbol??"",precision:t?.decimals}).value,market:_},{title:"wallet_extension_info_title_internet_fee",value:hn(E,{symbol:C?.symbol??"",precision:C?.displayPrecision}).value,market:w}];if(f){let I=Object.values(v||{}).filter(U=>!H.eq(U,0)).length,k=H.div(Object.values(v||{}).reduce((U,G)=>H.add(U,G),0),10**(C?.decimals??9)),b=H.mul(i,H.mul(o,k));L.push({title:"wallet_extension_info_title_rent_accounts",value:H.thousandFormat(I)}),L.push({title:"wallet_extension_info_title_rent_value",value:hn(k,{symbol:C?.symbol??"",precision:C?.displayPrecision}).value,market:b})}return L},[t,e,E,r,o,A,u,f])};g();D();var nr=S(ee()),Xs=S(qe());pe();g();D();var Pr={root:"_root_16t0a_2",row:"_row_16t0a_65",nextRow:"_nextRow_16t0a_86",title:"_title_16t0a_113",subtitle:"_subtitle_16t0a_137",value:"_value_16t0a_163",icon:"_icon_16t0a_166"};function qD(t){let{icon:e,title:r,value:n,showIcon:o=!1,market:a}=t;return nr.default.createElement(y.Box,null,nr.default.createElement(y.Box,{className:Pr.title},T(r)),nr.default.createElement(y.Box,{className:(0,Xs.default)(Pr.subtitle)},o&&(e||n)&&nr.default.createElement(Ge,{src:e,className:Pr.icon,text:n,size:Ge.SIZE.md}),nr.default.createElement(y.Box,{className:Pr.value},n)),a!==void 0&&nr.default.createElement(xe.DisplayAmount,{wrap:!0,useApproximate:!0,amount:a,mode:xe.LEGAL,type:xe.TYPE.secondary,size:xe.SIZE.sm,style:{display:"block",marginTop:"4px"}}))}function $D({className:t,statistics:e}){let{isSm:r,isMd:n,isLg:o}=$e(),s=(()=>r?[2,3,e.length-5]:n?[4,e.length-4]:o?[5,e.length-5]:[e.length])(),i=c=>{let l=0;for(let v=0;v<c;v+=1)l+=s[v]||0;let f=l+(s[c]||0);return e.slice(l,f).filter(Boolean)};return nr.default.createElement(y.Box,{className:(0,Xs.default)(Pr.root,t)},s.map((c,l)=>{if(c<=0)return null;let f=i(l);if(f.length===0)return null;let v=l===0?Pr.row:Pr.nextRow;return nr.default.createElement(y.Box,{key:l,className:v},f.map((h,m)=>nr.default.createElement(qD,{...h,key:`${l}-${m}`})))}))}var wa=$D;g();D();var Js=S(ee());g();D();var Fe={root:"_root_1iryo_2",table:"_table_1iryo_38",row:"_row_1iryo_47",order:"_order_1iryo_52",addressError:"_addressError_1iryo_78",fromError:"_fromError_1iryo_81",text:"_text_1iryo_84",oneLineText:"_oneLineText_1iryo_106",moreLineText:"_moreLineText_1iryo_109",remove:"_remove_1iryo_112",success:"_success_1iryo_117",error:"_error_1iryo_130",open:"_open_1iryo_143",receiveError:"_receiveError_1iryo_146",errorIcon:"_errorIcon_1iryo_149",hash:"_hash_1iryo_154",hashText:"_hashText_1iryo_166",loader:"_loader_1iryo_179"};function VD({dataSource:t,columns:e,scroll:r}){let n=()=>({style:{background:"var(--okd-color-background-surface-primary)"}});return Js.default.createElement(y.Box,{className:Fe.root},Js.default.createElement(bi,{columns:e,dataSource:t,className:Fe.table,onHeaderCell:n,scroll:r}))}var Fa=VD;g();D();var Kf=S(Tt());st();dn();function KD(){let[t]=it(),[e]=ue(),[r]=Ye(),[n]=ft(),[o]=dt(),[a]=Ae(),s=(0,Kf.useSelector)(lt);return()=>{let i={[J.ONE_TO_MANY]:"one_to_many",[J.MANY_TO_MANY]:"many_to_many",[J.MANY_TO_ONE]:"many_to_one"},c={[de.ALL]:"max",[de.RANDOM]:"range",[de.CUSTOM]:"specific_amount"},l={[He.NONE]:"no_interval",[He.RANDOM]:"range"},f={[Je.LOW]:"slow",[Je.MEDIUM]:"average",[Je.HIGH]:"fast",[Je.CUSTOM]:"custom"},v,h;return t===J.ONE_TO_MANY?(v=1,h=a.length):t===J.MANY_TO_ONE?(v=a.length,h=1):(v=a.length,h=a.length),{transaction_type:i[t],token:e?.symbol,chain:r?.chainId?parseInt(r?.chainId,16):null,sending_address_count:v,receiving_address_count:h,sending_amount_type:c[n?.type],interval_setting:l[o?.type],gas_level:f[s?.level],transactions:a.map(({from:m,to:p,txAmount:u,txHash:C,txStatus:E})=>{let A;return E===re.SUCCEED?A="succeed":E===re.FAILED&&(A="fail"),Ci({from:m,to:p,sending_amount:Fi(u,10**e?.decimals),transaction_id:C,succeed_fail:A},gi)})}}}var ya=KD;je();g();D();var Oe=S(ee()),ni=S(qe());pe();st();dn();g();D();g();D();g();D();var Ta=S(ee());var ei=S(qe());g();D();var Qs=S(ee());var Zf=S(qe());var ZD=({children:t,className:e,...r})=>Qs.default.createElement(y.Box,{className:(0,Zf.default)(Fe.row,e),...r},Qs.default.createElement(y.Box,null),t),or=ZD;function XD(t){let[e,r]=Ae(),{gotoAddressPage:n}=Et(),{index:o}=t,a=()=>{let s=[...e.slice(0,o),...e.slice(o+1)];r(s),s.length<=0&&n()};return Ta.default.createElement(or,null,Ta.default.createElement(y.Box,{className:(0,ei.default)(Fe.text),onClick:a},Ta.default.createElement(ut,{className:(0,ei.default)("okx-wallet-plugin-trash",Fe.remove)})))}var Xf=XD;g();D();var ar=S(ee()),_a=S(qe());pe();function JD(t){let{error:e,showShortAddress:r=!1,from:n,order:o,to:a,isFromAddress:s=!1,showTextOneLine:i=!1,showOrder:c=!1,showError:l=!1}=t,f=e===Jt.BALANCE_INSUFFICIENT,v=!!e,h=f?"okx-wallet-plugin-warning-circle-fill":"okx-wallet-plugin-gas",m=(0,ar.useMemo)(()=>e===Jt.BALANCE_INSUFFICIENT?T("wallet_extension_list_tooltips_scarce_balance"):e===Jt.FEE_BALANCE_INSUFFICIENT?T("wallet_extension_list_tooltips_scarce_fee"):e,[e]),p=s?n:a,u=r?ar.default.createElement(Ft,{title:p},Io(p)):p;return ar.default.createElement(or,null,c&&ar.default.createElement(y.Box,{className:Fe.order},o,"."),ar.default.createElement(y.Box,{className:(0,_a.default)(Fe.text,{[Fe.oneLineText]:i,[Fe.moreLineText]:!i,[Fe.receiveError]:l&&v})},u),l&&v&&ar.default.createElement(y.Box,{className:(0,_a.default)(Fe.addressError)},ar.default.createElement(Ft,{title:m},ar.default.createElement(ut,{className:(0,_a.default)(h,Fe.errorIcon)}))))}var Jf=JD;g();D();var ti=S(ee());var Qf=S(qe());pe();st();function QD(t){let{txAmount:e,showTextOneLine:r}=t;return ti.default.createElement(or,null,ti.default.createElement(y.Box,{className:(0,Qf.default)(Fe.text,{[Fe.oneLineText]:r,[Fe.moreLineText]:!r})},H.thousandFormat(cn([e||0,0]))))}var ed=QD;g();D();var Lr=S(ee()),td=S(tp());pe();var ri=S(qe());function e0(t){let{txHash:e}=t,[r]=Ye(),n="",o=r.blockExplorerUrl||r.explorerUrl;o&&(n=il(o,"tx",e));let a=()=>{e&&(n?globalThis.platform.openTab({url:n}):((0,td.default)(e),Ya.success({desc:Lr.default.createElement(xe.Text,{inherit:!0,forceWrap:!0},e),placement:Ya.DIRECTION.top,title:T("wallet_receive_toast_address_copied")})))};return Lr.default.createElement(or,{className:Fe.hash,onClick:a},e?Lr.default.createElement(Lr.default.Fragment,null,Lr.default.createElement(y.Box,{className:(0,ri.default)(Fe.text,Fe.hashText)},Io(e)),Lr.default.createElement(y.Box,null,Lr.default.createElement(ut,{className:(0,ri.default)(Fe.open,{"okx-wallet-plugin-open-link":n,"okx-wallet-plugin-copy":!n})}))):"-")}var rd=e0;g();D();var tn=S(ee()),nd=S(qe());pe();g();D();var lo={inputRoot:"_inputRoot_rigrr_1",input:"_input_rigrr_1",errorIcon:"_errorIcon_rigrr_8",textRoot:"_textRoot_rigrr_12"};function t0({editable:t,memo:e,index:r}){let[n,o]=Ae();if(t){let a=s=>{let i=s.target.value,c=[...n];c[r]={...c[r],memo:i,tonMemoError:i.length>200},o(c)};return tn.default.createElement("div",{className:lo.inputRoot},tn.default.createElement(_e,{className:lo.input,style:{width:"320px"},size:_e.SIZE.xs,value:n[r]?.memo||"",onChange:a}),n[r]?.tonMemoError&&tn.default.createElement(Ft,{title:T("wallet_extension_ton_tooltip_character_limit"),placement:Ft.DIRECTION.bottomRight},tn.default.createElement(ut,{className:(0,nd.default)("okx-wallet-plugin-warning-circle-fill",lo.errorIcon)})))}return tn.default.createElement("div",{className:lo.textRoot},tn.default.createElement("div",{className:Fe.text},e))}var od=t0;g();D();var rn=S(ee()),Sa=S(qe());g();D();var ad={"error-icon":"_error-icon_12rdj_1",errorIcon:"_error-icon_12rdj_1"};function r0(t){let{txStatus:e,errorMsg:r}=t;return rn.default.createElement(or,null,(()=>{switch(e){case re.SUCCEED:return rn.default.createElement(ut,{className:(0,Sa.default)("okds-success-circle",Fe.success)});case re.FAILED:return rn.default.createElement(Ft,{title:r},rn.default.createElement(ut,{className:(0,Sa.default)("okx-wallet-plugin-warning-circle",Fe.error,ad.errorIcon)}));case re.DROPPED:return rn.default.createElement(ut,{className:(0,Sa.default)("okx-wallet-plugin-warning-circle",Fe.error)});case re.PENDING:return rn.default.createElement(Ht,{size:Ht.SIZE.md,loaderClassName:Fe.loader});default:return"-"}})())}var sd=r0;var Ke={ADDRESS:"address",AMOUNT:"amount",ACTION:"action",HASH:"hash",STATUS:"status",MEMO:"memo"},ba={[Ke.ADDRESS]:Jf,[Ke.AMOUNT]:ed,[Ke.ACTION]:Xf,[Ke.HASH]:rd,[Ke.STATUS]:sd,[Ke.MEMO]:od};var Ar={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",ACTION:"action",MEMO:"memo"},id=[{title:"wallet_extension_list_title_send_address",key:Ar.FROM,type:Ke.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:Ar.TO,type:Ke.ADDRESS},{title:"wallet_extension_list_title_amount",key:Ar.TX_AMOUNT,type:Ke.AMOUNT,width:100},{title:"wallet_extension_list_title_operation",key:Ar.ACTION,type:Ke.ACTION,width:50}];var co={[Je.HIGH]:"wallet_extension_gas_select_fast",[Je.MEDIUM]:"wallet_extension_gas_select_average",[Je.LOW]:"wallet_extension_gas_select_slow",[Je.CUSTOM]:"commonall_filter_dropdown_custom"},ud=[{value:de.CUSTOM,label:"wallet_extension_amount_select_designated_amount"},{value:de.ALL,label:"wallet_extension_amount_dropdown_all_balance"},{value:de.RANDOM,label:"wallet_extension_amount_dropdown_random_size"}];g();D();var Bt={root:"_root_17dsg_1",title:"_title_17dsg_27",setting:"_setting_17dsg_46",item:"_item_17dsg_70",inactive:"_inactive_17dsg_106",active:"_active_17dsg_109",label:"_label_17dsg_112",fee:"_fee_17dsg_119",gweiText:"_gweiText_17dsg_143",customInput:"_customInput_17dsg_147",defaultTip:"_defaultTip_17dsg_153",defaultChecker:"_defaultChecker_17dsg_159"};function ld(){return Oe.default.createElement("div",{className:Bt.gweiText},T("extension_wallet_transaction_input_gwei"))}var n0=()=>new Promise((t,e)=>{let r=Wr.tip({children:T("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:T("wallet_extension_btn_general_confirm"),cancelText:T("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){t(),r.destroy()},onCancel(){e(),r.destroy()}})});function o0({custom:t,onClose:e,network:r,onConfirm:n,isSupportEip1559:o}){let{gasPrice:a,gasLimit:s,baseFeePerGas:i,maxFeePerGas:c,maxPriorityFeePerGas:l}=t,[f,v,h]=Po(r?.realChainIdHex||r?.chainId),m=zo(i),p=o?`${T("extension_wallet_transaction_text_maxbase_fee")} (${T("extension_wallet_transaction_text_current",{number:m})})`:T("wallet_extension_cosmos_title_gasfee"),u=zo(o?fn(c,l):a),[C,E]=(0,Oe.useState)(u),A=zo(l),[F,w]=(0,Oe.useState)(A),[_,L]=(0,Oe.useState)(!!f),I=U=>{let G=U.target.checked;L(G),G&&qi()};(0,Oe.useEffect)(()=>{L(!!f)},[f]);let[k]=(0,Oe.useState)(s),b=(0,Oe.useMemo)(()=>{let U=!Number(C);return o&&(U=U||!Number(F)),U},[C,F,o]);return Oe.default.createElement(Wr.Confirmation,{maskClosable:!1,visible:!0,title:T("commonall_filter_dropdown_custom"),confirmText:T("commonall_text_btn_confirm"),cancelText:T("commonall_text_btn_cancel"),confirmDisabled:b,onConfirm:async()=>{let{price:U,usdToThisRate:G}=t,M=Mn(o?wo(C,F):C),{networkFee:Y,networkFeeInt:W,networkFeeMarket:$}=fr({gasPrice:M,gasLimit:k,price:U,usdToThisRate:G}),ne={...t,isDefault:_,networkFee:Y,networkFeeInt:W,networkFeeMarket:$,gasPrice:M,maxFeePerGas:M,maxPriorityFeePerGas:Mn(F),gasLimit:k};!vi(f)&&!_?(await n0(),h()):v({isDefault:!0,isSupportEip1559:o,gasPrice:M,maxFeePerGas:M,maxPriorityFeePerGas:Mn(F),baseFeePerGas:fn(M,Mn(F))}),n(ne)},onCancel:e,onClose:e},Oe.default.createElement(y.Box,null,Oe.default.createElement(_e.Number,{className:Bt.customInput,size:_e.SIZE.sm,title:p,placeholder:u,value:C,precision:9,enableMinus:!1,min:0,onChange:E,suffix:Oe.default.createElement(ld,null)}),o&&Oe.default.createElement(_e.Number,{className:Bt.customInput,size:_e.SIZE.sm,placeholder:A,title:T("extension_wallet_transaction_text_priority_fee"),value:F,precision:9,enableMinus:!1,min:0,onChange:w,suffix:Oe.default.createElement(ld,null)})),Oe.default.createElement(y.Box,{className:Bt.defaultTip},T("wallet_extension_mid_checkbox_setting_default")),Oe.default.createElement(wr,{checked:_,onChange:I,className:Bt.defaultChecker},T("wallet_extension_bot_alert_default_gas",{networkName:r.name})))}function a0({loading:t,value:e,network:r,className:n,options:o,onChange:a=()=>{},onCustomChange:s=()=>{}}){let[i]=An(),[c,l]=(0,Oe.useState)(!1);return Oe.default.createElement(y.Spin,{loading:t&&!o?.length,className:(0,ni.default)(Bt.root,n)},Oe.default.createElement(y.Box,{className:Bt.title},T("wallet_extension_gas_title_internet_fee")),Oe.default.createElement(y.Box,{className:Bt.setting},o.map(f=>{let{level:v,unitPriceDisplay:h}=f,m=T(co[v]);return Oe.default.createElement(y.Box,{className:(0,ni.default)(Bt.item,e?.level===v?Bt.active:Bt.inactive),key:v,onClick:()=>{f.level===Je.CUSTOM?l(!0):a?.(f)}},Oe.default.createElement(y.Box,{className:Bt.label},m),Oe.default.createElement(y.Box,{className:Bt.fee},Oe.default.createElement(xe.Text,{type:xe.TYPE.secondary,size:xe.SIZE.xs,ellipsis:{tooltip:!0}},h),Oe.default.createElement(y.Box,null,T("extension_wallet_transaction_input_gwei"))))})),c&&Oe.default.createElement(o0,{network:r,isSupportEip1559:i,custom:o[o.length-1],onConfirm:f=>{s(f),l(!1)},onClose:()=>{l(!1)}}))}var cd=a0;g();D();var sr=S(ee()),fd=S(qe());pe();g();D();var oi=S(ee());function s0(){let[t,e]=(0,oi.useState)(!1),[r,n]=(0,oi.useState)(!1),o=(c,l)=>c&&l&&Number(c)>Number(l);return{hasMinError:t,hasMaxError:r,checkMaxError:(c,l)=>{e(!1),n(o(c,l))},checkMinError:(c,l)=>{n(!1),e(o(c,l))},clearError:()=>{n(!1),e(!1)}}}var Oa=s0;g();D();var kr={root:"_root_rc0rn_1",title:"_title_rc0rn_27",type:"_type_rc0rn_45",random:"_random_rc0rn_56",input:"_input_rc0rn_76",setting:"_setting_rc0rn_80"};function i0({value:t,className:e,onChange:r}){let{type:o,min:a,max:s}=t,{hasMinError:i,hasMaxError:c,checkMaxError:l,checkMinError:f,clearError:v}=Oa(),h=_=>{let L={...t,..._};r?.(L)},m=_=>{let L=_;h({min:L}),f(L,s)},p=_=>{h({max:_}),l(a,_)},u=T("wallet_extension_interval_title_send_interval"),C=[{value:He.NONE,label:T("wallet_extension_interval_select_no_interval")},{value:He.RANDOM,label:T("wallet_extension_interval_dropdown_random_interval")}],E=T("wallet_extension_interval_subtitle_lowest"),A=T("wallet_extension_interval_subtitle_highest"),F=_=>{let L=_.value;L!==o&&(h({type:L,min:"",max:""}),v())},w=o===He.NONE;return sr.default.createElement(y.Box,{className:(0,fd.default)(kr.root,e)},sr.default.createElement(y.Box,{className:kr.type},sr.default.createElement(y.Box,{className:kr.title},u),sr.default.createElement(y.Box,null,sr.default.createElement(mn,{options:C,value:o,onChange:F,align:mn.DIRECTION.right}))),sr.default.createElement(y.Box,{className:kr.setting},sr.default.createElement(y.Box,{className:kr.random},sr.default.createElement(_e.Number,{className:kr.input,title:E,value:a,onChange:m,size:_e.SIZE.lg,placeholder:"0",min:0,max:600,disabled:w,error:i,errorType:_e.TIP_TYPE.always}),sr.default.createElement(_e.Number,{className:kr.input,title:A,value:s,onChange:p,size:_e.SIZE.lg,placeholder:"0",disabled:w,min:0,max:600,error:c,errorType:_e.TIP_TYPE.always}))))}var dd=i0;g();D();var xt=S(ee()),md=S(qe()),pd=S(Ee());pe();je();g();D();var Br={root:"_root_iq84d_1",type:"_type_iq84d_32",title:"_title_iq84d_54",random:"_random_iq84d_77",input:"_input_iq84d_91",setting:"_setting_iq84d_95"};function u0({value:t,className:e,options:r,onChange:n}){let[o]=ue(),[a]=Ho(),s=Number(o?.decimals??18),{hasMinError:i,hasMaxError:c,checkMaxError:l,checkMinError:f,clearError:v}=Oa(),h=A=>{n?.({min:A}),f(A,t.max)},m=A=>{n?.({max:A}),l(t.min,A)},p=A=>{n?.({amount:A})},u=(0,pd.useMemoizedFn)(A=>{A?.value!==t.type&&(n?.({type:A?.value,amount:"",min:"",max:""}),v())},[t]),C=H.thousandFormat("0.00"),E=(0,xt.useMemo)(()=>o?.localType===Ce&&_t(o)&&H.div(a,10**o?.decimals)||0,[a,o]);return xt.default.createElement(y.Box,{className:(0,md.default)(Br.root,e)},xt.default.createElement(y.Box,{className:Br.type},xt.default.createElement(y.Box,{className:Br.title},T("wallet_extension_amount_title_transfer_amount")),xt.default.createElement(y.Box,null,xt.default.createElement(mn,{options:r,value:t?.type,onChange:u,align:mn.DIRECTION.right}))),xt.default.createElement(y.Box,{className:Br.setting},t?.type===de.RANDOM?xt.default.createElement(y.Box,{className:Br.random},xt.default.createElement(_e.Number,{enableMinus:!1,className:Br.input,suffix:o?.symbol,title:T("wallet_extension_amount_input_lowest"),value:t?.min,onChange:h,size:_e.SIZE.lg,precision:s,placeholder:C,min:E,error:i,errorType:_e.TIP_TYPE.always}),xt.default.createElement(_e.Number,{suffix:o?.symbol,className:Br.input,title:T("wallet_extension_amount_input_highest"),value:t?.max,onChange:m,precision:s,size:_e.SIZE.lg,placeholder:C,min:E,error:c,errorType:_e.TIP_TYPE.always})):xt.default.createElement(y.Box,{className:Br.custom},xt.default.createElement(_e.Number,{enableMinus:!1,suffix:o?.symbol,title:T("wallet_extension_amount_subtitle_send_amount"),value:t?.amount,size:_e.SIZE.lg,onChange:p,disabled:t?.type===de.ALL,precision:s,placeholder:t?.type===de.ALL?T("wallet_extension_amount_dropdown_all_balance"):C,min:E}))))}var hd=u0;g();D();var La=S(ee()),Ad=S(Tt()),Pa=S(Ee());pe();g();D();var vd=S(ee()),Na=(t,e={})=>(r,n)=>vd.default.createElement(t,{...n,...e});Un();je();dn();g();D();st();var l0=(t,e,r=0)=>+Ai(t,e,!0).toFixed(r),wt=l0;g();D();pe();Un();dn();var Ia=({balance:t,isBaseCoin:e,baseCoinBalance:r,usedCoinBalance:n,usedFeeCoinBalance:o})=>{if(H.lt(r,o))return Jt.FEE_BALANCE_INSUFFICIENT;if(e){if(H.lt(t,H.add(n,o)))return Jt.BALANCE_INSUFFICIENT}else if(H.lt(t,n))return Jt.BALANCE_INSUFFICIENT;return null},gd=({balance:t,solRent:e,usedRent:r,txAmount:n,isBaseCoin:o,formattedSolRent:a,baseCoinBalance:s,usedCoinBalance:i,usedFeeCoinBalance:c})=>{let l,f=!0;if(H.lt(s,c))return Jt.FEE_BALANCE_INSUFFICIENT;if(o){if(H.lt(t,H.add(i,c))&&(f=!1),H.lt(n,e))return T("walletextension_toast_text_minimum_rent_fee",{number:a});l=H.sub(s,H.add(c,i))}return H.lt(s,H.add(c,r))?T("extension_wallet_transfer_alert_insufficient"):(o||(l=H.sub(s,H.add(c,r)),H.lt(t,i)&&(f=!1)),f?Number(l)!==1&&H.lt(l,e)&&H.gt(l,0)?T("walletextension_toast_text_reserve_rent_exempt",{number:a}):null:Jt.BALANCE_INSUFFICIENT)},Dd=async({coin:t,balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:a,usedFeeCoinBalance:s})=>{let i=Ia({balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:a,usedFeeCoinBalance:s});if(i)return i;let{ZksyncWallet:c}=await yo(),l=r&&await c.getCloseAmounts(r);return l&&!H.eq(l,r)?T("wallet_extension_placeholder_zksync_max_num",{amount:H.showFloorTruncation(H.div(l,10**t?.decimals),t?.decimals,!1)}):null};function Cd({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:a,tonSignInfo:s,baseCoinDecimals:i,index:c,mode:l,amountSetting:f}){if(s?.getCustomPayloadInfoRpcError)return T("wallet_extension_multisender_notice_failed_try_again");let v=Ia({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:a});if(v)return v;if(f.type!==de.CUSTOM&&yi(e,0))return T("wallet_extension_ton_error_cannot_be_zeror");if(!r&&s){let h=s?.minTonLimit,m=H.add(h||"0",a||"0");if(l===J.ONE_TO_MANY&&(m=H.add(m,H.mul(h,c))),H.gt(m,n)){let p=H.div(m,10**i);return T("wallet_extension_ton_errormessage_insufficient_balance_gas2",{amount:p})}}return null}var Ed=9,Bd=({token:t,networkFee:e,amountSetting:r})=>{let{isSm:n}=$e(),[o]=it(),[a]=Ho(),[s]=En(),[i,c]=(0,La.useState)([]),[l,f]=Ae(),v=(0,Ad.useSelector)(du),h=yr(t?.baseCoinId===0?t.coinId:t?.baseCoinId),m=_t(t);(0,Pa.useAsyncEffect)(async()=>{if(!r)return;let{type:A,amount:F,min:w,max:_}=r;A===de.CUSTOM&&f(l?.map(L=>({...L,txAmount:H.mul(F,10**(t?.decimals??18))}))),A===de.RANDOM&&f(l?.map(L=>{let I=w&&_&&Number(w)<=Number(_)?wt(w,_,6):0;return{...L,txAmount:H.mul(I,10**(t?.decimals??18))}}))},[r,l?.length,t?.decimals]);let p=async A=>{let{ZksyncWallet:F}=await yo();return await Promise.all(A.map(async _=>({..._,txAmount:_?.txAmount&&await F.getCloseAmounts(_?.txAmount)})))};(0,Pa.useAsyncEffect)(async()=>{if(!r)return;let{type:A}=r;if(A===de.ALL&&o===J.ONE_TO_MANY){let[{balance:F}]=l,w=l?.length,_=m?fn(F,H.mul(e?.networkFeeInt,w)):F,L=Ha(H.div(_,l?.length),0),I=Ha(H.div(F,w),0);f(l.map((k,b)=>(b===w-1&&(I=H.sub(F,H.mul(I,w-1)),L=m?H.sub(I,e?.networkFeeInt):I),{...k,txAmount:L,usedBalance:I})))}if(A===de.ALL&&o!==J.ONE_TO_MANY){let F=l.map(w=>{let{balance:_}=w,L=m?fn(_,e?.networkFeeInt):_;return{...w,txAmount:L}});f(t?.localType===ce?await p(F):F)}},[r.type,l?.length,t?.decimals,e?.networkFeeInt]),(0,Pa.useAsyncEffect)(async()=>{c(await(async()=>{let F=0,w=0,_=0,L=e?.networkFeeInt,I=Ia;return t?.localType===Ce?I=gd:t?.localType===ce?I=Dd:t?.localType===ge&&(I=b=>Cd({...b,tonSignInfo:v,baseCoinDecimals:h?.decimals,mode:o,amountSetting:r})),await Promise.all(l.map(async(b,U)=>{let{to:G,txAmount:M,balance:Y,baseCoinBalance:W}=b,$=s[G]||"0";return o===J.ONE_TO_MANY?(_=H.add(_,$),F=H.add(F,M),w=H.add(w,L)):(_=$,F=M,w=L),{...b,txAmount:H.truncate(H.div(M,10**(t?.decimals??18)),6,!1),index:U,showShortAddress:n,showTextOneLine:!1,order:U+1,error:await I({index:U,balance:Y,needRent:$,usedRent:_,solRent:a,txAmount:M,isBaseCoin:m,formattedSolRent:hn(a,{useContractPrecision:!0,contractPrecision:{decimals:Ed},precision:Ed}).value,baseCoinBalance:W,usedCoinBalance:F,usedFeeCoinBalance:w})}}))})())},[n,a,s,o,m,l,t?.decimals,h?.decimals,e?.networkFeeInt,v,r]);let u=(0,La.useMemo)(()=>({[Ar.FROM]:{showOrder:!0,showError:!0,isFromAddress:!0,showShortAddress:t?.localType===ge},[Ar.TO]:{showShortAddress:t?.localType===ge},[Ar.MEMO]:{editable:!0}}),[t?.localType]),C=[...id];t?.localType===ge&&C.splice(2,0,{title:"wallet_extension_ton_header_comment",key:Ar.MEMO,type:Ke.MEMO,width:380});let E=C.map(A=>{let{title:F,key:w,type:_,...L}=A;return{title:T(F),dataIndex:w,key:w,render:Na(ba[_],{...u[w],address:w}),...L}});return{dataSource:i,columns:E}};g();D();var xr=S(ee()),On=S(Tt()),fo=S(Ee());pe();je();var c0=21e3,xd=({from:t,to:e,token:r,network:n,txAmount:o=0})=>{let a=(0,On.useDispatch)(),s=Iu(),[i]=Po(n?.realChainIdHex||n?.chainId),c=(0,On.useSelector)(fu),[l]=(0,xr.useState)(!1),[f,v]=(0,xr.useState)([]),[h,m]=(0,xr.useState)(0),[p,u]=(0,xr.useState)(c0),C=$u(),E=Vo(),A=Al(),F=Bl(),w=Ko(r?.coinId),_=Zo(),L=(0,On.useSelector)(lt),I=$o(n?.rpcUrl),k=Ba(),b=(0,fo.useMemoizedFn)(W=>{a(yt(W))},[]),U=(0,fo.useMemoizedFn)(W=>{a(yt(W)),v($=>{let ne=[...$],fe=ne.pop();return ne.push({...fe,...W,unitPriceDisplay:C(W.gasPrice)}),ne})}),G=ct(),M=(0,On.useSelector)(vn);(0,fo.useDebounceEffect)(()=>{[ye,Ce,We,ce,ge].includes(r?.localType)||(async()=>{let W=await I({value:o,to:Qe(e,r?.localType),from:Qe(t,r?.localType)},Qe(r?.address,r.localType));G&&(W=H.ceilMul(W,M?.gasLimit,0)),u(W)})()},[o],{wait:500}),(0,xr.useEffect)(()=>{(async()=>{let W=await k({coinId:r?.coinId,chainId:r?.chainId,contractAddress:r?.address});m(W)})()},[]);let{rpcNetworks:Y}=Ki();return(0,xr.useEffect)(()=>{if(!(!Y?.length&&G)&&![ye,Ce,We,ce,ge].includes(r?.localType)){let W,$=c.map(ie=>{let{level:Te,gasPrice:De}=ie,{networkFee:Ze,networkFeeInt:x,networkFeeMarket:q}=fr({gasPrice:De,gasLimit:p,price:h,usdToThisRate:s?.usdToThisRate}),j={...ie,gasLimit:p,tokenPrice:h,networkFee:Ze,networkFeeInt:x,networkFeeMarket:q,currencySymbol:s?.symbol,label:T(co[Te]),usdToThisRate:s?.usdToThisRate,unitPriceDisplay:C(De)};return Te===Je.MEDIUM&&(W=j),j}),ne={...W},fe=!1,ve=L?.level;i?(ne={...i,...fr({gasLimit:p,price:h,gasPrice:i.gasPrice,usdToThisRate:s?.usdToThisRate})},fe=!0):ve===Je.CUSTOM&&(ne=[...f].pop()||W);let X={...ne,level:Je.CUSTOM,unitPriceDisplay:C(ne.gasPrice),label:T(co[Je.CUSTOM])};if($.push(X),v($),ve){let ie=$.find(Te=>Te.level===ve);a(yt(ie||W))}else a(fe?yt(X):yt(W))}},[p,c,Y,G]),(0,xr.useEffect)(()=>{let W=async()=>{let X=await E({to:e,from:t,coinId:r?.coinId,chainId:r?.chainId}),{solRent:ie}=X||{};a(Mo(ie)),a(yt(X))},$=async()=>{let X=await A({to:e,from:t,value:o,coinId:r?.coinId,chainId:r?.chainId,baseCoinId:r?.baseCoinId});a(yt(X))},ne=async()=>{let X=await w({to:e,chainId:r?.chainId,contractAddress:r?.address});a(yt(X))},fe=async()=>{let X=await F({coinId:r?.coinId,address:t});a(yt(X))},ve=async()=>{let X=await _({baseCoinId:r?.baseCoinId,coinId:r?.coinId,chainId:r?.chainId,from:t,to:e,tokenAddress:r?.address,decimals:r?.decimals,amount:o});a(yt(X))};r?.localType===ce?ne():r?.localType===Ce?W():r?.localType===We?$():r?.localType===ye?fe():r?.localType===ge&&ve()},[]),[l,f,b,U]};g();D();pe();var wd=S(Ee());je();var Fd=S(ee());var yd=t=>{let[e,r]=ft(),o=ud.filter(({value:s})=>!(t===ce&&s===de.RANDOM)).map(({label:s,value:i})=>({value:i,label:T(s)})),a=(0,wd.useMemoizedFn)((s={})=>{r({...e,...s})},[e]);return(0,Fd.useLayoutEffect)(()=>{t===ce&&e?.type===de.RANDOM&&r({type:de.CUSTOM})},[t]),[e,o,a]};g();D();var mo=S(ee()),Td=S(Ee());var f0=({dataSource:t,amountSetting:e,intervalSetting:r})=>{let{gotoSendPage:n}=Et(),o=(0,mo.useMemo)(()=>{if(!e)return!0;if(e.type===de.CUSTOM)return!e.amount&&e.amount!==0;if(e.type===de.RANDOM){let{min:l,max:f}=e;return!l||!f||Number(l)>Number(f)||Number(f)===0}return!1},[e]),a=(0,mo.useMemo)(()=>{if(!r)return!0;if(r.type===He.RANDOM){let{min:l,max:f}=r;return!l||!f||Number(l)>Number(f)}return!1},[r]),s=(0,mo.useMemo)(()=>t?.some(({error:l,tonMemoError:f})=>!!l||!!f),[t]),i=(0,mo.useMemo)(()=>o||a||s,[o,a,s]),c=(0,Td.useMemoizedFn)(()=>{Yi?.(),n()},[]);return[i,c]},_d=f0;g();D();var Mt={root:"_root_1mpnv_1",statistics:"_statistics_1mpnv_24",setting:"_setting_1mpnv_45",amount:"_amount_1mpnv_64",no_gas:"_no_gas_1mpnv_167",noGas:"_no_gas_1mpnv_167",interval:"_interval_1mpnv_257",gas:"_gas_1mpnv_440",address:"_address_1mpnv_531",footer:"_footer_1mpnv_611",alert:"_alert_1mpnv_682"};var d0=()=>{let{gotoAddressPage:t}=Et(),{isSm:e}=$e(),[r]=ue(),[n]=Ye(),[o]=Ae(),a=(0,Sd.useSelector)(lt),s=ya(),i=Bi(xi(o,"balance"))[0],c=![ye,Ce,We,ce,ge].includes(r?.localType),[l,f,v,h]=xd({...i,network:n,token:r,isEvmTransaction:c}),[m,p,u]=yd(r?.localType),{dataSource:C,columns:E}=Bd({token:r,network:n,amountSetting:m,networkFee:a}),[A={},F]=dt(),[w,_]=_d({dataSource:C,amountSetting:m,intervalSetting:A}),L=xa();return rt.default.createElement(_r,{footer:rt.default.createElement(y.Box,{className:Mt.footer},rt.default.createElement(te,{block:e,category:te.CATEGORY.outline,type:te.TYPE.primary,size:e?te.SIZE.lg:te.SIZE.xl,onClick:()=>{t()}},T("wallet_extension_footer_btn_back")),rt.default.createElement(te,{block:e,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:e?te.SIZE.lg:te.SIZE.xl,onClick:()=>{_(),Hi(s())},disabled:w||!a},T("wallet_extension_footer_btn_confirm"))),useOkg:!1},rt.default.createElement(y.Box,{className:(0,po.default)(Mt.root)},rt.default.createElement(bn,{title:T("wallet_extension_amount_title_input_amount"),subtitle:T("wallet_extension_amount_subtitle_input_number")}),rt.default.createElement(wa,{className:Mt.statistics,statistics:L}),rt.default.createElement(y.Box,{className:Mt.setting},rt.default.createElement(y.Box,{className:(0,po.default)(Mt.amount,{[Mt.no_gas]:!c})},rt.default.createElement(hd,{value:m,options:p,onChange:u})),rt.default.createElement(y.Box,{className:(0,po.default)(Mt.interval,{[Mt.no_gas]:!c})},rt.default.createElement(dd,{value:A,onChange:F})),c&&rt.default.createElement(y.Box,{className:Mt.gas},rt.default.createElement(cd,{loading:l,network:n,options:f,onChange:v,value:a,onCustomChange:h})))),rt.default.createElement(y.Box,{className:(0,po.default)(Mt.address)},r?.localType===ce&&m.type===de.ALL&&rt.default.createElement(Rn,{closable:!1,className:Mt.alert,title:T("wallet_extension_toast_zksync_max_num")}),rt.default.createElement(Fa,{dataSource:C,columns:E})))},bd=rt.default.memo(d0);g();D();var Dt=S(ee());pe();g();D();var bt=S(ee());pe();var ho=S(qe());je();g();D();var gt={root:"_root_a40u5_2",select:"_select_a40u5_67",titleBox:"_titleBox_a40u5_88",title:"_title_a40u5_88",tip:"_tip_a40u5_115",card:"_card_a40u5_131",icon:"_icon_a40u5_188",checkBox:"_checkBox_a40u5_204",check:"_check_a40u5_204",disabled:"_disabled_a40u5_220",active:"_active_a40u5_224",disabledContent:"_disabledContent_a40u5_227",name:"_name_a40u5_230",subtitle:"_subtitle_a40u5_237"};function m0(t){let{icon:e,name:r,mode:n,disable:o,active:a,onSelected:s,subtitle:i}=t,c=()=>{s(n);let l={[J.ONE_TO_MANY]:"1tomany",[J.MANY_TO_MANY]:"manytomany",[J.MANY_TO_ONE]:"manyto1"};Ui({button_name:l[n]})};return bt.default.createElement(y.Box,{className:(0,ho.default)(gt.card,{[gt.active]:a,[gt.disabled]:o}),onClick:c},bt.default.createElement("img",{src:e,height:72,alt:"",className:(0,ho.default)(gt.icon,{[gt.disabledContent]:o})}),bt.default.createElement(y.Box,{className:(0,ho.default)(gt.name,{[gt.disabledContent]:o})},r),i&&bt.default.createElement(y.Box,{className:(0,ho.default)(gt.subtitle,{[gt.disabledContent]:o})},i),a&&bt.default.createElement(y.Box,{className:gt.checkBox},bt.default.createElement(wr.Circle,{checked:!0})))}function p0(){let t=T("wallet_extension_type_title_transaction_method");return bt.default.createElement(y.FlexBox,{className:gt.titleBox,align:y.ALIGN.center},bt.default.createElement(y.Box,{className:gt.title},t))}function h0(t){let{mode:e,onSelected:r,selectedNetwork:n}=t,o=Ro({light:"/cdn/assets/imgs/235/15D8A8A385BD668B.png",dark:"/cdn/assets/imgs/245/A1F7D56C14F82C12.png"}),a=Ro({light:"/cdn/assets/imgs/235/3043DD8BFB521773.png",dark:"/cdn/assets/imgs/245/5BE287EAEC2D70D7.png"}),s=Ro({light:"/cdn/assets/imgs/235/A1F8C8D99B9BE99C.png",dark:"/cdn/assets/imgs/245/2815C6DD084226C7.png"}),i={[J.ONE_TO_MANY]:{mode:J.ONE_TO_MANY,icon:o,disable:n?.localType===ce,name:T("wallet_extension_type_pic_one_to_many")},[J.MANY_TO_ONE]:{mode:J.MANY_TO_ONE,icon:a,name:T("wallet_extension_type_pic_many_to_one")},[J.MANY_TO_MANY]:{mode:J.MANY_TO_MANY,icon:s,name:T("wallet_extension_type_pic_many_to_many")}};return bt.default.createElement(y.Box,{className:gt.root},bt.default.createElement(p0,null),bt.default.createElement(y.Box,{className:gt.select},Object.values(i).map((c,l)=>bt.default.createElement(m0,{key:l,onSelected:r,active:c.mode===e,...c}))))}var Od=h0;g();D();var Pe=S(ee()),ka=S(Ee()),si=S(qe()),Nd=S(Li());pe();Un();je();g();D();var ir={root:"_root_bnow7_1",title:"_title_bnow7_4",inputWrap:"_inputWrap_bnow7_22",option:"_option_bnow7_25",inputPopup:"_inputPopup_bnow7_37",show:"_show_bnow7_53",loadingWrap:"_loadingWrap_bnow7_56","select-up-active":"_select-up-active_bnow7_62",selectUpActive:"_select-up-active_bnow7_62","item-image":"_item-image_bnow7_66",itemImage:"_item-image_bnow7_66","arrow-down-icon":"_arrow-down-icon_bnow7_70",arrowDownIcon:"_arrow-down-icon_bnow7_70"};var v0="0x",g0=async(t,e)=>{try{return!Ku(e)||await t.getCode(e)===v0}catch{return!0}},D0=async(t,e)=>{let{ethers:r}=await Wn(),n=new r.Contract(t,Nd.default,e),[o,a,s]=await Promise.all([n.symbol(),(await n.decimals()).toString(),n.name()]);return{name:s,symbol:o,decimals:a}},ai=!1;function C0(t,e){let{value:r,options:n,disabled:o,selectedNetwork:a,onSelect:s,onInputChange:i,onCustomContractChange:c,refreshInfiniteScrollRef:l,tokensLoadingMore:f}=t,v=(0,Pe.useRef)(),[h,m]=(0,Pe.useState)(!1),[p,u]=(0,Pe.useState)(!1),[C,E]=(0,Pe.useState)(!1),[A,F]=(0,Pe.useState)(r?.address||""),w=G=>(ai=!0,E(!1),F(""),s(G?{...G,custom:!1}:null)),_=(0,ka.useMemoizedFn)(async({target:G})=>{F(G?.value)},[a?.rpcUrl]);(0,Pe.useEffect)(()=>{i?.(A)},[A,i]);let L=async()=>{let G=n.find(({address:M})=>!!A&&M===A);if(G)w(G);else if(!ai&&A&&![ye,Ce,We,ce,ge].includes(a?.localType)){let M=await Lo(a?.rpcUrl);if(await g0(M,A)===!1){let W=await D0(A,M);c?.({...W,address:A,custom:!0}),E(!1)}else E(!0),c?.(null)}ai=!1};(0,Pe.useEffect)(()=>{F(""),E(!1)},[a?.chainId]);let I=ct();(0,Pe.useEffect)(()=>{F(""),E(!1)},[I]);let k=A&&C,b=!!n?.length;(0,Pe.useEffect)(()=>{!h||(b?b&&u(!0):u(!1))},[b]),(0,Pe.useLayoutEffect)(()=>{p&&l?.()},[p,l]),(0,ka.useClickAway)(()=>{h&&m(!1),p&&u(!1)},v);let U=T("wallet_extension_type_placeholder_select_crypto");return Pe.default.createElement(y.Box,{className:ir.root},Pe.default.createElement(y.Box,{className:ir.title},T("wallet_extension_type_title_select_coin")),Pe.default.createElement("div",{className:ir.inputWrap},Pe.default.createElement(_e,{getBoxRef:G=>{v.current=G},style:{width:"100%"},error:k&&T("wallet_manage_crypto_custom_crypto_errortip_invalid_address"),placeholder:U,value:r&&r?.custom===!1?r?.symbol:A||r?.address,onChange:_,onBlur:()=>{L()},onFocus:()=>{m(!0),b&&u(!0)},size:_e.SIZE.xl,disabled:o,cleanable:!0,readonly:r&&r?.custom===!1&&"readonly",suffix:Pe.default.createElement(Ge,{className:(0,si.default)({[ir["select-up-active"]]:p}),icon:"okds-arrow-chevron-down-md",size:Ge.SIZE.xs}),onClear:()=>w(null)}),!!p&&Pe.default.createElement("div",{ref:e,className:(0,si.default)(ir.inputPopup,{[ir.show]:p})},n.map(G=>{let{image:M,imageUrl:Y,symbol:W}=G;return Pe.default.createElement("div",{className:ir.option,key:W,onClick:()=>{w(G)}},Pe.default.createElement(Ge,{className:ir.itemImage,src:M||Y,text:W,size:Ge.SIZE.md}),W)}),!!f&&Pe.default.createElement("div",{className:ir.loadingWrap},Pe.default.createElement(Ht.Circle,{size:Ht.SIZE.md})))))}var Id=Pe.default.forwardRef(C0);g();D();var nn=S(ee());pe();g();D();var Nn={"retina-border-basic":"_retina-border-basic_1vvj9_1",retinaBorderBasic:"_retina-border-basic_1vvj9_1",root:"_root_1vvj9_30",title:"_title_1vvj9_95",item:"_item_1vvj9_118",question:"_question_1vvj9_194",answer:"_answer_1vvj9_211"};g();D();var In=S(ee());g();D();var E0=t=>`${Nu()}${t}`,Pd=E0;pe();var Ld=()=>{let t=Pd("/cdn/assets/files/235/C7BA61E964654AF6.csv");return{questions:[{question:T("wallet_extension_faq_title_distinction"),answer:In.default.createElement("pre",null,T("wallet_extension_faq_text_one_to_many"))},{question:T("wallet_extension_sending_title_multisender_network"),answer:In.default.createElement("pre",null,T("wallet_extension_sending_subtitle_multisender_evm"))},{question:T("wallet_extension_faq_title_what_transfer"),answer:In.default.createElement("pre",null,T("wallet_extension_faq_text_transfer_definition"))},{question:T("wallet_extension_faq_title_how_transfer"),answer:In.default.createElement("pre",null,T("wallet_extension_faq_text_transfer_method",{btn:In.default.createElement(jn,{type:jn.TYPE.primary,href:t,weight:jn.WEIGHT.muted,size:jn.SIZE.sm},T("wallet_extension_multisender_btn_download"))}))}]}};function A0(){let t=T("wallet_extension_faq_maintitle_question"),{questions:e}=Ld();return nn.default.createElement(y.Box,{className:Nn.root},nn.default.createElement(y.Box,{className:Nn.title},t),nn.default.createElement(y.Box,null,e.map((r,n)=>nn.default.createElement(y.Box,{key:n,className:Nn.item},nn.default.createElement(y.Box,{className:Nn.question},r.question),nn.default.createElement(y.Box,{className:Nn.answer},r.answer)))))}var kd=A0;g();D();var Vt=S(ee()),Md=S(Tt()),Rd=S(Ee());pe();g();D();var $t={root:"_root_1jex4_2",footer:"_footer_1jex4_11",network:"_network_1jex4_80",networkTitle:"_networkTitle_1jex4_156",networkSelectBox:"_networkSelectBox_1jex4_175",networkSelect:"_networkSelect_1jex4_175",tokenSelect:"_tokenSelect_1jex4_221",icon:"_icon_1jex4_262",loader:"_loader_1jex4_265","network-icon":"_network-icon_1jex4_268",networkIcon:"_network-icon_1jex4_268"};var B0=()=>{let[t,e]=(0,Vt.useState)(!1),r=Qu(),[,n]=ue(),[,o]=Ae(),{isRpcMode:a,currentNetworkUniqueId:s}=(0,Md.useSelector)(bu),i=r.find(m=>a?m.uniqueId===s:m.netWorkId===s),[c,l]=Ye(i),f=(0,Vt.useMemo)(()=>r.map(m=>{let{chainId:p,icon:u,chainName:C,rpcUrl:E}=m;return{network:m,value:p,searchKeyword:C,label:Vt.default.createElement(y.FlexBox,{align:y.ALIGN.center,style:{height:"20px",width:"100%"}},Vt.default.createElement(y.FlexBox,{align:y.ALIGN.center,style:{flex:1}},c?.rpcUrl===E&&t?Vt.default.createElement(Ht,{className:$t.loader,size:Ht.SIZE.md}):Vt.default.createElement(Ge,{className:$t.networkIcon,src:u,text:C,size:Ge.SIZE.md}),C))}}),[r,c?.rpcUrl,t]),v=async m=>{try{e(!0),await(await Lo(m)).getFeeData()}catch{let u=Wr.warn({title:T("developer_mode_network_toast_connect_failed"),text:T("developer_mode_network_toast_changenetwork"),cancelText:T("wallet_extension_sending_btn_cancel"),confirmText:T("developer_mode_network_btn_retry"),confirmBtnProps:{type:te.TYPE.highlight,size:te.SIZE.lg},onCancel:()=>{u.destroy(),l(null)},onConfirm:()=>{u.destroy(),v(m)}})}finally{e(!1)}},h=(0,Rd.useMemoizedFn)(({network:m={},label:p,...u})=>{l({...m,...u}),m?.appBaseChain==="ethereum"?v(m.rpcUrl).then(()=>{n(null)}).catch(()=>{}):n(null),Wi(),o([])},[]);return(0,Vt.useEffect)(()=>{n(null)},[a]),[t,c,f,h]},jd=B0;g();D();var Ma=S(Ee());var zd=S(ee());var x0=t=>{let[e,r]=ue(),[n,o]=(0,zd.useState)(""),a=ct(),s=Ru(),{list:i,listRef:c,refreshDom:l,loadingMore:f}=Vf(t,n),v=async C=>{if(!C){r(null);return}let E=!C?.address,A=await Ri({coinId:C.coinId}),F;E?F=A:F=s.find(({coinId:_})=>_===C.baseCoinId);let{chainId:w}=t||{};A===null||!E&&F===null||r({chainId:w,...C,...A,baseCoin:E?void 0:F})},h=C=>{let E=!C?.address,{chainId:A}=t||{},F=s.find(({chainId:w})=>w===Cn(A));r({chainId:A,...C,baseCoin:E?void 0:F})},m=(0,Ma.useMemoizedFn)(C=>{v(C)}),p=(0,Ma.useMemoizedFn)(C=>{o(C)}),u=(0,Ma.useMemoizedFn)(C=>{h(C)});return[e,i,c,l,f,{onBatchTokenChange:a?u:m,onBatchCustomTokenChange:u,onInputChange:p}]},Wd=x0;var w0=()=>{let{isSm:t}=$e(),{gotoAddressPage:e}=Et(),[r,n]=it(),[o,a,s,i]=jd(),[c,l,f,v,h,{onBatchTokenChange:m,onBatchCustomTokenChange:p,onInputChange:u}]=Wd(a);return Dt.default.createElement(_r,{footer:Dt.default.createElement(y.FlexBox,{justify:"flex-end",className:$t.footer},Dt.default.createElement(te,{block:t,category:te.CATEGORY.fill,type:te.TYPE.highlight,size:t?te.SIZE.lg:te.SIZE.xl,disabled:!a?.chainId||!r||!c?.symbol,onClick:e},T("wallet_extension_footer_btn_next")))},Dt.default.createElement(y.Box,{className:$t.root},Dt.default.createElement(bn,{title:T("wallet_extension_type_title_select_type"),subtitle:T("wallet_extension_type_subtitle_select")}),Dt.default.createElement(y.Box,{className:$t.network},Dt.default.createElement(y.Box,{className:$t.networkSelectBox},Dt.default.createElement(y.Box,{className:$t.networkTitle},T("wallet_extension_type_title_select_internet")),Dt.default.createElement(Ga,{block:!0,placeholder:T("wallet_extension_type_placeholder_ethereum"),size:Ga.SIZE.xl,onChange:i,value:a?.chainId,options:s,className:$t.networkSelect,disabled:o,searchFocus:!1,searchPlaceholder:T("wallet_extension_sending_input_search_network"),scrollStyle:{height:360}})),Dt.default.createElement(y.Box,{className:$t.tokenSelect},Dt.default.createElement(Id,{ref:f,disabled:!a?.chainId,value:c,options:l,onSelect:m,onInputChange:u,onCustomContractChange:p,selectedNetwork:a,tokensLoadingMore:h,refreshInfiniteScrollRef:v}))),Dt.default.createElement(Od,{mode:r,selectedNetwork:a,onSelected:n}),Dt.default.createElement(kd,null)))},Ud=Dt.default.memo(w0);g();D();var nt=S(ee()),Lm=S(qe());st();g();D();var Mr={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",STATUS:"txStatus",HASH:"txHash",MEMO:"memo"},Ra=[{title:"wallet_extension_list_title_send_address",key:Mr.FROM,type:Ke.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:Mr.TO,type:Ke.ADDRESS},{title:"wallet_extension_list_title_amount",key:Mr.TX_AMOUNT,type:Ke.AMOUNT},{title:"wallet_extension_list_colheader_state",key:Mr.STATUS,type:Ke.STATUS},{title:"wallet_extension_list_colheader_hash",key:Mr.HASH,type:Ke.HASH,align:"center",width:"200px"}],ja={title:"wallet_extension_ton_header_comment",key:Mr.MEMO,type:Ke.MEMO};var ae={NONE:"NONE",SENDING:"SENDING",PAUSE:"PAUSE",FINISHED:"FINISHED",FAILED:"FAILED",CANCELED:"CANCELED",DONE:"DONE",BACK_TO_HOME:"BACK_TO_HOME"},Hd={[ae.SENDING]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_stop",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.PAUSE}],[ae.PAUSE]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_continue",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ae.SENDING}],[ae.CANCELED]:[{actionProps:{children:"wallet_extension_complete_btn_done",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ae.DONE}],[ae.FINISHED]:[{actionProps:{children:"wallet_transfer_success_btn_back_to_home",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.BACK_TO_HOME},{actionProps:{children:"wallet_extension_complete_btn_done",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ae.DONE}],[ae.FAILED]:[{actionProps:{children:"wallet_extension_failure_btn_cancel",category:te.CATEGORY.outline,type:te.TYPE.primary},actionType:ae.DONE},{actionProps:{children:"wallet_extension_failure_btn_restart_transaction",category:te.CATEGORY.fill,type:te.TYPE.highlight},actionType:ae.FAILED}]},Gd={[ae.SENDING]:{title:"wallet_extension_sending_title_sending",style:{color:"var(--okd-color-content-primary)"}},[ae.PAUSE]:{title:"wallet_extension_suspension_title_transaction_stop",style:{color:"var(--okd-color-content-primary)"}},[ae.FAILED]:{title:"wallet_extension_failure_title_fail_transaction",style:{color:"var(--okd-color-semantic-negative)"}},[ae.FINISHED]:{title:"wallet_extension_complete_title_complete_transaction",style:{color:"var(--okd-color-semantic-positive)"}}};je();zn();Hn();g();D();var on=S(ee());pe();g();D();var Ue={root:"_root_edfdl_1",header:"_header_edfdl_24",content:"_content_edfdl_24",alert:"_alert_edfdl_28",statistics:"_statistics_edfdl_57",address:"_address_edfdl_73",footer:"_footer_edfdl_100",loadingIcon:"_loadingIcon_edfdl_171",pauseLoadingIcon:"_pauseLoadingIcon_edfdl_186",finished:"_finished_edfdl_190",finishedIcon:"_finishedIcon_edfdl_193",failed:"_failed_edfdl_197",failedIcon:"_failedIcon_edfdl_200",sendError:"_sendError_edfdl_204",warning:"_warning_edfdl_207",export:"_export_edfdl_214",exportIcon:"_exportIcon_edfdl_239",finishedConfirm:"_finishedConfirm_edfdl_243","status-icon":"_status-icon_edfdl_285",statusIcon:"_status-icon_edfdl_285","status-icon-pause":"_status-icon-pause_edfdl_298",statusIconPause:"_status-icon-pause_edfdl_298","status-title":"_status-title_edfdl_301",statusTitle:"_status-title_edfdl_301","status-desc-text":"_status-desc-text_edfdl_310",statusDescText:"_status-desc-text_edfdl_310","status-desc-container":"_status-desc-container_edfdl_326",statusDescContainer:"_status-desc-container_edfdl_326","result-main":"_result-main_edfdl_335",resultMain:"_result-main_edfdl_335"};g();D();var vo=S(ee());pe();var Yd=({onExport:t,isFinished:e,isSm:r})=>vo.default.createElement(y.Box,{className:Ue.warning},e&&vo.default.createElement(y.Box,{className:Ue.export,onClick:t},vo.default.createElement(Ge,{size:Ge.SIZE.sm,icon:"okx-wallet-plugin-export"}),vo.default.createElement(y.Box,null,T("wallet_extension_complete_btn_export_transaction"))),!e&&!r&&T("wallet_extension_sending_text_no_close_page"));var F0=({onExport:t,onSendStatusChange:e,sendStatus:r=ae.SENDING})=>{let{isSm:n}=$e(),o=Hd[r],a=r===ae.FINISHED,s=a?y.Box:on.default.Fragment;return on.default.createElement(y.FlexBox,{align:y.ALIGN.center,className:Ue.footer},on.default.createElement(Yd,{onExport:t,isFinished:a,isSm:n}),o.map(({actionProps:{children:i,...c},actionType:l})=>on.default.createElement(s,{className:n&&Ue.finishedConfirm},on.default.createElement(te,{block:n,...c,size:n?te.SIZE.lg:te.SIZE.xl,onClick:()=>{e?.(l)}},T(i)))))},qd=on.default.memo(F0);g();D();var Kt=S(ee()),$d=S(qe());pe();var y0=({sendStatus:t})=>{if([ae.SENDING,ae.PAUSE].includes(t))return Kt.default.createElement(Ht,{loaderClassName:(0,$d.default)(Ue.loadingIcon,{[Ue.pauseLoadingIcon]:t===ae.PAUSE})});let e={className:Ue["status-icon"]};return t===ae.FAILED?e=Object.assign(e,{icon:"okds-fail-circle",style:{color:"var(--okd-color-semantic-negative)"}}):t===ae.FINISHED&&(e=Object.assign(e,{icon:"okds-success-circle",style:{color:"var(--okd-color-semantic-positive)"}})),Kt.default.createElement(Ge,{...e})},T0=({sendStatus:t,sendResult:e=[]})=>{let{isSm:r}=$e(),{title:n,style:o}=Gd[t],a=T(n),s=(0,Kt.useMemo)(()=>Kt.default.createElement(xe.Text,{strong:700,style:o,className:Ue["status-title"]},a),[o,a]);return Kt.default.createElement(y.Space,{className:Ue["result-main"],space:r?"16px":"22px",align:y.ALIGN.center,direction:r?y.DIRECTION.vertical:y.DIRECTION.horizontal},Kt.default.createElement(y0,{sendStatus:t}),Kt.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"8px"},s,Kt.default.createElement(y.Space,{space:r?"4px":"8px",direction:r?y.DIRECTION.vertical:y.DIRECTION.horizontal,className:Ue["status-desc-container"]},e.map(({title:i,args:c,style:l})=>Kt.default.createElement(xe.Text,{key:i,style:l,className:Ue["status-desc-text"]},T(i,c))))))},Vd=T0;g();D();var go=S(ee());pe();function _0({sendStatus:t}){let{isSm:e}=$e(),[r,n]=(0,go.useState)(!0),o=eu.FINISHED===t,a=T("wallet_extension_sending_text_no_close_page"),s=e&&r&&!o;return go.default.createElement(y.Box,{className:Ue.alert},s?go.default.createElement(Rn,{desc:a,type:Rn.TYPE.info,onClose:()=>{n(!1)}}):null)}var Kd=_0;g();D();var Zd=S(ee());pe();je();var S0=()=>{let[t]=ue(),[e=[]]=Ae(),r=e.map((s,i)=>({...s,showShortAddress:!0,showTextOneLine:!0,order:i+1,index:i,txAmount:H.truncate(H.div(s?.txAmount,10**(t?.decimals??18)),6,!1)})),n=(0,Zd.useMemo)(()=>({[Mr.FROM]:{showOrder:!0,isFromAddress:!0}}),[]),o=[...Ra];t?.localType===ge&&o.splice(2,0,ja);let a=o.map(s=>{let{title:i,key:c,type:l,...f}=s;return{title:T(i),dataIndex:c,key:c,render:Na(ba[l],n[c]),...f}});return{dataSource:r,columns:a}},Xd=S0;g();D();var ii=S(ee());pe();var Jd=({sendStatus:t,sendAddress:e=[]})=>{let r=(0,ii.useMemo)(()=>{let n=0,o=0,a=0,s=e?.length;return e.forEach(({txStatus:i})=>{i===re.FAILED&&n++,i===re.SUCCEED&&o++,i===re.PENDING&&a++}),{total:s,failed:n,success:o,notExecuted:s-n-a-o}},[e]);return(0,ii.useMemo)(()=>{if(t===ae.FAILED)return[{title:"wallet_extension_failure_subtitle_fail_resend"}];let{total:n,failed:o,success:a,notExecuted:s}=r,i=[{title:"wallet_extension_multisender_text_success_transaction",args:{amount:H.thousandFormat(a)}}];return o>0&&i.push({title:"wallet_extension_multisender_text_failed_transaction",args:{amount:H.thousandFormat(o)},style:{color:"var(--okd-color-semantic-negative)"}}),t===ae.FINISHED?s>0&&i.push({title:"wallet_extension_multisender_text_not_executed_transaction",args:{amount:H.thousandFormat(s)}}):i.push({title:"wallet_extension_multisender_text_total_transaction",args:{amount:H.thousandFormat(n)}}),i},[t,r])};g();D();var sn=S(ee()),Tm=S(Tt()),_m=S(ts()),Sm=S(Ee());je();g();D();var mm=S(Ee());g();D();var Pn=S(ee()),Ln=S(Tt()),an=S(Ee());pe();Ka();Zm();je();g();D();var b0=async(t,e,r)=>{let n;try{if(n=await t.getTransactionReceipt(e),n?.status===0)throw new Error("Transaction failed")}catch(o){if(o?.error?.data!=="transaction indexing is in progress")throw o}for(;!n?.blockNumber&&r?.current&&!r.current.isCancelled;)try{await new Promise(o=>setTimeout(o,5e3)),n=await t.getTransactionReceipt(e)}catch(o){if(o?.error?.data!=="transaction indexing is in progress")throw o}return n},Qd=b0;g();D();st();qm();var em=({address:t,localType:e,contractAddress:r,symbol:n,errorMsg:o,txParams:a})=>{try{ci.captureEvent({tags:{address:t},message:"BIZ_ERROR_batch_transfer_publish",contexts:{report:{info:JSON.stringify({address:t,localType:e,contractAddress:r,symbol:n,txParams:a,errorMsg:o})}},exception:{values:[{type:"BIZ_ERROR_batch_transfer_publish",value:t}]},level:"error"})}catch{fi()}};g();D();var tm=S(Ee());zn();Hn();var rm=S(ee()),O0=()=>{let t=(0,rm.useRef)();return(0,tm.useMemoizedFn)(e=>new Promise(r=>{let n=async()=>{let{data:o}=await Xt(Zt.batchGetTxStatus,{txHashList:[e]}),a=o[e];["SUCCESS","ERROR"].includes(a)&&(r(a),clearInterval(t.current))};t.current=setInterval(()=>{n()},2e3)}))},za=O0;g();D();var nm=S(Ee());var N0=t=>{let e=qr(t);return(0,nm.useMemoizedFn)(async r=>await(await e()).getTransactionCount(r,"latest"),[e])},om=N0;g();D();var am=S(Ee());je();var I0=()=>{let t=Ct(),e=gn(Ce);return(0,am.useMemoizedFn)(async()=>{let{recentBlockhash:r}=await t({isBatch:!0,coinId:cr,address:e});return r})},sm=I0;var P0=({selectedNetworkFee:t,injectGasPrice:e})=>{let r=e?.gasPrice||t?.gasPrice,n=e?.maxFeePerGas||t?.maxFeePerGas,o=e?.maxPriorityFeePerGas||t?.maxPriorityFeePerGas;return{gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:o}},im=t=>{let e=qr(t),[r]=it(),n=(0,Pn.useRef)(!1),o=(0,Pn.useRef)({}),[a]=ue(),[s]=Ye(),i=om(t),c=$o(t),l=(0,Pn.useRef)({isCancelled:!1});(0,Pn.useEffect)(()=>()=>{l.current={isCancelled:!0}},[]);let f=Zu(),[v]=An(),h=(0,Ln.useSelector)(lt),m=Mu(),p=(0,Ln.useSelector)(uu);n.current=p,o.current=h;let u=ct(),C=(0,Ln.useSelector)(vn);return(0,an.useMemoizedFn)(async({to:E,from:A,value:F,usedBalance:w,balance:_,baseCoinBalance:L,transferAmountType:I,gasPrice:k})=>{let b=null,U=n.current||!1,G=null;try{let M=F,Y=await e(),{chainId:W}=s,$=_t(a),ne=A&&Qe(A,a?.localType),fe=E&&Qe(E,a?.localType),ve=await m(Qe(a?.address,a?.localType),ne,Y)||_,X=await c({to:fe,from:ne,value:F},Qe(a?.address,a?.localType));u&&(X=H.ceilMul(X,C?.gasLimit,0));let ie=await i(ne),Te=o.current,{gasPrice:De,maxFeePerGas:Ze,maxPriorityFeePerGas:x}=P0({selectedNetworkFee:Te,injectGasPrice:k}),{networkFeeInt:q}=fr({gasPrice:De,gasLimit:X}),j={to:E,from:A,value:F,nonce:ie,chainId:W,gasLimit:X,supportEip1559:v,contractAddress:Qe(a?.address,a?.localType),localType:a?.localType};if(v?j={maxFeePerGas:Ze,maxPriorityFeePerGas:x,type:Za.FEE_MARKET,...j}:j={gasPrice:De,type:Za.LEGACY,...j},G=Wo({to:E,from:A,value:F,nonce:ie,chainId:W,gasLimit:X,gasPrice:De,maxFeePerGas:Ze,supportEip1559:v,maxPriorityFeePerGas:x,contractAddress:Qe(a?.address,a?.localType),localType:a?.localType}),U){let he=await f({...G,coinId:a?.coinId});q=H.add(q,he)}$&&r!==J.ONE_TO_MANY&&I===de.ALL&&(M=H.sub(ve,q),G=Wo(Object.assign(j,{value:M}))),$&&r===J.ONE_TO_MANY&&I===de.ALL&&(M=H.sub(w,q),G=Wo(Object.assign(j,{value:M})));let K=Yr({isBaseCoin:$,balance:ve,baseCoinBalance:L,txAmount:j?.value,networkFee:q}),le=await Ju(ne);if(!K||!le)return{to:E,from:A,txStatus:re?.FAILED};b=await jo(G,ko(G?.from,a.localType),Vi(a.localType));let oe=await Vn(Ni,b);return await Y.send("eth_sendRawTransaction",[b]),await Qd(Y,oe,l),{to:E,from:A,txHash:oe,txAmount:M,txStatus:re?.SUCCEED}}catch(M){return em({address:A,localType:s?.localType,contractAddress:Qe(a?.address,a?.localType),symbol:a?.symbol,errorMsg:M?.message,txParams:G}),{to:E,from:A,txStatus:re?.FAILED,errorMsg:M.message}}},[e])},um=()=>{let[t]=ue(),[e]=it(),r=Gr({localType:Ce,coinId:t?.coinId}),n=sm(),o=Vo(),a=(0,Ln.useSelector)(lt);return(0,an.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,usedBalance:f,baseCoinBalance:v,transferAmountType:h})=>{try{let m=c,p=_t(t),u=await n(),C=await o({coinId:t?.coinId,chainId:t?.chainId,to:s,from:i}),{toAddressLegal:E}=C,A=!E,F=C||a||{},{computeUnitLimit:w,computeUnitPrice:_,networkFeeInt:L}=F;h===de.ALL&&p&&e!==J.ONE_TO_MANY&&(m=H.sub(l,L)),h===de.ALL&&p&&e===J.ONE_TO_MANY&&(m=H.sub(f,L));let I={to:s,from:i,blockHash:u,payer:i,computeUnitLimit:w,computeUnitPrice:_,amount:m,type:p?Xa.TRANSFER:Xa.TOKEN_TRANSFER};if(t?.baseCoinId!==0&&Object.assign(I,{mint:t.address,createAssociatedAddress:A}),t?.protocolType===Gn.SPL_TOKEN_2022&&Object.assign(I,{token2022:!0,decimal:t?.decimals}),!Yr({isBaseCoin:p,balance:l,baseCoinBalance:v,txAmount:m,networkFee:L}))return{to:s,from:i,txStatus:re?.FAILED};let b=await jo(I,i,Ce),U=await Vn(Ce,b);return await r(b,{txHash:U,signedTx:b,toAdr:s,fromAdr:i,coinAmount:m,serviceCharge:L,walletId:void 0}),{to:s,from:i,txHash:U,txAmount:m,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})},lm=()=>{let[t]=ue(),[e]=it(),r=vl(t?.coinId),n=gl(t?.coinId),o=qo(),a=za();return(0,an.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,usedBalance:f,baseCoinBalance:v,transferAmountType:h})=>{try{let m=c,p=_t(t),u=await o({to:s,from:i,value:c,coinId:t?.coinId,baseCoinId:t?.baseCoinId});if(h===de.ALL&&p&&e!==J.ONE_TO_MANY&&(m=H.sub(l,u)),h===de.ALL&&p&&e===J.ONE_TO_MANY&&(m=H.sub(f,u)),!Yr({isBaseCoin:p,balance:l,baseCoinBalance:v,txAmount:m,networkFee:u}))return{to:s,from:i,txStatus:re?.FAILED};let{tx:E,txBytes:A,signedTx:F}=await r({to:s,from:i,value:c,coinId:t?.coinId,baseCoinId:t?.baseCoinId}),{hash:w}=F||{};return await n({tx:E,txBytes:A,to:s,from:i,coinAmount:c,signedTx:F}),e===J.ONE_TO_MANY&&await a(w)==="ERROR"?{to:s,from:i,txStatus:re?.FAILED}:{to:s,from:i,txHash:w,txAmount:m,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})},cm=()=>{let[t]=ue(),[e]=it(),r=Ct(),n=Gr({localType:ce,coinId:t?.coinId}),o=(0,Ln.useSelector)(lt),a=Ko(t?.coinId);return(0,an.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,baseCoinBalance:f,transferAmountType:v})=>{try{let h=c,m=_t(t),p=await r({value:"0",toAddr:s,address:i,fromAddr:i,coinId:t?.coinId}),{accountId:u,nonce:C}=p||{},A=await a({to:s,chainId:t?.chainId,contractAddress:t?.address})||o||{},{networkFeeInt:F}=A;v===de.ALL&&m&&e!==J.ONE_TO_MANY&&(h=H.sub(l,F));let w={to:s,from:i,type:"transfer",fees:F,amounts:h,decimals:t?.decimals,nonce:parseInt(C,10),accountId:parseInt(u,10),tokenSymbol:t?.originSymbol,tokenId:parseInt(t?.tokenId,10)};if(!Yr({isBaseCoin:m,balance:l,baseCoinBalance:f,txAmount:h,networkFee:F}))return{to:s,from:i,txStatus:re?.FAILED};let L=await jo(w,i,ce);if(L?.code)return{to:s,from:i,txStatus:re?.FAILED};let{signature:I,tx:k}=L,{txHash:b,...U}=k||{};return await n(JSON.stringify({signature:I,tx:U}),{txHash:b,signedTx:L,toAdr:k?.to,fromAdr:i,coinAmount:h,serviceCharge:k?.fee,walletId:void 0,extJson:JSON.stringify({serviceChargeCoinId:t?.coinId})}),{to:s,from:i,txHash:b,txAmount:h,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})},fm=()=>{let[t]=ue(),[e]=it(),r=pl(),n=Gr({localType:ye,coinId:t?.coinId}),o=Yo(),a=za();return(0,an.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,usedBalance:f,baseCoinBalance:v,transferAmountType:h})=>{try{let m=c,p=t?.baseCoinId===0,{tyArg:u,chainId:C,networkFee:E,sequenceNumber:A,maxGasAmount:F,gasUnitPrice:w,expirationTimestampSecs:_}=await o({address:i,coinId:t?.coinId});if(h===de.ALL&&p&&e!==J.ONE_TO_MANY&&(m=H.sub(l,E)),h===de.ALL&&p&&e===J.ONE_TO_MANY&&(m=H.sub(f,E)),!Yr({isBaseCoin:p,balance:l,baseCoinBalance:v,txAmount:m,networkFee:E}))return{to:s,from:i,txStatus:re?.FAILED};let I=await r({to:s,from:i,tyArg:u,chainId:C,gasUnitPrice:w,maxGasAmount:F,sequenceNumber:A,amount:m,coinId:t?.coinId,expirationTimestampSecs:_,baseCoinId:t?.baseCoinId,metaAddress:t?.address,protocolType:t?.protocolType}),k=await Vn(ye,I);return await n(I,{txHash:k,signedTx:I,toAdr:s,fromAdr:i,coinAmount:m,serviceCharge:E,walletId:void 0,extJson:JSON.stringify({nonce:A})}),e===J.ONE_TO_MANY?(await a(k),{to:s,from:i,txHash:k,txAmount:m,txStatus:re?.SUCCEED}):{to:s,from:i,txHash:k,txAmount:m,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})};function dm(){let[t]=ue(),[e]=it(),r=Zo(),n=Dn({localType:ge}),o=Gr({coinId:t?.coinId,localType:ge}),a=za();return(0,an.useMemoizedFn)(async({to:s,from:i,amount:c,balance:l,usedBalance:f,baseCoinBalance:v,transferAmountType:h,memo:m,isLast:p})=>{try{let u=t?.baseCoinId===0,C;(e===J.MANY_TO_MANY||e===J.MANY_TO_ONE||e===J.ONE_TO_MANY&&p)&&h===de.ALL?C=Fr.CARRY_ALL_REMAINING_BALANCE:C=Fr.PAY_GAS_SEPARATELY+Fr.IGNORE_ERRORS;let{signInfo:E,gasLimitInfo:A,bodyParams:F,networkFeeInt:w}=await r({baseCoinId:t.baseCoinId,coinId:t.coinId,chainId:t.chainId,from:i,to:s,tokenAddress:t.address,decimals:t.decimals,amount:c,sendMode:C,memo:m}),_=c,L;h===de.ALL&&u&&e!==J.ONE_TO_MANY&&(_=H.sub(l,w)),h===de.ALL&&u&&e===J.ONE_TO_MANY&&(_=H.sub(f,w),p&&(L="0"));let{minTonLimit:I}=E||{},k=F;if(u?k={...k,amount:_}:(k={...k,messageAttachedTons:I,invokeNotificationFee:A?.invokeNotificationFee},E?.customPayload&&(k={...k,customPayload:E?.customPayload,stateInit:E?.stateInit})),!Yr({isBaseCoin:u,balance:l,baseCoinBalance:v,txAmount:_,networkFee:w}))return{to:s,from:i,txStatus:re?.FAILED};let G=(await n({params:k,fromAddr:i}))?.boc,M=await Vn(ge,G);return await o(G,{coinAmount:L||_,fromAdr:i,toAdr:s,serviceCharge:w,txHash:M,extJson:JSON.stringify({nonce:k.seqno,isClaim:!!k.customPayload}),walletId:void 0,memo:k.memo}),e===J.ONE_TO_MANY?(await a(M),{to:s,from:i,txHash:M,txAmount:_,txStatus:re?.SUCCEED}):{to:s,from:i,txHash:M,txAmount:_,startTime:Date.now(),txStatus:re?.PENDING}}catch{return{to:s,from:i,txStatus:re?.FAILED}}})}g();D();g();D();var ur={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},Do=class{constructor(e){Ut(this,"status",ur.uninitialized);Ut(this,"nextInfo",null);Ut(this,"cb",null);Ut(this,"args",[]);Ut(this,"next",(...e)=>{[ur.waiting,ur.canceled,ur.paused].includes(this.status)||!this.cb||(e.length>0&&(this.args=e),this.nextInfo=this.generator(this.execute,...this.args),this.status=ur.waiting,this.nextInfo.execute())});Ut(this,"execute",()=>{this.status=ur.working,this.cb?.(this.next)});Ut(this,"cancel",()=>{this.status=ur.canceled,this.nextInfo?.cancel?.(),this.cb=void 0});Ut(this,"pause",()=>{this.status=ur.paused,this.nextInfo?.pause?.()});Ut(this,"start",(e,...r)=>{this.cb=e,r.length>0&&(this.args=r),this.next()});Ut(this,"continue",()=>{this.status=ur.initialized,this.next()});this.generator=e,this.status=ur.initialized,this.nextInfo=null,this.cb=null}};function L0(t){let e=(r,n)=>{let o;return{execute:()=>{o=setTimeout(r,n??t??0)},cancel:()=>{clearTimeout(o)},pause:()=>{clearTimeout(o)}}};return new Do(e)}var Rt=L0;var pm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=fm();return(0,mm.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:c}=t,l=r.map(v=>{let{to:h,from:m,txAmount:p,id:u}=v;return{to:h,from:m,interval:s===He.NONE?100:wt(i,c,0)*1e3,request:async()=>o({...v,amount:p,transferAmountType:e.type}),id:u}}),f=Rt();return f.start(async v=>{let h=l[a];if(h)try{n({to:h?.to,from:h?.from,txStatus:re.PENDING,id:h?.id});let{txStatus:m,txHash:p,from:u,startTime:C,txAmount:E}=await h.request();n({from:u,startTime:C,to:h?.to,txStatus:m,txAmount:E,txHash:p,id:h?.id})}catch(m){console.log(m)}finally{a++,v(h.interval)}}),f},[])};g();D();var hm=S(Tt()),vm=S(Ee());var gm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=im(),a=(0,hm.useSelector)(lt),s=a?.level===Je.CUSTOM;return(0,vm.useMemoizedFn)(async()=>{let i=0,{type:c,min:l,max:f}=t,v=r.map(m=>{let{to:p,from:u,txAmount:C,id:E}=m;return{to:p,from:u,interval:c===He.NONE?100:wt(l,f,0)*1e3,request:async()=>o({...m,from:u,value:C,transferAmountType:e.type,gasPrice:s?a:{}}),id:E}}),h=Rt();return h.start(async m=>{let p=v[i];if(p)try{n({to:p?.to,from:p?.from,txStatus:re.PENDING,id:p?.id});let{txStatus:u,txHash:C,from:E,txAmount:A,errorMsg:F}=await p.request();n({from:E,to:p?.to,txStatus:u,txHash:C,txAmount:A,id:p?.id,errorMsg:F})}finally{i++,m(p.interval)}}),h},[])};g();D();var Dm=S(Ee());var Cm=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=um();return(0,Dm.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:c}=t,l=r.map(v=>{let{to:h,from:m,txAmount:p,id:u}=v;return{to:h,from:m,interval:s===He.NONE?100:wt(i,c,0)*1e3,request:async()=>o({...v,amount:p,transferAmountType:e.type}),id:u}}),f=Rt();return f.start(async v=>{let h=l[a];if(h)try{n({to:h?.to,from:h?.from,txStatus:re.PENDING,id:h?.id});let{txStatus:m,txHash:p,from:u,startTime:C,txAmount:E}=await h.request();n({from:u,startTime:C,to:h?.to,txStatus:m,txAmount:E,txHash:p,id:h?.id})}catch(m){console.log(m)}finally{a++,v(h.interval)}}),f},[])};g();D();var Em=S(Ee());var Am=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=lm();return(0,Em.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:c}=t,l=r.map(v=>{let{to:h,from:m,txAmount:p,id:u}=v;return{to:h,from:m,interval:s===He.NONE?100:wt(i,c,0)*1e3,request:async()=>o({...v,amount:p,transferAmountType:e.type}),id:u}}),f=Rt();return f.start(async v=>{let h=l[a];if(h)try{n({to:h?.to,from:h?.from,txStatus:re.PENDING,id:h?.id});let{txStatus:m,txHash:p,from:u,startTime:C,txAmount:E}=await h.request();n({from:u,startTime:C,to:h?.to,txStatus:m,txAmount:E,txHash:p,id:h?.id})}catch(m){console.log(m)}finally{a++,v(h.interval)}}),f},[])};g();D();var Bm=S(ee()),xm=S(Ee());function wm(){let[t]=it(),[e]=dt(),[r]=ft(),[n,o]=Ae(),a=dm(),s=(0,Bm.useRef)(-1);return(0,xm.useMemoizedFn)(async()=>{let i=0,{type:c,min:l,max:f}=e,v=n.map((m,p)=>{let{to:u,from:C,txAmount:E,id:A}=m;return{to:u,from:C,interval:c===He.NONE?100:wt(l,f,0)*1e3,request:async()=>a({...m,amount:E,transferAmountType:r.type,isLast:p===n.length-1}),id:A}}),h=Rt();return h.start(async m=>{let p=v[i];if(p){if(t===J.ONE_TO_MANY&&s.current===i)return;s.current=i;try{o({to:p?.to,from:p?.from,txStatus:re.PENDING,id:p?.id});let{txStatus:u,txHash:C,from:E,startTime:A,txAmount:F}=await p.request();o({from:E,startTime:A,to:p?.to,txStatus:u,txAmount:F,txHash:C,id:p?.id})}catch(u){console.log(u)}finally{s.current=-1,i++,m(p.interval)}}}),h},[])}g();D();var Fm=S(Ee());var ym=()=>{let[t]=dt(),[e]=ft(),[r,n]=Ae(),o=cm();return(0,Fm.useMemoizedFn)(async()=>{let a=0,{type:s,min:i,max:c}=t,l=r.map(v=>{let{to:h,from:m,txAmount:p,id:u}=v;return{to:h,from:m,interval:s===He.NONE?100:wt(i,c,0)*1e3,request:async()=>o({...v,amount:p,transferAmountType:e.type}),id:u}}),f=Rt();return f.start(async v=>{let h=l[a];if(h)try{n({to:h?.to,from:h?.from,txStatus:re.PENDING,id:h?.id});let{txStatus:m,txHash:p,from:u,startTime:C,txAmount:E}=await h.request();n({from:u,startTime:C,to:h?.to,txStatus:m,txAmount:E,txHash:p,id:h?.id})}catch(m){console.log(m)}finally{a++,v(h.interval)}}),f},[])};var bm=t=>{let[e]=ue(),r=(0,_m.useHistory)(),n=(0,Tm.useDispatch)(),o=ll(),a=(0,sn.useRef)(),[s,i]=(0,sn.useState)(ae.SENDING),c=ml(),l=gm(s,e?.localType),f=Cm(s,e?.localType),v=Am(),h=ym(),m=pm(),p=wm(),u=l;e?.localType===Ce?u=f:e?.localType===We?u=v:e?.localType===ce?u=h:e?.localType===ye?u=m:e?.localType===ge&&(u=p),(0,sn.useEffect)(()=>{let A=!t.some(({txStatus:w})=>w!==re.FAILED),F=!t.some(({txStatus:w})=>w===re.PENDING||!w);A?i(ae.FAILED):F&&i(ae.FINISHED)},[t]);let C=()=>{u().then(A=>{a.current=A}).catch(A=>{console.log(A)})};(0,sn.useEffect)(()=>{C()},[]);let E=(0,Sm.useMemoizedFn)(async A=>{A===ae.DONE?o():A===ae.PAUSE?(a.current?.pause(),i(ae.PAUSE)):A===ae.CANCELED?(a.current?.cancel(),i(ae.FINISHED)):A===ae.SENDING?(a.current?.continue(),i(ae.SENDING)):A===ae.FINISHED?i(ae.FINISHED):A===ae.FAILED?(a.current?.cancel(),c(),i(ae.SENDING),C()):A===ae.BACK_TO_HOME&&(r.replace(Hr),n(yu()))},[]);return[s,E]};g();D();var ui=S(ee()),Im=S(Ee());st();pe();g();D();var Om=S(Xu()),k0=(t,e)=>{let r=window.URL||window.webkitURL||window,n=r.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=e,o.click(),r.revokeObjectURL(n)},M0=(t=[],e="result.csv",r)=>{let n=Om.default.unparse(t,r),o="\uFEFF",a=new Blob([`${o}${n}`],{type:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"});k0(a,e)},Nm=M0;je();function R0(t=[]){let[e]=ue(),r=(0,ui.useMemo)(()=>{let s=[...Ra];return e?.localType===ge&&s.splice(2,0,ja),s},[e?.localType]),n=(0,ui.useMemo)(()=>r.map(({key:s})=>s),[]),o=(0,Im.useMemoizedFn)(s=>{let i=T("wallet_extension_multisender_colbody_success"),c=T("wallet_extension_multisender_colbody_fail");switch(s){case re.SUCCEED:return i;case re.FAILED:case re.DROPPED:return c;default:return"-"}});return()=>{let s=`${T("wallet_extension_multisender_colheader_history")}.csv`,i=t.map(f=>{let v={...f,txAmount:H.thousandFormat(f.txAmount??0),txStatus:o(f.txStatus),memo:f.memo||""};return Object.values(Ei(v,n))}),l={fields:r.map(f=>T(f.title)),data:i};Nm(l,s)}}var Pm=R0;var j0={ERROR:re.FAILED,SUCCESS:re.SUCCEED},z0=()=>{let t=(0,nt.useRef)(),e=(0,nt.useRef)(),[r]=ue(),[n=[],o]=Ae(),{dataSource:a,columns:s}=Xd(),{isSm:i}=$e(),[c,l]=bm(a),f=Pm(a),v=Jd({sendStatus:c,sendAddress:a}),h=xa(),m=ya(),p=(0,nt.useMemo)(()=>kn(pi(n,({txStatus:C,txHash:E})=>E&&C===re.PENDING),"txHash"),[n]),u=async()=>{let{data:C}=await Xt(Zt.batchGetTxStatus,{txHashList:e.current});C&&Object.keys(C).forEach(E=>{let A=C[E];["SUCCESS","ERROR"].includes(A)&&o({txHash:E,txStatus:j0[A]})})};return(0,nt.useEffect)(()=>(t.current=setInterval(()=>{e.current?.length&&u()},2e3),()=>{clearInterval(t.current)}),[]),(0,nt.useEffect)(()=>{[ye,Ce,We,ce,ge].includes(r?.localType)&&(e.current=p)},[r?.localType,p]),(0,nt.useEffect)(()=>{(c===ae.FINISHED||c===ae.FAILED)&&Gi(m())},[c]),nt.default.createElement(_r,{footer:nt.default.createElement(qd,{sendStatus:c,onSendStatusChange:l,onExport:f}),useOkg:!1,headerProps:{className:(0,Lm.default)(Ue.header,Ue.content)}},nt.default.createElement(y.Box,{className:Ue.root},nt.default.createElement(Kd,{sendStatus:c}),nt.default.createElement(Vd,{sendStatus:c,sendResult:v}),nt.default.createElement(wa,{className:Ue.statistics,statistics:h})),nt.default.createElement(y.Box,{className:Ue.address},nt.default.createElement(Fa,{dataSource:a,columns:s,scroll:{x:i}})))},km=nt.default.memo(z0);var ok=()=>{let[t]=ue(),e=(0,Wa.useDispatch)(),r=El(),n=(0,Wa.useSelector)(lt),o=ct(),a=Ji(),s=t?.chainId;return(0,Mm.useAsyncEffect)(async()=>{if(o&&s){let i=await a(s);e(Su(i))}},[s,o]),(0,Rr.useEffect)(()=>{if(![ye,Ce,We,ce,ge].includes(t?.localType)&&r?.length&&n?.level){let{gasLimit:i,tokenPrice:c,usdToThisRate:l}=n,f=r.find(({level:v})=>v===n?.level);if(f){let{gasPrice:v}=f,{networkFee:h,networkFeeInt:m,networkFeeMarket:p}=fr({gasPrice:v,gasLimit:i,price:c,usdToThisRate:l});e(yt({...n,...f,networkFee:h,networkFeeInt:m,networkFeeMarket:p,unitPriceDisplay:Ti(v)}))}}},[e,r,t?.localType]),Rr.default.createElement(un.Switch,null,Rr.default.createElement(un.Route,{path:Hr,component:Ud,exact:!0}),Rr.default.createElement(un.Route,{path:Yn,component:qf,exact:!0}),Rr.default.createElement(un.Route,{path:qn,component:bd,exact:!0}),Rr.default.createElement(un.Route,{path:$n,component:km,exact:!0}))};export{ok as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=BatchTransfer-RYQSJ547.js.map
