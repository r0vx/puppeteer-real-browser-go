"use strict";(()=>{var Xe=Object.create;var te=Object.defineProperty;var $e=Object.getOwnPropertyDescriptor;var ze=Object.getOwnPropertyNames;var Je=Object.getPrototypeOf,Ye=Object.prototype.hasOwnProperty;var Qe=(i,s,b)=>s in i?te(i,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):i[s]=b;var Ze=(i,s)=>()=>(i&&(s=i(i=0)),s);var le=(i,s)=>()=>(s||i((s={exports:{}}).exports,s),s.exports);var qe=(i,s,b,A)=>{if(s&&typeof s=="object"||typeof s=="function")for(let k of ze(s))!Ye.call(i,k)&&k!==b&&te(i,k,{get:()=>s[k],enumerable:!(A=$e(s,k))||A.enumerable});return i};var oe=(i,s,b)=>(b=i!=null?Xe(Je(i)):{},qe(s||!i||!i.__esModule?te(b,"default",{value:i,enumerable:!0}):b,i));var Q=(i,s,b)=>(Qe(i,typeof s!="symbol"?s+"":s,b),b);function se(){throw new Error("setTimeout has not been defined")}function pe(){throw new Error("clearTimeout has not been defined")}function _e(i){if(F===setTimeout)return setTimeout(i,0);if((F===se||!F)&&setTimeout)return F=setTimeout,setTimeout(i,0);try{return F(i,0)}catch{try{return F.call(null,i,0)}catch{return F.call(this,i,0)}}}function et(i){if(L===clearTimeout)return clearTimeout(i);if((L===pe||!L)&&clearTimeout)return L=clearTimeout,clearTimeout(i);try{return L(i)}catch{try{return L.call(null,i)}catch{return L.call(this,i)}}}function tt(){!G||!U||(G=!1,U.length?j=U.concat(j):Z=-1,j.length&&ge())}function ge(){if(!G){var i=_e(tt);G=!0;for(var s=j.length;s;){for(U=j,j=[];++Z<s;)U&&U[Z].run();Z=-1,s=j.length}U=null,G=!1,et(i)}}function ot(i){var s=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)s[b-1]=arguments[b];j.push(new me(i,s)),j.length===1&&!G&&_e(ge)}function me(i,s){this.fun=i,this.array=s}function K(){}function kt(i){throw new Error("process.binding is not supported")}function Pt(){return"/"}function xt(i){throw new Error("process.chdir is not supported")}function bt(){return 0}function ft(i){var s=wt.call(N)*.001,b=Math.floor(s),A=Math.floor(s%1*1e9);return i&&(b=b-i[0],A=A-i[1],A<0&&(b--,A+=1e9)),[b,A]}function St(){var i=new Date,s=i-At;return s/1e3}var F,L,j,G,U,Z,nt,at,rt,it,lt,ct,st,pt,_t,gt,mt,ut,dt,Ct,Tt,Wt,N,wt,At,E,ce,D=Ze(()=>{F=se,L=pe;typeof globalThis.setTimeout=="function"&&(F=setTimeout);typeof globalThis.clearTimeout=="function"&&(L=clearTimeout);j=[],G=!1,Z=-1;me.prototype.run=function(){this.fun.apply(null,this.array)};nt="browser",at="browser",rt=!0,it={},lt=[],ct="",st={},pt={},_t={};gt=K,mt=K,ut=K,dt=K,Ct=K,Tt=K,Wt=K;N=globalThis.performance||{},wt=N.now||N.mozNow||N.msNow||N.oNow||N.webkitNow||function(){return new Date().getTime()};At=new Date;E={nextTick:ot,title:nt,browser:rt,env:it,argv:lt,version:ct,versions:st,on:gt,addListener:mt,once:ut,off:dt,removeListener:Ct,removeAllListeners:Tt,emit:Wt,binding:kt,cwd:Pt,chdir:xt,umask:bt,hrtime:ft,platform:at,release:pt,config:_t,uptime:St},ce={version:"3.66.10","env.PROJECT":"okxwallet-extension","env.NODE_ENV":"production","env.SOURCEMAP":"true","env.DEV_TARGET":"","env.APP_VERSION":"3.66.10","env.COMMIT_HASH":"012b","env.PLATFORM_WEB":void 0,"env.REDUX_DEVTOOLS":"","env.MONITOR_PLATFORM":"extension","env.ASSETS_BUILD_TYPE":"publish"};Object.keys(ce).forEach(i=>{let s=i.split("."),b=E;for(let A=0;A<s.length;A++){let k=s[A];A===s.length-1?b[k]=ce[i]:b=b[k]||(b[k]={})}})});var ae=le((ne,ue)=>{D();(function(i,s){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],s);else if(typeof ne<"u")s(ue);else{var b={exports:{}};s(b),i.browser=b.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ne,function(i){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let s="The message port closed before a response was received.",b=A=>{let k={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(k).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class T extends WeakMap{constructor(l,u=void 0){super(u),this.createItem=l}get(l){return this.has(l)||this.set(l,this.createItem(l)),super.get(l)}}let c=t=>t&&typeof t=="object"&&typeof t.then=="function",W=(t,l)=>(...u)=>{A.runtime.lastError?t.reject(new Error(A.runtime.lastError.message)):l.singleCallbackArg||u.length<=1&&l.singleCallbackArg!==!1?t.resolve(u[0]):t.resolve(u)},x=t=>t==1?"argument":"arguments",p=(t,l)=>function(P,...S){if(S.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${x(l.minArgs)} for ${t}(), got ${S.length}`);if(S.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${x(l.maxArgs)} for ${t}(), got ${S.length}`);return new Promise((w,y)=>{if(l.fallbackToNoCallback)try{P[t](...S,W({resolve:w,reject:y},l))}catch(f){console.warn(`${t} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,f),P[t](...S),l.fallbackToNoCallback=!1,l.noCallback=!0,w()}else l.noCallback?(P[t](...S),w()):P[t](...S,W({resolve:w,reject:y},l))})},_=(t,l,u)=>new Proxy(l,{apply(P,S,w){return u.call(S,t,...w)}}),d=Function.call.bind(Object.prototype.hasOwnProperty),e=(t,l={},u={})=>{let P=Object.create(null),S={has(y,f){return f in t||f in P},get(y,f,R){if(f in P)return P[f];if(!(f in t))return;let h=t[f];if(typeof h=="function")if(typeof l[f]=="function")h=_(t,t[f],l[f]);else if(d(u,f)){let M=p(f,u[f]);h=_(t,t[f],M)}else h=h.bind(t);else if(typeof h=="object"&&h!==null&&(d(l,f)||d(u,f)))h=e(h,l[f],u[f]);else if(d(u,"*"))h=e(h,l[f],u["*"]);else return Object.defineProperty(P,f,{configurable:!0,enumerable:!0,get(){return t[f]},set(M){t[f]=M}}),h;return P[f]=h,h},set(y,f,R,h){return f in P?P[f]=R:t[f]=R,!0},defineProperty(y,f,R){return Reflect.defineProperty(P,f,R)},deleteProperty(y,f){return Reflect.deleteProperty(P,f)}},w=Object.create(t);return new Proxy(w,S)},n=t=>({addListener(l,u,...P){l.addListener(t.get(u),...P)},hasListener(l,u){return l.hasListener(t.get(u))},removeListener(l,u){l.removeListener(t.get(u))}}),a=new T(t=>typeof t!="function"?t:function(u){let P=e(u,{},{getContent:{minArgs:0,maxArgs:0}});t(P)}),C=new T(t=>typeof t!="function"?t:function(u,P,S){let w=!1,y,f=new Promise(I=>{y=function(v){w=!0,I(v)}}),R;try{R=t(u,P,y)}catch(I){R=Promise.reject(I)}let h=R!==!0&&c(R);if(R!==!0&&!h&&!w)return!1;let M=I=>{I.then(v=>{S(v)},v=>{let O;v&&(v instanceof Error||typeof v.message=="string")?O=v.message:O="An unexpected error occurred",S({__mozWebExtensionPolyfillReject__:!0,message:O})}).catch(v=>{console.error("Failed to send onMessage rejected reply",v)})};return M(h?R:f),!0}),g=({reject:t,resolve:l},u)=>{A.runtime.lastError?A.runtime.lastError.message===s?l():t(new Error(A.runtime.lastError.message)):u&&u.__mozWebExtensionPolyfillReject__?t(new Error(u.message)):l(u)},m=(t,l,u,...P)=>{if(P.length<l.minArgs)throw new Error(`Expected at least ${l.minArgs} ${x(l.minArgs)} for ${t}(), got ${P.length}`);if(P.length>l.maxArgs)throw new Error(`Expected at most ${l.maxArgs} ${x(l.maxArgs)} for ${t}(), got ${P.length}`);return new Promise((S,w)=>{let y=g.bind(null,{resolve:S,reject:w});P.push(y),u.sendMessage(...P)})},r={devtools:{network:{onRequestFinished:n(a)}},runtime:{onMessage:n(C),onMessageExternal:n(C),sendMessage:m.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:m.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},o={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return k.privacy={network:{"*":o},services:{"*":o},websites:{"*":o}},e(A,r,k)};i.exports=b(chrome)}else i.exports=globalThis.browser})});var we=le((J,ie)=>{D();(function(s,b){typeof J=="object"&&typeof ie=="object"?ie.exports=b():typeof define=="function"&&define.amd?define([],b):typeof J=="object"?J._prohibitedMonitor=b():s._prohibitedMonitor=b()})(J,function(){return function(){"use strict";var i={"../monitor/src/amp/helper.js":function(k,T,c){c.r(T),c.d(T,{getAmpDefaultEndpoint:function(){return n},getAmplitudeAPIKey:function(){return d},getAmplitudeProject:function(){return _},logSignUpComplete:function(){return p},reportIdentifyEvent:function(){return e}});var W=c("../monitor/src/common/variables.js"),x=c("../monitor/src/common/constants.js");let p=a=>{let{signUpCompleted:C}=sessionStorage;C&&(a.logEvent("signup_completed",{},{language:W.default.getOkGlobal().locale}),sessionStorage.removeItem("signUpCompleted"))},_=a=>a||(W.default.isOKLink()?x.default.AMPLITUDE_PROJECT.oklink:W.default.isOKEx()||W.default.isInExtension()?x.default.AMPLITUDE_PROJECT.okx:x.default.AMPLITUDE_PROJECT.okcoin),d=a=>{let C=W.default.isProdEnv(),g=x.default.AMPLITUDE_KEY_MAP?.[a];return g?C?g?.prod:g?.dev:""},e=(a,C)=>{let g=new window.amplitude.Identify;g.set("channel_id",C),a.identify(g,{language:W.default.getOkGlobal().locale})},n=()=>{if(W.default.isInternalSystem()||W.default.isOKEx()||W.default.isOKLink())return"/amplitude/2/httpapi"}},"../monitor/src/amplitude.js":function(k,T,c){c.r(T);var W=c("../monitor/src/monitor.js"),x=c("../monitor/src/common/variables.js"),p=c("../monitor/src/common/event-bus.js"),_=c("../monitor/src/common/constants.js"),d=c("../monitor/src/lib/libs-amplitude.js"),e=c("../monitor/src/amp/helper.js");let n={},a,C={RESOLVE:"RESOLVE",REJECT:"REJECT"},g={events:new p.default,getAmplitudeSDKInstance(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((r,o)=>{this.events.on(C.RESOLVE,t=>{r(t)}),this.events.on(C.REJECT,t=>{o(t)}),this.getInstance(m)})},async getInstance(m){let r=(0,e.getAmplitudeProject)(m);a&&clearTimeout(a),window.amplitude||await(0,d.default)();let o=await x.default.getTk(),t=await x.default.getDeviceId()||"";if(n[r])return n[r];let l=window.amplitude.createInstance(),u=(0,e.getAmplitudeAPIKey)(r),P=(0,e.getAmpDefaultEndpoint)(),S=W.default.apiEndpoint?W.default.apiEndpoint:P,w={userId:r===_.default.AMPLITUDE_PROJECT.web3?t:o,deviceId:t,instanceName:r,serverUrl:S,defaultTracking:!0,identityStorage:"localStorage",autocapture:{pageViews:!1,fileDownloads:!1,sessions:!1,formInteractions:!1},appVersion:x.default.getOkGlobal().assetsBuildVersion};return l.init(u,w),n[r]=l,sessionStorage.channelId&&(0,e.reportIdentifyEvent)(l,sessionStorage.channelId),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(f=>{l.logEvent(...f,{language:x.default.getOkGlobal().locale})}),sessionStorage.ampCacheEvents=""),(0,e.logSignUpComplete)(l),this.events.emit(C.RESOLVE,l),l}};T.default=g},"../monitor/src/common/constants.js":function(k,T,c){c.r(T);var W=c("../monitor/src/common/variables.js");let x="";if(W.default.isInBrowser()){let{cdnBaseUrl:d="//static.coinall.ltd"}=W.default.getOkGlobal();x=d}let p={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin",internal_system:"internal_system"},_={[p.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[p.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[p.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[p.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"},[p.internal_system]:{prod:"118100a32c295da61d6c1809bcfe470e",dev:"118100a32c295da61d6c1809bcfe470e"}};T.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:p,AMPLITUDE_KEY_MAP:_,CDN_BASE_URL:x,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,DEBUG_KEY:"a6ywbd8",WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"},API_PATH:{INTERNAL:"/et/priapi/boss",OKLINK:"/et/priapi/lnweb",OKX:"/et/priapi/xweb"},internalCategory:["opboss"]}},"../monitor/src/common/cookie.js":function(k,T,c){c.r(T);let W=p=>{try{let _=document.cookie.split(";"),d=null;for(let e=0;e<_.length;e++){let n=_[e];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(p)===0){d=n.substring(p.length+1,n.length);break}}return d}catch{return null}},x=function(p,_){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},e=_!==null?d.expirationDays:-1;if(e){let a=new Date;a.setTime(a.getTime()+e*24*60*60*1e3),e=a}let n=`${p}=${_}`;e&&(n+=`; expires=${e.toUTCString()}`),n+="; path=/",document.cookie=n};T.default={set:x,get:W}},"../monitor/src/common/event-bus.js":function(k,T,c){c.r(T);class W{constructor(){Q(this,"listeners",{})}on(p,_,d){let e=[],n=arguments.length;for(let a=0;a<n;a++)e.push(arguments[a]);e=e.length>3?e.splice(3,e.length-1):[],typeof this.listeners[p]<"u"?this.listeners[p].push({scope:d,callback:_,args:e}):this.listeners[p]=[{scope:d,callback:_,args:e}]}remove(p,_,d){if(typeof this.listeners[p]<"u"){let e=this.listeners[p].length,n=this.listeners[p].slice(0);for(let a=0;a<e;a++){let C=n[a];C.scope==d&&C.callback==_&&this.listeners[p].splice(a,1)}}}has(p,_,d){if(typeof this.listeners[p]<"u"){let e=this.listeners[p].length;if(_===void 0&&d===void 0)return e>0;for(let n=0;n<e;n++){let a=this.listeners[p][n];if((d?a.scope==d:!0)&&a.callback==_)return!0}}return!1}emit(p){if(typeof this.listeners[p]<"u"){let n=this.listeners[p].slice(),a=n.length;for(var _=arguments.length,d=new Array(_>1?_-1:0),e=1;e<_;e++)d[e-1]=arguments[e];for(let C=0;C<a;C++){let g=n[C];if(g&&g.callback){let m=d.concat(g.args);g.callback.apply(g.scope,m)}}}}}T.default=W},"../monitor/src/common/seo.js":function(k,T,c){c.r(T);var W=c("../monitor/src/common/utils.js");let x=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex",type:"yandexSEO"},{keyword:"ya.ru",type:"yandexSEO"},{keyword:"dzen.ru",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver",type:"naverSEO"},{keyword:"duckduckgo",type:"duckduckgoSEO"},{keyword:"ecosia",type:"EcosiaSEO"},{keyword:"startpage",type:"startpageSEO"}];T.default={getSeoType(){let p=W.default.getUrlDomain(document.referrer);for(let _=0;_<x.length;_++){let{keyword:d,type:e}=x[_];if(p.indexOf(d)>-1)return e}return""}}},"../monitor/src/common/statex.js":function(k,T,c){c.r(T),c.d(T,{default:function(){return W}});function W(x){let p,_=new Set,d=(g,m)=>{let r=typeof g=="function"?g(p):g;if(r!==p){let o=p;p=m??typeof r!="object"?r:Object.assign({},p,r),_.forEach(t=>t(p,o))}},e=()=>p,C={setState:d,getState:e,subscribe:g=>(_.add(g),()=>_.delete(g)),destroy:()=>_.clear()};return p=x(d,e,C),C}},"../monitor/src/common/utils.js":function(k,T,c){c.r(T);let W=/([^{]+)({.+})?/,x=/^{|}$/g,p=/^['"]|['"]$/g,_=/\/\/([^/]+)\//,d={channelId:100,utm_source:30,utm_medium:20,utm_campaign:100,utm_term:100,utm_content:100,gclid:100,gbraid:70,wbraid:255,fbclid:64,ttclid:64,twclid:32,msclkid:32,af_adset:100,af_adset_id:24,af_ad:100,af_ad_id:24,af_keywords:100,af_c_id:24};T.default={serializeParams(e){let n=[],a=Object.keys(e);for(let C=0,g=a.length;C<g;C++){let m=a[C];n.push(`${encodeURIComponent(m)}=${encodeURIComponent(e[m])}`)}return n.join("&")},getUrlDomain(e){let n=e.match(_);return n?n[1]:""},getUrlQuery(e){return this.getParsedUrl(window.location.href).searchParams.get(e)||""},getParsedUrl(e){return new URL(e)},getChannelIdByUserAgent(){let e=/channelId\/(\w+)/;return window.navigator.userAgent?.match?.(e)?.[1]},getChannelContext(e){let n={channelId:"",referralSrc:""};if(!e)return n;let a="",C="";if(e.searchParams.forEach((l,u)=>{let P=u.toLowerCase();P==="channelid"&&(a=l),P==="channelflag"&&(C=l)}),n.channelId=a||C,n.channelId)return n;let g="/join";if(e.pathname.endsWith(g)||!e.pathname.includes(g))return n;let m=e.pathname.split(`${g}/`)[1];if(!m)return n;let r=m.split("/")[0];if(r.startsWith("-"))return n;let o=r.split("-"),t=o[o.length-2]||"";return a=o[o.length-1],a&&(n.referralSrc=t,n.channelId=a),n},getOktsBaggageData(e){if(!e||!e.searchParams)return"";let n=e.searchParams,a=n.get("okts_baggage");if(a)return a;let C=[];return Object.keys(d).forEach(g=>{let m=n.get(g);if(!m)return;let r=this.filterXSS(m),o=d[g];r&&r.length<=o&&C.push(`${g}=${r}`)}),C.join(",")},getOriginalUrl(e){return e.replace(/([?&])t=\d+(&)?/,(n,a,C)=>a&&C?a===C?"&":"?":"")},setCookie(e,n,a){let C=new Date;C.setTime(C.getTime()+a),document.cookie=`${e}=${encodeURIComponent(n)};expires=${C.toGMTString()};path=/`},getCookie(e){let n=new RegExp(`(^| )${e}=([^;]*)(;|$)`),a=document.cookie.match(n);return a?decodeURIComponent(a[2]):""},parseTarget(e){let n=e.match(W),a={key:"",data:{}};if(n){let C=n[1],g=n[2],m={};g&&g.replace(x,"").split(",").forEach(o=>{let t=o.split(":");t=t.map(P=>P.trim().replace(p,""));let[l,u]=t;m[l]=u}),a.key=C,a.data=m}return a},matchType(e,n){return Object.prototype.toString.call(e)===`[object ${n}]`},isArray(e){return this.matchType(e,"Array")},isObject(e){return this.matchType(e,"Object")},isInArray(e,n){if(Array.prototype.includes)return e.includes(n);for(let a=0,C=e.length;a<C;a++)if(e[a]===n)return!0;return!1},generateUUID(){let e=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let a=(e+this.cryptoRandom()*16)%16|0;return e=Math.floor(e/16),(n==="x"?a:a&3|8).toString(16)})},valueExists(e){return e!=null&&e!==""},passedNamingCheck(e){return!/[^a-z0-9_]/.test(e)},toFixed(e){return Number(e.toFixed(4))},toUnderLineFormat(e){return e.replace(/([A-Z])/g,(n,a,C)=>C===0?`${a.toLowerCase()}`:`_${a.toLowerCase()}`)},filterXSS(e){if(typeof e!="string")return"";let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/g,a=>n[a])},merge(e,n){let a={};return Object.keys({...e,...n}).forEach(C=>{(n[C]!=null||e[C]!=null)&&(a[C]=n[C]??e[C])}),a},cryptoRandom(){if(window?.crypto){let e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/Math.pow(2,32)}return Math.random()},base64Id(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n="";for(let a=0;a<22;++a)n+=e.charAt(Math.floor(this.cryptoRandom()*64));return n},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}}}},"../monitor/src/common/variables.js":function(k,T,c){c.r(T);var W=c("../monitor/src/common/utils.js"),x=c("../monitor/src/store.js");let p="oklink",_="okex",d="OKX_GLOBAL",e="okex_inner",n=typeof window<"u",a=Boolean(typeof window>"u"||typeof E<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:"feature",ASSETS_BUILD_VERSION:"monitor-extension-change-integrity-250704154012",BUILD_TARGET_ENV:"extension"}.SSR_ENV),C=n?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,g={_expires:{}};if(n){let{ok_monitor:r='{ "_expires": {} }'}=localStorage;g=JSON.parse(r)}let m={};T.default={setEnv(r){let{screen:o}=window,{_tk:t}=localStorage,{systemLanguage:l,language:u}=navigator,{referrer:P}=document;m.site=this.getSiteInfo(),m.lcl=this.getProductLanguage(),m.fpid=W.default.getCookie("fingerprint_id"),P&&(P.length>256&&(P=P.substr(0,256)),m.rf=P),t&&(m.tk=t),m.lan=(l||u).toLowerCase();let S="0x0";if(o){let{width:y,height:f}=o;S=`${y}x${f}`}m.scr=S;let w=W.default.getCookie("first_ref");w&&(m.frf=w.slice(0,256))},getEnv(){return{...m,site:this.getSiteInfo(),lcl:this.getProductLanguage()}},isInApp(){return C},getDeviceId(){let{deviceId:r}=x.default.getState();return r?Promise.resolve(r):window.utils.ont?.getDevId?.()},toLocalStorage(r){let{key:o,value:t,maxAge:l}=r;g[o]=t,g._expires[o]=Date.now()+l,localStorage.ok_monitor=JSON.stringify(g)},removeLocalStorage(r){delete g[r],delete g._expires[r],localStorage.ok_monitor=JSON.stringify(g)},getClientValue(r){let o=sessionStorage.getItem(r);return o||this.getValueFromLocalStorage(r)},getValueFromLocalStorage(r){return Date.now()<g._expires[r]&&g[r]||""},syncUpLocalStorageToSessionStorage(r){let o=this.getValueFromLocalStorage(r);o&&sessionStorage.setItem(r,o)},shouldIgnoreAmpEvent(){if(!this.isInBrowser())return!0;let r=this.getOkGlobal(),o=r.broker&&r.broker.is,t=localStorage.simulatedTrading==="1",{okjp:l}=r.site&&r.site.is||{};return o||t||l===!0},getProductLanguage(){return W.default.getCookie("locale")||this.getOkGlobal().locale},__getOkGlobalSite(){return this.getOkGlobal().site||{}},getSiteInfo(){let r=this.__getOkGlobalSite().sign,o=this.__getOkGlobalSite().subSite;return r===_?!o||o===d?_:o.toLowerCase():r},isOKEx(){return this.__getOkGlobalSite().sign===_},isOKLink(){let r=this.__getOkGlobalSite();return r.sign===p||r.sign===_&&r.linkInOKX},isInternalSystem(){return this.__getOkGlobalSite().sign===e},isInSSR(){return a},isInBrowser(){return n},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isMiniApp(){return window.inMiniApp},isInDesktop(){return window?.navigator?.userAgent?.toLocaleLowerCase()?.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(this.getOkGlobal().envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":this.getOkGlobal().envSign==="prod"},getOkGlobal(){return this.isInBrowser()?window._okGlobal||window.okGlobal||{}:{}},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},getTk(){return C&&window.jsbridge?window.jsbridge.getTK().then(r=>r||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")}}},"../monitor/src/de-duplicate.js":function(k,T,c){c.r(T),c.d(T,{shouldReport:function(){return _}});let W={},x,p=d=>{x!==void 0&&clearTimeout(x),x=setTimeout(()=>{W={},x=void 0},d+500)},_=function(d){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,n=typeof d=="string"?d:d.action||d.anchor,a=+new Date,C=W[n]||0;return a-C<e?!1:(p(e),W[n]=a,!0)}},"../monitor/src/error.js":function(k,T,c){c.r(T);var W=c("../monitor/src/common/variables.js");let x=W.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];T.default={getErrorInfo(p){let{message:_,filename:d,lineno:e,colno:n,error:a}=p,C="";a&&a.stack?(C=a.stack,C.indexOf("@")!==-1&&(C=`${_} 
\r ${C}`)):(a||_)&&(C=`ThrowError: ${JSON.stringify(a||_)} 
\r at ${d}: ${e}: ${n}`);let g=encodeURIComponent(window.location.href);return{msg:_,file:d,line:e,col:n,stack:C,url:g}},isReported(p){let{file:_,line:d,col:e}=p,n=`${_}__${d}__${e}`;return x.includes(n)},rememberError(p){let{file:_,line:d,col:e}=p,n=`${_}__${d}__${e}`;x.unshift(n),x.length>50&&x.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(x)},0)}}},"../monitor/src/global/attrs.js":function(k,T,c){c.r(T);var W=c("../monitor/src/global/click.js"),x=c("../monitor/src/global/expose.js"),p=c("../monitor/src/common/constants.js");let{Configs:_}=p.default;T.default={listen(d){let e=n=>{d.logEvent({...n,category:"ok"})};this.preprocess(),W.default.listen(e,this),x.default.listen(e,this)},preprocess(){document.querySelectorAll(`[${_.ATTR_LISTEN}]`).forEach(e=>{let n=e.getAttribute(_.ATTR_LISTEN),a=n.indexOf(":");if(a>-1){let C=n.substring(0,a).trim(),g=n.substring(a+1).trim();C.split("+").forEach(r=>{e.setAttribute(`data-${r.trim()}`,g)}),e.removeAttribute(_.ATTR_LISTEN)}})}}},"../monitor/src/global/click.js":function(k,T,c){c.r(T);var W=c("../monitor/src/common/utils.js"),x=c("../monitor/src/common/constants.js");let{Actions:p,Configs:_}=x.default;T.default={listen(d,e){document.addEventListener("click",n=>{let{target:a}=n;a.getAttribute(_.ATTR_LISTEN)&&e.preprocess();let g=a.getAttribute(_.ATTR_CLICK);if(g){let m=W.default.parseTarget(g),{key:r,data:o}=m;r&&d({target:r,action:p.CLICK,params:o,extras:{area:o.area}})}})}}},"../monitor/src/global/expose.js":function(k,T,c){c.r(T);var W=c("../monitor/src/common/utils.js"),x=c("../monitor/src/common/constants.js");let p={},{Actions:_,Configs:d}=x.default;T.default={listen(e){this.trackFn=e;let n={threshold:[.5,1]},a=new window.IntersectionObserver(this.onSectionChange.bind(this),n);document.querySelectorAll(`[${d.ATTR_EXPOSE}]`).forEach(g=>{a.observe(g)}),this.observer=a},onSectionChange(e){e.forEach(n=>{let{target:a,isIntersecting:C}=n,g=a.getAttribute(d.ATTR_EXPOSE),m=W.default.parseTarget(g),{key:r,data:o}=m,t=Number(n.time.toFixed(2));if(C){let l=setTimeout(()=>{let u=p[r],P=a.getBoundingClientRect(),{innerHeight:S,innerWidth:w}=window,{top:y,bottom:f,left:R,right:h}=P;if((y>=0&&y<=S||f>=0&&f<=S)&&(R>=0&&R<=w||h>=0&&h<=w)){let{area:I,elementType:v,actionType:O}=o;delete o.area,delete o.elementType,delete o.actionType,this.trackFn({target:r,action:_.EXPOSE,params:{...o,time:t},extras:{area:I},actionType:O||"Show",elementType:v,anchor:v?r:""}),this.observer.unobserve(a),u.forEach($=>{window.clearTimeout($)}),delete p[r]}else u.shift()},d.EXPOSE_DURATION);p[r]||(p[r]=[]),p[r].push(l)}})}}},"../monitor/src/lib/libs-amplitude.js":function(k,T,c){c.r(T),c.d(T,{default:function(){return a}});var W=c("../monitor/src/common/variables.js"),x=c("../monitor/src/common/event-bus.js");let p=!1,_=new x.default,d="LOAD_SUCCESS",e="LOAD_FAILED";function n(){return new Promise((C,g)=>{let m=()=>{_.emit(d),C()},r=w=>{_.emit(e),g(w)};p=!0;let{envSign:o,cdnBaseUrl:t}=W.default.getOkGlobal(),l=document.createElement("script");l.type="text/javascript",l.crossOrigin="anonymous",l.async=!0;let u="";switch(o){case"dev":u="cdndev";break;case"pre":u="cdnpre";break;case"daily":u="cdn";break;case"prod":u="cdn";break;default:u="cdn";break}let P="amplitude-analytics-browser-2.11.8.js";W.default.isInExtension(),l.src=`./scripts/lib/${P}`,l.integrity="sha384-xqvDNRHTNTbqEsaCHJBuL+ohIAflZIyjUW7MnSD/Bl20mW11ri9zTr8XDYF2MiS2",l.onload=function(){if(p=!1,!window.amplitude)return r("[Amplitude] Error: could not load SDK");m()},l.onerror=function(w){p=!1,r(w)};let S=document.getElementsByTagName("script")[0];S.parentNode.insertBefore(l,S)})}async function a(){if(p)return new Promise((C,g)=>{_.on(d,m=>{C(m)}),_.on(e,m=>{g(m)})});await n()}},"../monitor/src/logger.js":function(k,T,c){c.r(T),c.d(T,{default:function(){return C}});var W=c("../monitor/src/common/utils.js"),x=c("../monitor/src/common/variables.js"),p=c("../monitor/src/common/cookie.js"),_=c("../monitor/src/common/constants.js"),d=c("../monitor/src/monitor.js");let e=null,n=!1;class a{constructor(m){x.default.setEnv(m),this._category=m.product}logPV(){if(n)return Promise.resolve();let m={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};return n=!0,this.sendLogs(m)}logEvent(m){let r={},{category:o,action:t,target:l,params:u,extras:P,_m:S,anchor:w,elementType:y,actionType:f,tk:R}=m;if(Object.assign(r,{_ct:o,_act:t,_lb:encodeURIComponent(l||""),_anchor_en_name:encodeURIComponent(w||""),_element_type:encodeURIComponent(y||""),_action_type:encodeURIComponent(f||""),...this._getCommonData()}),r._tk=R||r._tk,W.default.isArray(u)){let h=0,M=0;u.forEach((I,v)=>{if(W.default.isObject(I)){let{value:O,random:$}=I,Y=encodeURIComponent(O);$?r[`_unlist${M++}`]=Y:r[`_reser${h++}`]=Y}else r[`_reser${v}`]=encodeURIComponent(I)})}else if(W.default.valueExists(u)){let h=u;W.default.isObject(u)&&(h=JSON.stringify(u));let M=encodeURIComponent(h);r._v=M,r._reser0=M}if(P){P.page=encodeURIComponent(window.location.href);let h={};Object.keys(P).forEach(M=>{h[`__${M}`]=P[M]}),Object.assign(r,h)}return S&&(r._m=S),this.sendLogs(r)}_getCommonData(){let m={...x.default.getEnv()};localStorage._tk&&(m.tk=localStorage._tk);let{src:r,sessionId:o=""}=sessionStorage,t=x.default.getClientValue("pageId"),l=x.default.getClientValue("channelId"),{deviceId:u=W.default.base64Id(),eventId:P=1,sequenceNumber:S=1}=JSON.parse(p.default.get("_monitor_extras")||"{}");p.default.set("_monitor_extras",JSON.stringify({deviceId:u,eventId:P+1,sequenceNumber:S+1}));let w=JSON.stringify({_amp_rejected:W.default.isTargetingCookiesRejected(),_device_id:u,_event_id:P,_sequence_number:S,_uuid:W.default.generateUUID()}),y={_cid:l,_pgid:t,_source:r,_session_id:encodeURIComponent(o.slice(0,256)),_page_url:encodeURIComponent(window.location.href.slice(0,256)),_extras:encodeURIComponent(w)};return Object.keys(m).forEach(f=>{y[`_${f}`]=encodeURIComponent(m[f])}),y}sendLogs(m){let r=[];if(Object.keys(m).forEach(o=>{let t=m[o];W.default.valueExists(t)?r.push(`${o}=${t}`):delete m[o]}),x.default.isDevTestEnv()){let{console:o}=window;return o.groupCollapsed(`dev monitor: ${m._ct} > ${m._act}`),o.log(decodeURIComponent(JSON.stringify(m,null,2))),o.groupEnd(),Promise.resolve()}return x.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(o=>{if(o){let t=`_tk=${encodeURIComponent(o)}`,l=r.findIndex(u=>/^_tk/.test(u));l>-1?r[l]=t:r.push(t)}return this.addClientInfo(r.join("&"))}).catch(()=>this.addClientInfo(r.join("&"))):this.addClientInfo(r.join("&"))}addClientInfo(m){let r=`&_ts=${Date.now()}&_r=${Math.floor(W.default.cryptoRandom()*2147483648)}`,o=`${m}${r}`;return x.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(t=>{let l=t?`&_app_info=${encodeURIComponent(t)}`:"";return o=`${m}${l}${r}`,this.sendRequest(o)}).catch(t=>this.sendRequest(o)):this.sendRequest(o)}getApiPath(){return _.default.internalCategory.includes(this._category)?_.default.API_PATH.INTERNAL:x.default.isOKLink()?_.default.API_PATH.OKLINK:_.default.API_PATH.OKX}async sendRequest(m){let r=await x.default.getDeviceId(),o=`_mv=${_.default.DEBUG_KEY}&_uid=${encodeURIComponent(r)}&${m}`;return new Promise((t,l)=>{let u=x.default.isInExtension()&&!x.default.isMiniApp(),P=this.getApiPath();if(navigator.sendBeacon&&!u)navigator.sendBeacon(P,o),t();else{let S=u?d.default.dwApiEndpoint||`https://www.oklink.com${_.default.API_PATH.OKX}`:P,w=new XMLHttpRequest;w.open("POST",S),w.setRequestHeader(_.default.REQUEST_HEADERS.deviceId,r),w.onload=()=>w.status!==200?l(new Error(`Error ${w.status}:${w.statusText}`)):t(),w.onerror=()=>{l(new Error(`Error ${w.status}: ${w.statusText}`))},w.send(o),setTimeout(()=>{t()},150)}})}}function C(g){return e||(e=new a(g),e)}},"../monitor/src/monitor.js":function(k,T,c){c.r(T),c.d(T,{default:function(){return m}});var W=c("../monitor/src/common/utils.js"),x=c("../monitor/src/common/constants.js"),p=c("../monitor/src/common/variables.js"),_=c("../monitor/src/error.js"),d=c("../monitor/src/logger.js"),e=c("../monitor/src/global/attrs.js"),n=c("../monitor/src/amplitude.js"),a=c("../monitor/src/store.js"),C=c("../monitor/src/de-duplicate.js");let g=!1;class m{constructor(o){p.default.isInSSR()||(this.commonParams=o.commonParams||{},this._logger=(0,d.default)(o),this._category=o.product,o.withPV&&this.delayReportPV(),g||(this._initEventListener(),g=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(o){m.apiEndpoint=o}setDWApiEndpoint(o){m.dwApiEndpoint=o}report(o){let{type:t,value:l}=o;if(p.default.isInSSR())return Promise.resolve();let u=l;return(W.default.isObject(u)||W.default.isArray(u))&&(u=JSON.stringify(u)),this._logger.logEvent({category:"performance",action:t,params:u})}logPV(){return this._logger.logPV()}logAmplitudeEvent(o,t,l){if(p.default.isInSSR()||p.default.shouldIgnoreAmpEvent())return Promise.resolve();let u="",P=!1;W.default.isObject(l)&&(u=l.ampProject,P=l.ignoreBackUp);let S={};for(let w in t)Object.prototype.hasOwnProperty.call(t,w)&&(S[w]=t[w]);if(S.monitor_after_navigation){delete S.monitor_after_navigation;let w=JSON.parse(sessionStorage.ampCacheEvents||"[]");return w.push([o,S]),sessionStorage.ampCacheEvents=JSON.stringify(w),Promise.resolve()}return n.default.getInstance(u).then(w=>{w.logEvent(o,{...S,site:p.default.getSiteInfo()},{language:p.default.getOkGlobal().locale}),P||this.act(o,t,{isSyncAMP:!1})})}resetAmplitudeUser(){return p.default.isInSSR()?Promise.resolve():n.default.getInstance().then(o=>(o.reset(),Promise.resolve()))}track(o,t,l,u){if(p.default.isInSSR())return Promise.resolve();let P={category:this._category,action:l,target:t,params:u,extras:{area:o}};if(W.default.isObject(o)){let{area:S,action:w,target:y,params:f}=o;Object.assign(P,{action:w,target:y,params:f,extras:{area:S}})}return this._logger.logEvent(P)}act(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return p.default.isInSSR()||!(0,C.shouldReport)(o)?Promise.resolve():new Promise((u,P)=>{setTimeout(()=>{this._act(o,t,l).then(u,P)},0)})}async _act(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:u,...P}=this.commonParams||{},S={web_mode_okx:W.default.isInArray(x.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},y=Object.assign({},p.default.isOKEx()?S:{}),f=l?.tk||u,R={category:this._category,params:t,_m:"1"};W.default.isObject(t)&&(R.params=W.default.merge({...P,...y},t),y=W.default.merge(p.default.isOKLink()?{...P,...y}:y,t));let h;typeof o=="string"?(h=o,R.action=o):(h=o.action||o.anchor,R.action=h,R.anchor=o.anchor,R.actionType=o.actionType,R.elementType=o.elementType,R={...R,params:W.default.merge(R.params,o.params||{})},f=o.tk||f,y=W.default.merge(y,o.params)),R.tk=f;let{needDurationActions:M,needDurationActionParams:I,actionTriggerTimes:v,setActionTriggerTimes:O,setNeedDurationActionParams:$}=a.default.getState();if(p.default.isEnableAMP()&&l?.isSyncAMP){let Y=o?.ampProject;this.logAmplitudeEvent(h,y,{ampProject:Y,ignoreBackUp:!0})}return W.default.isInArray(M,h)?(v[h]=Date.now(),O(v),I[h]=R,$(I),Promise.resolve("The event will be reported when the page is closed")):this._logger.logEvent(R)}_initEventListener(){window.addEventListener("load",()=>{e.default.listen(this._logger)}),window.addEventListener("error",o=>{let t=_.default.getErrorInfo(o);_.default.isReported(t)||(this._logger.logEvent({category:"error",action:"report",extras:t}),_.default.rememberError(t))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:o,needDurationActionParams:t,actionTriggerTimes:l,setNeedDurationActions:u,setNeedDurationActionParams:P,setActionTriggerTimes:S}=a.default.getState();o.length&&o.forEach(w=>{t[w].params.duration=Date.now()-l[w],this._logger.logEvent(t[w])}),u([]),P({}),S({})})}initABTest(o){let t="ab_experiment";o?.exper_flagKey&&o?.exper_variant&&(Object.assign(this.commonParams,o),this.act(t))}setCommonParams(o){this.commonParams={...this.commonParams,...o}}triggerReportDuration(o){let{needDurationActions:t,setNeedDurationActions:l}=a.default.getState();W.default.isInArray(t,o)||(t.push(o),l(t))}}},"../monitor/src/store.js":function(k,T,c){c.r(T);var W=c("../monitor/src/common/statex.js");let x=(0,W.default)(p=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:_=>p(()=>({deviceId:_})),setNeedDurationActions:_=>p(()=>({needDurationActions:_})),setNeedDurationActionParams:_=>p(()=>({needDurationActionParams:_})),setActionTriggerTimes:_=>p(()=>({actionTriggerTimes:_}))}));T.default=x},"../monitor/src/web.js":function(k,T,c){c.r(T);var W=c("../monitor/src/common/constants.js"),x=c("../monitor/src/common/seo.js"),p=c("../monitor/src/common/utils.js"),_=c("../monitor/src/monitor.js"),d=c("../monitor/src/common/variables.js"),e=c("../monitor/src/amplitude.js"),n=c("../monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:a}=W.default,C=(g,m)=>{if(d.default.isInSSR())return;let{pathname:r}=window.location;sessionStorage.channelId=g,d.default.toLocalStorage({key:"channelId",value:g,maxAge:a}),m?(sessionStorage.referralSrc=m,d.default.toLocalStorage({key:"referralSrc",value:m,maxAge:a})):(sessionStorage.removeItem("referralSrc"),d.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=r,d.default.toLocalStorage({key:"pageId",value:r,maxAge:a})};T.default={monitor:{get amplitude(){return d.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((m,r)=>{r("Currently not a browser environment!")})}}:e.default},newInstance(g){return d.default.isInSSR()?{setApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_initEventListener(){},initABTest(){return Promise.resolve()},setCommonParams(){},triggerReportDuration(){}}:new _.default(g)},saveChannelId(g){C(g)},getChannelId(){return sessionStorage.channelId},getOktsBaggage(){return sessionStorage.oktsBaggage},setDeviceId(g){let{setDeviceId:m}=n.default.getState();m(g)},getChannelContextFromUrl(g){return p.default.getChannelContext(p.default.getParsedUrl(g))}},parseUrl(){let g=p.default.getParsedUrl(window.location.href),m=g.searchParams.get("src");m&&sessionStorage.setItem("src",m),this.parseChannelId(g)},parseChannelId(g){let m=p.default.getChannelIdByUserAgent(),r=x.default.getSeoType(),o=p.default.getChannelContext(g),t=o.channelId,l=o.referralSrc,u=!1;if(d.default.isInDesktop()&&m&&(t=m,l="",u=!0),!t&&r&&(t=r,u=!0),t=p.default.filterXSS(t),this.processOktsBaggage(g,t,u),t){C(t,l);return}d.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(d.default.syncUpLocalStorageToSessionStorage("referralSrc"),d.default.syncUpLocalStorageToSessionStorage("pageId"))},processOktsBaggage(g,m,r){try{if(r){sessionStorage.removeItem("oktsBaggage"),d.default.removeLocalStorage("oktsBaggage");return}if(m){let o=p.default.getOktsBaggageData(g);d.default.toLocalStorage({key:"oktsBaggage",value:o,maxAge:a})}d.default.syncUpLocalStorageToSessionStorage("oktsBaggage")}catch(o){console.log("Error processing oktsBaggage:",o)}},init(){d.default.isInSSR()||(this.parseUrl(),!p.default.getCookie("first_ref")&&document.referrer&&p.default.setCookie("first_ref",document.referrer.slice(0,256),a),sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",window.location.href),window.utils=window.utils||{},window.utils.monitor=this.monitor)},saveChannelId(g){C(g)}}}},s={};function b(k){var T=s[k];if(T!==void 0)return T.exports;var c=s[k]={exports:{}};return i[k](c,c.exports,b),c.exports}(function(){b.d=function(k,T){for(var c in T)b.o(T,c)&&!b.o(k,c)&&Object.defineProperty(k,c,{enumerable:!0,get:T[c]})}})(),function(){b.o=function(k,T){return Object.prototype.hasOwnProperty.call(k,T)}}(),function(){b.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})}}();var A={};return function(){b.r(A);var k=b("../monitor/src/web.js");k.default.init(),A.default=k.default.monitor}(),A=A.default,A}()})});D();D();D();D();D();var H=oe(ae());D();var de=oe(ae());function re(){let{lastError:i}=de.default.runtime;if(!!i)return i.stack&&i.message?i:new Error(i.message)}var ht=async i=>{let{local:s}=H.default.storage;return new Promise((b,A)=>{s.get(i||null).then(k=>{b(k??{})}).catch(k=>{A(k)})})},yt=async i=>{let{local:s}=H.default.storage;return new Promise((b,A)=>{s.remove(i).then(()=>{let k=re();k?A(k):b()}).catch(k=>{A(k)})})};async function Ce(i,s={}){let{isThrowError:b=!1,retryCount:A=1}=s,k=!0;for(let T=0;T<A&&k;T++)try{let c=await i();return k=!1,c}catch(c){if(k=!0,T===A-1&&b)throw c}}async function Te(i,s={}){return H.default.storage.local?await Ce(()=>ht(i),s)??{}:{}}async function We(i,s={}){!H.default.storage.local||await Ce(()=>yt(i),s)}async function ke(i){let{local:s}=H.default.storage;return new Promise((b,A)=>{s.set(i).then(()=>{let k=re();k?A(k):b()}).catch(k=>{A(k)})})}var V=class{constructor(){Q(this,"isSupported",Boolean(H.default.storage.local))}async get(s){return Te(s)}async set(s){return ke(s)}async remove(s){return We(s)}};V.isSupported=Boolean(H.default.storage?.local);V.get=Te;V.set=ke;V.remove=We;D();var Rt={httpdns:{aesDecryptSecret:"ihP0cS0oqy27HAay",domains:["https://www.okx-httpdns.com/v2/support/doh/plugin/wallet","https://www.okx-doh.com/v2/support/doh/plugin/wallet","https://web3.okx.com/v2/support/doh/plugin/wallet"],ips:["https://47.57.9.204/v2/support/doh/plugin/wallet","https://47.75.96.239/v2/support/doh/plugin/wallet"],staticFiles:["https://d1pplp9e0zqlzg.cloudfront.net/app/wallet-doh"]},app:{defaultAppDomains:{staticDomains:["https://static.coinall.ltd","https://static.okx.com"],apiDomains:["https://wallet.okex.org","https://wallet.okx.com","https://wallet.ouxyi.cash"],wssDomains:["wss://wsdexpri.coinall.ltd","wss://wsdexpri.okx.com"],countryCode:"unknow"},tryPaths:{wssDomain:"useFirst",staticDomain:{url:"/cdn/assets/files/224/95D565EF66E7DFF9.txt",method:"get"},apiDomain:{url:"/v1/deposit/plugin/heartbeat",method:"get"}}}},z=Rt;D();D();var X={DEV:"dev",DAILY:"daily",PREPUB:"prepub",PUBLISH:"publish"};var Pe={EXTENSION:"extension",MINI_WALLET:"mini_wallet"};var xe=(()=>{let i="",s="https://beta.okex.org",b=async()=>{try{if(E.env.ASSETS_BUILD_TYPE===X.DEV||E.env.ASSETS_BUILD_TYPE===X.DAILY){let{envApiDomain:A}=await V.get("envApiDomain");A?s=A:V.set({envApiDomain:s})}else{let{apiDomain:A}=await V.get("apiDomain");i=A}}catch{}};return b(),{setUrlFromLocalAsync:async()=>{await b()},setUrl:A=>{i=A},getUrl:()=>(b(),E.env.ASSETS_BUILD_TYPE===X.DEV||E.env.ASSETS_BUILD_TYPE===X.DAILY?new URL(s).host:E.env.PLATFORM_WEB&&E.env.ASSETS_BUILD_TYPE===X.PREPUB?"beta.okex.org":new URL(i||z.app.defaultAppDomains.apiDomains[0]).host)}})();var be=xe;function q(){return be.getUrl()}var Dt=(()=>{let i="";return(async()=>{try{let{wssDomain:s}=await V.get("wssDomain");i=s}catch{}})(),{setUrlFromLocalAsync:async()=>{try{let{wssDomain:s}=await V.get("wssDomain");i=s}catch{}},setUrl:s=>{i=s},getUrl:()=>new URL(i||z.app.defaultAppDomains.wssDomains[0]).host}})(),Et=(()=>{let i="";return(async()=>{try{let{staticDomain:s}=await V.get("staticDomain");i=s}catch{}})(),{setUrlFromLocalAsync:async()=>{try{let{staticDomain:s}=await V.get("staticDomain");i=s}catch{}},setUrl:s=>{i=s},getUrl:()=>new URL(i||z.app.defaultAppDomains.staticDomains[0]).host}})();var ee=oe(we());var B={act:()=>{}},fe=async({deviceId:i}={})=>{let{devid:s}=i?{devid:i}:await V.get("devid");(0,ee.setDeviceId)(s),B=(0,ee.newInstance)({site:"okex",product:"wallet",commonParams:{version:E.env.APP_VERSION,platform_type:E.env.MONITOR_PLATFORM==Pe.EXTENSION?"extension":"mini_wallet"}}),B.setApiEndpoint(`https://${q()}/amplitude/2/httpapi`),B.setDWApiEndpoint(`https://${q()}/et/priapi/xweb`)},Ae=({source:i}={})=>{B.act({action:"DEXMarket_Wallet_Widget_View",anchor:"DEXMarket_Wallet_Widget_View",params:{source:i},actionType:"",elementType:"",ampProject:"web3"})};var Se=()=>{B.act({action:"OKXWallet_PopupBar_AddressAnalysis_Click",anchor:"OKXWallet_PopupBar_AddressAnalysis_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var he=()=>{B.act({action:"OKXWallet_PopupBar_CloseButton_Click",anchor:"OKXWallet_PopupBar_CloseButton_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var ye=()=>{B.act({action:"OKXWallet_PopupBar_AddressAnalysis_View",anchor:"OKXWallet_PopupBar_AddressAnalysis_View",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Re=()=>{B.act({action:"DEXMarket_Wallet_TweetMoreTokens_Click",anchor:"DEXMarket_Wallet_TweetMoreTokens_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var De=()=>{B.act({action:"OKXWallet_WalletExtention_PopupBar_View",anchor:"OKXWallet_WalletExtention_PopupBar_View",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Ee=()=>{B.act({action:"OKXWallet_WalletExtention_WidgetSetting_Click",anchor:"OKXWallet_WalletExtention_WidgetSetting_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Be=()=>{B.act({action:"OKXWallet_PopupBar_TokenPrice_Click",anchor:"OKXWallet_PopupBar_TokenPrice_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var ve=()=>{B.act({action:"DEXMarket_Wallet_TweetTokenTags_Click",anchor:"DEXMarket_Wallet_TweetTokenTags_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Ve=({source:i}={})=>{B.act({action:"DEXMarket_Wallet_TradeWidget_Click",anchor:"DEXMarket_Wallet_TradeWidget_Click",params:{source:i},actionType:"",elementType:"",ampProject:"web3"})};var Me=()=>{B.act({action:"OKXWallet_PopupBar_TokenPrice_View",anchor:"OKXWallet_PopupBar_TokenPrice_View",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Ie=()=>{B.triggerReportDuration("Web3_Generalwallet_FullPage_View")};var Oe=({trade_clicks:i,source:s}={})=>{B.act({action:"DEXMarket_Wallet_Widget_Click",anchor:"DEXMarket_Wallet_Widget_Click",params:{trade_clicks:i,source:s},actionType:"",elementType:"",ampProject:"web3"})};var je=({all_confirmation:i,wallet_type:s,page_type:b,network:A,approve:k,network_use:T,dapp_url:c,wallet_id:W,tx_hash:x}={})=>{B.act({action:"AllConfirmation_Full_Button_Click",anchor:"AllConfirmation_Full_Button_Click",params:{all_confirmation:i,wallet_type:s,page_type:b,network:A,approve:k,network_use:T,dapp_url:c,wallet_id:W,tx_hash:x},actionType:"",elementType:"",ampProject:"web3"})};var Fe=()=>{B.act({action:"DEXMarket_Wallet_SolscanWidget_Click",anchor:"DEXMarket_Wallet_SolscanWidget_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Le=()=>{B.act({action:"DEXMarket_WalletExtension_SaveWalletWidget_Click",anchor:"DEXMarket_WalletExtension_SaveWalletWidget_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var He=()=>{B.act({action:"DEXMarket_WalletExtension_SaveTokenWidget_Click",anchor:"DEXMarket_WalletExtension_SaveTokenWidget_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};var Ue=()=>{B.act({action:"DEXMarket_WalletExtension_ViewSameTokens_Click",anchor:"DEXMarket_WalletExtension_ViewSameTokens_Click",params:{},actionType:"",elementType:"",ampProject:"web3"})};D();var Ke={MONITOR_TRACK:"monitorTrack"};var Ne={Web3GeneralwalletFullPageView_TRD:Ie,DEXMarketWalletWidgetView:Ae,DEXMarketWalletWidgetClick:Oe,OKXWalletWalletExtentionPopupBarView:De,OKXWalletPopupBarTokenPriceClick:Be,OKXWalletPopupBarTokenPriceView:Me,OKXWalletPopupBarAddressAnalysisClick:Se,OKXWalletPopupBarAddressAnalysisView:ye,OKXWalletPopupBarCloseButtonClick:he,OKXWalletWalletExtentionWidgetSettingClick:Ee,DEXMarketWalletSolscanWidgetClick:Fe,DEXMarketWalletTweetTokenTagsClick:ve,DEXMarketWalletTweetMoreTokensClick:Re,AllConfirmationFullButtonClick:je,DEXMarketWalletExtensionSaveWalletWidgetClick:Le,DEXMarketWalletExtensionSaveTokenWidgetClick:He,DEXMarketWalletExtensionViewSameTokensClick:Ue,DEXMarketWalletTradeWidgetClick:Ve},Ge=!1,Bt={[Ke.MONITOR_TRACK]:async({trackMethod:i,deviceId:s,trackParams:b=[]})=>{try{if(Ge||(await fe({deviceId:s}),Ge=!0),!Ne[i])throw new Error("invalid monitor event name, please re-check your spell;");return Ne[i](...b),{success:!0}}catch{return{error:!0}}}};chrome.runtime.onMessage.addListener(async(i,s,b)=>{if(i.target!=="offscreen")return;let A=i.method,k=i.params??[],T=Bt[A];if(T){let c=await T(...k);b(c);return}b({error:!0})});})();

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=offscreen.js.map
